<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>SMART Equipment - Menu Animation</title>

<!-- CSS Files -->
<!--link type="text/css" href="../css/base.css" rel="stylesheet" /-->
<!--link type="text/css" href="../css/Spacetree.css" rel="stylesheet" /-->
<style type="text/css" rel="stylesheet">
html, body {
    margin:0;
    padding:0;
    font-family: "Lucida Grande", Verdana;
    font-size: 0.9em;
    text-align: center;
    background-color:#F2F2F2;
}

input, select {
    font-size:0.9em;
}

table {
    margin-top:-10px;
    margin-left:7px;
}

h4 {
    font-size:1.1em;
    text-decoration:none;
    font-weight:normal;
    color:#23A4FF;
}

a {
    color:#23A4FF;
}

#container {
    width: auto;
    height: auto;
    margin:0 auto;
    position:relative;
}

#left-container, 
#right-container, 
#center-container {
    height:auto;
    position:absolute;
    top:0;
}

#left-container, #right-container {
    width:200px;
    color:#686c70;
    text-align: left;
    overflow: auto;
    background-color:#fff;
    background-repeat:no-repeat;
    border-bottom:1px solid #ddd;
}

#left-container {
    left:0;
    background-image:url('col2.png');
    background-position:center right;
    border-left:1px solid #ddd;
    
}

#right-container {
    right:0;
    background-image:url('col1.png');
    background-position:center left;
    border-right:1px solid #ddd;
}

#right-container h4{
    text-indent:8px;
}

#center-container {
    width:100%;
	left:auto;
    background-color:#1a1a1a;
    color:#ccc;
}

.text {
    margin: 7px;
}

#inner-details {
    font-size:0.8em;
    list-style:none;
    margin:7px;
}

#log {
    position:absolute;
    top:10px;
    font-size:1.0em;
    font-weight:bold;
    color:#23A4FF;
}


#infovis {
    position:center;
    width:100%;
    height:800px;
    margin:auto;
    overflow:hidden;
}

/*TOOLTIPS*/
.tip {
    color: #111;
    width: 139px;
    background-color: white;
    border:1px solid #ccc;
    -moz-box-shadow:#555 2px 2px 8px;
    -webkit-box-shadow:#555 2px 2px 8px;
    -o-box-shadow:#555 2px 2px 8px;
    box-shadow:#555 2px 2px 8px;
    opacity:0.9;
    filter:alpha(opacity=90);
    font-size:10px;
    font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;
    padding:7px;
}

.jit-autoadjust-label {
  padding: 15px;
}

#update, #restore {
  text-align: center;
  width: auto;
  margin:0px 35px 10px 35px;
}

.button {
  display: inline-block;
  outline: none;
  cursor: pointer;
  text-align: center;
  text-decoration: none;
  font: 14px / 100% Arial, Helvetica, sans-serif;
  padding: 0.5em 1em 0.55em;
  text-shadow: 0px 1px 1px rgba(0, 0, 0, 0.3);
  -webkit-border-radius: 0.5em;
  -moz-border-radius: 0.5em;
  border-radius: 0.5em;
  -webkit-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);
  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);
}

.button:hover {
  text-decoration: none;
}

.button:active {
  position: relative;
  top: 1px;
}

/* white */
.white {
  color: #606060;
  border: solid 1px #b7b7b7;
  background: #fff;
  background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#ededed));
  background: -moz-linear-gradient(top,  #fff,  #ededed);
  filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#ededed');
}

.white:hover {
  background: #ededed;
  background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#dcdcdc));
  background: -moz-linear-gradient(top,  #fff,  #dcdcdc);
  filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#dcdcdc');
}

.white:active {
  color: #999;
  background: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#fff));
  background: -moz-linear-gradient(top,  #ededed,  #fff);
  filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#ffffff');
}
</style>

<!--[if IE]><script language="javascript" type="text/javascript" src="../../Extras/excanvas.js"></script><![endif]-->

<!-- JIT Library File -->
<script type="text/javascript">/*
Copyright (c) 2011 Sencha Inc. - Author: Nicolas Garcia Belmonte (http://philogb.github.com/)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

 */
 (function () { 

/*
  File: Core.js

 */

/*
 Object: $jit
 
 Defines the namespace for all library Classes and Objects. 
 This variable is the *only* global variable defined in the Toolkit. 
 There are also other interesting properties attached to this variable described below.
 */
window.$jit = function(w) {
  w = w || window;
  for(var k in $jit) {
    if($jit[k].$extend) {
      w[k] = $jit[k];
    }
  }
};

$jit.version = '2.0.1';
/*
  Object: $jit.id
  
  Works just like *document.getElementById*
  
  Example:
  (start code js)
  var element = $jit.id('elementId');
  (end code)

*/

/*
 Object: $jit.util
 
 Contains utility functions.
 
 Some of the utility functions and the Class system were based in the MooTools Framework 
 <http://mootools.net>. Copyright (c) 2006-2010 Valerio Proietti, <http://mad4milk.net/>. 
 MIT license <http://mootools.net/license.txt>.
 
 These methods are generally also implemented in DOM manipulation frameworks like JQuery, MooTools and Prototype.
 I'd suggest you to use the functions from those libraries instead of using these, since their functions 
 are widely used and tested in many different platforms/browsers. Use these functions only if you have to.
 
 */
var $ = function(d) {
  return document.getElementById(d);
};

$.empty = function() {
};

/*
  Method: extend
  
  Augment an object by appending another object's properties.
  
  Parameters:
  
  original - (object) The object to be extended.
  extended - (object) An object which properties are going to be appended to the original object.
  
  Example:
  (start code js)
  $jit.util.extend({ 'a': 1, 'b': 2 }, { 'b': 3, 'c': 4 }); //{ 'a':1, 'b': 3, 'c': 4 }
  (end code)
*/
$.extend = function(original, extended) {
  for ( var key in (extended || {}))
    original[key] = extended[key];
  return original;
};

$.lambda = function(value) {
  return (typeof value == 'function') ? value : function() {
    return value;
  };
};

$.time = Date.now || function() {
  return +new Date;
};

/*
  Method: splat
  
  Returns an array wrapping *obj* if *obj* is not an array. Returns *obj* otherwise.
  
  Parameters:
  
  obj - (mixed) The object to be wrapped in an array.
  
  Example:
  (start code js)
  $jit.util.splat(3);   //[3]
  $jit.util.splat([3]); //[3]
  (end code)
*/
$.splat = function(obj) {
  var type = $.type(obj);
  return type ? ((type != 'array') ? [ obj ] : obj) : [];
};

$.type = function(elem) {
  var type = $.type.s.call(elem).match(/^\[object\s(.*)\]$/)[1].toLowerCase();
  if(type != 'object') return type;
  if(elem && elem.$$family) return elem.$$family;
  return (elem && elem.nodeName && elem.nodeType == 1)? 'element' : type;
};
$.type.s = Object.prototype.toString;

/*
  Method: each
  
  Iterates through an iterable applying *f*.
  
  Parameters:
  
  iterable - (array) The original array.
  fn - (function) The function to apply to the array elements.
  
  Example:
  (start code js)
  $jit.util.each([3, 4, 5], function(n) { alert('number ' + n); });
  (end code)
*/
$.each = function(iterable, fn) {
  var type = $.type(iterable);
  if (type == 'object') {
    for ( var key in iterable)
      fn(iterable[key], key);
  } else {
    for ( var i = 0, l = iterable.length; i < l; i++)
      fn(iterable[i], i);
  }
};

$.indexOf = function(array, item) {
  if(Array.indexOf) return array.indexOf(item);
  for(var i=0,l=array.length; i<l; i++) {
    if(array[i] === item) return i;
  }
  return -1;
};

/*
  Method: map
  
  Maps or collects an array by applying *f*.
  
  Parameters:
  
  array - (array) The original array.
  f - (function) The function to apply to the array elements.
  
  Example:
  (start code js)
  $jit.util.map([3, 4, 5], function(n) { return n*n; }); //[9, 16, 25]
  (end code)
*/
$.map = function(array, f) {
  var ans = [];
  $.each(array, function(elem, i) {
    ans.push(f(elem, i));
  });
  return ans;
};

/*
  Method: reduce
  
  Iteratively applies the binary function *f* storing the result in an accumulator.
  
  Parameters:
  
  array - (array) The original array.
  f - (function) The function to apply to the array elements.
  opt - (optional|mixed) The starting value for the acumulator.
  
  Example:
  (start code js)
  $jit.util.reduce([3, 4, 5], function(x, y) { return x + y; }, 0); //12
  (end code)
*/
$.reduce = function(array, f, opt) {
  var l = array.length;
  if(l==0) return opt;
  var acum = arguments.length == 3? opt : array[--l];
  while(l--) {
    acum = f(acum, array[l]);
  }
  return acum;
};

/*
  Method: merge
  
  Merges n-objects and their sub-objects creating a new, fresh object.
  
  Parameters:
  
  An arbitrary number of objects.
  
  Example:
  (start code js)
  $jit.util.merge({ 'a': 1, 'b': 2 }, { 'b': 3, 'c': 4 }); //{ 'a':1, 'b': 3, 'c': 4 }
  (end code)
*/
$.merge = function() {
  var mix = {};
  for ( var i = 0, l = arguments.length; i < l; i++) {
    var object = arguments[i];
    if ($.type(object) != 'object')
      continue;
    for ( var key in object) {
      var op = object[key], mp = mix[key];
      mix[key] = (mp && $.type(op) == 'object' && $.type(mp) == 'object') ? $
          .merge(mp, op) : $.unlink(op);
    }
  }
  return mix;
};

$.unlink = function(object) {
  var unlinked;
  switch ($.type(object)) {
  case 'object':
    unlinked = {};
    for ( var p in object)
      unlinked[p] = $.unlink(object[p]);
    break;
  case 'array':
    unlinked = [];
    for ( var i = 0, l = object.length; i < l; i++)
      unlinked[i] = $.unlink(object[i]);
    break;
  default:
    return object;
  }
  return unlinked;
};

$.zip = function() {
  if(arguments.length === 0) return [];
  for(var j=0, ans=[], l=arguments.length, ml=arguments[0].length; j<ml; j++) {
    for(var i=0, row=[]; i<l; i++) {
      row.push(arguments[i][j]);
    }
    ans.push(row);
  }
  return ans;
};

/*
  Method: rgbToHex
  
  Converts an RGB array into a Hex string.
  
  Parameters:
  
  srcArray - (array) An array with R, G and B values
  
  Example:
  (start code js)
  $jit.util.rgbToHex([255, 255, 255]); //'#ffffff'
  (end code)
*/
$.rgbToHex = function(srcArray, array) {
  if (srcArray.length < 3)
    return null;
  if (srcArray.length == 4 && srcArray[3] == 0 && !array)
    return 'transparent';
  var hex = [];
  for ( var i = 0; i < 3; i++) {
    var bit = (srcArray[i] - 0).toString(16);
    hex.push(bit.length == 1 ? '0' + bit : bit);
  }
  return array ? hex : '#' + hex.join('');
};

/*
  Method: hexToRgb
  
  Converts an Hex color string into an RGB array.
  
  Parameters:
  
  hex - (string) A color hex string.
  
  Example:
  (start code js)
  $jit.util.hexToRgb('#fff'); //[255, 255, 255]
  (end code)
*/
$.hexToRgb = function(hex) {
  if (hex.length != 7) {
    hex = hex.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);
    hex.shift();
    if (hex.length != 3)
      return null;
    var rgb = [];
    for ( var i = 0; i < 3; i++) {
      var value = hex[i];
      if (value.length == 1)
        value += value;
      rgb.push(parseInt(value, 16));
    }
    return rgb;
  } else {
    hex = parseInt(hex.slice(1), 16);
    return [ hex >> 16, hex >> 8 & 0xff, hex & 0xff ];
  }
};

$.destroy = function(elem) {
  $.clean(elem);
  if (elem.parentNode)
    elem.parentNode.removeChild(elem);
  if (elem.clearAttributes)
    elem.clearAttributes();
};

$.clean = function(elem) {
  for (var ch = elem.childNodes, i = 0, l = ch.length; i < l; i++) {
    $.destroy(ch[i]);
  }
};

/*
  Method: addEvent
  
  Cross-browser add event listener.
  
  Parameters:
  
  obj - (obj) The Element to attach the listener to.
  type - (string) The listener type. For example 'click', or 'mousemove'.
  fn - (function) The callback function to be used when the event is fired.
  
  Example:
  (start code js)
  $jit.util.addEvent(elem, 'click', function(){ alert('hello'); });
  (end code)
*/
$.addEvent = function(obj, type, fn) {
  if (obj.addEventListener)
    obj.addEventListener(type, fn, false);
  else
    obj.attachEvent('on' + type, fn);
};

$.addEvents = function(obj, typeObj) {
  for(var type in typeObj) {
    $.addEvent(obj, type, typeObj[type]);
  }
};

$.hasClass = function(obj, klass) {
  return (' ' + obj.className + ' ').indexOf(' ' + klass + ' ') > -1;
};

$.addClass = function(obj, klass) {
  if (!$.hasClass(obj, klass))
    obj.className = (obj.className + " " + klass);
};

$.removeClass = function(obj, klass) {
  obj.className = obj.className.replace(new RegExp(
      '(^|\\s)' + klass + '(?:\\s|$)'), '$1');
};

$.getPos = function(elem) {
  var offset = getOffsets(elem);
  var scroll = getScrolls(elem);
  return {
    x: offset.x - scroll.x,
    y: offset.y - scroll.y
  };

  function getOffsets(elem) {
    var position = {
      x: 0,
      y: 0
    };
    while (elem && !isBody(elem)) {
      position.x += elem.offsetLeft;
      position.y += elem.offsetTop;
      elem = elem.offsetParent;
    }
    return position;
  }

  function getScrolls(elem) {
    var position = {
      x: 0,
      y: 0
    };
    while (elem && !isBody(elem)) {
      position.x += elem.scrollLeft;
      position.y += elem.scrollTop;
      elem = elem.parentNode;
    }
    return position;
  }

  function isBody(element) {
    return (/^(?:body|html)$/i).test(element.tagName);
  }
};

$.event = {
  get: function(e, win) {
    win = win || window;
    return e || win.event;
  },
  getWheel: function(e) {
    return e.wheelDelta? e.wheelDelta / 120 : -(e.detail || 0) / 3;
  },
  isRightClick: function(e) {
    return (e.which == 3 || e.button == 2);
  },
  getPos: function(e, win) {
    // get mouse position
    win = win || window;
    e = e || win.event;
    var doc = win.document;
    doc = doc.documentElement || doc.body;
    //TODO(nico): make touch event handling better
    if(e.touches && e.touches.length) {
      e = e.touches[0];
    }
    var page = {
      x: e.pageX || (e.clientX + doc.scrollLeft),
      y: e.pageY || (e.clientY + doc.scrollTop)
    };
    return page;
  },
  stop: function(e) {
    if (e.stopPropagation) e.stopPropagation();
    e.cancelBubble = true;
    if (e.preventDefault) e.preventDefault();
    else e.returnValue = false;
  }
};

$jit.util = $jit.id = $;

var Class = function(properties) {
  properties = properties || {};
  var klass = function() {
    for ( var key in this) {
      if (typeof this[key] != 'function')
        this[key] = $.unlink(this[key]);
    }
    this.constructor = klass;
    if (Class.prototyping)
      return this;
    var instance = this.initialize ? this.initialize.apply(this, arguments)
        : this;
    //typize
    this.$$family = 'class';
    return instance;
  };

  for ( var mutator in Class.Mutators) {
    if (!properties[mutator])
      continue;
    properties = Class.Mutators[mutator](properties, properties[mutator]);
    delete properties[mutator];
  }

  $.extend(klass, this);
  klass.constructor = Class;
  klass.prototype = properties;
  return klass;
};

Class.Mutators = {

  Implements: function(self, klasses) {
    $.each($.splat(klasses), function(klass) {
      Class.prototyping = klass;
      var instance = (typeof klass == 'function') ? new klass : klass;
      for ( var prop in instance) {
        if (!(prop in self)) {
          self[prop] = instance[prop];
        }
      }
      delete Class.prototyping;
    });
    return self;
  }

};

$.extend(Class, {

  inherit: function(object, properties) {
    for ( var key in properties) {
      var override = properties[key];
      var previous = object[key];
      var type = $.type(override);
      if (previous && type == 'function') {
        if (override != previous) {
          Class.override(object, key, override);
        }
      } else if (type == 'object') {
        object[key] = $.merge(previous, override);
      } else {
        object[key] = override;
      }
    }
    return object;
  },

  override: function(object, name, method) {
    var parent = Class.prototyping;
    if (parent && object[name] != parent[name])
      parent = null;
    var override = function() {
      var previous = this.parent;
      this.parent = parent ? parent[name] : object[name];
      var value = method.apply(this, arguments);
      this.parent = previous;
      return value;
    };
    object[name] = override;
  }

});

Class.prototype.implement = function() {
  var proto = this.prototype;
  $.each(Array.prototype.slice.call(arguments || []), function(properties) {
    Class.inherit(proto, properties);
  });
  return this;
};

$jit.Class = Class;

/*
  Object: $jit.json
  
  Provides JSON utility functions.
  
  Most of these functions are JSON-tree traversal and manipulation functions.
*/
$jit.json = {
  /*
     Method: prune
  
     Clears all tree nodes having depth greater than maxLevel.
  
     Parameters:
  
        tree - (object) A JSON tree object. For more information please see <Loader.loadJSON>.
        maxLevel - (number) An integer specifying the maximum level allowed for this tree. All nodes having depth greater than max level will be deleted.

  */
  prune: function(tree, maxLevel) {
    this.each(tree, function(elem, i) {
      if (i == maxLevel && elem.children) {
        delete elem.children;
        elem.children = [];
      }
    });
  },
  /*
     Method: getParent
  
     Returns the parent node of the node having _id_ as id.
  
     Parameters:
  
        tree - (object) A JSON tree object. See also <Loader.loadJSON>.
        id - (string) The _id_ of the child node whose parent will be returned.

    Returns:

        A tree JSON node if any, or false otherwise.
  
  */
  getParent: function(tree, id) {
    if (tree.id == id)
      return false;
    var ch = tree.children;
    if (ch && ch.length > 0) {
      for ( var i = 0; i < ch.length; i++) {
        if (ch[i].id == id)
          return tree;
        else {
          var ans = this.getParent(ch[i], id);
          if (ans)
            return ans;
        }
      }
    }
    return false;
  },
  /*
     Method: getSubtree
  
     Returns the subtree that matches the given id.
  
     Parameters:
  
        tree - (object) A JSON tree object. See also <Loader.loadJSON>.
        id - (string) A node *unique* identifier.
  
     Returns:
  
        A subtree having a root node matching the given id. Returns null if no subtree matching the id is found.

  */
  getSubtree: function(tree, id) {
    if (tree.id == id)
      return tree;
    for ( var i = 0, ch = tree.children; ch && i < ch.length; i++) {
      var t = this.getSubtree(ch[i], id);
      if (t != null)
        return t;
    }
    return null;
  },
  /*
     Method: eachLevel
  
      Iterates on tree nodes with relative depth less or equal than a specified level.
  
     Parameters:
  
        tree - (object) A JSON tree or subtree. See also <Loader.loadJSON>.
        initLevel - (number) An integer specifying the initial relative level. Usually zero.
        toLevel - (number) An integer specifying a top level. This method will iterate only through nodes with depth less than or equal this number.
        action - (function) A function that receives a node and an integer specifying the actual level of the node.
          
    Example:
   (start code js)
     $jit.json.eachLevel(tree, 0, 3, function(node, depth) {
        alert(node.name + ' ' + depth);
     });
   (end code)
  */
  eachLevel: function(tree, initLevel, toLevel, action) {
    if (initLevel <= toLevel) {
      action(tree, initLevel);
      if(!tree.children) return;
      for ( var i = 0, ch = tree.children; i < ch.length; i++) {
        this.eachLevel(ch[i], initLevel + 1, toLevel, action);
      }
    }
  },
  /*
     Method: each
  
      A JSON tree iterator.
  
     Parameters:
  
        tree - (object) A JSON tree or subtree. See also <Loader.loadJSON>.
        action - (function) A function that receives a node.

    Example:
    (start code js)
      $jit.json.each(tree, function(node) {
        alert(node.name);
      });
    (end code)
          
  */
  each: function(tree, action) {
    this.eachLevel(tree, 0, Number.MAX_VALUE, action);
  }
};


/*
     An object containing multiple type of transformations. 
*/

$jit.Trans = {
  $extend: true,
  
  linear: function(p){
    return p;
  }
};

var Trans = $jit.Trans;

(function(){

  var makeTrans = function(transition, params){
    params = $.splat(params);
    return $.extend(transition, {
      easeIn: function(pos){
        return transition(pos, params);
      },
      easeOut: function(pos){
        return 1 - transition(1 - pos, params);
      },
      easeInOut: function(pos){
        return (pos <= 0.5)? transition(2 * pos, params) / 2 : (2 - transition(
            2 * (1 - pos), params)) / 2;
      }
    });
  };

  var transitions = {

    Pow: function(p, x){
      return Math.pow(p, x[0] || 6);
    },

    Expo: function(p){
      return Math.pow(2, 8 * (p - 1));
    },

    Circ: function(p){
      return 1 - Math.sin(Math.acos(p));
    },

    Sine: function(p){
      return 1 - Math.sin((1 - p) * Math.PI / 2);
    },

    Back: function(p, x){
      x = x[0] || 1.618;
      return Math.pow(p, 2) * ((x + 1) * p - x);
    },

    Bounce: function(p){
      var value;
      for ( var a = 0, b = 1; 1; a += b, b /= 2) {
        if (p >= (7 - 4 * a) / 11) {
          value = b * b - Math.pow((11 - 6 * a - 11 * p) / 4, 2);
          break;
        }
      }
      return value;
    },

    Elastic: function(p, x){
      return Math.pow(2, 10 * --p)
          * Math.cos(20 * p * Math.PI * (x[0] || 1) / 3);
    }

  };

  $.each(transitions, function(val, key){
    Trans[key] = makeTrans(val);
  });

  $.each( [
      'Quad', 'Cubic', 'Quart', 'Quint'
  ], function(elem, i){
    Trans[elem] = makeTrans(function(p){
      return Math.pow(p, [
        i + 2
      ]);
    });
  });

})();

/*
   A Class that can perform animations for generic objects.

   If you are looking for animation transitions please take a look at the <Trans> object.

   Used by:

   <Graph.Plot>
   
   Based on:
   
   The Animation class is based in the MooTools Framework <http://mootools.net>. Copyright (c) 2006-2009 Valerio Proietti, <http://mad4milk.net/>. MIT license <http://mootools.net/license.txt>.

*/

var Animation = new Class( {

  initialize: function(options){
    this.setOptions(options);
  },

  setOptions: function(options){
    var opt = {
      duration: 2500,
      fps: 40,
      transition: Trans.Quart.easeInOut,
      compute: $.empty,
      complete: $.empty,
      link: 'ignore'
    };
    this.opt = $.merge(opt, options || {});
    return this;
  },

  step: function(){
    var time = $.time(), opt = this.opt;
    if (time < this.time + opt.duration) {
      var delta = opt.transition((time - this.time) / opt.duration);
      opt.compute(delta);
    } else {
      this.timer = clearInterval(this.timer);
      opt.compute(1);
      opt.complete();
    }
  },

  start: function(){
    if (!this.check())
      return this;
    this.time = 0;
    this.startTimer();
    return this;
  },

  startTimer: function(){
    var that = this, fps = this.opt.fps;
    if (this.timer)
      return false;
    this.time = $.time() - this.time;
    this.timer = setInterval((function(){
      that.step();
    }), Math.round(1000 / fps));
    return true;
  },

  pause: function(){
    this.stopTimer();
    return this;
  },

  resume: function(){
    this.startTimer();
    return this;
  },

  stopTimer: function(){
    if (!this.timer)
      return false;
    this.time = $.time() - this.time;
    this.timer = clearInterval(this.timer);
    return true;
  },

  check: function(){
    if (!this.timer)
      return true;
    if (this.opt.link == 'cancel') {
      this.stopTimer();
      return true;
    }
    return false;
  }
});


var Options = function() {
  var args = arguments;
  for(var i=0, l=args.length, ans={}; i<l; i++) {
    var opt = Options[args[i]];
    if(opt.$extend) {
      $.extend(ans, opt);
    } else {
      ans[args[i]] = opt;  
    }
  }
  return ans;
};

/*
 * File: Options.AreaChart.js
 *
*/

/*
  Object: Options.AreaChart
  
  <AreaChart> options. 
  Other options included in the AreaChart are <Options.Canvas>, <Options.Label>, <Options.Margin>, <Options.Tips> and <Options.Events>.
  
  Syntax:
  
  (start code js)

  Options.AreaChart = {
    animate: true,
    labelOffset: 3,
    type: 'stacked',
    selectOnHover: true,
    showAggregates: true,
    showLabels: true,
    filterOnClick: false,
    restoreOnRightClick: false
  };
  
  (end code)
  
  Example:
  
  (start code js)

  var areaChart = new $jit.AreaChart({
    animate: true,
    type: 'stacked:gradient',
    selectOnHover: true,
    filterOnClick: true,
    restoreOnRightClick: true
  });
  
  (end code)

  Parameters:
  
  animate - (boolean) Default's *true*. Whether to add animated transitions when filtering/restoring stacks.
  labelOffset - (number) Default's *3*. Adds margin between the label and the default place where it should be drawn.
  type - (string) Default's *'stacked'*. Stack style. Posible values are 'stacked', 'stacked:gradient' to add gradients.
  selectOnHover - (boolean) Default's *true*. If true, it will add a mark to the hovered stack.
  showAggregates - (boolean, function) Default's *true*. Display the values of the stacks. Can also be a function that returns *true* or *false* to display or filter some values. That same function can also return a string with the formatted value.
  showLabels - (boolean, function) Default's *true*. Display the name of the slots. Can also be a function that returns *true* or *false* to display or not each label.
  filterOnClick - (boolean) Default's *true*. Select the clicked stack by hiding all other stacks.
  restoreOnRightClick - (boolean) Default's *true*. Show all stacks by right clicking.
  
*/
  
Options.AreaChart = {
  $extend: true,

  animate: true,
  labelOffset: 3, // label offset
  type: 'stacked', // gradient
  Tips: {
    enable: false,
    onShow: $.empty,
    onHide: $.empty
  },
  Events: {
    enable: false,
    onClick: $.empty
  },
  selectOnHover: true,
  showAggregates: true,
  showLabels: true,
  filterOnClick: false,
  restoreOnRightClick: false
};

/*
 * File: Options.Margin.js
 *
*/

/*
  Object: Options.Margin
  
  Canvas drawing margins. 
  
  Syntax:
  
  (start code js)

  Options.Margin = {
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  };
  
  (end code)
  
  Example:
  
  (start code js)

  var viz = new $jit.Viz({
    Margin: {
      right: 10,
      bottom: 20
    }
  });
  
  (end code)

  Parameters:
  
  top - (number) Default's *0*. Top margin.
  left - (number) Default's *0*. Left margin.
  right - (number) Default's *0*. Right margin.
  bottom - (number) Default's *0*. Bottom margin.
  
*/

Options.Margin = {
  $extend: false,
  
  top: 0,
  left: 0,
  right: 0,
  bottom: 0
};

/*
 * File: Options.Canvas.js
 *
*/

/*
  Object: Options.Canvas
  
  These are Canvas general options, like where to append it in the DOM, its dimensions, background, 
  and other more advanced options.
  
  Syntax:
  
  (start code js)

  Options.Canvas = {
    injectInto: 'id',
    type: '2D', //'3D'
    width: false,
    height: false,
    useCanvas: false,
    withLabels: true,
    background: false
  };  
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    injectInto: 'someContainerId',
    width: 500,
    height: 700
  });
  (end code)
  
  Parameters:
  
  injectInto - *required* (string|element) The id of the DOM container for the visualization. It can also be an Element provided that it has an id.
  type - (string) Context type. Default's 2D but can be 3D for webGL enabled browsers.
  width - (number) Default's to the *container's offsetWidth*. The width of the canvas.
  height - (number) Default's to the *container's offsetHeight*. The height of the canvas.
  useCanvas - (boolean|object) Default's *false*. You can pass another <Canvas> instance to be used by the visualization.
  withLabels - (boolean) Default's *true*. Whether to use a label container for the visualization.
  background - (boolean|object) Default's *false*. An object containing information about the rendering of a background canvas.
*/

Options.Canvas = {
    $extend: true,
    
    injectInto: 'id',
    type: '2D',
    width: false,
    height: false,
    useCanvas: false,
    withLabels: true,
    background: false,
    
    Scene: {
      Lighting: {
        enable: false,
        ambient: [1, 1, 1],
        directional: {
          direction: { x: -100, y: -100, z: -100 },
          color: [0.5, 0.3, 0.1]
        }
      }
    }
};

/*
 * File: Options.Tree.js
 *
*/

/*
  Object: Options.Tree
  
  Options related to (strict) Tree layout algorithms. These options are used by the <ST> visualization.
  
  Syntax:
  
  (start code js)
  Options.Tree = {
    orientation: "left",
    subtreeOffset: 8,
    siblingOffset: 5,
    indent:10,
    multitree: false,
    align:"center"
  };
  (end code)
  
  Example:
  
  (start code js)
  var st = new $jit.ST({
    orientation: 'left',
    subtreeOffset: 1,
    siblingOFfset: 5,
    multitree: true
  });
  (end code)

  Parameters:
    
  subtreeOffset - (number) Default's 8. Separation offset between subtrees.
  siblingOffset - (number) Default's 5. Separation offset between siblings.
  orientation - (string) Default's 'left'. Tree orientation layout. Possible values are 'left', 'top', 'right', 'bottom'.
  align - (string) Default's *center*. Whether the tree alignment is 'left', 'center' or 'right'.
  indent - (number) Default's 10. Used when *align* is left or right and shows an indentation between parent and children.
  multitree - (boolean) Default's *false*. Used with the node $orn data property for creating multitrees.
     
*/
Options.Tree = {
    $extend: true,
    
    orientation: "left",
    subtreeOffset: 8,
    siblingOffset: 5,
    indent:10,
    multitree: false,
    align:"center"
};


/*
 * File: Options.Node.js
 *
*/

/*
  Object: Options.Node

  Provides Node rendering options for Tree and Graph based visualizations.

  Syntax:
    
  (start code js)
  Options.Node = {
    overridable: false,
    type: 'circle',
    color: '#ccb',
    alpha: 1,
    dim: 3,
    height: 20,
    width: 90,
    autoHeight: false,
    autoWidth: false,
    lineWidth: 1,
    transform: true,
    align: "center",
    angularWidth:1,
    span:1,
    CanvasStyles: {}
  };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    Node: {
      overridable: true,
      width: 30,
      autoHeight: true,
      type: 'rectangle'
    }
  });
  (end code)
  
  Parameters:

  overridable - (boolean) Default's *false*. Determine whether or not general node properties can be overridden by a particular <Graph.Node>.
  type - (string) Default's *circle*. Node's shape. Node built-in types include 'circle', 'rectangle', 'square', 'ellipse', 'triangle', 'star'. The default Node type might vary in each visualization. You can also implement (non built-in) custom Node types into your visualizations.
  color - (string) Default's *#ccb*. Node color.
  alpha - (number) Default's *1*. The Node's alpha value. *1* is for full opacity.
  dim - (number) Default's *3*. An extra parameter used by 'circle', 'square', 'triangle' and 'star' node types. Depending on each shape, this parameter can set the radius of a circle, half the length of the side of a square, half the base and half the height of a triangle or the length of a side of a star (concave decagon).
  height - (number) Default's *20*. Used by 'rectangle' and 'ellipse' node types. The height of the node shape.
  width - (number) Default's *90*. Used by 'rectangle' and 'ellipse' node types. The width of the node shape.
  autoHeight - (boolean) Default's *false*. Whether to set an auto height for the node depending on the content of the Node's label.
  autoWidth - (boolean) Default's *false*. Whether to set an auto width for the node depending on the content of the Node's label.
  lineWidth - (number) Default's *1*. Used only by some Node shapes. The line width of the strokes of a node.
  transform - (boolean) Default's *true*. Only used by the <Hypertree> visualization. Whether to scale the nodes according to the moebius transformation.
  align - (string) Default's *center*. Possible values are 'center', 'left' or 'right'. Used only by the <ST> visualization, these parameters are used for aligning nodes when some of they dimensions vary.
  angularWidth - (number) Default's *1*. Used in radial layouts (like <RGraph> or <Sunburst> visualizations). The amount of relative 'space' set for a node.
  span - (number) Default's *1*. Used in radial layouts (like <RGraph> or <Sunburst> visualizations). The angle span amount set for a node.
  CanvasStyles - (object) Default's an empty object (i.e. {}). Attach any other canvas specific property that you'd set to the canvas context before plotting a Node.

*/
Options.Node = {
  $extend: false,
  
  overridable: false,
  type: 'circle',
  color: '#ccb',
  alpha: 1,
  dim: 3,
  height: 20,
  width: 90,
  autoHeight: false,
  autoWidth: false,
  lineWidth: 1,
  transform: true,
  align: "center",
  angularWidth:1,
  span:1,
  //Raw canvas styles to be
  //applied to the context instance
  //before plotting a node
  CanvasStyles: {}
};


/*
 * File: Options.Edge.js
 *
*/

/*
  Object: Options.Edge

  Provides Edge rendering options for Tree and Graph based visualizations.

  Syntax:
    
  (start code js)
  Options.Edge = {
    overridable: false,
    type: 'line',
    color: '#ccb',
    lineWidth: 1,
    dim:15,
    alpha: 1,
    CanvasStyles: {}
  };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    Edge: {
      overridable: true,
      type: 'line',
      color: '#fff',
      CanvasStyles: {
        shadowColor: '#ccc',
        shadowBlur: 10
      }
    }
  });
  (end code)
  
  Parameters:
    
   overridable - (boolean) Default's *false*. Determine whether or not general edges properties can be overridden by a particular <Graph.Adjacence>.
   type - (string) Default's 'line'. Edge styles include 'line', 'hyperline', 'arrow'. The default Edge type might vary in each visualization. You can also implement custom Edge types.
   color - (string) Default's '#ccb'. Edge color.
   lineWidth - (number) Default's *1*. Line/Edge width.
   alpha - (number) Default's *1*. The Edge's alpha value. *1* is for full opacity.
   dim - (number) Default's *15*. An extra parameter used by other complex shapes such as quadratic, bezier or arrow, to determine the shape's diameter.
   epsilon - (number) Default's *7*. Only used when using *enableForEdges* in <Options.Events>. This dimension is used to create an area for the line where the contains method for the edge returns *true*.
   CanvasStyles - (object) Default's an empty object (i.e. {}). Attach any other canvas specific property that you'd set to the canvas context before plotting an Edge.

  See also:
   
   If you want to know more about how to customize Node/Edge data per element, in the JSON or programmatically, take a look at this article.
*/
Options.Edge = {
  $extend: false,
  
  overridable: false,
  type: 'line',
  color: '#ccb',
  lineWidth: 1,
  dim:15,
  alpha: 1,
  epsilon: 7,

  //Raw canvas styles to be
  //applied to the context instance
  //before plotting an edge
  CanvasStyles: {}
};


/*
 * File: Options.Fx.js
 *
*/

/*
  Object: Options.Fx

  Provides animation options like duration of the animations, frames per second and animation transitions.  

  Syntax:
  
  (start code js)
    Options.Fx = {
      fps:40,
      duration: 2500,
      transition: $jit.Trans.Quart.easeInOut,
      clearCanvas: true
    };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    duration: 1000,
    fps: 35,
    transition: $jit.Trans.linear
  });
  (end code)
  
  Parameters:
  
  clearCanvas - (boolean) Default's *true*. Whether to clear the frame/canvas when the viz is plotted or animated.
  duration - (number) Default's *2500*. Duration of the animation in milliseconds.
  fps - (number) Default's *40*. Frames per second.
  transition - (object) Default's *$jit.Trans.Quart.easeInOut*. The transition used for the animations. See below for a more detailed explanation.
  
  Object: $jit.Trans
  
  This object is used for specifying different animation transitions in all visualizations.

  There are many different type of animation transitions.

  linear:

  Displays a linear transition

  >Trans.linear
  
  (see Linear.png)

  Quad:

  Displays a Quadratic transition.

  >Trans.Quad.easeIn
  >Trans.Quad.easeOut
  >Trans.Quad.easeInOut
  
 (see Quad.png)

 Cubic:

 Displays a Cubic transition.

 >Trans.Cubic.easeIn
 >Trans.Cubic.easeOut
 >Trans.Cubic.easeInOut

 (see Cubic.png)

 Quart:

 Displays a Quartetic transition.

 >Trans.Quart.easeIn
 >Trans.Quart.easeOut
 >Trans.Quart.easeInOut

 (see Quart.png)

 Quint:

 Displays a Quintic transition.

 >Trans.Quint.easeIn
 >Trans.Quint.easeOut
 >Trans.Quint.easeInOut

 (see Quint.png)

 Expo:

 Displays an Exponential transition.

 >Trans.Expo.easeIn
 >Trans.Expo.easeOut
 >Trans.Expo.easeInOut

 (see Expo.png)

 Circ:

 Displays a Circular transition.

 >Trans.Circ.easeIn
 >Trans.Circ.easeOut
 >Trans.Circ.easeInOut

 (see Circ.png)

 Sine:

 Displays a Sineousidal transition.

 >Trans.Sine.easeIn
 >Trans.Sine.easeOut
 >Trans.Sine.easeInOut

 (see Sine.png)

 Back:

 >Trans.Back.easeIn
 >Trans.Back.easeOut
 >Trans.Back.easeInOut

 (see Back.png)

 Bounce:

 Bouncy transition.

 >Trans.Bounce.easeIn
 >Trans.Bounce.easeOut
 >Trans.Bounce.easeInOut

 (see Bounce.png)

 Elastic:

 Elastic curve.

 >Trans.Elastic.easeIn
 >Trans.Elastic.easeOut
 >Trans.Elastic.easeInOut

 (see Elastic.png)
 
 Based on:
     
 Easing and Transition animation methods are based in the MooTools Framework <http://mootools.net>. Copyright (c) 2006-2010 Valerio Proietti, <http://mad4milk.net/>. MIT license <http://mootools.net/license.txt>.


*/
Options.Fx = {
  $extend: true,
  
  fps:40,
  duration: 2500,
  transition: $jit.Trans.Quart.easeInOut,
  clearCanvas: true
};

/*
 * File: Options.Label.js
 *
*/
/*
  Object: Options.Label

  Provides styling for Labels such as font size, family, etc. Also sets Node labels as HTML, SVG or Native canvas elements.  

  Syntax:
  
  (start code js)
    Options.Label = {
      overridable: false,
      type: 'HTML', //'SVG', 'Native'
      style: ' ',
      size: 10,
      family: 'sans-serif',
      textAlign: 'center',
      textBaseline: 'alphabetic',
      color: '#fff'
    };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    Label: {
      type: 'Native',
      size: 11,
      color: '#ccc'
    }
  });
  (end code)
  
  Parameters:
    
  overridable - (boolean) Default's *false*. Determine whether or not general label properties can be overridden by a particular <Graph.Node>.
  type - (string) Default's *HTML*. The type for the labels. Can be 'HTML', 'SVG' or 'Native' canvas labels.
  style - (string) Default's *empty string*. Can be 'italic' or 'bold'. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.
  size - (number) Default's *10*. The font's size. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.
  family - (string) Default's *sans-serif*. The font's family. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.
  color - (string) Default's *#fff*. The font's color. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.
*/
Options.Label = {
  $extend: false,
  
  overridable: false,
  type: 'HTML', //'SVG', 'Native'
  style: ' ',
  size: 10,
  family: 'sans-serif',
  textAlign: 'center',
  textBaseline: 'alphabetic',
  color: '#fff'
};


/*
 * File: Options.Tips.js
 *
 */

/*
  Object: Options.Tips
  
  Tips options
  
  Syntax:
    
  (start code js)
  Options.Tips = {
    enable: false,
    type: 'auto',
    offsetX: 20,
    offsetY: 20,
    onShow: $.empty,
    onHide: $.empty
  };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    Tips: {
      enable: true,
      type: 'Native',
      offsetX: 10,
      offsetY: 10,
      onShow: function(tip, node) {
        tip.innerHTML = node.name;
      }
    }
  });
  (end code)

  Parameters:

  enable - (boolean) Default's *false*. If *true*, a tooltip will be shown when a node is hovered. The tooltip is a div DOM element having "tip" as CSS class. 
  type - (string) Default's *auto*. Defines where to attach the MouseEnter/Leave tooltip events. Possible values are 'Native' to attach them to the canvas or 'HTML' to attach them to DOM label elements (if defined). 'auto' sets this property to the value of <Options.Label>'s *type* property.
  offsetX - (number) Default's *20*. An offset added to the current tooltip x-position (which is the same as the current mouse position). Default's 20.
  offsetY - (number) Default's *20*. An offset added to the current tooltip y-position (which is the same as the current mouse position). Default's 20.
  onShow(tip, node) - This callack is used right before displaying a tooltip. The first formal parameter is the tip itself (which is a DivElement). The second parameter may be a <Graph.Node> for graph based visualizations or an object with label, value properties for charts.
  onHide() - This callack is used when hiding a tooltip.

*/
Options.Tips = {
  $extend: false,
  
  enable: false,
  type: 'auto',
  offsetX: 20,
  offsetY: 20,
  force: false,
  onShow: $.empty,
  onHide: $.empty
};


/*
 * File: Options.NodeStyles.js
 *
 */

/*
  Object: Options.NodeStyles
  
  Apply different styles when a node is hovered or selected.
  
  Syntax:
    
  (start code js)
  Options.NodeStyles = {
    enable: false,
    type: 'auto',
    stylesHover: false,
    stylesClick: false
  };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    NodeStyles: {
      enable: true,
      type: 'Native',
      stylesHover: {
        dim: 30,
        color: '#fcc'
      },
      duration: 600
    }
  });
  (end code)

  Parameters:
  
  enable - (boolean) Default's *false*. Whether to enable this option.
  type - (string) Default's *auto*. Use this to attach the hover/click events in the nodes or the nodes labels (if they have been defined as DOM elements: 'HTML' or 'SVG', see <Options.Label> for more details). The default 'auto' value will set NodeStyles to the same type defined for <Options.Label>.
  stylesHover - (boolean|object) Default's *false*. An object with node styles just like the ones defined for <Options.Node> or *false* otherwise.
  stylesClick - (boolean|object) Default's *false*. An object with node styles just like the ones defined for <Options.Node> or *false* otherwise.
*/

Options.NodeStyles = {
  $extend: false,
  
  enable: false,
  type: 'auto',
  stylesHover: false,
  stylesClick: false
};


/*
 * File: Options.Events.js
 *
*/

/*
  Object: Options.Events
  
  Configuration for adding mouse/touch event handlers to Nodes.
  
  Syntax:
  
  (start code js)
  Options.Events = {
    enable: false,
    enableForEdges: false,
    type: 'auto',
    onClick: $.empty,
    onRightClick: $.empty,
    onMouseMove: $.empty,
    onMouseEnter: $.empty,
    onMouseLeave: $.empty,
    onDragStart: $.empty,
    onDragMove: $.empty,
    onDragCancel: $.empty,
    onDragEnd: $.empty,
    onTouchStart: $.empty,
    onTouchMove: $.empty,
    onTouchEnd: $.empty,
    onTouchCancel: $.empty,
    onMouseWheel: $.empty
  };
  (end code)
  
  Example:
  
  (start code js)
  var viz = new $jit.Viz({
    Events: {
      enable: true,
      onClick: function(node, eventInfo, e) {
        viz.doSomething();
      },
      onMouseEnter: function(node, eventInfo, e) {
        viz.canvas.getElement().style.cursor = 'pointer';
      },
      onMouseLeave: function(node, eventInfo, e) {
        viz.canvas.getElement().style.cursor = '';
      }
    }
  });
  (end code)
  
  Parameters:
  
  enable - (boolean) Default's *false*. Whether to enable the Event system.
  enableForEdges - (boolean) Default's *false*. Whether to track events also in arcs. If *true* the same callbacks -described below- are used for nodes *and* edges. A simple duck type check for edges is to check for *node.nodeFrom*.
  type - (string) Default's 'auto'. Whether to attach the events onto the HTML labels (via event delegation) or to use the custom 'Native' canvas Event System of the library. 'auto' is set when you let the <Options.Label> *type* parameter decide this.
  onClick(node, eventInfo, e) - Triggered when a user performs a click in the canvas. *node* is the <Graph.Node> clicked or false if no node has been clicked. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onRightClick(node, eventInfo, e) - Triggered when a user performs a right click in the canvas. *node* is the <Graph.Node> right clicked or false if no node has been clicked. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onMouseMove(node, eventInfo, e) - Triggered when the user moves the mouse. *node* is the <Graph.Node> under the cursor as it's moving over the canvas or false if no node has been clicked. *e* is the grabbed event (should return the native event in a cross-browser manner).  *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas.
  onMouseEnter(node, eventInfo, e) - Triggered when a user moves the mouse over a node. *node* is the <Graph.Node> that the mouse just entered. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onMouseLeave(node, eventInfo, e) - Triggered when the user mouse-outs a node. *node* is the <Graph.Node> 'mouse-outed'. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onDragStart(node, eventInfo, e) - Triggered when the user mouse-downs over a node. *node* is the <Graph.Node> being pressed. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onDragMove(node, eventInfo, e) - Triggered when a user, after pressing the mouse button over a node, moves the mouse around. *node* is the <Graph.Node> being dragged. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onDragEnd(node, eventInfo, e) - Triggered when a user finished dragging a node. *node* is the <Graph.Node> being dragged. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onDragCancel(node, eventInfo, e) - Triggered when the user releases the mouse button over a <Graph.Node> that wasn't dragged (i.e. the user didn't perform any mouse movement after pressing the mouse button). *node* is the <Graph.Node> being dragged. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. 
  onTouchStart(node, eventInfo, e) - Behaves just like onDragStart. 
  onTouchMove(node, eventInfo, e) - Behaves just like onDragMove. 
  onTouchEnd(node, eventInfo, e) - Behaves just like onDragEnd. 
  onTouchCancel(node, eventInfo, e) - Behaves just like onDragCancel.
  onMouseWheel(delta, e) - Triggered when the user uses the mouse scroll over the canvas. *delta* is 1 or -1 depending on the sense of the mouse scroll.
*/

Options.Events = {
  $extend: false,
  
  enable: false,
  enableForEdges: false,
  type: 'auto',
  onClick: $.empty,
  onRightClick: $.empty,
  onMouseMove: $.empty,
  onMouseEnter: $.empty,
  onMouseLeave: $.empty,
  onDragStart: $.empty,
  onDragMove: $.empty,
  onDragCancel: $.empty,
  onDragEnd: $.empty,
  onTouchStart: $.empty,
  onTouchMove: $.empty,
  onTouchEnd: $.empty,
  onMouseWheel: $.empty
};

/*
 * File: Options.Navigation.js
 *
*/

/*
  Object: Options.Navigation
  
  Panning and zooming options for Graph/Tree based visualizations. These options are implemented 
  by all visualizations except charts (<AreaChart>, <BarChart> and <PieChart>).
  
  Syntax:
  
  (start code js)

  Options.Navigation = {
    enable: false,
    type: 'auto',
    panning: false, //true, 'avoid nodes'
    zooming: false
  };
  
  (end code)
  
  Example:
    
  (start code js)
  var viz = new $jit.Viz({
    Navigation: {
      enable: true,
      panning: 'avoid nodes',
      zooming: 20
    }
  });
  (end code)
  
  Parameters:
  
  enable - (boolean) Default's *false*. Whether to enable Navigation capabilities.
  type - (string) Default's 'auto'. Whether to attach the navigation events onto the HTML labels (via event delegation) or to use the custom 'Native' canvas Event System of the library. When 'auto' set when you let the <Options.Label> *type* parameter decide this.
  panning - (boolean|string) Default's *false*. Set this property to *true* if you want to add Drag and Drop panning support to the visualization. You can also set this parameter to 'avoid nodes' to enable DnD panning but disable it if the DnD is taking place over a node. This is useful when some other events like Drag & Drop for nodes are added to <Graph.Nodes>.
  zooming - (boolean|number) Default's *false*. Set this property to a numeric value to turn mouse-scroll zooming on. The number will be proportional to the mouse-scroll sensitivity.
  
*/

Options.Navigation = {
  $extend: false,
  
  enable: false,
  type: 'auto',
  panning: false, //true | 'avoid nodes'
  zooming: false
};

/*
 * File: Options.Controller.js
 *
*/

/*
  Object: Options.Controller
  
  Provides controller methods. Controller methods are callback functions that get called at different stages 
  of the animation, computing or plotting of the visualization.
  
  Implemented by:
    
  All visualizations except charts (<AreaChart>, <BarChart> and <PieChart>).
  
  Syntax:
  
  (start code js)

  Options.Controller = {
    onBeforeCompute: $.empty,
    onAfterCompute:  $.empty,
    onCreateLabel:   $.empty,
    onPlaceLabel:    $.empty,
    onComplete:      $.empty,
    onBeforePlotLine:$.empty,
    onAfterPlotLine: $.empty,
    onBeforePlotNode:$.empty,
    onAfterPlotNode: $.empty,
    request:         false
  };
  
  (end code)
  
  Example:
    
  (start code js)
  var viz = new $jit.Viz({
    onBeforePlotNode: function(node) {
      if(node.selected) {
        node.setData('color', '#ffc');
      } else {
        node.removeData('color');
      }
    },
    onBeforePlotLine: function(adj) {
      if(adj.nodeFrom.selected && adj.nodeTo.selected) {
        adj.setData('color', '#ffc');
      } else {
        adj.removeData('color');
      }
    },
    onAfterCompute: function() {
      alert("computed!");
    }
  });
  (end code)
  
  Parameters:

   onBeforeCompute(node) - This method is called right before performing all computations and animations. The selected <Graph.Node> is passed as parameter.
   onAfterCompute() - This method is triggered after all animations or computations ended.
   onCreateLabel(domElement, node) - This method receives a new label DIV element as first parameter, and the corresponding <Graph.Node> as second parameter. This method will only be called once for each label. This method is useful when adding events or styles to the labels used by the JIT.
   onPlaceLabel(domElement, node) - This method receives a label DIV element as first parameter and the corresponding <Graph.Node> as second parameter. This method is called each time a label has been placed in the visualization, for example at each step of an animation, and thus it allows you to update the labels properties, such as size or position. Note that onPlaceLabel will be triggered after updating the labels positions. That means that, for example, the left and top css properties are already updated to match the nodes positions. Width and height properties are not set however.
   onBeforePlotNode(node) - This method is triggered right before plotting each <Graph.Node>. This method is useful for changing a node style right before plotting it.
   onAfterPlotNode(node) - This method is triggered right after plotting each <Graph.Node>.
   onBeforePlotLine(adj) - This method is triggered right before plotting a <Graph.Adjacence>. This method is useful for adding some styles to a particular edge before being plotted.
   onAfterPlotLine(adj) - This method is triggered right after plotting a <Graph.Adjacence>.

    *Used in <ST>, <TM.Base> and <Icicle> visualizations*
    
    request(nodeId, level, onComplete) - This method is used for buffering information into the visualization. When clicking on an empty node, the visualization will make a request for this node's subtrees, specifying a given level for this subtree (defined by _levelsToShow_). Once the request is completed, the onComplete callback should be called with the given result. This is useful to provide on-demand information into the visualizations withought having to load the entire information from start. The parameters used by this method are _nodeId_, which is the id of the root of the subtree to request, _level_ which is the depth of the subtree to be requested (0 would mean just the root node). _onComplete_ is an object having the callback method _onComplete.onComplete(json)_ that should be called once the json has been retrieved.  
 
 */
Options.Controller = {
  $extend: true,
  
  onBeforeCompute: $.empty,
  onAfterCompute:  $.empty,
  onCreateLabel:   $.empty,
  onPlaceLabel:    $.empty,
  onComplete:      $.empty,
  onBeforePlotLine:$.empty,
  onAfterPlotLine: $.empty,
  onBeforePlotNode:$.empty,
  onAfterPlotNode: $.empty,
  request:         false
};


/*
 * File: Extras.js
 * 
 * Provides Extras such as Tips and Style Effects.
 * 
 * Description:
 * 
 * Provides the <Tips> and <NodeStyles> classes and functions.
 *
 */

/*
 * Manager for mouse events (clicking and mouse moving).
 * 
 * This class is used for registering objects implementing onClick
 * and onMousemove methods. These methods are called when clicking or
 * moving the mouse around  the Canvas.
 * For now, <Tips> and <NodeStyles> are classes implementing these methods.
 * 
 */
var ExtrasInitializer = {
  initialize: function(className, viz) {
    this.viz = viz;
    this.canvas = viz.canvas;
    this.config = viz.config[className];
    this.nodeTypes = viz.fx.nodeTypes;
    var type = this.config.type;
    this.dom = type == 'auto'? (viz.config.Label.type != 'Native') : (type != 'Native');
    this.labelContainer = this.dom && viz.labels.getLabelContainer();
    this.isEnabled() && this.initializePost();
  },
  initializePost: $.empty,
  setAsProperty: $.lambda(false),
  isEnabled: function() {
    return this.config.enable;
  },
  isLabel: function(e, win, group) {
    e = $.event.get(e, win);
    var labelContainer = this.labelContainer,
        target = e.target || e.srcElement,
        related = e.relatedTarget;
    if(group) {
      return related && related == this.viz.canvas.getCtx().canvas 
          && !!target && this.isDescendantOf(target, labelContainer);
    } else {
      return this.isDescendantOf(target, labelContainer);
    }
  },
  isDescendantOf: function(elem, par) {
    while(elem && elem.parentNode) {
      if(elem.parentNode == par)
        return elem;
      elem = elem.parentNode;
    }
    return false;
  }
};

var EventsInterface = {
  onMouseUp: $.empty,
  onMouseDown: $.empty,
  onMouseMove: $.empty,
  onMouseOver: $.empty,
  onMouseOut: $.empty,
  onMouseWheel: $.empty,
  onTouchStart: $.empty,
  onTouchMove: $.empty,
  onTouchEnd: $.empty,
  onTouchCancel: $.empty
};

var MouseEventsManager = new Class({
  initialize: function(viz) {
    this.viz = viz;
    this.canvas = viz.canvas;
    this.node = false;
    this.edge = false;
    this.registeredObjects = [];
    this.attachEvents();
  },
  
  attachEvents: function() {
    var htmlCanvas = this.canvas.getElement(), 
        that = this;
    htmlCanvas.oncontextmenu = $.lambda(false);
    $.addEvents(htmlCanvas, {
      'mouseup': function(e, win) {
        var event = $.event.get(e, win);
        that.handleEvent('MouseUp', e, win, 
            that.makeEventObject(e, win), 
            $.event.isRightClick(event));
      },
      'mousedown': function(e, win) {
        var event = $.event.get(e, win);
        that.handleEvent('MouseDown', e, win, that.makeEventObject(e, win), 
            $.event.isRightClick(event));
      },
      'mousemove': function(e, win) {
        that.handleEvent('MouseMove', e, win, that.makeEventObject(e, win));
      },
      'mouseover': function(e, win) {
        that.handleEvent('MouseOver', e, win, that.makeEventObject(e, win));
      },
      'mouseout': function(e, win) {
        that.handleEvent('MouseOut', e, win, that.makeEventObject(e, win));
      },
      'touchstart': function(e, win) {
        that.handleEvent('TouchStart', e, win, that.makeEventObject(e, win));
      },
      'touchmove': function(e, win) {
        that.handleEvent('TouchMove', e, win, that.makeEventObject(e, win));
      },
      'touchend': function(e, win) {
        that.handleEvent('TouchEnd', e, win, that.makeEventObject(e, win));
      }
    });
    //attach mousewheel event
    var handleMouseWheel = function(e, win) {
      var event = $.event.get(e, win);
      var wheel = $.event.getWheel(event);
      that.handleEvent('MouseWheel', e, win, wheel);
    };
    //TODO(nico): this is a horrible check for non-gecko browsers!
    if(!document.getBoxObjectFor && window.mozInnerScreenX == null) {
      $.addEvent(htmlCanvas, 'mousewheel', handleMouseWheel);
    } else {
      htmlCanvas.addEventListener('DOMMouseScroll', handleMouseWheel, false);
    }
  },
  
  register: function(obj) {
    this.registeredObjects.push(obj);
  },
  
  handleEvent: function() {
    var args = Array.prototype.slice.call(arguments),
        type = args.shift();
    for(var i=0, regs=this.registeredObjects, l=regs.length; i<l; i++) {
      regs[i]['on' + type].apply(regs[i], args);
    }
  },
  
  makeEventObject: function(e, win) {
    var that = this,
        graph = this.viz.graph,
        fx = this.viz.fx,
        ntypes = fx.nodeTypes,
        etypes = fx.edgeTypes;
    return {
      pos: false,
      node: false,
      edge: false,
      contains: false,
      getNodeCalled: false,
      getEdgeCalled: false,
      getPos: function() {
        //TODO(nico): check why this can't be cache anymore when using edge detection
        //if(this.pos) return this.pos;
        var canvas = that.viz.canvas,
            s = canvas.getSize(),
            p = canvas.getPos(),
            ox = canvas.translateOffsetX,
            oy = canvas.translateOffsetY,
            sx = canvas.scaleOffsetX,
            sy = canvas.scaleOffsetY,
            pos = $.event.getPos(e, win);
        this.pos = {
          x: (pos.x - p.x - s.width/2 - ox) * 1/sx,
          y: (pos.y - p.y - s.height/2 - oy) * 1/sy
        };
        return this.pos;
      },
      getNode: function() {
        if(this.getNodeCalled) return this.node;
        this.getNodeCalled = true;
        for(var id in graph.nodes) {
          var n = graph.nodes[id],
              geom = n && ntypes[n.getData('type')],
              contains = geom && geom.contains && geom.contains.call(fx, n, this.getPos());
          if(contains) {
            this.contains = contains;
            return that.node = this.node = n;
          }
        }
        return that.node = this.node = false;
      },
      getEdge: function() {
        if(this.getEdgeCalled) return this.edge;
        this.getEdgeCalled = true;
        var hashset = {};
        for(var id in graph.edges) {
          var edgeFrom = graph.edges[id];
          hashset[id] = true;
          for(var edgeId in edgeFrom) {
            if(edgeId in hashset) continue;
            var e = edgeFrom[edgeId],
                geom = e && etypes[e.getData('type')],
                contains = geom && geom.contains && geom.contains.call(fx, e, this.getPos());
            if(contains) {
              this.contains = contains;
              return that.edge = this.edge = e;
            }
          }
        }
        return that.edge = this.edge = false;
      },
      getContains: function() {
        if(this.getNodeCalled) return this.contains;
        this.getNode();
        return this.contains;
      }
    };
  }
});

/* 
 * Provides the initialization function for <NodeStyles> and <Tips> implemented 
 * by all main visualizations.
 *
 */
var Extras = {
  initializeExtras: function() {
    var mem = new MouseEventsManager(this), that = this;
    $.each(['NodeStyles', 'Tips', 'Navigation', 'Events'], function(k) {
      var obj = new Extras.Classes[k](k, that);
      if(obj.isEnabled()) {
        mem.register(obj);
      }
      if(obj.setAsProperty()) {
        that[k.toLowerCase()] = obj;
      }
    });
  }   
};

Extras.Classes = {};
/*
  Class: Events
   
  This class defines an Event API to be accessed by the user.
  The methods implemented are the ones defined in the <Options.Events> object.
*/

Extras.Classes.Events = new Class({
  Implements: [ExtrasInitializer, EventsInterface],
  
  initializePost: function() {
    this.fx = this.viz.fx;
    this.ntypes = this.viz.fx.nodeTypes;
    this.etypes = this.viz.fx.edgeTypes;
    
    this.hovered = false;
    this.pressed = false;
    this.touched = false;

    this.touchMoved = false;
    this.moved = false;
    
  },
  
  setAsProperty: $.lambda(true),
  
  onMouseUp: function(e, win, event, isRightClick) {
    var evt = $.event.get(e, win);
    if(!this.moved) {
      if(isRightClick) {
        this.config.onRightClick(this.hovered, event, evt);
      } else {
        this.config.onClick(this.pressed, event, evt);
      }
    }
    if(this.pressed) {
      if(this.moved) {
        this.config.onDragEnd(this.pressed, event, evt);
      } else {
        this.config.onDragCancel(this.pressed, event, evt);
      }
      this.pressed = this.moved = false;
    }
  },

  onMouseOut: function(e, win, event) {
   //mouseout a label
   var evt = $.event.get(e, win), label;
   if(this.dom && (label = this.isLabel(e, win, true))) {
     this.config.onMouseLeave(this.viz.graph.getNode(label.id),
                              event, evt);
     this.hovered = false;
     return;
   }
   //mouseout canvas
   var rt = evt.relatedTarget,
       canvasWidget = this.canvas.getElement();
   while(rt && rt.parentNode) {
     if(canvasWidget == rt.parentNode) return;
     rt = rt.parentNode;
   }
   if(this.hovered) {
     this.config.onMouseLeave(this.hovered,
         event, evt);
     this.hovered = false;
   }
  },
  
  onMouseOver: function(e, win, event) {
    //mouseover a label
    var evt = $.event.get(e, win), label;
    if(this.dom && (label = this.isLabel(e, win, true))) {
      this.hovered = this.viz.graph.getNode(label.id);
      this.config.onMouseEnter(this.hovered,
                               event, evt);
    }
  },
  
  onMouseMove: function(e, win, event) {
   var label, evt = $.event.get(e, win);
   if(this.pressed) {
     this.moved = true;
     this.config.onDragMove(this.pressed, event, evt);
     return;
   }
   if(this.dom) {
     this.config.onMouseMove(this.hovered,
         event, evt);
   } else {
     if(this.hovered) {
       var hn = this.hovered;
       var geom = hn.nodeFrom? this.etypes[hn.getData('type')] : this.ntypes[hn.getData('type')];
       var contains = geom && geom.contains 
         && geom.contains.call(this.fx, hn, event.getPos());
       if(contains) {
         this.config.onMouseMove(hn, event, evt);
         return;
       } else {
         this.config.onMouseLeave(hn, event, evt);
         this.hovered = false;
       }
     }
     if(this.hovered = (event.getNode() || (this.config.enableForEdges && event.getEdge()))) {
       this.config.onMouseEnter(this.hovered, event, evt);
     } else {
       this.config.onMouseMove(false, event, evt);
     }
   }
  },
  
  onMouseWheel: function(e, win, delta) {
    this.config.onMouseWheel(delta, $.event.get(e, win));
  },
  
  onMouseDown: function(e, win, event) {
    var evt = $.event.get(e, win), label;
    if(this.dom) {
      if(label = this.isLabel(e, win)) {
        this.pressed = this.viz.graph.getNode(label.id);
      }
    } else {
      this.pressed = event.getNode() || (this.config.enableForEdges && event.getEdge());
    }
    this.pressed && this.config.onDragStart(this.pressed, event, evt);
  },
  
  onTouchStart: function(e, win, event) {
    var evt = $.event.get(e, win), label;
    if(this.dom && (label = this.isLabel(e, win))) {
      this.touched = this.viz.graph.getNode(label.id);
    } else {
      this.touched = event.getNode() || (this.config.enableForEdges && event.getEdge());
    }
    this.touched && this.config.onTouchStart(this.touched, event, evt);
  },
  
  onTouchMove: function(e, win, event) {
    var evt = $.event.get(e, win);
    if(this.touched) {
      this.touchMoved = true;
      this.config.onTouchMove(this.touched, event, evt);
    }
  },
  
  onTouchEnd: function(e, win, event) {
    var evt = $.event.get(e, win);
    if(this.touched) {
      if(this.touchMoved) {
        this.config.onTouchEnd(this.touched, event, evt);
      } else {
        this.config.onTouchCancel(this.touched, event, evt);
      }
      this.touched = this.touchMoved = false;
    }
  }
});

/*
   Class: Tips
    
   A class containing tip related functions. This class is used internally.
   
   Used by:
   
   <ST>, <Sunburst>, <Hypertree>, <RGraph>, <TM>, <ForceDirected>, <Icicle>
   
   See also:
   
   <Options.Tips>
*/

Extras.Classes.Tips = new Class({
  Implements: [ExtrasInitializer, EventsInterface],
  
  initializePost: function() {
    //add DOM tooltip
    if(document.body) {
      var tip = $('_tooltip') || document.createElement('div');
      tip.id = '_tooltip';
      tip.className = 'tip';
      $.extend(tip.style, {
        position: 'absolute',
        display: 'none',
        zIndex: 13000
      });
      document.body.appendChild(tip);
      this.tip = tip;
      this.node = false;
    }
  },
  
  setAsProperty: $.lambda(true),
  
  onMouseOut: function(e, win) {
    //mouseout a label
    var evt = $.event.get(e, win);
    if(this.dom && this.isLabel(e, win, true)) {
      this.hide(true);
      return;
    }
    //mouseout canvas
    var rt = e.relatedTarget,
        canvasWidget = this.canvas.getElement();
    while(rt && rt.parentNode) {
      if(canvasWidget == rt.parentNode) return;
      rt = rt.parentNode;
    }
    this.hide(false);
  },
  
  onMouseOver: function(e, win) {
    //mouseover a label
    var label;
    if(this.dom && (label = this.isLabel(e, win, false))) {
      this.node = this.viz.graph.getNode(label.id);
      this.config.onShow(this.tip, this.node, label);
    }
  },
  
  onMouseMove: function(e, win, opt) {
    if(this.dom && this.isLabel(e, win)) {
      this.setTooltipPosition($.event.getPos(e, win));
    }
    if(!this.dom) {
      var node = opt.getNode();
      if(!node) {
        this.hide(true);
        return;
      }
      if(this.config.force || !this.node || this.node.id != node.id) {
        this.node = node;
        this.config.onShow(this.tip, node, opt.getContains());
      }
      this.setTooltipPosition($.event.getPos(e, win));
    }
  },
  
  setTooltipPosition: function(pos) {
    var tip = this.tip, 
        style = tip.style, 
        cont = this.config;
    style.display = '';
    //get window dimensions
    var win = {
      'height': document.body.clientHeight,
      'width': document.body.clientWidth
    };
    //get tooltip dimensions
    var obj = {
      'width': tip.offsetWidth,
      'height': tip.offsetHeight  
    };
    //set tooltip position
    var x = cont.offsetX, y = cont.offsetY;
    style.top = ((pos.y + y + obj.height > win.height)?  
        (pos.y - obj.height - y) : pos.y + y) + 'px';
    style.left = ((pos.x + obj.width + x > win.width)? 
        (pos.x - obj.width - x) : pos.x + x) + 'px';
  },
  
  hide: function(triggerCallback) {
    this.tip.style.display = 'none';
    triggerCallback && this.config.onHide();
  }
});

/*
  Class: NodeStyles
   
  Change node styles when clicking or hovering a node. This class is used internally.
  
  Used by:
  
  <ST>, <Sunburst>, <Hypertree>, <RGraph>, <TM>, <ForceDirected>, <Icicle>
  
  See also:
  
  <Options.NodeStyles>
*/
Extras.Classes.NodeStyles = new Class({
  Implements: [ExtrasInitializer, EventsInterface],
  
  initializePost: function() {
    this.fx = this.viz.fx;
    this.types = this.viz.fx.nodeTypes;
    this.nStyles = this.config;
    this.nodeStylesOnHover = this.nStyles.stylesHover;
    this.nodeStylesOnClick = this.nStyles.stylesClick;
    this.hoveredNode = false;
    this.fx.nodeFxAnimation = new Animation();
    
    this.down = false;
    this.move = false;
  },
  
  onMouseOut: function(e, win) {
    this.down = this.move = false;
    if(!this.hoveredNode) return;
    //mouseout a label
    if(this.dom && this.isLabel(e, win, true)) {
      this.toggleStylesOnHover(this.hoveredNode, false);
    }
    //mouseout canvas
    var rt = e.relatedTarget,
        canvasWidget = this.canvas.getElement();
    while(rt && rt.parentNode) {
      if(canvasWidget == rt.parentNode) return;
      rt = rt.parentNode;
    }
    this.toggleStylesOnHover(this.hoveredNode, false);
    this.hoveredNode = false;
  },
  
  onMouseOver: function(e, win) {
    //mouseover a label
    var label;
    if(this.dom && (label = this.isLabel(e, win, true))) {
      var node = this.viz.graph.getNode(label.id);
      if(node.selected) return;
      this.hoveredNode = node;
      this.toggleStylesOnHover(this.hoveredNode, true);
    }
  },
  
  onMouseDown: function(e, win, event, isRightClick) {
    if(isRightClick) return;
    var label;
    if(this.dom && (label = this.isLabel(e, win))) {
      this.down = this.viz.graph.getNode(label.id);
    } else if(!this.dom) {
      this.down = event.getNode();
    }
    this.move = false;
  },
  
  onMouseUp: function(e, win, event, isRightClick) {
    if(isRightClick) return;
    if(!this.move) {
      this.onClick(event.getNode());
    }
    this.down = this.move = false;
  },
  
  getRestoredStyles: function(node, type) {
    var restoredStyles = {}, 
        nStyles = this['nodeStylesOn' + type];
    for(var prop in nStyles) {
      restoredStyles[prop] = node.styles['$' + prop];
    }
    return restoredStyles;
  },
  
  toggleStylesOnHover: function(node, set) {
    if(this.nodeStylesOnHover) {
      this.toggleStylesOn('Hover', node, set);
    }
  },

  toggleStylesOnClick: function(node, set) {
    if(this.nodeStylesOnClick) {
      this.toggleStylesOn('Click', node, set);
    }
  },
  
  toggleStylesOn: function(type, node, set) {
    var viz = this.viz;
    var nStyles = this.nStyles;
    if(set) {
      var that = this;
      if(!node.styles) {
        node.styles = $.merge(node.data, {});
      }
      for(var s in this['nodeStylesOn' + type]) {
        var $s = '$' + s;
        if(!($s in node.styles)) {
            node.styles[$s] = node.getData(s); 
        }
      }
      viz.fx.nodeFx($.extend({
        'elements': {
          'id': node.id,
          'properties': that['nodeStylesOn' + type]
         },
         transition: Trans.Quart.easeOut,
         duration:300,
         fps:40
      }, this.config));
    } else {
      var restoredStyles = this.getRestoredStyles(node, type);
      viz.fx.nodeFx($.extend({
        'elements': {
          'id': node.id,
          'properties': restoredStyles
         },
         transition: Trans.Quart.easeOut,
         duration:300,
         fps:40
      }, this.config));
    }
  },

  onClick: function(node) {
    if(!node) return;
    var nStyles = this.nodeStylesOnClick;
    if(!nStyles) return;
    //if the node is selected then unselect it
    if(node.selected) {
      this.toggleStylesOnClick(node, false);
      delete node.selected;
    } else {
      //unselect all selected nodes...
      this.viz.graph.eachNode(function(n) {
        if(n.selected) {
          for(var s in nStyles) {
            n.setData(s, n.styles['$' + s], 'end');
          }
          delete n.selected;
        }
      });
      //select clicked node
      this.toggleStylesOnClick(node, true);
      node.selected = true;
      delete node.hovered;
      this.hoveredNode = false;
    }
  },
  
  onMouseMove: function(e, win, event) {
    //if mouse button is down and moving set move=true
    if(this.down) this.move = true;
    //already handled by mouseover/out
    if(this.dom && this.isLabel(e, win)) return;
    var nStyles = this.nodeStylesOnHover;
    if(!nStyles) return;
    
    if(!this.dom) {
      if(this.hoveredNode) {
        var geom = this.types[this.hoveredNode.getData('type')];
        var contains = geom && geom.contains && geom.contains.call(this.fx, 
            this.hoveredNode, event.getPos());
        if(contains) return;
      }
      var node = event.getNode();
      //if no node is being hovered then just exit
      if(!this.hoveredNode && !node) return;
      //if the node is hovered then exit
      if(node.hovered) return;
      //select hovered node
      if(node && !node.selected) {
        //check if an animation is running and exit it
        this.fx.nodeFxAnimation.stopTimer();
        //unselect all hovered nodes...
        this.viz.graph.eachNode(function(n) {
          if(n.hovered && !n.selected) {
            for(var s in nStyles) {
              n.setData(s, n.styles['$' + s], 'end');
            }
            delete n.hovered;
          }
        });
        //select hovered node
        node.hovered = true;
        this.hoveredNode = node;
        this.toggleStylesOnHover(node, true);
      } else if(this.hoveredNode && !this.hoveredNode.selected) {
        //check if an animation is running and exit it
        this.fx.nodeFxAnimation.stopTimer();
        //unselect hovered node
        this.toggleStylesOnHover(this.hoveredNode, false);
        delete this.hoveredNode.hovered;
        this.hoveredNode = false;
      }
    }
  }
});

Extras.Classes.Navigation = new Class({
  Implements: [ExtrasInitializer, EventsInterface],
  
  initializePost: function() {
    this.pos = false;
    this.pressed = false;
  },
  
  onMouseWheel: function(e, win, scroll) {
    if(!this.config.zooming) return;
    $.event.stop($.event.get(e, win));
    var val = this.config.zooming / 1000,
        ans = 1 + scroll * val;
    this.canvas.scale(ans, ans);
  },
  
  onMouseDown: function(e, win, eventInfo) {
    if(!this.config.panning) return;
    if(this.config.panning == 'avoid nodes' && (this.dom? this.isLabel(e, win) : eventInfo.getNode())) return;
    this.pressed = true;
    this.pos = eventInfo.getPos();
    var canvas = this.canvas,
        ox = canvas.translateOffsetX,
        oy = canvas.translateOffsetY,
        sx = canvas.scaleOffsetX,
        sy = canvas.scaleOffsetY;
    this.pos.x *= sx;
    this.pos.x += ox;
    this.pos.y *= sy;
    this.pos.y += oy;
  },
  
  onMouseMove: function(e, win, eventInfo) {
    if(!this.config.panning) return;
    if(!this.pressed) return;
    if(this.config.panning == 'avoid nodes' && (this.dom? this.isLabel(e, win) : eventInfo.getNode())) return;
    var thispos = this.pos, 
        currentPos = eventInfo.getPos(),
        canvas = this.canvas,
        ox = canvas.translateOffsetX,
        oy = canvas.translateOffsetY,
        sx = canvas.scaleOffsetX,
        sy = canvas.scaleOffsetY;
    currentPos.x *= sx;
    currentPos.y *= sy;
    currentPos.x += ox;
    currentPos.y += oy;
    var x = currentPos.x - thispos.x,
        y = currentPos.y - thispos.y;
    this.pos = currentPos;
    this.canvas.translate(x * 1/sx, y * 1/sy);
  },
  
  onMouseUp: function(e, win, eventInfo, isRightClick) {
    if(!this.config.panning) return;
    this.pressed = false;
  }
});


/*
 * File: Canvas.js
 *
 */

/*
 Class: Canvas
 
 	A canvas widget used by all visualizations. The canvas object can be accessed by doing *viz.canvas*. If you want to 
 	know more about <Canvas> options take a look at <Options.Canvas>.
 
 A canvas widget is a set of DOM elements that wrap the native canvas DOM Element providing a consistent API and behavior 
 across all browsers. It can also include Elements to add DOM (SVG or HTML) label support to all visualizations.
 
 Example:
 
 Suppose we have this HTML
 
 (start code xml)
 	<div id="infovis"></div>
 (end code)
 
 Now we create a new Visualization
 
 (start code js)
 	var viz = new $jit.Viz({
 		//Where to inject the canvas. Any div container will do.
 		'injectInto':'infovis',
		 //width and height for canvas. 
		 //Default's to the container offsetWidth and Height.
		 'width': 900,
		 'height':500
	 });
 (end code)

 The generated HTML will look like this
 
 (start code xml)
 <div id="infovis">
 	<div id="infovis-canvaswidget" style="position:relative;">
 	<canvas id="infovis-canvas" width=900 height=500
 	style="position:absolute; top:0; left:0; width:900px; height:500px;" />
 	<div id="infovis-label"
 	style="overflow:visible; position:absolute; top:0; left:0; width:900px; height:0px">
 	</div>
 	</div>
 </div>
 (end code)
 
 As you can see, the generated HTML consists of a canvas DOM Element of id *infovis-canvas* and a div label container
 of id *infovis-label*, wrapped in a main div container of id *infovis-canvaswidget*.
 */

var Canvas;
(function() {
  //check for native canvas support
  var canvasType = typeof HTMLCanvasElement,
      supportsCanvas = (canvasType == 'object' || canvasType == 'function');
  //create element function
  function $E(tag, props) {
    var elem = document.createElement(tag);
    for(var p in props) {
      if(typeof props[p] == "object") {
        $.extend(elem[p], props[p]);
      } else {
        elem[p] = props[p];
      }
    }
    if (tag == "canvas" && !supportsCanvas && G_vmlCanvasManager) {
      elem = G_vmlCanvasManager.initElement(document.body.appendChild(elem));
    }
    return elem;
  }
  //canvas widget which we will call just Canvas
  $jit.Canvas = Canvas = new Class({
    canvases: [],
    pos: false,
    element: false,
    labelContainer: false,
    translateOffsetX: 0,
    translateOffsetY: 0,
    scaleOffsetX: 1,
    scaleOffsetY: 1,
    
    initialize: function(viz, opt) {
      this.viz = viz;
      this.opt = this.config = opt;
      var id = $.type(opt.injectInto) == 'string'? 
          opt.injectInto:opt.injectInto.id,
          type = opt.type,
          idLabel = id + "-label", 
          wrapper = $(id),
          width = opt.width || wrapper.offsetWidth,
          height = opt.height || wrapper.offsetHeight;
      this.id = id;
      //canvas options
      var canvasOptions = {
        injectInto: id,
        width: width,
        height: height
      };
      //create main wrapper
      this.element = $E('div', {
        'id': id + '-canvaswidget',
        'style': {
          'position': 'relative',
          'width': width + 'px',
          'height': height + 'px'
        }
      });
      //create label container
      this.labelContainer = this.createLabelContainer(opt.Label.type, 
          idLabel, canvasOptions);
      //create primary canvas
      this.canvases.push(new Canvas.Base[type]({
        config: $.extend({idSuffix: '-canvas'}, canvasOptions),
        plot: function(base) {
          viz.fx.plot();
        },
        resize: function() {
          viz.refresh();
        }
      }));
      //create secondary canvas
      var back = opt.background;
      if(back) {
        var backCanvas = new Canvas.Background[back.type](viz, $.extend(back, canvasOptions));
        this.canvases.push(new Canvas.Base[type](backCanvas));
      }
      //insert canvases
      var len = this.canvases.length;
      while(len--) {
        this.element.appendChild(this.canvases[len].canvas);
        if(len > 0) {
          this.canvases[len].plot();
        }
      }
      this.element.appendChild(this.labelContainer);
      wrapper.appendChild(this.element);
      //Update canvas position when the page is scrolled.
      var timer = null, that = this;
      $.addEvent(window, 'scroll', function() {
        clearTimeout(timer);
        timer = setTimeout(function() {
          that.getPos(true); //update canvas position
        }, 500);
      });
    },
    /*
      Method: getCtx
      
      Returns the main canvas context object
      
      Example:
      
      (start code js)
       var ctx = canvas.getCtx();
       //Now I can use the native canvas context
       //and for example change some canvas styles
       ctx.globalAlpha = 1;
      (end code)
    */
    getCtx: function(i) {
      return this.canvases[i || 0].getCtx();
    },
    /*
      Method: getConfig
      
      Returns the current Configuration for this Canvas Widget.
      
      Example:
      
      (start code js)
       var config = canvas.getConfig();
      (end code)
    */
    getConfig: function() {
      return this.opt;
    },
    /*
      Method: getElement

      Returns the main Canvas DOM wrapper
      
      Example:
      
      (start code js)
       var wrapper = canvas.getElement();
       //Returns <div id="infovis-canvaswidget" ... >...</div> as element
      (end code)
    */
    getElement: function() {
      return this.element;
    },
    /*
      Method: getSize
      
      Returns canvas dimensions.
      
      Returns:
      
      An object with *width* and *height* properties.
      
      Example:
      (start code js)
      canvas.getSize(); //returns { width: 900, height: 500 }
      (end code)
    */
    getSize: function(i) {
      return this.canvases[i || 0].getSize();
    },
    /*
      Method: resize
      
      Resizes the canvas.
      
      Parameters:
      
      width - New canvas width.
      height - New canvas height.
      
      Example:
      
      (start code js)
       canvas.resize(width, height);
      (end code)
    
    */
    resize: function(width, height) {
      this.getPos(true);
      this.translateOffsetX = this.translateOffsetY = 0;
      this.scaleOffsetX = this.scaleOffsetY = 1;
      for(var i=0, l=this.canvases.length; i<l; i++) {
        this.canvases[i].resize(width, height);
      }
      var style = this.element.style;
      style.width = width + 'px';
      style.height = height + 'px';
      if(this.labelContainer)
        this.labelContainer.style.width = width + 'px';
    },
    /*
      Method: translate
      
      Applies a translation to the canvas.
      
      Parameters:
      
      x - (number) x offset.
      y - (number) y offset.
      disablePlot - (boolean) Default's *false*. Set this to *true* if you don't want to refresh the visualization.
      
      Example:
      
      (start code js)
       canvas.translate(30, 30);
      (end code)
    
    */
    translate: function(x, y, disablePlot) {
      this.translateOffsetX += x*this.scaleOffsetX;
      this.translateOffsetY += y*this.scaleOffsetY;
      for(var i=0, l=this.canvases.length; i<l; i++) {
        this.canvases[i].translate(x, y, disablePlot);
      }
    },
    /*
      Method: scale
      
      Scales the canvas.
      
      Parameters:
      
      x - (number) scale value.
      y - (number) scale value.
      disablePlot - (boolean) Default's *false*. Set this to *true* if you don't want to refresh the visualization.
      
      Example:
      
      (start code js)
       canvas.scale(0.5, 0.5);
      (end code)
    
    */
    scale: function(x, y, disablePlot) {
      var px = this.scaleOffsetX * x,
          py = this.scaleOffsetY * y;
      var dx = this.translateOffsetX * (x -1) / px,
          dy = this.translateOffsetY * (y -1) / py;
      this.scaleOffsetX = px;
      this.scaleOffsetY = py;
      for(var i=0, l=this.canvases.length; i<l; i++) {
        this.canvases[i].scale(x, y, true);
      }
      this.translate(dx, dy, false);
    },
    /*
      Method: getPos
      
      Returns the canvas position as an *x, y* object.
      
      Parameters:
      
      force - (boolean) Default's *false*. Set this to *true* if you want to recalculate the position without using any cache information.
      
      Returns:
      
      An object with *x* and *y* properties.
      
      Example:
      (start code js)
      canvas.getPos(true); //returns { x: 900, y: 500 }
      (end code)
    */
    getPos: function(force){
      if(force || !this.pos) {
        return this.pos = $.getPos(this.getElement());
      }
      return this.pos;
    },
    /*
       Method: clear
       
       Clears the canvas.
    */
    clear: function(i){
      this.canvases[i||0].clear();
    },
    
    path: function(type, action){
      var ctx = this.canvases[0].getCtx();
      ctx.beginPath();
      action(ctx);
      ctx[type]();
      ctx.closePath();
    },
    
    createLabelContainer: function(type, idLabel, dim) {
      var NS = 'http://www.w3.org/2000/svg';
      if(type == 'HTML' || type == 'Native') {
        return $E('div', {
          'id': idLabel,
          'style': {
            'overflow': 'visible',
            'position': 'absolute',
            'top': 0,
            'left': 0,
            'width': dim.width + 'px',
            'height': 0
          }
        });
      } else if(type == 'SVG') {
        var svgContainer = document.createElementNS(NS, 'svg:svg');
        svgContainer.setAttribute("width", dim.width);
        svgContainer.setAttribute('height', dim.height);
        var style = svgContainer.style;
        style.position = 'absolute';
        style.left = style.top = '0px';
        var labelContainer = document.createElementNS(NS, 'svg:g');
        labelContainer.setAttribute('width', dim.width);
        labelContainer.setAttribute('height', dim.height);
        labelContainer.setAttribute('x', 0);
        labelContainer.setAttribute('y', 0);
        labelContainer.setAttribute('id', idLabel);
        svgContainer.appendChild(labelContainer);
        return svgContainer;
      }
    }
  });
  //base canvas wrapper
  Canvas.Base = {};
  Canvas.Base['2D'] = new Class({
    translateOffsetX: 0,
    translateOffsetY: 0,
    scaleOffsetX: 1,
    scaleOffsetY: 1,

    initialize: function(viz) {
      this.viz = viz;
      this.opt = viz.config;
      this.size = false;
      this.createCanvas();
      this.translateToCenter();
    },
    createCanvas: function() {
      var opt = this.opt,
          width = opt.width,
          height = opt.height;
      this.canvas = $E('canvas', {
        'id': opt.injectInto + opt.idSuffix,
        'width': width,
        'height': height,
        'style': {
          'position': 'absolute',
          'top': 0,
          'left': 0,
          'width': width + 'px',
          'height': height + 'px'
        }
      });
    },
    getCtx: function() {
      if(!this.ctx) 
        return this.ctx = this.canvas.getContext('2d');
      return this.ctx;
    },
    getSize: function() {
      if(this.size) return this.size;
      var canvas = this.canvas;
      return this.size = {
        width: canvas.width,
        height: canvas.height
      };
    },
    translateToCenter: function(ps) {
      var size = this.getSize(),
          width = ps? (size.width - ps.width - this.translateOffsetX*2) : size.width;
          height = ps? (size.height - ps.height - this.translateOffsetY*2) : size.height;
      var ctx = this.getCtx();
      ps && ctx.scale(1/this.scaleOffsetX, 1/this.scaleOffsetY);
      ctx.translate(width/2, height/2);
    },
    resize: function(width, height) {
      var size = this.getSize(),
          canvas = this.canvas,
          styles = canvas.style;
      this.size = false;
      canvas.width = width;
      canvas.height = height;
      styles.width = width + "px";
      styles.height = height + "px";
      //small ExCanvas fix
      if(!supportsCanvas) {
        this.translateToCenter(size);
      } else {
        this.translateToCenter();
      }
      this.translateOffsetX =
        this.translateOffsetY = 0;
      this.scaleOffsetX = 
        this.scaleOffsetY = 1;
      this.clear();
      this.viz.resize(width, height, this);
    },
    translate: function(x, y, disablePlot) {
      var sx = this.scaleOffsetX,
          sy = this.scaleOffsetY;
      this.translateOffsetX += x*sx;
      this.translateOffsetY += y*sy;
      this.getCtx().translate(x, y);
      !disablePlot && this.plot();
    },
    scale: function(x, y, disablePlot) {
      this.scaleOffsetX *= x;
      this.scaleOffsetY *= y;
      this.getCtx().scale(x, y);
      !disablePlot && this.plot();
    },
    clear: function(){
      var size = this.getSize(),
          ox = this.translateOffsetX,
          oy = this.translateOffsetY,
          sx = this.scaleOffsetX,
          sy = this.scaleOffsetY;
      this.getCtx().clearRect((-size.width / 2 - ox) * 1/sx, 
                              (-size.height / 2 - oy) * 1/sy, 
                              size.width * 1/sx, size.height * 1/sy);
    },
    plot: function() {
      this.clear();
      this.viz.plot(this);
    }
  });
  //background canvases
  //TODO(nico): document this!
  Canvas.Background = {};
  Canvas.Background.Circles = new Class({
    initialize: function(viz, options) {
      this.viz = viz;
      this.config = $.merge({
        idSuffix: '-bkcanvas',
        levelDistance: 100,
        numberOfCircles: 6,
        CanvasStyles: {},
        offset: 0
      }, options);
    },
    resize: function(width, height, base) {
      this.plot(base);
    },
    plot: function(base) {
      var canvas = base.canvas,
          ctx = base.getCtx(),
          conf = this.config,
          styles = conf.CanvasStyles;
      //set canvas styles
      for(var s in styles) ctx[s] = styles[s];
      var n = conf.numberOfCircles,
          rho = conf.levelDistance;
      for(var i=1; i<=n; i++) {
        ctx.beginPath();
        ctx.arc(0, 0, rho * i, 0, 2 * Math.PI, false);
        ctx.stroke();
        ctx.closePath();
      }
      //TODO(nico): print labels too!
    }
  });
})();


/*
 * File: Polar.js
 * 
 * Defines the <Polar> class.
 *
 * Description:
 *
 * The <Polar> class, just like the <Complex> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.
 *
 * See also:
 *
 * <http://en.wikipedia.org/wiki/Polar_coordinates>
 *
*/

/*
   Class: Polar

   A multi purpose polar representation.

   Description:
 
   The <Polar> class, just like the <Complex> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.
 
   See also:
 
   <http://en.wikipedia.org/wiki/Polar_coordinates>
 
   Parameters:

      theta - An angle.
      rho - The norm.
*/

var Polar = function(theta, rho) {
  this.theta = theta || 0;
  this.rho = rho || 0;
};

$jit.Polar = Polar;

Polar.prototype = {
    /*
       Method: getc
    
       Returns a complex number.
    
       Parameters:

       simple - _optional_ If *true*, this method will return only an object holding x and y properties and not a <Complex> instance. Default's *false*.

      Returns:
    
          A complex number.
    */
    getc: function(simple) {
        return this.toComplex(simple);
    },

    /*
       Method: getp
    
       Returns a <Polar> representation.
    
       Returns:
    
          A variable in polar coordinates.
    */
    getp: function() {
        return this;
    },


    /*
       Method: set
    
       Sets a number.

       Parameters:

       v - A <Complex> or <Polar> instance.
    
    */
    set: function(v) {
        v = v.getp();
        this.theta = v.theta; this.rho = v.rho;
    },

    /*
       Method: setc
    
       Sets a <Complex> number.

       Parameters:

       x - A <Complex> number real part.
       y - A <Complex> number imaginary part.
    
    */
    setc: function(x, y) {
        this.rho = Math.sqrt(x * x + y * y);
        this.theta = Math.atan2(y, x);
        if(this.theta < 0) this.theta += Math.PI * 2;
    },

    /*
       Method: setp
    
       Sets a polar number.

       Parameters:

       theta - A <Polar> number angle property.
       rho - A <Polar> number rho property.
    
    */
    setp: function(theta, rho) {
        this.theta = theta; 
        this.rho = rho;
    },

    /*
       Method: clone
    
       Returns a copy of the current object.
    
       Returns:
    
          A copy of the real object.
    */
    clone: function() {
        return new Polar(this.theta, this.rho);
    },

    /*
       Method: toComplex
    
        Translates from polar to cartesian coordinates and returns a new <Complex> instance.
    
        Parameters:

        simple - _optional_ If *true* this method will only return an object with x and y properties (and not the whole <Complex> instance). Default's *false*.
 
        Returns:
    
          A new <Complex> instance.
    */
    toComplex: function(simple) {
        var x = Math.cos(this.theta) * this.rho;
        var y = Math.sin(this.theta) * this.rho;
        if(simple) return { 'x': x, 'y': y};
        return new Complex(x, y);
    },

    /*
       Method: add
    
        Adds two <Polar> instances.
    
       Parameters:

       polar - A <Polar> number.

       Returns:
    
          A new Polar instance.
    */
    add: function(polar) {
        return new Polar(this.theta + polar.theta, this.rho + polar.rho);
    },
    
    /*
       Method: scale
    
        Scales a polar norm.
    
        Parameters:

        number - A scale factor.
        
        Returns:
    
          A new Polar instance.
    */
    scale: function(number) {
        return new Polar(this.theta, this.rho * number);
    },
    
    /*
       Method: equals
    
       Comparison method.

       Returns *true* if the theta and rho properties are equal.

       Parameters:

       c - A <Polar> number.

       Returns:

       *true* if the theta and rho parameters for these objects are equal. *false* otherwise.
    */
    equals: function(c) {
        return this.theta == c.theta && this.rho == c.rho;
    },
    
    /*
       Method: $add
    
        Adds two <Polar> instances affecting the current object.
    
       Paramters:

       polar - A <Polar> instance.

       Returns:
    
          The changed object.
    */
    $add: function(polar) {
        this.theta = this.theta + polar.theta; this.rho += polar.rho;
        return this;
    },

    /*
       Method: $madd
    
        Adds two <Polar> instances affecting the current object. The resulting theta angle is modulo 2pi.
    
       Parameters:

       polar - A <Polar> instance.

       Returns:
    
          The changed object.
    */
    $madd: function(polar) {
        this.theta = (this.theta + polar.theta) % (Math.PI * 2); this.rho += polar.rho;
        return this;
    },

    
    /*
       Method: $scale
    
        Scales a polar instance affecting the object.
    
      Parameters:

      number - A scaling factor.

      Returns:
    
          The changed object.
    */
    $scale: function(number) {
        this.rho *= number;
        return this;
    },
    
    /*
      Method: isZero
   
      Returns *true* if the number is zero.
   
   */
    isZero: function () {
      var almostZero = 0.0001, abs = Math.abs;
      return abs(this.theta) < almostZero && abs(this.rho) < almostZero;
    },

    /*
       Method: interpolate
    
        Calculates a polar interpolation between two points at a given delta moment.

        Parameters:
      
        elem - A <Polar> instance.
        delta - A delta factor ranging [0, 1].
    
       Returns:
    
          A new <Polar> instance representing an interpolation between _this_ and _elem_
    */
    interpolate: function(elem, delta) {
        var pi = Math.PI, pi2 = pi * 2;
        var ch = function(t) {
            var a =  (t < 0)? (t % pi2) + pi2 : t % pi2;
            return a;
        };
        var tt = this.theta, et = elem.theta;
        var sum, diff = Math.abs(tt - et);
        if(diff == pi) {
          if(tt > et) {
            sum = ch((et + ((tt - pi2) - et) * delta)) ;
          } else {
            sum = ch((et - pi2 + (tt - (et)) * delta));
          }
        } else if(diff >= pi) {
          if(tt > et) {
            sum = ch((et + ((tt - pi2) - et) * delta)) ;
          } else {
            sum = ch((et - pi2 + (tt - (et - pi2)) * delta));
          }
        } else {  
          sum = ch((et + (tt - et) * delta)) ;
        }
        var r = (this.rho - elem.rho) * delta + elem.rho;
        return {
          'theta': sum,
          'rho': r
        };
    }
};


var $P = function(a, b) { return new Polar(a, b); };

Polar.KER = $P(0, 0);



/*
 * File: Complex.js
 * 
 * Defines the <Complex> class.
 *
 * Description:
 *
 * The <Complex> class, just like the <Polar> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.
 *
 * See also:
 *
 * <http://en.wikipedia.org/wiki/Complex_number>
 *
*/

/*
   Class: Complex
    
   A multi-purpose Complex Class with common methods.
 
   Description:
 
   The <Complex> class, just like the <Polar> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.
 
   See also:
 
   <http://en.wikipedia.org/wiki/Complex_number>

   Parameters:

   x - _optional_ A Complex number real part.
   y - _optional_ A Complex number imaginary part.
 
*/

var Complex = function(x, y) {
  this.x = x || 0;
  this.y = y || 0;
};

$jit.Complex = Complex;

Complex.prototype = {
    /*
       Method: getc
    
       Returns a complex number.
    
       Returns:
    
          A complex number.
    */
    getc: function() {
        return this;
    },

    /*
       Method: getp
    
       Returns a <Polar> representation of this number.
    
       Parameters:

       simple - _optional_ If *true*, this method will return only an object holding theta and rho properties and not a <Polar> instance. Default's *false*.

       Returns:
    
          A variable in <Polar> coordinates.
    */
    getp: function(simple) {
        return this.toPolar(simple);
    },


    /*
       Method: set
    
       Sets a number.

       Parameters:

       c - A <Complex> or <Polar> instance.
    
    */
    set: function(c) {
      c = c.getc(true);
      this.x = c.x; 
      this.y = c.y;
    },

    /*
       Method: setc
    
       Sets a complex number.

       Parameters:

       x - A <Complex> number Real part.
       y - A <Complex> number Imaginary part.
    
    */
    setc: function(x, y) {
        this.x = x; 
        this.y = y;
    },

    /*
       Method: setp
    
       Sets a polar number.

       Parameters:

       theta - A <Polar> number theta property.
       rho - A <Polar> number rho property.
    
    */
    setp: function(theta, rho) {
        this.x = Math.cos(theta) * rho;
        this.y = Math.sin(theta) * rho;
    },

    /*
       Method: clone
    
       Returns a copy of the current object.
    
       Returns:
    
          A copy of the real object.
    */
    clone: function() {
        return new Complex(this.x, this.y);
    },

    /*
       Method: toPolar
    
       Transforms cartesian to polar coordinates.
    
       Parameters:

       simple - _optional_ If *true* this method will only return an object with theta and rho properties (and not the whole <Polar> instance). Default's *false*.
       
       Returns:
    
          A new <Polar> instance.
    */
    
    toPolar: function(simple) {
        var rho = this.norm();
        var atan = Math.atan2(this.y, this.x);
        if(atan < 0) atan += Math.PI * 2;
        if(simple) return { 'theta': atan, 'rho': rho };
        return new Polar(atan, rho);
    },
    /*
       Method: norm
    
       Calculates a <Complex> number norm.
    
       Returns:
    
          A real number representing the complex norm.
    */
    norm: function () {
        return Math.sqrt(this.squaredNorm());
    },
    
    /*
       Method: squaredNorm
    
       Calculates a <Complex> number squared norm.
    
       Returns:
    
          A real number representing the complex squared norm.
    */
    squaredNorm: function () {
        return this.x*this.x + this.y*this.y;
    },

    /*
       Method: add
    
       Returns the result of adding two complex numbers.
       
       Does not alter the original object.

       Parameters:
    
          pos - A <Complex> instance.
    
       Returns:
    
         The result of adding two complex numbers.
    */
    add: function(pos) {
        return new Complex(this.x + pos.x, this.y + pos.y);
    },

    /*
       Method: prod
    
       Returns the result of multiplying two <Complex> numbers.
       
       Does not alter the original object.

       Parameters:
    
          pos - A <Complex> instance.
    
       Returns:
    
         The result of multiplying two complex numbers.
    */
    prod: function(pos) {
        return new Complex(this.x*pos.x - this.y*pos.y, this.y*pos.x + this.x*pos.y);
    },

    /*
       Method: conjugate
    
       Returns the conjugate of this <Complex> number.

       Does not alter the original object.

       Returns:
    
         The conjugate of this <Complex> number.
    */
    conjugate: function() {
        return new Complex(this.x, -this.y);
    },


    /*
       Method: scale
    
       Returns the result of scaling a <Complex> instance.
       
       Does not alter the original object.

       Parameters:
    
          factor - A scale factor.
    
       Returns:
    
         The result of scaling this complex to a factor.
    */
    scale: function(factor) {
        return new Complex(this.x * factor, this.y * factor);
    },

    /*
       Method: equals
    
       Comparison method.

       Returns *true* if both real and imaginary parts are equal.

       Parameters:

       c - A <Complex> instance.

       Returns:

       A boolean instance indicating if both <Complex> numbers are equal.
    */
    equals: function(c) {
        return this.x == c.x && this.y == c.y;
    },

    /*
       Method: $add
    
       Returns the result of adding two <Complex> numbers.
       
       Alters the original object.

       Parameters:
    
          pos - A <Complex> instance.
    
       Returns:
    
         The result of adding two complex numbers.
    */
    $add: function(pos) {
        this.x += pos.x; this.y += pos.y;
        return this;    
    },
    
    /*
       Method: $prod
    
       Returns the result of multiplying two <Complex> numbers.
       
       Alters the original object.

       Parameters:
    
          pos - A <Complex> instance.
    
       Returns:
    
         The result of multiplying two complex numbers.
    */
    $prod:function(pos) {
        var x = this.x, y = this.y;
        this.x = x*pos.x - y*pos.y;
        this.y = y*pos.x + x*pos.y;
        return this;
    },
    
    /*
       Method: $conjugate
    
       Returns the conjugate for this <Complex>.
       
       Alters the original object.

       Returns:
    
         The conjugate for this complex.
    */
    $conjugate: function() {
        this.y = -this.y;
        return this;
    },
    
    /*
       Method: $scale
    
       Returns the result of scaling a <Complex> instance.
       
       Alters the original object.

       Parameters:
    
          factor - A scale factor.
    
       Returns:
    
         The result of scaling this complex to a factor.
    */
    $scale: function(factor) {
        this.x *= factor; this.y *= factor;
        return this;
    },
    
    /*
       Method: $div
    
       Returns the division of two <Complex> numbers.
       
       Alters the original object.

       Parameters:
    
          pos - A <Complex> number.
    
       Returns:
    
         The result of scaling this complex to a factor.
    */
    $div: function(pos) {
        var x = this.x, y = this.y;
        var sq = pos.squaredNorm();
        this.x = x * pos.x + y * pos.y; this.y = y * pos.x - x * pos.y;
        return this.$scale(1 / sq);
    },

    /*
      Method: isZero
   
      Returns *true* if the number is zero.
   
   */
    isZero: function () {
      var almostZero = 0.0001, abs = Math.abs;
      return abs(this.x) < almostZero && abs(this.y) < almostZero;
    }
};

var $C = function(a, b) { return new Complex(a, b); };

Complex.KER = $C(0, 0);



/*
 * File: Graph.js
 *
*/

/*
 Class: Graph

 A Graph Class that provides useful manipulation functions. You can find more manipulation methods in the <Graph.Util> object.

 An instance of this class can be accessed by using the *graph* parameter of any tree or graph visualization.
 
 Example:

 (start code js)
   //create new visualization
   var viz = new $jit.Viz(options);
   //load JSON data
   viz.loadJSON(json);
   //access model
   viz.graph; //<Graph> instance
 (end code)
 
 Implements:
 
 The following <Graph.Util> methods are implemented in <Graph>
 
  - <Graph.Util.getNode>
  - <Graph.Util.eachNode>
  - <Graph.Util.computeLevels>
  - <Graph.Util.eachBFS>
  - <Graph.Util.clean>
  - <Graph.Util.getClosestNodeToPos>
  - <Graph.Util.getClosestNodeToOrigin>
 
*/  

$jit.Graph = new Class({

  initialize: function(opt, Node, Edge, Label) {
    var innerOptions = {
    'klass': Complex,
    'Node': {}
    };
    this.Node = Node;
    this.Edge = Edge;
    this.Label = Label;
    this.opt = $.merge(innerOptions, opt || {});
    this.nodes = {};
    this.edges = {};
    
    //add nodeList methods
    var that = this;
    this.nodeList = {};
    for(var p in Accessors) {
      that.nodeList[p] = (function(p) {
        return function() {
          var args = Array.prototype.slice.call(arguments);
          that.eachNode(function(n) {
            n[p].apply(n, args);
          });
        };
      })(p);
    }

 },

/*
     Method: getNode
    
     Returns a <Graph.Node> by *id*.

     Parameters:

     id - (string) A <Graph.Node> id.

     Example:

     (start code js)
       var node = graph.getNode('nodeId');
     (end code)
*/  
 getNode: function(id) {
    if(this.hasNode(id)) return this.nodes[id];
    return false;
 },

 /*
     Method: get
    
     An alias for <Graph.Util.getNode>. Returns a node by *id*.
    
     Parameters:
    
     id - (string) A <Graph.Node> id.
    
     Example:
    
     (start code js)
       var node = graph.get('nodeId');
     (end code)
*/  
  get: function(id) {
    return this.getNode(id);
  },

 /*
   Method: getByName
  
   Returns a <Graph.Node> by *name*.
  
   Parameters:
  
   name - (string) A <Graph.Node> name.
  
   Example:
  
   (start code js)
     var node = graph.getByName('someName');
   (end code)
  */  
  getByName: function(name) {
    for(var id in this.nodes) {
      var n = this.nodes[id];
      if(n.name == name) return n;
    }
    return false;
  },

/*
   Method: getAdjacence
  
   Returns a <Graph.Adjacence> object connecting nodes with ids *id* and *id2*.

   Parameters:

   id - (string) A <Graph.Node> id.
   id2 - (string) A <Graph.Node> id.
*/  
  getAdjacence: function (id, id2) {
    if(id in this.edges) {
      return this.edges[id][id2];
    }
    return false;
 },

    /*
     Method: addNode
    
     Adds a node.
     
     Parameters:
    
      obj - An object with the properties described below

      id - (string) A node id
      name - (string) A node's name
      data - (object) A node's data hash

    See also:
    <Graph.Node>

  */  
  addNode: function(obj) { 
   if(!this.nodes[obj.id]) {  
     var edges = this.edges[obj.id] = {};
     this.nodes[obj.id] = new Graph.Node($.extend({
        'id': obj.id,
        'name': obj.name,
        'data': $.merge(obj.data || {}, {}),
        'adjacencies': edges 
      }, this.opt.Node), 
      this.opt.klass, 
      this.Node, 
      this.Edge,
      this.Label);
    }
    return this.nodes[obj.id];
  },
  
    /*
     Method: addAdjacence
    
     Connects nodes specified by *obj* and *obj2*. If not found, nodes are created.
     
     Parameters:
    
      obj - (object) A <Graph.Node> object.
      obj2 - (object) Another <Graph.Node> object.
      data - (object) A data object. Used to store some extra information in the <Graph.Adjacence> object created.

    See also:

    <Graph.Node>, <Graph.Adjacence>
    */  
  addAdjacence: function (obj, obj2, data) {
    if(!this.hasNode(obj.id)) { this.addNode(obj); }
    if(!this.hasNode(obj2.id)) { this.addNode(obj2); }
    obj = this.nodes[obj.id]; obj2 = this.nodes[obj2.id];
    if(!obj.adjacentTo(obj2)) {
      var adjsObj = this.edges[obj.id] = this.edges[obj.id] || {};
      var adjsObj2 = this.edges[obj2.id] = this.edges[obj2.id] || {};
      adjsObj[obj2.id] = adjsObj2[obj.id] = new Graph.Adjacence(obj, obj2, data, this.Edge, this.Label);
      return adjsObj[obj2.id];
    }
    return this.edges[obj.id][obj2.id];
 },

    /*
     Method: removeNode
    
     Removes a <Graph.Node> matching the specified *id*.

     Parameters:

     id - (string) A node's id.

    */  
  removeNode: function(id) {
    if(this.hasNode(id)) {
      delete this.nodes[id];
      var adjs = this.edges[id];
      for(var to in adjs) {
        delete this.edges[to][id];
      }
      delete this.edges[id];
    }
  },
  
/*
     Method: removeAdjacence
    
     Removes a <Graph.Adjacence> matching *id1* and *id2*.

     Parameters:

     id1 - (string) A <Graph.Node> id.
     id2 - (string) A <Graph.Node> id.
*/  
  removeAdjacence: function(id1, id2) {
    delete this.edges[id1][id2];
    delete this.edges[id2][id1];
  },

   /*
     Method: hasNode
    
     Returns a boolean indicating if the node belongs to the <Graph> or not.
     
     Parameters:
    
        id - (string) Node id.
   */  
  hasNode: function(id) {
    return id in this.nodes;
  },
  
  /*
    Method: empty

    Empties the Graph

  */
  empty: function() { this.nodes = {}; this.edges = {};}

});

var Graph = $jit.Graph;

/*
 Object: Accessors
 
 Defines a set of methods for data, canvas and label styles manipulation implemented by <Graph.Node> and <Graph.Adjacence> instances.
 
 */
var Accessors;

(function () {
  var getDataInternal = function(prefix, prop, type, force, prefixConfig) {
    var data;
    type = type || 'current';
    prefix = "$" + (prefix ? prefix + "-" : "");

    if(type == 'current') {
      data = this.data;
    } else if(type == 'start') {
      data = this.startData;
    } else if(type == 'end') {
      data = this.endData;
    }

    var dollar = prefix + prop;

    if(force) {
      return data[dollar];
    }

    if(!this.Config.overridable)
      return prefixConfig[prop] || 0;

    return (dollar in data) ?
      data[dollar] : ((dollar in this.data) ? this.data[dollar] : (prefixConfig[prop] || 0));
  }

  var setDataInternal = function(prefix, prop, value, type) {
    type = type || 'current';
    prefix = '$' + (prefix ? prefix + '-' : '');

    var data;

    if(type == 'current') {
      data = this.data;
    } else if(type == 'start') {
      data = this.startData;
    } else if(type == 'end') {
      data = this.endData;
    }

    data[prefix + prop] = value;
  }

  var removeDataInternal = function(prefix, properties) {
    prefix = '$' + (prefix ? prefix + '-' : '');
    var that = this;
    $.each(properties, function(prop) {
      var pref = prefix + prop;
      delete that.data[pref];
      delete that.endData[pref];
      delete that.startData[pref];
    });
  }

  Accessors = {
    /*
    Method: getData

    Returns the specified data value property.
    This is useful for querying special/reserved <Graph.Node> data properties
    (i.e dollar prefixed properties).

    Parameters:

      prop  - (string) The name of the property. The dollar sign is not needed. For
              example *getData(width)* will return *data.$width*.
      type  - (string) The type of the data property queried. Default's "current". You can access *start* and *end* 
              data properties also. These properties are used when making animations.
      force - (boolean) Whether to obtain the true value of the property (equivalent to
              *data.$prop*) or to check for *node.overridable = true* first.

    Returns:

      The value of the dollar prefixed property or the global Node/Edge property
      value if *overridable=false*

    Example:
    (start code js)
     node.getData('width'); //will return node.data.$width if Node.overridable=true;
    (end code)
    */
    getData: function(prop, type, force) {
      return getDataInternal.call(this, "", prop, type, force, this.Config);
    },


    /*
    Method: setData

    Sets the current data property with some specific value.
    This method is only useful for reserved (dollar prefixed) properties.

    Parameters:

      prop  - (string) The name of the property. The dollar sign is not necessary. For
              example *setData(width)* will set *data.$width*.
      value - (mixed) The value to store.
      type  - (string) The type of the data property to store. Default's "current" but
              can also be "start" or "end".

    Example:
    
    (start code js)
     node.setData('width', 30);
    (end code)
    
    If we were to make an animation of a node/edge width then we could do
    
    (start code js)
      var node = viz.getNode('nodeId');
      //set start and end values
      node.setData('width', 10, 'start');
      node.setData('width', 30, 'end');
      //will animate nodes width property
      viz.fx.animate({
        modes: ['node-property:width'],
        duration: 1000
      });
    (end code)
    */
    setData: function(prop, value, type) {
      setDataInternal.call(this, "", prop, value, type);
    },

    /*
    Method: setDataset

    Convenience method to set multiple data values at once.
    
    Parameters:
    
    types - (array|string) A set of 'current', 'end' or 'start' values.
    obj - (object) A hash containing the names and values of the properties to be altered.

    Example:
    (start code js)
      node.setDataset(['current', 'end'], {
        'width': [100, 5],
        'color': ['#fff', '#ccc']
      });
      //...or also
      node.setDataset('end', {
        'width': 5,
        'color': '#ccc'
      });
    (end code)
    
    See also: 
    
    <Accessors.setData>
    
    */
    setDataset: function(types, obj) {
      types = $.splat(types);
      for(var attr in obj) {
        for(var i=0, val = $.splat(obj[attr]), l=types.length; i<l; i++) {
          this.setData(attr, val[i], types[i]);
        }
      }
    },
    
    /*
    Method: removeData

    Remove data properties.

    Parameters:

    One or more property names as arguments. The dollar sign is not needed.

    Example:
    (start code js)
    node.removeData('width'); //now the default width value is returned
    (end code)
    */
    removeData: function() {
      removeDataInternal.call(this, "", Array.prototype.slice.call(arguments));
    },

    /*
    Method: getCanvasStyle

    Returns the specified canvas style data value property. This is useful for
    querying special/reserved <Graph.Node> canvas style data properties (i.e.
    dollar prefixed properties that match with $canvas-<name of canvas style>).

    Parameters:

      prop  - (string) The name of the property. The dollar sign is not needed. For
              example *getCanvasStyle(shadowBlur)* will return *data[$canvas-shadowBlur]*.
      type  - (string) The type of the data property queried. Default's *current*. You can access *start* and *end* 
              data properties also.
              
    Example:
    (start code js)
      node.getCanvasStyle('shadowBlur');
    (end code)
    
    See also:
    
    <Accessors.getData>
    */
    getCanvasStyle: function(prop, type, force) {
      return getDataInternal.call(
          this, 'canvas', prop, type, force, this.Config.CanvasStyles);
    },

    /*
    Method: setCanvasStyle

    Sets the canvas style data property with some specific value.
    This method is only useful for reserved (dollar prefixed) properties.
    
    Parameters:
    
    prop - (string) Name of the property. Can be any canvas property like 'shadowBlur', 'shadowColor', 'strokeStyle', etc.
    value - (mixed) The value to set to the property.
    type - (string) Default's *current*. Whether to set *start*, *current* or *end* type properties.
    
    Example:
    
    (start code js)
     node.setCanvasStyle('shadowBlur', 30);
    (end code)
    
    If we were to make an animation of a node/edge shadowBlur canvas style then we could do
    
    (start code js)
      var node = viz.getNode('nodeId');
      //set start and end values
      node.setCanvasStyle('shadowBlur', 10, 'start');
      node.setCanvasStyle('shadowBlur', 30, 'end');
      //will animate nodes canvas style property for nodes
      viz.fx.animate({
        modes: ['node-style:shadowBlur'],
        duration: 1000
      });
    (end code)
    
    See also:
    
    <Accessors.setData>.
    */
    setCanvasStyle: function(prop, value, type) {
      setDataInternal.call(this, 'canvas', prop, value, type);
    },

    /*
    Method: setCanvasStyles

    Convenience method to set multiple styles at once.

    Parameters:
    
    types - (array|string) A set of 'current', 'end' or 'start' values.
    obj - (object) A hash containing the names and values of the properties to be altered.

    See also:
    
    <Accessors.setDataset>.
    */
    setCanvasStyles: function(types, obj) {
      types = $.splat(types);
      for(var attr in obj) {
        for(var i=0, val = $.splat(obj[attr]), l=types.length; i<l; i++) {
          this.setCanvasStyle(attr, val[i], types[i]);
        }
      }
    },

    /*
    Method: removeCanvasStyle

    Remove canvas style properties from data.

    Parameters:
    
    A variable number of canvas style strings.

    See also:
    
    <Accessors.removeData>.
    */
    removeCanvasStyle: function() {
      removeDataInternal.call(this, 'canvas', Array.prototype.slice.call(arguments));
    },

    /*
    Method: getLabelData

    Returns the specified label data value property. This is useful for
    querying special/reserved <Graph.Node> label options (i.e.
    dollar prefixed properties that match with $label-<name of label style>).

    Parameters:

      prop  - (string) The name of the property. The dollar sign prefix is not needed. For
              example *getLabelData(size)* will return *data[$label-size]*.
      type  - (string) The type of the data property queried. Default's *current*. You can access *start* and *end* 
              data properties also.
              
    See also:
    
    <Accessors.getData>.
    */
    getLabelData: function(prop, type, force) {
      return getDataInternal.call(
          this, 'label', prop, type, force, this.Label);
    },

    /*
    Method: setLabelData

    Sets the current label data with some specific value.
    This method is only useful for reserved (dollar prefixed) properties.

    Parameters:
    
    prop - (string) Name of the property. Can be any canvas property like 'shadowBlur', 'shadowColor', 'strokeStyle', etc.
    value - (mixed) The value to set to the property.
    type - (string) Default's *current*. Whether to set *start*, *current* or *end* type properties.
    
    Example:
    
    (start code js)
     node.setLabelData('size', 30);
    (end code)
    
    If we were to make an animation of a node label size then we could do
    
    (start code js)
      var node = viz.getNode('nodeId');
      //set start and end values
      node.setLabelData('size', 10, 'start');
      node.setLabelData('size', 30, 'end');
      //will animate nodes label size
      viz.fx.animate({
        modes: ['label-property:size'],
        duration: 1000
      });
    (end code)
    
    See also:
    
    <Accessors.setData>.
    */
    setLabelData: function(prop, value, type) {
      setDataInternal.call(this, 'label', prop, value, type);
    },

    /*
    Method: setLabelDataset

    Convenience function to set multiple label data at once.

    Parameters:
    
    types - (array|string) A set of 'current', 'end' or 'start' values.
    obj - (object) A hash containing the names and values of the properties to be altered.

    See also:
    
    <Accessors.setDataset>.
    */
    setLabelDataset: function(types, obj) {
      types = $.splat(types);
      for(var attr in obj) {
        for(var i=0, val = $.splat(obj[attr]), l=types.length; i<l; i++) {
          this.setLabelData(attr, val[i], types[i]);
        }
      }
    },

    /*
    Method: removeLabelData

    Remove label properties from data.
    
    Parameters:
    
    A variable number of label property strings.

    See also:
    
    <Accessors.removeData>.
    */
    removeLabelData: function() {
      removeDataInternal.call(this, 'label', Array.prototype.slice.call(arguments));
    }
  };
})();

/*
     Class: Graph.Node

     A <Graph> node.
     
     Implements:
     
     <Accessors> methods.
     
     The following <Graph.Util> methods are implemented by <Graph.Node>
     
    - <Graph.Util.eachAdjacency>
    - <Graph.Util.eachLevel>
    - <Graph.Util.eachSubgraph>
    - <Graph.Util.eachSubnode>
    - <Graph.Util.anySubnode>
    - <Graph.Util.getSubnodes>
    - <Graph.Util.getParents>
    - <Graph.Util.isDescendantOf>     
*/
Graph.Node = new Class({
    
  initialize: function(opt, klass, Node, Edge, Label) {
    var innerOptions = {
      'id': '',
      'name': '',
      'data': {},
      'startData': {},
      'endData': {},
      'adjacencies': {},

      'selected': false,
      'drawn': false,
      'exist': false,

      'angleSpan': {
        'begin': 0,
        'end' : 0
      },

      'pos': new klass,
      'startPos': new klass,
      'endPos': new klass
    };
    
    $.extend(this, $.extend(innerOptions, opt));
    this.Config = this.Node = Node;
    this.Edge = Edge;
    this.Label = Label;
  },

    /*
       Method: adjacentTo
    
       Indicates if the node is adjacent to the node specified by id

       Parameters:
    
          id - (string) A node id.
    
       Example:
       (start code js)
        node.adjacentTo('nodeId') == true;
       (end code)
    */
    adjacentTo: function(node) {
        return node.id in this.adjacencies;
    },

    /*
       Method: getAdjacency
    
       Returns a <Graph.Adjacence> object connecting the current <Graph.Node> and the node having *id* as id.

       Parameters:
    
          id - (string) A node id.
    */  
    getAdjacency: function(id) {
        return this.adjacencies[id];
    },

    /*
      Method: getPos
   
      Returns the position of the node.
  
      Parameters:
   
         type - (string) Default's *current*. Possible values are "start", "end" or "current".
   
      Returns:
   
        A <Complex> or <Polar> instance.
  
      Example:
      (start code js)
       var pos = node.getPos('end');
      (end code)
   */
   getPos: function(type) {
       type = type || "current";
       if(type == "current") {
         return this.pos;
       } else if(type == "end") {
         return this.endPos;
       } else if(type == "start") {
         return this.startPos;
       }
   },
   /*
     Method: setPos
  
     Sets the node's position.
  
     Parameters:
  
        value - (object) A <Complex> or <Polar> instance.
        type - (string) Default's *current*. Possible values are "start", "end" or "current".
  
     Example:
     (start code js)
      node.setPos(new $jit.Complex(0, 0), 'end');
     (end code)
  */
  setPos: function(value, type) {
      type = type || "current";
      var pos;
      if(type == "current") {
        pos = this.pos;
      } else if(type == "end") {
        pos = this.endPos;
      } else if(type == "start") {
        pos = this.startPos;
      }
      pos.set(value);
  }
});

Graph.Node.implement(Accessors);

/*
     Class: Graph.Adjacence

     A <Graph> adjacence (or edge) connecting two <Graph.Nodes>.
     
     Implements:
     
     <Accessors> methods.

     See also:

     <Graph>, <Graph.Node>

     Properties:
     
      nodeFrom - A <Graph.Node> connected by this edge.
      nodeTo - Another  <Graph.Node> connected by this edge.
      data - Node data property containing a hash (i.e {}) with custom options.
*/
Graph.Adjacence = new Class({
  
  initialize: function(nodeFrom, nodeTo, data, Edge, Label) {
    this.nodeFrom = nodeFrom;
    this.nodeTo = nodeTo;
    this.data = data || {};
    this.startData = {};
    this.endData = {};
    this.Config = this.Edge = Edge;
    this.Label = Label;
  }
});

Graph.Adjacence.implement(Accessors);

/*
   Object: Graph.Util

   <Graph> traversal and processing utility object.
   
   Note:
   
   For your convenience some of these methods have also been appended to <Graph> and <Graph.Node> classes.
*/
Graph.Util = {
    /*
       filter
    
       For internal use only. Provides a filtering function based on flags.
    */
    filter: function(param) {
        if(!param || !($.type(param) == 'string')) return function() { return true; };
        var props = param.split(" ");
        return function(elem) {
            for(var i=0; i<props.length; i++) { 
              if(elem[props[i]]) { 
                return false; 
              }
            }
            return true;
        };
    },
    /*
       Method: getNode
    
       Returns a <Graph.Node> by *id*.
       
       Also implemented by:
       
       <Graph>

       Parameters:

       graph - (object) A <Graph> instance.
       id - (string) A <Graph.Node> id.

       Example:

       (start code js)
         $jit.Graph.Util.getNode(graph, 'nodeid');
         //or...
         graph.getNode('nodeid');
       (end code)
    */
    getNode: function(graph, id) {
        return graph.nodes[id];
    },
    
    /*
       Method: eachNode
    
       Iterates over <Graph> nodes performing an *action*.
       
       Also implemented by:
       
       <Graph>.

       Parameters:

       graph - (object) A <Graph> instance.
       action - (function) A callback function having a <Graph.Node> as first formal parameter.

       Example:
       (start code js)
         $jit.Graph.Util.eachNode(graph, function(node) {
          alert(node.name);
         });
         //or...
         graph.eachNode(function(node) {
           alert(node.name);
         });
       (end code)
    */
    eachNode: function(graph, action, flags) {
        var filter = this.filter(flags);
        for(var i in graph.nodes) {
          if(filter(graph.nodes[i])) action(graph.nodes[i]);
        } 
    },
    
    /*
      Method: each
   
      Iterates over <Graph> nodes performing an *action*. It's an alias for <Graph.Util.eachNode>.
      
      Also implemented by:
      
      <Graph>.
  
      Parameters:
  
      graph - (object) A <Graph> instance.
      action - (function) A callback function having a <Graph.Node> as first formal parameter.
  
      Example:
      (start code js)
        $jit.Graph.Util.each(graph, function(node) {
         alert(node.name);
        });
        //or...
        graph.each(function(node) {
          alert(node.name);
        });
      (end code)
   */
   each: function(graph, action, flags) {
      this.eachNode(graph, action, flags); 
   },

 /*
       Method: eachAdjacency
    
       Iterates over <Graph.Node> adjacencies applying the *action* function.
       
       Also implemented by:
       
       <Graph.Node>.

       Parameters:

       node - (object) A <Graph.Node>.
       action - (function) A callback function having <Graph.Adjacence> as first formal parameter.

       Example:
       (start code js)
         $jit.Graph.Util.eachAdjacency(node, function(adj) {
          alert(adj.nodeTo.name);
         });
         //or...
         node.eachAdjacency(function(adj) {
           alert(adj.nodeTo.name);
         });
       (end code)
    */
    eachAdjacency: function(node, action, flags) {
        var adj = node.adjacencies, filter = this.filter(flags);
        for(var id in adj) {
          var a = adj[id];
          if(filter(a)) {
            if(a.nodeFrom != node) {
              var tmp = a.nodeFrom;
              a.nodeFrom = a.nodeTo;
              a.nodeTo = tmp;
            }
            action(a, id);
          }
        }
    },

     /*
       Method: computeLevels
    
       Performs a BFS traversal setting the correct depth for each node.
        
       Also implemented by:
       
       <Graph>.
       
       Note:
       
       The depth of each node can then be accessed by 
       >node._depth

       Parameters:

       graph - (object) A <Graph>.
       id - (string) A starting node id for the BFS traversal.
       startDepth - (optional|number) A minimum depth value. Default's 0.

    */
    computeLevels: function(graph, id, startDepth, flags) {
        startDepth = startDepth || 0;
        var filter = this.filter(flags);
        this.eachNode(graph, function(elem) {
            elem._flag = false;
            elem._depth = -1;
        }, flags);
        var root = graph.getNode(id);
        root._depth = startDepth;
        var queue = [root];
        while(queue.length != 0) {
            var node = queue.pop();
            node._flag = true;
            this.eachAdjacency(node, function(adj) {
                var n = adj.nodeTo;
                if(n._flag == false && filter(n)) {
                    if(n._depth < 0) n._depth = node._depth + 1 + startDepth;
                    queue.unshift(n);
                }
            }, flags);
        }
    },

    /*
       Method: eachBFS
    
       Performs a BFS traversal applying *action* to each <Graph.Node>.
       
       Also implemented by:
       
       <Graph>.

       Parameters:

       graph - (object) A <Graph>.
       id - (string) A starting node id for the BFS traversal.
       action - (function) A callback function having a <Graph.Node> as first formal parameter.

       Example:
       (start code js)
         $jit.Graph.Util.eachBFS(graph, 'mynodeid', function(node) {
          alert(node.name);
         });
         //or...
         graph.eachBFS('mynodeid', function(node) {
           alert(node.name);
         });
       (end code)
    */
    eachBFS: function(graph, id, action, flags) {
        var filter = this.filter(flags);
        this.clean(graph);
        var queue = [graph.getNode(id)];
        while(queue.length != 0) {
            var node = queue.pop();
            node._flag = true;
            action(node, node._depth);
            this.eachAdjacency(node, function(adj) {
                var n = adj.nodeTo;
                if(n._flag == false && filter(n)) {
                    n._flag = true;
                    queue.unshift(n);
                }
            }, flags);
        }
    },
    
    /*
       Method: eachLevel
    
       Iterates over a node's subgraph applying *action* to the nodes of relative depth between *levelBegin* and *levelEnd*.
       
       Also implemented by:
       
       <Graph.Node>.

       Parameters:
       
       node - (object) A <Graph.Node>.
       levelBegin - (number) A relative level value.
       levelEnd - (number) A relative level value.
       action - (function) A callback function having a <Graph.Node> as first formal parameter.

    */
    eachLevel: function(node, levelBegin, levelEnd, action, flags) {
        var d = node._depth, filter = this.filter(flags), that = this;
        levelEnd = levelEnd === false? Number.MAX_VALUE -d : levelEnd;
        (function loopLevel(node, levelBegin, levelEnd) {
            var d = node._depth;
            if(d >= levelBegin && d <= levelEnd && filter(node)) action(node, d);
            if(d < levelEnd) {
                that.eachAdjacency(node, function(adj) {
                    var n = adj.nodeTo;
                    if(n._depth > d) loopLevel(n, levelBegin, levelEnd);
                });
            }
        })(node, levelBegin + d, levelEnd + d);      
    },

    /*
       Method: eachSubgraph
    
       Iterates over a node's children recursively.
       
       Also implemented by:
       
       <Graph.Node>.

       Parameters:
       node - (object) A <Graph.Node>.
       action - (function) A callback function having a <Graph.Node> as first formal parameter.

       Example:
       (start code js)
         $jit.Graph.Util.eachSubgraph(node, function(node) {
           alert(node.name);
         });
         //or...
         node.eachSubgraph(function(node) {
           alert(node.name);
         });
       (end code)
    */
    eachSubgraph: function(node, action, flags) {
      this.eachLevel(node, 0, false, action, flags);
    },

    /*
       Method: eachSubnode
    
       Iterates over a node's children (without deeper recursion).
       
       Also implemented by:
       
       <Graph.Node>.
       
       Parameters:
       node - (object) A <Graph.Node>.
       action - (function) A callback function having a <Graph.Node> as first formal parameter.

       Example:
       (start code js)
         $jit.Graph.Util.eachSubnode(node, function(node) {
          alert(node.name);
         });
         //or...
         node.eachSubnode(function(node) {
           alert(node.name);
         });
       (end code)
    */
    eachSubnode: function(node, action, flags) {
        this.eachLevel(node, 1, 1, action, flags);
    },

    /*
       Method: anySubnode
    
       Returns *true* if any subnode matches the given condition.
       
       Also implemented by:
       
       <Graph.Node>.

       Parameters:
       node - (object) A <Graph.Node>.
       cond - (function) A callback function returning a Boolean instance. This function has as first formal parameter a <Graph.Node>.

       Example:
       (start code js)
         $jit.Graph.Util.anySubnode(node, function(node) { return node.name == "mynodename"; });
         //or...
         node.anySubnode(function(node) { return node.name == 'mynodename'; });
       (end code)
    */
    anySubnode: function(node, cond, flags) {
      var flag = false;
      cond = cond || $.lambda(true);
      var c = $.type(cond) == 'string'? function(n) { return n[cond]; } : cond;
      this.eachSubnode(node, function(elem) {
        if(c(elem)) flag = true;
      }, flags);
      return flag;
    },
  
    /*
       Method: getSubnodes
    
       Collects all subnodes for a specified node. 
       The *level* parameter filters nodes having relative depth of *level* from the root node. 
       
       Also implemented by:
       
       <Graph.Node>.

       Parameters:
       node - (object) A <Graph.Node>.
       level - (optional|number) Default's *0*. A starting relative depth for collecting nodes.

       Returns:
       An array of nodes.

    */
    getSubnodes: function(node, level, flags) {
        var ans = [], that = this;
        level = level || 0;
        var levelStart, levelEnd;
        if($.type(level) == 'array') {
            levelStart = level[0];
            levelEnd = level[1];
        } else {
            levelStart = level;
            levelEnd = Number.MAX_VALUE - node._depth;
        }
        this.eachLevel(node, levelStart, levelEnd, function(n) {
            ans.push(n);
        }, flags);
        return ans;
    },
  
  
    /*
       Method: getParents
    
       Returns an Array of <Graph.Nodes> which are parents of the given node.
       
       Also implemented by:
       
       <Graph.Node>.

       Parameters:
       node - (object) A <Graph.Node>.

       Returns:
       An Array of <Graph.Nodes>.

       Example:
       (start code js)
         var pars = $jit.Graph.Util.getParents(node);
         //or...
         var pars = node.getParents();
         
         if(pars.length > 0) {
           //do stuff with parents
         }
       (end code)
    */
    getParents: function(node) {
        var ans = [];
        this.eachAdjacency(node, function(adj) {
            var n = adj.nodeTo;
            if(n._depth < node._depth) ans.push(n);
        });
        return ans;
    },
    
    /*
    Method: isDescendantOf
 
    Returns a boolean indicating if some node is descendant of the node with the given id. 

    Also implemented by:
    
    <Graph.Node>.
    
    
    Parameters:
    node - (object) A <Graph.Node>.
    id - (string) A <Graph.Node> id.

    Example:
    (start code js)
      $jit.Graph.Util.isDescendantOf(node, "nodeid"); //true|false
      //or...
      node.isDescendantOf('nodeid');//true|false
    (end code)
 */
 isDescendantOf: function(node, id) {
    if(node.id == id) return true;
    var pars = this.getParents(node), ans = false;
    for ( var i = 0; !ans && i < pars.length; i++) {
    ans = ans || this.isDescendantOf(pars[i], id);
  }
    return ans;
 },

 /*
     Method: clean
  
     Cleans flags from nodes.

     Also implemented by:
     
     <Graph>.
     
     Parameters:
     graph - A <Graph> instance.
  */
  clean: function(graph) { this.eachNode(graph, function(elem) { elem._flag = false; }); },
  
  /* 
    Method: getClosestNodeToOrigin 
  
    Returns the closest node to the center of canvas.
  
    Also implemented by:
    
    <Graph>.
    
    Parameters:
   
     graph - (object) A <Graph> instance.
     prop - (optional|string) Default's 'current'. A <Graph.Node> position property. Possible properties are 'start', 'current' or 'end'.
  
  */
  getClosestNodeToOrigin: function(graph, prop, flags) {
   return this.getClosestNodeToPos(graph, Polar.KER, prop, flags);
  },
  
  /* 
    Method: getClosestNodeToPos
  
    Returns the closest node to the given position.
  
    Also implemented by:
    
    <Graph>.
    
    Parameters:
   
     graph - (object) A <Graph> instance.
     pos - (object) A <Complex> or <Polar> instance.
     prop - (optional|string) Default's *current*. A <Graph.Node> position property. Possible properties are 'start', 'current' or 'end'.
  
  */
  getClosestNodeToPos: function(graph, pos, prop, flags) {
   var node = null;
   prop = prop || 'current';
   pos = pos && pos.getc(true) || Complex.KER;
   var distance = function(a, b) {
     var d1 = a.x - b.x, d2 = a.y - b.y;
     return d1 * d1 + d2 * d2;
   };
   this.eachNode(graph, function(elem) {
     node = (node == null || distance(elem.getPos(prop).getc(true), pos) < distance(
         node.getPos(prop).getc(true), pos)) ? elem : node;
   }, flags);
   return node;
  } 
};

//Append graph methods to <Graph>
$.each(['get', 'getNode', 'each', 'eachNode', 'computeLevels', 'eachBFS', 'clean', 'getClosestNodeToPos', 'getClosestNodeToOrigin'], function(m) {
  Graph.prototype[m] = function() {
    return Graph.Util[m].apply(Graph.Util, [this].concat(Array.prototype.slice.call(arguments)));
  };
});

//Append node methods to <Graph.Node>
$.each(['eachAdjacency', 'eachLevel', 'eachSubgraph', 'eachSubnode', 'anySubnode', 'getSubnodes', 'getParents', 'isDescendantOf'], function(m) {
  Graph.Node.prototype[m] = function() {
    return Graph.Util[m].apply(Graph.Util, [this].concat(Array.prototype.slice.call(arguments)));
  };
});

/*
 * File: Graph.Op.js
 *
*/

/*
   Object: Graph.Op

   Perform <Graph> operations like adding/removing <Graph.Nodes> or <Graph.Adjacences>, 
   morphing a <Graph> into another <Graph>, contracting or expanding subtrees, etc.

*/
Graph.Op = {

    options: {
      type: 'nothing',
      duration: 2000,
      hideLabels: true,
      fps:30
    },
    
    initialize: function(viz) {
      this.viz = viz;
    },

    /*
       Method: removeNode
    
       Removes one or more <Graph.Nodes> from the visualization. 
       It can also perform several animations like fading sequentially, fading concurrently, iterating or replotting.

       Parameters:
    
        node - (string|array) The node's id. Can also be an array having many ids.
        opt - (object) Animation options. It's an object with optional properties described below
        type - (string) Default's *nothing*. Type of the animation. Can be "nothing", "replot", "fade:seq",  "fade:con" or "iter".
        duration - Described in <Options.Fx>.
        fps - Described in <Options.Fx>.
        transition - Described in <Options.Fx>.
        hideLabels - (boolean) Default's *true*. Hide labels during the animation.
   
      Example:
      (start code js)
        var viz = new $jit.Viz(options);
        viz.op.removeNode('nodeId', {
          type: 'fade:seq',
          duration: 1000,
          hideLabels: false,
          transition: $jit.Trans.Quart.easeOut
        });
        //or also
        viz.op.removeNode(['someId', 'otherId'], {
          type: 'fade:con',
          duration: 1500
        });
      (end code)
    */
  
    removeNode: function(node, opt) {
        var viz = this.viz;
        var options = $.merge(this.options, viz.controller, opt);
        var n = $.splat(node);
        var i, that, nodeObj;
        switch(options.type) {
            case 'nothing':
                for(i=0; i<n.length; i++) viz.graph.removeNode(n[i]);
                break;
            
            case 'replot':
                this.removeNode(n, { type: 'nothing' });
                viz.labels.clearLabels();
                viz.refresh(true);
                break;
            
            case 'fade:seq': case 'fade':
                that = this;
                //set alpha to 0 for nodes to remove.
                for(i=0; i<n.length; i++) {
                    nodeObj = viz.graph.getNode(n[i]);
                    nodeObj.setData('alpha', 0, 'end');
                }
                viz.fx.animate($.merge(options, {
                    modes: ['node-property:alpha'],
                    onComplete: function() {
                        that.removeNode(n, { type: 'nothing' });
                        viz.labels.clearLabels();
                        viz.reposition();
                        viz.fx.animate($.merge(options, {
                            modes: ['linear']
                        }));
                    }
                }));
                break;
            
            case 'fade:con':
                that = this;
                //set alpha to 0 for nodes to remove. Tag them for being ignored on computing positions.
                for(i=0; i<n.length; i++) {
                    nodeObj = viz.graph.getNode(n[i]);
                    nodeObj.setData('alpha', 0, 'end');
                    nodeObj.ignore = true;
                }
                viz.reposition();
                viz.fx.animate($.merge(options, {
                    modes: ['node-property:alpha', 'linear'],
                    onComplete: function() {
                        that.removeNode(n, { type: 'nothing' });
                        options.onComplete && options.onComplete();
                    }
                }));
                break;
            
            case 'iter':
                that = this;
                viz.fx.sequence({
                    condition: function() { return n.length != 0; },
                    step: function() { that.removeNode(n.shift(), { type: 'nothing' });  viz.labels.clearLabels(); },
                    onComplete: function() { options.onComplete && options.onComplete(); },
                    duration: Math.ceil(options.duration / n.length)
                });
                break;
                
            default: this.doError();
        }
    },
    
    /*
       Method: removeEdge
    
       Removes one or more <Graph.Adjacences> from the visualization. 
       It can also perform several animations like fading sequentially, fading concurrently, iterating or replotting.

       Parameters:
    
       vertex - (array) An array having two strings which are the ids of the nodes connected by this edge (i.e ['id1', 'id2']). Can also be a two dimensional array holding many edges (i.e [['id1', 'id2'], ['id3', 'id4'], ...]).
       opt - (object) Animation options. It's an object with optional properties described below
       type - (string) Default's *nothing*. Type of the animation. Can be "nothing", "replot", "fade:seq",  "fade:con" or "iter".
       duration - Described in <Options.Fx>.
       fps - Described in <Options.Fx>.
       transition - Described in <Options.Fx>.
       hideLabels - (boolean) Default's *true*. Hide labels during the animation.
   
      Example:
      (start code js)
        var viz = new $jit.Viz(options);
        viz.op.removeEdge(['nodeId', 'otherId'], {
          type: 'fade:seq',
          duration: 1000,
          hideLabels: false,
          transition: $jit.Trans.Quart.easeOut
        });
        //or also
        viz.op.removeEdge([['someId', 'otherId'], ['id3', 'id4']], {
          type: 'fade:con',
          duration: 1500
        });
      (end code)
    
    */
    removeEdge: function(vertex, opt) {
        var viz = this.viz;
        var options = $.merge(this.options, viz.controller, opt);
        var v = ($.type(vertex[0]) == 'string')? [vertex] : vertex;
        var i, that, adj;
        switch(options.type) {
            case 'nothing':
                for(i=0; i<v.length; i++)   viz.graph.removeAdjacence(v[i][0], v[i][1]);
                break;
            
            case 'replot':
                this.removeEdge(v, { type: 'nothing' });
                viz.refresh(true);
                break;
            
            case 'fade:seq': case 'fade':
                that = this;
                //set alpha to 0 for edges to remove.
                for(i=0; i<v.length; i++) {
                    adj = viz.graph.getAdjacence(v[i][0], v[i][1]);
                    if(adj) {
                        adj.setData('alpha', 0,'end');
                    }
                }
                viz.fx.animate($.merge(options, {
                    modes: ['edge-property:alpha'],
                    onComplete: function() {
                        that.removeEdge(v, { type: 'nothing' });
                        viz.reposition();
                        viz.fx.animate($.merge(options, {
                            modes: ['linear']
                        }));
                    }
                }));
                break;
            
            case 'fade:con':
                that = this;
                //set alpha to 0 for nodes to remove. Tag them for being ignored when computing positions.
                for(i=0; i<v.length; i++) {
                    adj = viz.graph.getAdjacence(v[i][0], v[i][1]);
                    if(adj) {
                        adj.setData('alpha',0 ,'end');
                        adj.ignore = true;
                    }
                }
                viz.reposition();
                viz.fx.animate($.merge(options, {
                    modes: ['edge-property:alpha', 'linear'],
                    onComplete: function() {
                        that.removeEdge(v, { type: 'nothing' });
                        options.onComplete && options.onComplete();
                    }
                }));
                break;
            
            case 'iter':
                that = this;
                viz.fx.sequence({
                    condition: function() { return v.length != 0; },
                    step: function() { that.removeEdge(v.shift(), { type: 'nothing' }); viz.labels.clearLabels(); },
                    onComplete: function() { options.onComplete(); },
                    duration: Math.ceil(options.duration / v.length)
                });
                break;
                
            default: this.doError();
        }
    },
    
    /*
       Method: sum
    
       Adds a new graph to the visualization. 
       The JSON graph (or tree) must at least have a common node with the current graph plotted by the visualization. 
       The resulting graph can be defined as follows <http://mathworld.wolfram.com/GraphSum.html>

       Parameters:
    
       json - (object) A json tree or graph structure. See also <Loader.loadJSON>.
       opt - (object) Animation options. It's an object with optional properties described below
       type - (string) Default's *nothing*. Type of the animation. Can be "nothing", "replot", "fade:seq",  "fade:con".
       duration - Described in <Options.Fx>.
       fps - Described in <Options.Fx>.
       transition - Described in <Options.Fx>.
       hideLabels - (boolean) Default's *true*. Hide labels during the animation.
   
      Example:
      (start code js)
        //...json contains a tree or graph structure...

        var viz = new $jit.Viz(options);
        viz.op.sum(json, {
          type: 'fade:seq',
          duration: 1000,
          hideLabels: false,
          transition: $jit.Trans.Quart.easeOut
        });
        //or also
        viz.op.sum(json, {
          type: 'fade:con',
          duration: 1500
        });
      (end code)
    
    */
    sum: function(json, opt) {
        var viz = this.viz;
        var options = $.merge(this.options, viz.controller, opt), root = viz.root;
        var graph;
        viz.root = opt.id || viz.root;
        switch(options.type) {
            case 'nothing':
                graph = viz.construct(json);
                graph.eachNode(function(elem) {
                    elem.eachAdjacency(function(adj) {
                        viz.graph.addAdjacence(adj.nodeFrom, adj.nodeTo, adj.data);
                    });
                });
                break;
            
            case 'replot':
                viz.refresh(true);
                this.sum(json, { type: 'nothing' });
                viz.refresh(true);
                break;
            
            case 'fade:seq': case 'fade': case 'fade:con':
                that = this;
                graph = viz.construct(json);

                //set alpha to 0 for nodes to add.
                var fadeEdges = this.preprocessSum(graph);
                var modes = !fadeEdges? ['node-property:alpha'] : ['node-property:alpha', 'edge-property:alpha'];
                viz.reposition();
                if(options.type != 'fade:con') {
                    viz.fx.animate($.merge(options, {
                        modes: ['linear'],
                        onComplete: function() {
                            viz.fx.animate($.merge(options, {
                                modes: modes,
                                onComplete: function() {
                                    options.onComplete();
                                }
                            }));
                        }
                    }));
                } else {
                    viz.graph.eachNode(function(elem) {
                        if (elem.id != root && elem.pos.isZero()) {
                          elem.pos.set(elem.endPos); 
                          elem.startPos.set(elem.endPos);
                        }
                    });
                    viz.fx.animate($.merge(options, {
                        modes: ['linear'].concat(modes)
                    }));
                }
                break;

            default: this.doError();
        }
    },
    
    /*
       Method: morph
    
       This method will transform the current visualized graph into the new JSON representation passed in the method. 
       The JSON object must at least have the root node in common with the current visualized graph.

       Parameters:
    
       json - (object) A json tree or graph structure. See also <Loader.loadJSON>.
       opt - (object) Animation options. It's an object with optional properties described below
       type - (string) Default's *nothing*. Type of the animation. Can be "nothing", "replot", "fade:con".
       duration - Described in <Options.Fx>.
       fps - Described in <Options.Fx>.
       transition - Described in <Options.Fx>.
       hideLabels - (boolean) Default's *true*. Hide labels during the animation.
       id - (string) The shared <Graph.Node> id between both graphs.
       
       extraModes - (optional|object) When morphing with an animation, dollar prefixed data parameters are added to 
                    *endData* and not *data* itself. This way you can animate dollar prefixed parameters during your morphing operation. 
                    For animating these extra-parameters you have to specify an object that has animation groups as keys and animation 
                    properties as values, just like specified in <Graph.Plot.animate>.
   
      Example:
      (start code js)
        //...json contains a tree or graph structure...

        var viz = new $jit.Viz(options);
        viz.op.morph(json, {
          type: 'fade',
          duration: 1000,
          hideLabels: false,
          transition: $jit.Trans.Quart.easeOut
        });
        //or also
        viz.op.morph(json, {
          type: 'fade',
          duration: 1500
        });
        //if the json data contains dollar prefixed params
        //like $width or $height these too can be animated
        viz.op.morph(json, {
          type: 'fade',
          duration: 1500
        }, {
          'node-property': ['width', 'height']
        });
      (end code)
    
    */
    morph: function(json, opt, extraModes) {
        extraModes = extraModes || {};
        var viz = this.viz;
        var options = $.merge(this.options, viz.controller, opt), root = viz.root;
        var graph;
        //TODO(nico) this hack makes morphing work with the Hypertree. 
        //Need to check if it has been solved and this can be removed.
        viz.root = opt.id || viz.root;
        switch(options.type) {
            case 'nothing':
                graph = viz.construct(json);
                graph.eachNode(function(elem) {
                  var nodeExists = viz.graph.hasNode(elem.id);  
                  elem.eachAdjacency(function(adj) {
                    var adjExists = !!viz.graph.getAdjacence(adj.nodeFrom.id, adj.nodeTo.id);
                    viz.graph.addAdjacence(adj.nodeFrom, adj.nodeTo, adj.data);
                    //Update data properties if the node existed
                    if(adjExists) {
                      var addedAdj = viz.graph.getAdjacence(adj.nodeFrom.id, adj.nodeTo.id);
                      for(var prop in (adj.data || {})) {
                        addedAdj.data[prop] = adj.data[prop];
                      }
                    }
                  });
                  //Update data properties if the node existed
                  if(nodeExists) {
                    var addedNode = viz.graph.getNode(elem.id);
                    for(var prop in (elem.data || {})) {
                      addedNode.data[prop] = elem.data[prop];
                    }
                  }
                });
                viz.graph.eachNode(function(elem) {
                    elem.eachAdjacency(function(adj) {
                        if(!graph.getAdjacence(adj.nodeFrom.id, adj.nodeTo.id)) {
                            viz.graph.removeAdjacence(adj.nodeFrom.id, adj.nodeTo.id);
                        }
                    });
                    if(!graph.hasNode(elem.id)) viz.graph.removeNode(elem.id);
                });
                
                break;
            
            case 'replot':
                viz.labels.clearLabels(true);
                this.morph(json, { type: 'nothing' });
                viz.refresh(true);
                viz.refresh(true);
                break;
                
            case 'fade:seq': case 'fade': case 'fade:con':
                that = this;
                graph = viz.construct(json);
                //preprocessing for nodes to delete.
                //get node property modes to interpolate
                var nodeModes = ('node-property' in extraModes) 
                  && $.map($.splat(extraModes['node-property']), 
                      function(n) { return '$' + n; });
                viz.graph.eachNode(function(elem) {
                  var graphNode = graph.getNode(elem.id);   
                  if(!graphNode) {
                      elem.setData('alpha', 1);
                      elem.setData('alpha', 1, 'start');
                      elem.setData('alpha', 0, 'end');
                      elem.ignore = true;
                    } else {
                      //Update node data information
                      var graphNodeData = graphNode.data;
                      for(var prop in graphNodeData) {
                        if(nodeModes && ($.indexOf(nodeModes, prop) > -1)) {
                          elem.endData[prop] = graphNodeData[prop];
                        } else {
                          elem.data[prop] = graphNodeData[prop];
                        }
                      }
                    }
                }); 
                viz.graph.eachNode(function(elem) {
                    if(elem.ignore) return;
                    elem.eachAdjacency(function(adj) {
                        if(adj.nodeFrom.ignore || adj.nodeTo.ignore) return;
                        var nodeFrom = graph.getNode(adj.nodeFrom.id);
                        var nodeTo = graph.getNode(adj.nodeTo.id);
                        if(!nodeFrom.adjacentTo(nodeTo)) {
                            var adj = viz.graph.getAdjacence(nodeFrom.id, nodeTo.id);
                            fadeEdges = true;
                            adj.setData('alpha', 1);
                            adj.setData('alpha', 1, 'start');
                            adj.setData('alpha', 0, 'end');
                        }
                    });
                }); 
                //preprocessing for adding nodes.
                var fadeEdges = this.preprocessSum(graph);

                var modes = !fadeEdges? ['node-property:alpha'] : 
                                        ['node-property:alpha', 
                                         'edge-property:alpha'];
                //Append extra node-property animations (if any)
                modes[0] = modes[0] + (('node-property' in extraModes)? 
                    (':' + $.splat(extraModes['node-property']).join(':')) : '');
                //Append extra edge-property animations (if any)
                modes[1] = (modes[1] || 'edge-property:alpha') + (('edge-property' in extraModes)? 
                    (':' + $.splat(extraModes['edge-property']).join(':')) : '');
                //Add label-property animations (if any)
                if('label-property' in extraModes) {
                  modes.push('label-property:' + $.splat(extraModes['label-property']).join(':'))
                }
                //only use reposition if its implemented.
                if (viz.reposition) {
                  viz.reposition();
                } else {
                  viz.compute('end');
                }
                viz.graph.eachNode(function(elem) {
                    if (elem.id != root && elem.pos.getp().equals(Polar.KER)) {
                      elem.pos.set(elem.endPos); elem.startPos.set(elem.endPos);
                    }
                });
                viz.fx.animate($.merge(options, {
                    modes: [extraModes.position || 'polar'].concat(modes),
                    onComplete: function() {
                        viz.graph.eachNode(function(elem) {
                            if(elem.ignore) viz.graph.removeNode(elem.id);
                        });
                        viz.graph.eachNode(function(elem) {
                            elem.eachAdjacency(function(adj) {
                                if(adj.ignore) viz.graph.removeAdjacence(adj.nodeFrom.id, adj.nodeTo.id);
                            });
                        });
                        options.onComplete();
                    }
                }));
                break;

            default:;
        }
    },

    
  /*
    Method: contract
 
    Collapses the subtree of the given node. The node will have a _collapsed=true_ property.
    
    Parameters:
 
    node - (object) A <Graph.Node>.
    opt - (object) An object containing options described below
    type - (string) Whether to 'replot' or 'animate' the contraction.
   
    There are also a number of Animation options. For more information see <Options.Fx>.

    Example:
    (start code js)
     var viz = new $jit.Viz(options);
     viz.op.contract(node, {
       type: 'animate',
       duration: 1000,
       hideLabels: true,
       transition: $jit.Trans.Quart.easeOut
     });
   (end code)
 
   */
    contract: function(node, opt) {
      var viz = this.viz;
      if(node.collapsed || !node.anySubnode($.lambda(true))) return;
      opt = $.merge(this.options, viz.config, opt || {}, {
        'modes': ['node-property:alpha:span', 'linear']
      });
      node.collapsed = true;
      (function subn(n) {
        n.eachSubnode(function(ch) {
          ch.ignore = true;
          ch.setData('alpha', 0, opt.type == 'animate'? 'end' : 'current');
          subn(ch);
        });
      })(node);
      if(opt.type == 'animate') {
        viz.compute('end');
        if(viz.rotated) {
          viz.rotate(viz.rotated, 'none', {
            'property':'end'
          });
        }
        (function subn(n) {
          n.eachSubnode(function(ch) {
            ch.setPos(node.getPos('end'), 'end');
            subn(ch);
          });
        })(node);
        viz.fx.animate(opt);
      } else if(opt.type == 'replot'){
        viz.refresh();
      }
    },
    
    /*
    Method: expand
 
    Expands the previously contracted subtree. The given node must have the _collapsed=true_ property.
    
    Parameters:
 
    node - (object) A <Graph.Node>.
    opt - (object) An object containing options described below
    type - (string) Whether to 'replot' or 'animate'.
     
    There are also a number of Animation options. For more information see <Options.Fx>.

    Example:
    (start code js)
      var viz = new $jit.Viz(options);
      viz.op.expand(node, {
        type: 'animate',
        duration: 1000,
        hideLabels: true,
        transition: $jit.Trans.Quart.easeOut
      });
    (end code)
 
   */
    expand: function(node, opt) {
      if(!('collapsed' in node)) return;
      var viz = this.viz;
      opt = $.merge(this.options, viz.config, opt || {}, {
        'modes': ['node-property:alpha:span', 'linear']
      });
      delete node.collapsed;
      (function subn(n) {
        n.eachSubnode(function(ch) {
          delete ch.ignore;
          ch.setData('alpha', 1, opt.type == 'animate'? 'end' : 'current');
          subn(ch);
        });
      })(node);
      if(opt.type == 'animate') {
        viz.compute('end');
        if(viz.rotated) {
          viz.rotate(viz.rotated, 'none', {
            'property':'end'
          });
        }
        viz.fx.animate(opt);
      } else if(opt.type == 'replot'){
        viz.refresh();
      }
    },

    preprocessSum: function(graph) {
        var viz = this.viz;
        graph.eachNode(function(elem) {
            if(!viz.graph.hasNode(elem.id)) {
                viz.graph.addNode(elem);
                var n = viz.graph.getNode(elem.id);
                n.setData('alpha', 0);
                n.setData('alpha', 0, 'start');
                n.setData('alpha', 1, 'end');
            }
        }); 
        var fadeEdges = false;
        graph.eachNode(function(elem) {
            elem.eachAdjacency(function(adj) {
                var nodeFrom = viz.graph.getNode(adj.nodeFrom.id);
                var nodeTo = viz.graph.getNode(adj.nodeTo.id);
                if(!nodeFrom.adjacentTo(nodeTo)) {
                    var adj = viz.graph.addAdjacence(nodeFrom, nodeTo, adj.data);
                    if(nodeFrom.startAlpha == nodeFrom.endAlpha 
                    && nodeTo.startAlpha == nodeTo.endAlpha) {
                        fadeEdges = true;
                        adj.setData('alpha', 0);
                        adj.setData('alpha', 0, 'start');
                        adj.setData('alpha', 1, 'end');
                    } 
                }
            });
        }); 
        return fadeEdges;
    }
};



/*
   File: Helpers.js
 
   Helpers are objects that contain rendering primitives (like rectangles, ellipses, etc), for plotting nodes and edges.
   Helpers also contain implementations of the *contains* method, a method returning a boolean indicating whether the mouse
   position is over the rendered shape.
   
   Helpers are very useful when implementing new NodeTypes, since you can access them through *this.nodeHelper* and 
   *this.edgeHelper* <Graph.Plot> properties, providing you with simple primitives and mouse-position check functions.
   
   Example:
   (start code js)
   //implement a new node type
   $jit.Viz.Plot.NodeTypes.implement({
     'customNodeType': {
       'render': function(node, canvas) {
         this.nodeHelper.circle.render ...
       },
       'contains': function(node, pos) {
         this.nodeHelper.circle.contains ...
       }
     }
   });
   //implement an edge type
   $jit.Viz.Plot.EdgeTypes.implement({
     'customNodeType': {
       'render': function(node, canvas) {
         this.edgeHelper.circle.render ...
       },
       //optional
       'contains': function(node, pos) {
         this.edgeHelper.circle.contains ...
       }
     }
   });
   (end code)

*/

/*
   Object: NodeHelper
   
   Contains rendering and other type of primitives for simple shapes.
 */
var NodeHelper = {
  'none': {
    'render': $.empty,
    'contains': $.lambda(false)
  },
  /*
   Object: NodeHelper.circle
   */
  'circle': {
    /*
     Method: render
     
     Renders a circle into the canvas.
     
     Parameters:
     
     type - (string) Possible options are 'fill' or 'stroke'.
     pos - (object) An *x*, *y* object with the position of the center of the circle.
     radius - (number) The radius of the circle to be rendered.
     canvas - (object) A <Canvas> instance.
     
     Example:
     (start code js)
     NodeHelper.circle.render('fill', { x: 10, y: 30 }, 30, viz.canvas);
     (end code)
     */
    'render': function(type, pos, radius, canvas){
      var ctx = canvas.getCtx();
      ctx.beginPath();
      ctx.arc(pos.x, pos.y, radius, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx[type]();
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    npos - (object) An *x*, *y* object with the <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    radius - (number) The radius of the rendered circle.
    
    Example:
    (start code js)
    NodeHelper.circle.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30); //true
    (end code)
    */
    'contains': function(npos, pos, radius){
      var diffx = npos.x - pos.x, 
          diffy = npos.y - pos.y, 
          diff = diffx * diffx + diffy * diffy;
      return diff <= radius * radius;
    }
  },
  /*
  Object: NodeHelper.ellipse
  */
  'ellipse': {
    /*
    Method: render
    
    Renders an ellipse into the canvas.
    
    Parameters:
    
    type - (string) Possible options are 'fill' or 'stroke'.
    pos - (object) An *x*, *y* object with the position of the center of the ellipse.
    width - (number) The width of the ellipse.
    height - (number) The height of the ellipse.
    canvas - (object) A <Canvas> instance.
    
    Example:
    (start code js)
    NodeHelper.ellipse.render('fill', { x: 10, y: 30 }, 30, 40, viz.canvas);
    (end code)
    */
    'render': function(type, pos, width, height, canvas){
      var ctx = canvas.getCtx(),
          scalex = 1,
          scaley = 1,
          scaleposx = 1,
          scaleposy = 1,
          radius = 0;

      if (width > height) {
          radius = width / 2;
          scaley = height / width;
          scaleposy = width / height;
      } else {
          radius = height / 2;
          scalex = width / height;
          scaleposx = height / width;
      }

      ctx.save();
      ctx.scale(scalex, scaley);
      ctx.beginPath();
      ctx.arc(pos.x * scaleposx, pos.y * scaleposy, radius, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx[type]();
      ctx.restore();
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    npos - (object) An *x*, *y* object with the <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    width - (number) The width of the rendered ellipse.
    height - (number) The height of the rendered ellipse.
    
    Example:
    (start code js)
    NodeHelper.ellipse.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30, 40);
    (end code)
    */
    'contains': function(npos, pos, width, height){
      var radius = 0,
          scalex = 1,
          scaley = 1,
          diffx = 0,
          diffy = 0,
          diff = 0;

      if (width > height) {
	      radius = width / 2;
	      scaley = height / width;
      } else {
          radius = height / 2;
          scalex = width / height;
      }

      diffx = (npos.x - pos.x) * (1 / scalex);
      diffy = (npos.y - pos.y) * (1 / scaley);
      diff = diffx * diffx + diffy * diffy;
      return diff <= radius * radius;
    }
  },
  /*
  Object: NodeHelper.square
  */
  'square': {
    /*
    Method: render
    
    Renders a square into the canvas.
    
    Parameters:
    
    type - (string) Possible options are 'fill' or 'stroke'.
    pos - (object) An *x*, *y* object with the position of the center of the square.
    dim - (number) The radius (or half-diameter) of the square.
    canvas - (object) A <Canvas> instance.
    
    Example:
    (start code js)
    NodeHelper.square.render('stroke', { x: 10, y: 30 }, 40, viz.canvas);
    (end code)
    */
    'render': function(type, pos, dim, canvas){
      canvas.getCtx()[type + "Rect"](pos.x - dim, pos.y - dim, 2*dim, 2*dim);
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    npos - (object) An *x*, *y* object with the <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    dim - (number) The radius (or half-diameter) of the square.
    
    Example:
    (start code js)
    NodeHelper.square.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30);
    (end code)
    */
    'contains': function(npos, pos, dim){
      return Math.abs(pos.x - npos.x) <= dim && Math.abs(pos.y - npos.y) <= dim;
    }
  },
  /*
  Object: NodeHelper.rectangle
  */
  'rectangle': {
    /*
    Method: render
    
    Renders a rectangle into the canvas.
    
    Parameters:
    
    type - (string) Possible options are 'fill' or 'stroke'.
    pos - (object) An *x*, *y* object with the position of the center of the rectangle.
    width - (number) The width of the rectangle.
    height - (number) The height of the rectangle.
    canvas - (object) A <Canvas> instance.
    
    Example:
    (start code js)
    NodeHelper.rectangle.render('fill', { x: 10, y: 30 }, 30, 40, viz.canvas);
    (end code)
    */
    'render': function(type, pos, width, height, canvas){
      canvas.getCtx()[type + "Rect"](pos.x - width / 2, pos.y - height / 2, 
                                      width, height);
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    npos - (object) An *x*, *y* object with the <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    width - (number) The width of the rendered rectangle.
    height - (number) The height of the rendered rectangle.
    
    Example:
    (start code js)
    NodeHelper.rectangle.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30, 40);
    (end code)
    */
    'contains': function(npos, pos, width, height){
      return Math.abs(pos.x - npos.x) <= width / 2
          && Math.abs(pos.y - npos.y) <= height / 2;
    }
  },
  /*
  Object: NodeHelper.triangle
  */
  'triangle': {
    /*
    Method: render
    
    Renders a triangle into the canvas.
    
    Parameters:
    
    type - (string) Possible options are 'fill' or 'stroke'.
    pos - (object) An *x*, *y* object with the position of the center of the triangle.
    dim - (number) Half the base and half the height of the triangle.
    canvas - (object) A <Canvas> instance.
    
    Example:
    (start code js)
    NodeHelper.triangle.render('stroke', { x: 10, y: 30 }, 40, viz.canvas);
    (end code)
    */
    'render': function(type, pos, dim, canvas){
      var ctx = canvas.getCtx(), 
          c1x = pos.x, 
          c1y = pos.y - dim, 
          c2x = c1x - dim, 
          c2y = pos.y + dim, 
          c3x = c1x + dim, 
          c3y = c2y;
      ctx.beginPath();
      ctx.moveTo(c1x, c1y);
      ctx.lineTo(c2x, c2y);
      ctx.lineTo(c3x, c3y);
      ctx.closePath();
      ctx[type]();
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    npos - (object) An *x*, *y* object with the <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    dim - (number) Half the base and half the height of the triangle.
    
    Example:
    (start code js)
    NodeHelper.triangle.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30);
    (end code)
    */
    'contains': function(npos, pos, dim) {
      return NodeHelper.circle.contains(npos, pos, dim);
    }
  },
  /*
  Object: NodeHelper.star
  */
  'star': {
    /*
    Method: render
    
    Renders a star (concave decagon) into the canvas.
    
    Parameters:
    
    type - (string) Possible options are 'fill' or 'stroke'.
    pos - (object) An *x*, *y* object with the position of the center of the star.
    dim - (number) The length of a side of a concave decagon.
    canvas - (object) A <Canvas> instance.
    
    Example:
    (start code js)
    NodeHelper.star.render('stroke', { x: 10, y: 30 }, 40, viz.canvas);
    (end code)
    */
    'render': function(type, pos, dim, canvas){
      var ctx = canvas.getCtx(), 
          pi5 = Math.PI / 5;
      ctx.save();
      ctx.translate(pos.x, pos.y);
      ctx.beginPath();
      ctx.moveTo(dim, 0);
      for (var i = 0; i < 9; i++) {
        ctx.rotate(pi5);
        if (i % 2 == 0) {
          ctx.lineTo((dim / 0.525731) * 0.200811, 0);
        } else {
          ctx.lineTo(dim, 0);
        }
      }
      ctx.closePath();
      ctx[type]();
      ctx.restore();
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    npos - (object) An *x*, *y* object with the <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    dim - (number) The length of a side of a concave decagon.
    
    Example:
    (start code js)
    NodeHelper.star.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30);
    (end code)
    */
    'contains': function(npos, pos, dim) {
      return NodeHelper.circle.contains(npos, pos, dim);
    }
  }
};

/*
  Object: EdgeHelper
  
  Contains rendering primitives for simple edge shapes.
*/
var EdgeHelper = {
  /*
    Object: EdgeHelper.line
  */
  'line': {
      /*
      Method: render
      
      Renders a line into the canvas.
      
      Parameters:
      
      from - (object) An *x*, *y* object with the starting position of the line.
      to - (object) An *x*, *y* object with the ending position of the line.
      canvas - (object) A <Canvas> instance.
      
      Example:
      (start code js)
      EdgeHelper.line.render({ x: 10, y: 30 }, { x: 10, y: 50 }, viz.canvas);
      (end code)
      */
      'render': function(from, to, canvas){
        var ctx = canvas.getCtx();
        ctx.beginPath();
        ctx.moveTo(from.x, from.y);
        ctx.lineTo(to.x, to.y);
        ctx.stroke();
      },
      /*
      Method: contains
      
      Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
      
      Parameters:
      
      posFrom - (object) An *x*, *y* object with a <Graph.Node> position.
      posTo - (object) An *x*, *y* object with a <Graph.Node> position.
      pos - (object) An *x*, *y* object with the position to check.
      epsilon - (number) The dimension of the shape.
      
      Example:
      (start code js)
      EdgeHelper.line.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, { x: 15, y: 35 }, 30);
      (end code)
      */
      'contains': function(posFrom, posTo, pos, epsilon) {
        var min = Math.min, 
            max = Math.max,
            minPosX = min(posFrom.x, posTo.x),
            maxPosX = max(posFrom.x, posTo.x),
            minPosY = min(posFrom.y, posTo.y),
            maxPosY = max(posFrom.y, posTo.y);
        
        if(pos.x >= minPosX && pos.x <= maxPosX 
            && pos.y >= minPosY && pos.y <= maxPosY) {
          if(Math.abs(posTo.x - posFrom.x) <= epsilon) {
            return true;
          }
          var dist = (posTo.y - posFrom.y) / (posTo.x - posFrom.x) * (pos.x - posFrom.x) + posFrom.y;
          return Math.abs(dist - pos.y) <= epsilon;
        }
        return false;
      }
    },
  /*
    Object: EdgeHelper.arrow
  */
  'arrow': {
      /*
      Method: render
      
      Renders an arrow into the canvas.
      
      Parameters:
      
      from - (object) An *x*, *y* object with the starting position of the arrow.
      to - (object) An *x*, *y* object with the ending position of the arrow.
      dim - (number) The dimension of the arrow.
      swap - (boolean) Whether to set the arrow pointing to the starting position or the ending position.
      canvas - (object) A <Canvas> instance.
      
      Example:
      (start code js)
      EdgeHelper.arrow.render({ x: 10, y: 30 }, { x: 10, y: 50 }, 13, false, viz.canvas);
      (end code)
      */
    'render': function(from, to, dim, swap, canvas){
        var ctx = canvas.getCtx();
        // invert edge direction
        if (swap) {
          var tmp = from;
          from = to;
          to = tmp;
        }
        var vect = new Complex(to.x - from.x, to.y - from.y);
        vect.$scale(dim / vect.norm());
        var intermediatePoint = new Complex(to.x - vect.x, to.y - vect.y),
            normal = new Complex(-vect.y / 2, vect.x / 2),
            v1 = intermediatePoint.add(normal), 
            v2 = intermediatePoint.$add(normal.$scale(-1));
        
        ctx.beginPath();
        ctx.moveTo(from.x, from.y);
        ctx.lineTo(to.x, to.y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(v1.x, v1.y);
        ctx.lineTo(v2.x, v2.y);
        ctx.lineTo(to.x, to.y);
        ctx.closePath();
        ctx.fill();
    },
    /*
    Method: contains
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    posFrom - (object) An *x*, *y* object with a <Graph.Node> position.
    posTo - (object) An *x*, *y* object with a <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    epsilon - (number) The dimension of the shape.
    
    Example:
    (start code js)
    EdgeHelper.arrow.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, { x: 15, y: 35 }, 30);
    (end code)
    */
    'contains': function(posFrom, posTo, pos, epsilon) {
      return EdgeHelper.line.contains(posFrom, posTo, pos, epsilon);
    }
  },
  /*
    Object: EdgeHelper.hyperline
  */
  'hyperline': {
    /*
    Method: render
    
    Renders a hyperline into the canvas. A hyperline are the lines drawn for the <Hypertree> visualization.
    
    Parameters:
    
    from - (object) An *x*, *y* object with the starting position of the hyperline. *x* and *y* must belong to [0, 1).
    to - (object) An *x*, *y* object with the ending position of the hyperline. *x* and *y* must belong to [0, 1).
    r - (number) The scaling factor.
    canvas - (object) A <Canvas> instance.
    
    Example:
    (start code js)
    EdgeHelper.hyperline.render({ x: 10, y: 30 }, { x: 10, y: 50 }, 100, viz.canvas);
    (end code)
    */
    'render': function(from, to, r, canvas){
      var ctx = canvas.getCtx();  
      var centerOfCircle = computeArcThroughTwoPoints(from, to);
      if (centerOfCircle.a > 1000 || centerOfCircle.b > 1000
          || centerOfCircle.ratio < 0) {
        ctx.beginPath();
        ctx.moveTo(from.x * r, from.y * r);
        ctx.lineTo(to.x * r, to.y * r);
        ctx.stroke();
      } else {
        var angleBegin = Math.atan2(to.y - centerOfCircle.y, to.x
            - centerOfCircle.x);
        var angleEnd = Math.atan2(from.y - centerOfCircle.y, from.x
            - centerOfCircle.x);
        var sense = sense(angleBegin, angleEnd);
        ctx.beginPath();
        ctx.arc(centerOfCircle.x * r, centerOfCircle.y * r, centerOfCircle.ratio
            * r, angleBegin, angleEnd, sense);
        ctx.stroke();
      }
      /*      
        Calculates the arc parameters through two points.
        
        More information in <http://en.wikipedia.org/wiki/Poincar%C3%A9_disc_model#Analytic_geometry_constructions_in_the_hyperbolic_plane> 
      
        Parameters:
      
        p1 - A <Complex> instance.
        p2 - A <Complex> instance.
        scale - The Disk's diameter.
      
        Returns:
      
        An object containing some arc properties.
      */
      function computeArcThroughTwoPoints(p1, p2){
        var aDen = (p1.x * p2.y - p1.y * p2.x), bDen = aDen;
        var sq1 = p1.squaredNorm(), sq2 = p2.squaredNorm();
        // Fall back to a straight line
        if (aDen == 0)
          return {
            x: 0,
            y: 0,
            ratio: -1
          };
    
        var a = (p1.y * sq2 - p2.y * sq1 + p1.y - p2.y) / aDen;
        var b = (p2.x * sq1 - p1.x * sq2 + p2.x - p1.x) / bDen;
        var x = -a / 2;
        var y = -b / 2;
        var squaredRatio = (a * a + b * b) / 4 - 1;
        // Fall back to a straight line
        if (squaredRatio < 0)
          return {
            x: 0,
            y: 0,
            ratio: -1
          };
        var ratio = Math.sqrt(squaredRatio);
        var out = {
          x: x,
          y: y,
          ratio: ratio > 1000? -1 : ratio,
          a: a,
          b: b
        };
    
        return out;
      }
      /*      
        Sets angle direction to clockwise (true) or counterclockwise (false). 
         
        Parameters: 
      
           angleBegin - Starting angle for drawing the arc. 
           angleEnd - The HyperLine will be drawn from angleBegin to angleEnd. 
      
        Returns: 
      
           A Boolean instance describing the sense for drawing the HyperLine. 
      */
      function sense(angleBegin, angleEnd){
        return (angleBegin < angleEnd)? ((angleBegin + Math.PI > angleEnd)? false
            : true) : ((angleEnd + Math.PI > angleBegin)? true : false);
      }
    },
    /*
    Method: contains
    
    Not Implemented
    
    Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.
    
    Parameters:
    
    posFrom - (object) An *x*, *y* object with a <Graph.Node> position.
    posTo - (object) An *x*, *y* object with a <Graph.Node> position.
    pos - (object) An *x*, *y* object with the position to check.
    epsilon - (number) The dimension of the shape.
    
    Example:
    (start code js)
    EdgeHelper.hyperline.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, { x: 15, y: 35 }, 30);
    (end code)
    */
    'contains': $.lambda(false)
  }
};


/*
 * File: Graph.Plot.js
 */

/*
   Object: Graph.Plot

   <Graph> rendering and animation methods.
   
   Properties:
   
   nodeHelper - <NodeHelper> object.
   edgeHelper - <EdgeHelper> object.
*/
Graph.Plot = {
    //Default initializer
    initialize: function(viz, klass){
      this.viz = viz;
      this.config = viz.config;
      this.node = viz.config.Node;
      this.edge = viz.config.Edge;
      this.animation = new Animation;
      this.nodeTypes = new klass.Plot.NodeTypes;
      this.edgeTypes = new klass.Plot.EdgeTypes;
      this.labels = viz.labels;
   },

    //Add helpers
    nodeHelper: NodeHelper,
    edgeHelper: EdgeHelper,
    
    Interpolator: {
        //node/edge property parsers
        'map': {
          'border': 'color',
          'color': 'color',
          'width': 'number',
          'height': 'number',
          'dim': 'number',
          'alpha': 'number',
          'lineWidth': 'number',
          'angularWidth':'number',
          'span':'number',
          'valueArray':'array-number',
          'dimArray':'array-number'
          //'colorArray':'array-color'
        },
        
        //canvas specific parsers
        'canvas': {
          'globalAlpha': 'number',
          'fillStyle': 'color',
          'strokeStyle': 'color',
          'lineWidth': 'number',
          'shadowBlur': 'number',
          'shadowColor': 'color',
          'shadowOffsetX': 'number',
          'shadowOffsetY': 'number',
          'miterLimit': 'number'
        },
  
        //label parsers
        'label': {
          'size': 'number',
          'color': 'color'
        },
  
        //Number interpolator
        'compute': function(from, to, delta) {
          return from + (to - from) * delta;
        },
        
        //Position interpolators
        'moebius': function(elem, props, delta, vector) {
          var v = vector.scale(-delta);  
          if(v.norm() < 1) {
              var x = v.x, y = v.y;
              var ans = elem.startPos
                .getc().moebiusTransformation(v);
              elem.pos.setc(ans.x, ans.y);
              v.x = x; v.y = y;
            }           
        },

        'linear': function(elem, props, delta) {
            var from = elem.startPos.getc(true);
            var to = elem.endPos.getc(true);
            elem.pos.setc(this.compute(from.x, to.x, delta), 
                          this.compute(from.y, to.y, delta));
        },

        'polar': function(elem, props, delta) {
          var from = elem.startPos.getp(true);
          var to = elem.endPos.getp();
          var ans = to.interpolate(from, delta);
          elem.pos.setp(ans.theta, ans.rho);
        },
        
        //Graph's Node/Edge interpolators
        'number': function(elem, prop, delta, getter, setter) {
          var from = elem[getter](prop, 'start');
          var to = elem[getter](prop, 'end');
          elem[setter](prop, this.compute(from, to, delta));
        },

        'color': function(elem, prop, delta, getter, setter) {
          var from = $.hexToRgb(elem[getter](prop, 'start'));
          var to = $.hexToRgb(elem[getter](prop, 'end'));
          var comp = this.compute;
          var val = $.rgbToHex([parseInt(comp(from[0], to[0], delta)),
                                parseInt(comp(from[1], to[1], delta)),
                                parseInt(comp(from[2], to[2], delta))]);
          
          elem[setter](prop, val);
        },
        
        'array-number': function(elem, prop, delta, getter, setter) {
          var from = elem[getter](prop, 'start'),
              to = elem[getter](prop, 'end'),
              cur = [];
          for(var i=0, l=from.length; i<l; i++) {
            var fromi = from[i], toi = to[i];
            if(fromi.length) {
              for(var j=0, len=fromi.length, curi=[]; j<len; j++) {
                curi.push(this.compute(fromi[j], toi[j], delta));
              }
              cur.push(curi);
            } else {
              cur.push(this.compute(fromi, toi, delta));
            }
          }
          elem[setter](prop, cur);
        },
        
        'node': function(elem, props, delta, map, getter, setter) {
          map = this[map];
          if(props) {
            var len = props.length;
            for(var i=0; i<len; i++) {
              var pi = props[i];
              this[map[pi]](elem, pi, delta, getter, setter);
            }
          } else {
            for(var pi in map) {
              this[map[pi]](elem, pi, delta, getter, setter);
            }
          }
        },
        
        'edge': function(elem, props, delta, mapKey, getter, setter) {
            var adjs = elem.adjacencies;
            for(var id in adjs) this['node'](adjs[id], props, delta, mapKey, getter, setter);
        },
        
        'node-property': function(elem, props, delta) {
          this['node'](elem, props, delta, 'map', 'getData', 'setData');
        },
        
        'edge-property': function(elem, props, delta) {
          this['edge'](elem, props, delta, 'map', 'getData', 'setData');  
        },

        'label-property': function(elem, props, delta) {
          this['node'](elem, props, delta, 'label', 'getLabelData', 'setLabelData');
        },
        
        'node-style': function(elem, props, delta) {
          this['node'](elem, props, delta, 'canvas', 'getCanvasStyle', 'setCanvasStyle');
        },
        
        'edge-style': function(elem, props, delta) {
          this['edge'](elem, props, delta, 'canvas', 'getCanvasStyle', 'setCanvasStyle');  
        }
    },
    
  
    /*
       sequence
    
       Iteratively performs an action while refreshing the state of the visualization.

       Parameters:

       options - (object) An object containing some sequence options described below
       condition - (function) A function returning a boolean instance in order to stop iterations.
       step - (function) A function to execute on each step of the iteration.
       onComplete - (function) A function to execute when the sequence finishes.
       duration - (number) Duration (in milliseconds) of each step.

      Example:
       (start code js)
        var rg = new $jit.RGraph(options);
        var i = 0;
        rg.fx.sequence({
          condition: function() {
           return i == 10;
          },
          step: function() {
            alert(i++);
          },
          onComplete: function() {
           alert('done!');
          }
        });
       (end code)

    */
    sequence: function(options) {
        var that = this;
        options = $.merge({
          condition: $.lambda(false),
          step: $.empty,
          onComplete: $.empty,
          duration: 200
        }, options || {});

        var interval = setInterval(function() {
          if(options.condition()) {
            options.step();
          } else {
            clearInterval(interval);
            options.onComplete();
          }
          that.viz.refresh(true);
        }, options.duration);
    },
    
    /*
      prepare
 
      Prepare graph position and other attribute values before performing an Animation. 
      This method is used internally by the Toolkit.
      
      See also:
       
       <Animation>, <Graph.Plot.animate>

    */
    prepare: function(modes) {
      var graph = this.viz.graph,
          accessors = {
            'node-property': {
              'getter': 'getData',
              'setter': 'setData'
            },
            'edge-property': {
              'getter': 'getData',
              'setter': 'setData'
            },
            'node-style': {
              'getter': 'getCanvasStyle',
              'setter': 'setCanvasStyle'
            },
            'edge-style': {
              'getter': 'getCanvasStyle',
              'setter': 'setCanvasStyle'
            }
          };

      //parse modes
      var m = {};
      if($.type(modes) == 'array') {
        for(var i=0, len=modes.length; i < len; i++) {
          var elems = modes[i].split(':');
          m[elems.shift()] = elems;
        }
      } else {
        for(var p in modes) {
          if(p == 'position') {
            m[modes.position] = [];
          } else {
            m[p] = $.splat(modes[p]);
          }
        }
      }
      
      graph.eachNode(function(node) { 
        node.startPos.set(node.pos);
        $.each(['node-property', 'node-style'], function(p) {
          if(p in m) {
            var prop = m[p];
            for(var i=0, l=prop.length; i < l; i++) {
              node[accessors[p].setter](prop[i], node[accessors[p].getter](prop[i]), 'start');
            }
          }
        });
        $.each(['edge-property', 'edge-style'], function(p) {
          if(p in m) {
            var prop = m[p];
            node.eachAdjacency(function(adj) {
              for(var i=0, l=prop.length; i < l; i++) {
                adj[accessors[p].setter](prop[i], adj[accessors[p].getter](prop[i]), 'start');
              }
            });
          }
        });
      });
      return m;
    },
    
    /*
       Method: animate
    
       Animates a <Graph> by interpolating some <Graph.Node>, <Graph.Adjacence> or <Graph.Label> properties.

       Parameters:

       opt - (object) Animation options. The object properties are described below
       duration - (optional) Described in <Options.Fx>.
       fps - (optional) Described in <Options.Fx>.
       hideLabels - (optional|boolean) Whether to hide labels during the animation.
       modes - (required|object) An object with animation modes (described below).

       Animation modes:
       
       Animation modes are strings representing different node/edge and graph properties that you'd like to animate. 
       They are represented by an object that has as keys main categories of properties to animate and as values a list 
       of these specific properties. The properties are described below
       
       position - Describes the way nodes' positions must be interpolated. Possible values are 'linear', 'polar' or 'moebius'.
       node-property - Describes which Node properties will be interpolated. These properties can be any of the ones defined in <Options.Node>.
       edge-property - Describes which Edge properties will be interpolated. These properties can be any the ones defined in <Options.Edge>.
       label-property - Describes which Label properties will be interpolated. These properties can be any of the ones defined in <Options.Label> like color or size.
       node-style - Describes which Node Canvas Styles will be interpolated. These are specific canvas properties like fillStyle, strokeStyle, lineWidth, shadowBlur, shadowColor, shadowOffsetX, shadowOffsetY, etc.
       edge-style - Describes which Edge Canvas Styles will be interpolated. These are specific canvas properties like fillStyle, strokeStyle, lineWidth, shadowBlur, shadowColor, shadowOffsetX, shadowOffsetY, etc.

       Example:
       (start code js)
       var viz = new $jit.Viz(options);
       //...tweak some Data, CanvasStyles or LabelData properties...
       viz.fx.animate({
         modes: {
           'position': 'linear',
           'node-property': ['width', 'height'],
           'node-style': 'shadowColor',
           'label-property': 'size'
         },
         hideLabels: false
       });
       //...can also be written like this...
       viz.fx.animate({
         modes: ['linear',
                 'node-property:width:height',
                 'node-style:shadowColor',
                 'label-property:size'],
         hideLabels: false
       });
       (end code)
    */
    animate: function(opt, versor) {
      opt = $.merge(this.viz.config, opt || {});
      var that = this,
          viz = this.viz,
          graph  = viz.graph,
          interp = this.Interpolator,
          animation =  opt.type === 'nodefx'? this.nodeFxAnimation : this.animation;
      //prepare graph values
      var m = this.prepare(opt.modes);
      
      //animate
      if(opt.hideLabels) this.labels.hideLabels(true);
      animation.setOptions($.extend(opt, {
        $animating: false,
        compute: function(delta) {
          graph.eachNode(function(node) { 
            for(var p in m) {
              interp[p](node, m[p], delta, versor);
            }
          });
          that.plot(opt, this.$animating, delta);
          this.$animating = true;
        },
        complete: function() {
          if(opt.hideLabels) that.labels.hideLabels(false);
          that.plot(opt);
          opt.onComplete();
          //TODO(nico): This shouldn't be here!
          //opt.onAfterCompute();
        }       
      })).start();
    },
    
    /*
      nodeFx
   
      Apply animation to node properties like color, width, height, dim, etc.
  
      Parameters:
  
      options - Animation options. This object properties is described below
      elements - The Elements to be transformed. This is an object that has a properties
      
      (start code js)
      'elements': {
        //can also be an array of ids
        'id': 'id-of-node-to-transform',
        //properties to be modified. All properties are optional.
        'properties': {
          'color': '#ccc', //some color
          'width': 10, //some width
          'height': 10, //some height
          'dim': 20, //some dim
          'lineWidth': 10 //some line width
        } 
      }
      (end code)
      
      - _reposition_ Whether to recalculate positions and add a motion animation. 
      This might be used when changing _width_ or _height_ properties in a <Layouts.Tree> like layout. Default's *false*.
      
      - _onComplete_ A method that is called when the animation completes.
      
      ...and all other <Graph.Plot.animate> options like _duration_, _fps_, _transition_, etc.
  
      Example:
      (start code js)
       var rg = new RGraph(canvas, config); //can be also Hypertree or ST
       rg.fx.nodeFx({
         'elements': {
           'id':'mynodeid',
           'properties': {
             'color':'#ccf'
           },
           'transition': Trans.Quart.easeOut
         }
       });
      (end code)    
   */
   nodeFx: function(opt) {
     var viz = this.viz,
         graph  = viz.graph,
         animation = this.nodeFxAnimation,
         options = $.merge(this.viz.config, {
           'elements': {
             'id': false,
             'properties': {}
           },
           'reposition': false
         });
     opt = $.merge(options, opt || {}, {
       onBeforeCompute: $.empty,
       onAfterCompute: $.empty
     });
     //check if an animation is running
     animation.stopTimer();
     var props = opt.elements.properties;
     //set end values for nodes
     if(!opt.elements.id) {
       graph.eachNode(function(n) {
         for(var prop in props) {
           n.setData(prop, props[prop], 'end');
         }
       });
     } else {
       var ids = $.splat(opt.elements.id);
       $.each(ids, function(id) {
         var n = graph.getNode(id);
         if(n) {
           for(var prop in props) {
             n.setData(prop, props[prop], 'end');
           }
         }
       });
     }
     //get keys
     var propnames = [];
     for(var prop in props) propnames.push(prop);
     //add node properties modes
     var modes = ['node-property:' + propnames.join(':')];
     //set new node positions
     if(opt.reposition) {
       modes.push('linear');
       viz.compute('end');
     }
     //animate
     this.animate($.merge(opt, {
       modes: modes,
       type: 'nodefx'
     }));
   },

    
    /*
       Method: plot
    
       Plots a <Graph>.

       Parameters:

       opt - (optional) Plotting options. Most of them are described in <Options.Fx>.

       Example:

       (start code js)
       var viz = new $jit.Viz(options);
       viz.fx.plot(); 
       (end code)

    */
   plot: function(opt, animating) {
     var viz = this.viz, 
         aGraph = viz.graph, 
         canvas = viz.canvas, 
         id = viz.root, 
         that = this, 
         ctx = canvas.getCtx(), 
         min = Math.min,
         opt = opt || this.viz.controller;
     
     opt.clearCanvas && canvas.clear();
       
     var root = aGraph.getNode(id);
     if(!root) return;
     
     var T = !!root.visited;
     aGraph.eachNode(function(node) {
       var nodeAlpha = node.getData('alpha');
       node.eachAdjacency(function(adj) {
         var nodeTo = adj.nodeTo;
         if(!!nodeTo.visited === T && node.drawn && nodeTo.drawn) {
           !animating && opt.onBeforePlotLine(adj);
           that.plotLine(adj, canvas, animating);
           !animating && opt.onAfterPlotLine(adj);
         }
       });
       if(node.drawn) {
         !animating && opt.onBeforePlotNode(node);
         that.plotNode(node, canvas, animating);
         !animating && opt.onAfterPlotNode(node);
       }
       if(!that.labelsHidden && opt.withLabels) {
         if(node.drawn && nodeAlpha >= 0.95) {
           that.labels.plotLabel(canvas, node, opt);
         } else {
           that.labels.hideLabel(node, false);
         }
       }
       node.visited = !T;
     });
    },

  /*
      Plots a Subtree.
   */
   plotTree: function(node, opt, animating) {
       var that = this, 
       viz = this.viz, 
       canvas = viz.canvas,
       config = this.config,
       ctx = canvas.getCtx();
       var nodeAlpha = node.getData('alpha');
       node.eachSubnode(function(elem) {
         if(opt.plotSubtree(node, elem) && elem.exist && elem.drawn) {
             var adj = node.getAdjacency(elem.id);
             !animating && opt.onBeforePlotLine(adj);
             that.plotLine(adj, canvas, animating);
             !animating && opt.onAfterPlotLine(adj);
             that.plotTree(elem, opt, animating);
         }
       });
       if(node.drawn) {
           !animating && opt.onBeforePlotNode(node);
           this.plotNode(node, canvas, animating);
           !animating && opt.onAfterPlotNode(node);
           if(!opt.hideLabels && opt.withLabels && nodeAlpha >= 0.95) 
               this.labels.plotLabel(canvas, node, opt);
           else 
               this.labels.hideLabel(node, false);
       } else {
           this.labels.hideLabel(node, true);
       }
   },

  /*
       Method: plotNode
    
       Plots a <Graph.Node>.

       Parameters:
       
       node - (object) A <Graph.Node>.
       canvas - (object) A <Canvas> element.

    */
    plotNode: function(node, canvas, animating) {
        var f = node.getData('type'), 
            ctxObj = this.node.CanvasStyles;
        if(f != 'none') {
          var width = node.getData('lineWidth'),
              color = node.getData('color'),
              alpha = node.getData('alpha'),
              ctx = canvas.getCtx();
          ctx.save();
          ctx.lineWidth = width;
          ctx.fillStyle = ctx.strokeStyle = color;
          ctx.globalAlpha = alpha;
          
          for(var s in ctxObj) {
            ctx[s] = node.getCanvasStyle(s);
          }

          this.nodeTypes[f].render.call(this, node, canvas, animating);
          ctx.restore();
        }
    },
    
    /*
       Method: plotLine
    
       Plots a <Graph.Adjacence>.

       Parameters:

       adj - (object) A <Graph.Adjacence>.
       canvas - (object) A <Canvas> instance.

    */
    plotLine: function(adj, canvas, animating) {
      var f = adj.getData('type'),
          ctxObj = this.edge.CanvasStyles;
      if(f != 'none') {
        var width = adj.getData('lineWidth'),
            color = adj.getData('color'),
            ctx = canvas.getCtx(),
            nodeFrom = adj.nodeFrom,
            nodeTo = adj.nodeTo;
        
        ctx.save();
        ctx.lineWidth = width;
        ctx.fillStyle = ctx.strokeStyle = color;
        ctx.globalAlpha = Math.min(nodeFrom.getData('alpha'), 
            nodeTo.getData('alpha'), 
            adj.getData('alpha'));
        
        for(var s in ctxObj) {
          ctx[s] = adj.getCanvasStyle(s);
        }

        this.edgeTypes[f].render.call(this, adj, canvas, animating);
        ctx.restore();
      }
    }    
  
};

/*
  Object: Graph.Plot3D
  
  <Graph> 3D rendering and animation methods.
  
  Properties:
  
  nodeHelper - <NodeHelper> object.
  edgeHelper - <EdgeHelper> object.

*/
Graph.Plot3D = $.merge(Graph.Plot, {
  Interpolator: {
    'linear': function(elem, props, delta) {
      var from = elem.startPos.getc(true);
      var to = elem.endPos.getc(true);
      elem.pos.setc(this.compute(from.x, to.x, delta), 
                    this.compute(from.y, to.y, delta),
                    this.compute(from.z, to.z, delta));
    }
  },
  
  plotNode: function(node, canvas) {
    if(node.getData('type') == 'none') return;
    this.plotElement(node, canvas, {
      getAlpha: function() {
        return node.getData('alpha');
      }
    });
  },
  
  plotLine: function(adj, canvas) {
    if(adj.getData('type') == 'none') return;
    this.plotElement(adj, canvas, {
      getAlpha: function() {
        return Math.min(adj.nodeFrom.getData('alpha'),
                        adj.nodeTo.getData('alpha'),
                        adj.getData('alpha'));
      }
    });
  },
  
  plotElement: function(elem, canvas, opt) {
    var gl = canvas.getCtx(),
        viewMatrix = new Matrix4,
        lighting = canvas.config.Scene.Lighting,
        wcanvas = canvas.canvases[0],
        program = wcanvas.program,
        camera = wcanvas.camera;
    
    if(!elem.geometry) {
      elem.geometry = new O3D[elem.getData('type')];
    }
    elem.geometry.update(elem);
    if(!elem.webGLVertexBuffer) {
      var vertices = [],
          faces = [],
          normals = [],
          vertexIndex = 0,
          geom = elem.geometry;
      
      for(var i=0, vs=geom.vertices, fs=geom.faces, fsl=fs.length; i<fsl; i++) {
        var face = fs[i],
            v1 = vs[face.a],
            v2 = vs[face.b],
            v3 = vs[face.c],
            v4 = face.d? vs[face.d] : false,
            n = face.normal;
        
        vertices.push(v1.x, v1.y, v1.z);
        vertices.push(v2.x, v2.y, v2.z);
        vertices.push(v3.x, v3.y, v3.z);
        if(v4) vertices.push(v4.x, v4.y, v4.z);
            
        normals.push(n.x, n.y, n.z);
        normals.push(n.x, n.y, n.z);
        normals.push(n.x, n.y, n.z);
        if(v4) normals.push(n.x, n.y, n.z);
            
        faces.push(vertexIndex, vertexIndex +1, vertexIndex +2);
        if(v4) {
          faces.push(vertexIndex, vertexIndex +2, vertexIndex +3);
          vertexIndex += 4;
        } else {
          vertexIndex += 3;
        }
      }
      //create and store vertex data
      elem.webGLVertexBuffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLVertexBuffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
      //create and store faces index data
      elem.webGLFaceBuffer = gl.createBuffer();
      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elem.webGLFaceBuffer);
      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(faces), gl.STATIC_DRAW);
      elem.webGLFaceCount = faces.length;
      //calculate vertex normals and store them
      elem.webGLNormalBuffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLNormalBuffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normals), gl.STATIC_DRAW);
    }
    viewMatrix.multiply(camera.matrix, elem.geometry.matrix);
    //send matrix data
    gl.uniformMatrix4fv(program.viewMatrix, false, viewMatrix.flatten());
    gl.uniformMatrix4fv(program.projectionMatrix, false, camera.projectionMatrix.flatten());
    //send normal matrix for lighting
    var normalMatrix = Matrix4.makeInvert(viewMatrix);
    normalMatrix.$transpose();
    gl.uniformMatrix4fv(program.normalMatrix, false, normalMatrix.flatten());
    //send color data
    var color = $.hexToRgb(elem.getData('color'));
    color.push(opt.getAlpha());
    gl.uniform4f(program.color, color[0] / 255, color[1] / 255, color[2] / 255, color[3]);
    //send lighting data
    gl.uniform1i(program.enableLighting, lighting.enable);
    if(lighting.enable) {
      //set ambient light color
      if(lighting.ambient) {
        var acolor = lighting.ambient;
        gl.uniform3f(program.ambientColor, acolor[0], acolor[1], acolor[2]);
      }
      //set directional light
      if(lighting.directional) {
        var dir = lighting.directional,
            color = dir.color,
            pos = dir.direction,
            vd = new Vector3(pos.x, pos.y, pos.z).normalize().$scale(-1);
        gl.uniform3f(program.lightingDirection, vd.x, vd.y, vd.z);
        gl.uniform3f(program.directionalColor, color[0], color[1], color[2]);
      }
    }
    //send vertices data
    gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLVertexBuffer);
    gl.vertexAttribPointer(program.position, 3, gl.FLOAT, false, 0, 0);
    //send normals data
    gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLNormalBuffer);
    gl.vertexAttribPointer(program.normal, 3, gl.FLOAT, false, 0, 0);
    //draw!
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elem.webGLFaceBuffer );
    gl.drawElements(gl.TRIANGLES, elem.webGLFaceCount, gl.UNSIGNED_SHORT, 0);
  }
});


/*
 * File: Graph.Label.js
 *
*/

/*
   Object: Graph.Label

   An interface for plotting/hiding/showing labels.

   Description:

   This is a generic interface for plotting/hiding/showing labels.
   The <Graph.Label> interface is implemented in multiple ways to provide
   different label types.

   For example, the Graph.Label interface is implemented as <Graph.Label.HTML> to provide
   HTML label elements. Also we provide the <Graph.Label.SVG> interface for SVG type labels. 
   The <Graph.Label.Native> interface implements these methods with the native Canvas text rendering functions.
   
   All subclasses (<Graph.Label.HTML>, <Graph.Label.SVG> and <Graph.Label.Native>) implement the method plotLabel.
*/

Graph.Label = {};

/*
   Class: Graph.Label.Native

   Implements labels natively, using the Canvas text API.
*/
Graph.Label.Native = new Class({
    initialize: function(viz) {
      this.viz = viz;
    },

    /*
       Method: plotLabel

       Plots a label for a given node.

       Parameters:

       canvas - (object) A <Canvas> instance.
       node - (object) A <Graph.Node>.
       controller - (object) A configuration object.
       
       Example:
       
       (start code js)
       var viz = new $jit.Viz(options);
       var node = viz.graph.getNode('nodeId');
       viz.labels.plotLabel(viz.canvas, node, viz.config);
       (end code)
    */
    plotLabel: function(canvas, node, controller) {
      var ctx = canvas.getCtx();
      var pos = node.pos.getc(true);

      ctx.font = node.getLabelData('style') + ' ' + node.getLabelData('size') + 'px ' + node.getLabelData('family');
      ctx.textAlign = node.getLabelData('textAlign');
      ctx.fillStyle = ctx.strokeStyle = node.getLabelData('color');
      ctx.textBaseline = node.getLabelData('textBaseline');

      this.renderLabel(canvas, node, controller);
    },

    /*
       renderLabel

       Does the actual rendering of the label in the canvas. The default
       implementation renders the label close to the position of the node, this
       method should be overriden to position the labels differently.

       Parameters:

       canvas - A <Canvas> instance.
       node - A <Graph.Node>.
       controller - A configuration object. See also <Hypertree>, <RGraph>, <ST>.
    */
    renderLabel: function(canvas, node, controller) {
      var ctx = canvas.getCtx();
      var pos = node.pos.getc(true);
      ctx.fillText(node.name, pos.x, pos.y + node.getData("height") / 2);
    },

    hideLabel: $.empty,
    hideLabels: $.empty
});

/*
   Class: Graph.Label.DOM

   Abstract Class implementing some DOM label methods.

   Implemented by:

   <Graph.Label.HTML> and <Graph.Label.SVG>.

*/
Graph.Label.DOM = new Class({
    //A flag value indicating if node labels are being displayed or not.
    labelsHidden: false,
    //Label container
    labelContainer: false,
    //Label elements hash.
    labels: {},

    /*
       Method: getLabelContainer

       Lazy fetcher for the label container.

       Returns:

       The label container DOM element.

       Example:

      (start code js)
        var viz = new $jit.Viz(options);
        var labelContainer = viz.labels.getLabelContainer();
        alert(labelContainer.innerHTML);
      (end code)
    */
    getLabelContainer: function() {
      return this.labelContainer ?
        this.labelContainer :
        this.labelContainer = document.getElementById(this.viz.config.labelContainer);
    },

    /*
       Method: getLabel

       Lazy fetcher for the label element.

       Parameters:

       id - (string) The label id (which is also a <Graph.Node> id).

       Returns:

       The label element.

       Example:

      (start code js)
        var viz = new $jit.Viz(options);
        var label = viz.labels.getLabel('someid');
        alert(label.innerHTML);
      (end code)

    */
    getLabel: function(id) {
      return (id in this.labels && this.labels[id] != null) ?
        this.labels[id] :
        this.labels[id] = document.getElementById(id);
    },

    /*
       Method: hideLabels

       Hides all labels (by hiding the label container).

       Parameters:

       hide - (boolean) A boolean value indicating if the label container must be hidden or not.

       Example:
       (start code js)
        var viz = new $jit.Viz(options);
        rg.labels.hideLabels(true);
       (end code)

    */
    hideLabels: function (hide) {
      var container = this.getLabelContainer();
      if(hide)
        container.style.display = 'none';
      else
        container.style.display = '';
      this.labelsHidden = hide;
    },

    /*
       Method: clearLabels

       Clears the label container.

       Useful when using a new visualization with the same canvas element/widget.

       Parameters:

       force - (boolean) Forces deletion of all labels.

       Example:
       (start code js)
        var viz = new $jit.Viz(options);
        viz.labels.clearLabels();
        (end code)
    */
    clearLabels: function(force) {
      for(var id in this.labels) {
        if (force || !this.viz.graph.hasNode(id)) {
          this.disposeLabel(id);
          delete this.labels[id];
        }
      }
    },

    /*
       Method: disposeLabel

       Removes a label.

       Parameters:

       id - (string) A label id (which generally is also a <Graph.Node> id).

       Example:
       (start code js)
        var viz = new $jit.Viz(options);
        viz.labels.disposeLabel('labelid');
       (end code)
    */
    disposeLabel: function(id) {
      var elem = this.getLabel(id);
      if(elem && elem.parentNode) {
        elem.parentNode.removeChild(elem);
      }
    },

    /*
       Method: hideLabel

       Hides the corresponding <Graph.Node> label.

       Parameters:

       node - (object) A <Graph.Node>. Can also be an array of <Graph.Nodes>.
       show - (boolean) If *true*, nodes will be shown. Otherwise nodes will be hidden.

       Example:
       (start code js)
        var rg = new $jit.Viz(options);
        viz.labels.hideLabel(viz.graph.getNode('someid'), false);
       (end code)
    */
    hideLabel: function(node, show) {
      node = $.splat(node);
      var st = show ? "" : "none", lab, that = this;
      $.each(node, function(n) {
        var lab = that.getLabel(n.id);
        if (lab) {
          lab.style.display = st;
        }
      });
    },

    /*
       fitsInCanvas

       Returns _true_ or _false_ if the label for the node is contained in the canvas dom element or not.

       Parameters:

       pos - A <Complex> instance (I'm doing duck typing here so any object with _x_ and _y_ parameters will do).
       canvas - A <Canvas> instance.

       Returns:

       A boolean value specifying if the label is contained in the <Canvas> DOM element or not.

    */
    fitsInCanvas: function(pos, canvas) {
      var size = canvas.getSize();
      if(pos.x >= size.width || pos.x < 0
         || pos.y >= size.height || pos.y < 0) return false;
       return true;
    }
});

/*
   Class: Graph.Label.HTML

   Implements HTML labels.

   Extends:

   All <Graph.Label.DOM> methods.

*/
Graph.Label.HTML = new Class({
    Implements: Graph.Label.DOM,

    /*
       Method: plotLabel

       Plots a label for a given node.

       Parameters:

       canvas - (object) A <Canvas> instance.
       node - (object) A <Graph.Node>.
       controller - (object) A configuration object.
       
      Example:
       
       (start code js)
       var viz = new $jit.Viz(options);
       var node = viz.graph.getNode('nodeId');
       viz.labels.plotLabel(viz.canvas, node, viz.config);
       (end code)


    */
    plotLabel: function(canvas, node, controller) {
      var id = node.id, tag = this.getLabel(id);

      if(!tag && !(tag = document.getElementById(id))) {
        tag = document.createElement('div');
        var container = this.getLabelContainer();
        tag.id = id;
        tag.className = 'node';
        tag.style.position = 'absolute';
        controller.onCreateLabel(tag, node);
        container.appendChild(tag);
        this.labels[node.id] = tag;
      }

      this.placeLabel(tag, node, controller);
    }
});

/*
   Class: Graph.Label.SVG

   Implements SVG labels.

   Extends:

   All <Graph.Label.DOM> methods.
*/
Graph.Label.SVG = new Class({
    Implements: Graph.Label.DOM,

    /*
       Method: plotLabel

       Plots a label for a given node.

       Parameters:

       canvas - (object) A <Canvas> instance.
       node - (object) A <Graph.Node>.
       controller - (object) A configuration object.
       
       Example:
       
       (start code js)
       var viz = new $jit.Viz(options);
       var node = viz.graph.getNode('nodeId');
       viz.labels.plotLabel(viz.canvas, node, viz.config);
       (end code)


    */
    plotLabel: function(canvas, node, controller) {
      var id = node.id, tag = this.getLabel(id);
      if(!tag && !(tag = document.getElementById(id))) {
        var ns = 'http://www.w3.org/2000/svg';
          tag = document.createElementNS(ns, 'svg:text');
        var tspan = document.createElementNS(ns, 'svg:tspan');
        tag.appendChild(tspan);
        var container = this.getLabelContainer();
        tag.setAttribute('id', id);
        tag.setAttribute('class', 'node');
        container.appendChild(tag);
        controller.onCreateLabel(tag, node);
        this.labels[node.id] = tag;
      }
      this.placeLabel(tag, node, controller);
    }
});



Graph.Geom = new Class({

  initialize: function(viz) {
    this.viz = viz;
    this.config = viz.config;
    this.node = viz.config.Node;
    this.edge = viz.config.Edge;
  },
  /*
    Applies a translation to the tree.
  
    Parameters:
  
    pos - A <Complex> number specifying translation vector.
    prop - A <Graph.Node> position property ('pos', 'start' or 'end').
  
    Example:
  
    (start code js)
      st.geom.translate(new Complex(300, 100), 'end');
    (end code)
  */  
  translate: function(pos, prop) {
     prop = $.splat(prop);
     this.viz.graph.eachNode(function(elem) {
         $.each(prop, function(p) { elem.getPos(p).$add(pos); });
     });
  },
  /*
    Hides levels of the tree until it properly fits in canvas.
  */  
  setRightLevelToShow: function(node, canvas, callback) {
     var level = this.getRightLevelToShow(node, canvas), 
         fx = this.viz.labels,
         opt = $.merge({
           execShow:true,
           execHide:true,
           onHide: $.empty,
           onShow: $.empty
         }, callback || {});
     node.eachLevel(0, this.config.levelsToShow, function(n) {
         var d = n._depth - node._depth;
         if(d > level) {
             opt.onHide(n);
             if(opt.execHide) {
               n.drawn = false; 
               n.exist = false;
               fx.hideLabel(n, false);
             }
         } else {
             opt.onShow(n);
             if(opt.execShow) {
               n.exist = true;
             }
         }
     });
     node.drawn= true;
  },
  /*
    Returns the right level to show for the current tree in order to fit in canvas.
  */  
  getRightLevelToShow: function(node, canvas) {
     var config = this.config;
     var level = config.levelsToShow;
     var constrained = config.constrained;
     if(!constrained) return level;
     while(!this.treeFitsInCanvas(node, canvas, level) && level > 1) { level-- ; }
     return level;
  }
});

/*
 * File: Loader.js
 * 
 */

/*
   Object: Loader

   Provides methods for loading and serving JSON data.
*/
var Loader = {
     construct: function(json) {
        var isGraph = ($.type(json) == 'array');
        var ans = new Graph(this.graphOptions, this.config.Node, this.config.Edge, this.config.Label);
        if(!isGraph) 
            //make tree
            (function (ans, json) {
                ans.addNode(json);
                if(json.children) {
                  for(var i=0, ch = json.children; i<ch.length; i++) {
                    ans.addAdjacence(json, ch[i]);
                    arguments.callee(ans, ch[i]);
                  }
                }
            })(ans, json);
        else
            //make graph
            (function (ans, json) {
                var getNode = function(id) {
                  for(var i=0, l=json.length; i<l; i++) {
                    if(json[i].id == id) {
                      return json[i];
                    }
                  }
                  // The node was not defined in the JSON
                  // Let's create it
                  var newNode = {
                		"id" : id,
                		"name" : id
                	};
                  return ans.addNode(newNode);
                };

                for(var i=0, l=json.length; i<l; i++) {
                  ans.addNode(json[i]);
                  var adj = json[i].adjacencies;
                  if (adj) {
                    for(var j=0, lj=adj.length; j<lj; j++) {
                      var node = adj[j], data = {};
                      if(typeof adj[j] != 'string') {
                        data = $.merge(node.data, {});
                        node = node.nodeTo;
                      }
                      ans.addAdjacence(json[i], getNode(node), data);
                    }
                  }
                }
            })(ans, json);

        return ans;
    },

    /*
     Method: loadJSON
    
     Loads a JSON structure to the visualization. The JSON structure can be a JSON *tree* or *graph* structure.
     
      A JSON tree or graph structure consists of nodes, each having as properties
       
       id - (string) A unique identifier for the node
       name - (string) A node's name
       data - (object) The data optional property contains a hash (i.e {}) 
       where you can store all the information you want about this node.
        
      For JSON *Tree* structures, there's an extra optional property *children* of type Array which contains the node's children.
      
      Example:

      (start code js)
        var json = {  
          "id": "aUniqueIdentifier",  
          "name": "usually a nodes name",  
          "data": {
            "some key": "some value",
            "some other key": "some other value"
           },  
          "children": [ *other nodes or empty* ]  
        };  
      (end code)
        
        JSON *Graph* structures consist of an array of nodes, each specifying the nodes to which the current node is connected. 
        For JSON *Graph* structures, the *children* property is replaced by the *adjacencies* property.
        
        There are two types of *Graph* structures, *simple* and *extended* graph structures.
        
        For *simple* Graph structures, the adjacencies property contains an array of strings, each specifying the 
        id of the node connected to the main node.
        
        Example:
        
        (start code js)
        var json = [  
          {  
            "id": "aUniqueIdentifier",  
            "name": "usually a nodes name",  
            "data": {
              "some key": "some value",
              "some other key": "some other value"
             },  
            "adjacencies": ["anotherUniqueIdentifier", "yetAnotherUniqueIdentifier", 'etc']  
          },

          'other nodes go here...' 
        ];          
        (end code)
        
        For *extended Graph structures*, the adjacencies property contains an array of Adjacency objects that have as properties
        
        nodeTo - (string) The other node connected by this adjacency.
        data - (object) A data property, where we can store custom key/value information.
        
        Example:
        
        (start code js)
        var json = [  
          {  
            "id": "aUniqueIdentifier",  
            "name": "usually a nodes name",  
            "data": {
              "some key": "some value",
              "some other key": "some other value"
             },  
            "adjacencies": [  
            {  
              nodeTo:"aNodeId",  
              data: {} //put whatever you want here  
            },
            'other adjacencies go here...'  
          },

          'other nodes go here...' 
        ];          
        (end code)
       
       About the data property:
       
       As described before, you can store custom data in the *data* property of JSON *nodes* and *adjacencies*. 
       You can use almost any string as key for the data object. Some keys though are reserved by the toolkit, and 
       have special meanings. This is the case for keys starting with a dollar sign, for example, *$width*.
       
       For JSON *node* objects, adding dollar prefixed properties that match the names of the options defined in 
       <Options.Node> will override the general value for that option with that particular value. For this to work 
       however, you do have to set *overridable = true* in <Options.Node>.
       
       The same thing is true for JSON adjacencies. Dollar prefixed data properties will alter values set in <Options.Edge> 
       if <Options.Edge> has *overridable = true*.
       
       When loading JSON data into TreeMaps, the *data* property must contain a value for the *$area* key, 
       since this is the value which will be taken into account when creating the layout. 
       The same thing goes for the *$color* parameter.
       
       In JSON Nodes you can use also *$label-* prefixed properties to refer to <Options.Label> properties. For example, 
       *$label-size* will refer to <Options.Label> size property. Also, in JSON nodes and adjacencies you can set 
       canvas specific properties individually by using the *$canvas-* prefix. For example, *$canvas-shadowBlur* will refer 
       to the *shadowBlur* property.
       
       These properties can also be accessed after loading the JSON data from <Graph.Nodes> and <Graph.Adjacences> 
       by using <Accessors>. For more information take a look at the <Graph> and <Accessors> documentation.
       
       Finally, these properties can also be used to create advanced animations like with <Options.NodeStyles>. For more 
       information about creating animations please take a look at the <Graph.Plot> and <Graph.Plot.animate> documentation.
       
       loadJSON Parameters:
    
        json - A JSON Tree or Graph structure.
        i - For Graph structures only. Sets the indexed node as root for the visualization.

    */
    loadJSON: function(json, i) {
      this.json = json;
      //if they're canvas labels erase them.
      if(this.labels && this.labels.clearLabels) {
        this.labels.clearLabels(true);
      }
      this.graph = this.construct(json);
      if($.type(json) != 'array'){
        this.root = json.id;
      } else {
        this.root = json[i? i : 0].id;
      }
    },
    
    /*
      Method: toJSON
   
      Returns a JSON tree/graph structure from the visualization's <Graph>. 
      See <Loader.loadJSON> for the graph formats available.
      
      See also:
      
      <Loader.loadJSON>
      
      Parameters:
      
      type - (string) Default's "tree". The type of the JSON structure to be returned. 
      Possible options are "tree" or "graph".
    */    
    toJSON: function(type) {
      type = type || "tree";
      if(type == 'tree') {
        var ans = {};
        var rootNode = this.graph.getNode(this.root);
        var ans = (function recTree(node) {
          var ans = {};
          ans.id = node.id;
          ans.name = node.name;
          ans.data = node.data;
          var ch =[];
          node.eachSubnode(function(n) {
            ch.push(recTree(n));
          });
          ans.children = ch;
          return ans;
        })(rootNode);
        return ans;
      } else {
        var ans = [];
        var T = !!this.graph.getNode(this.root).visited;
        this.graph.eachNode(function(node) {
          var ansNode = {};
          ansNode.id = node.id;
          ansNode.name = node.name;
          ansNode.data = node.data;
          var adjs = [];
          node.eachAdjacency(function(adj) {
            var nodeTo = adj.nodeTo;
            if(!!nodeTo.visited === T) {
              var ansAdj = {};
              ansAdj.nodeTo = nodeTo.id;
              ansAdj.data = adj.data;
              adjs.push(ansAdj);
            }
          });
          ansNode.adjacencies = adjs;
          ans.push(ansNode);
          node.visited = !T;
        });
        return ans;
      }
    }
};



/*
 * File: Layouts.js
 * 
 * Implements base Tree and Graph layouts.
 *
 * Description:
 *
 * Implements base Tree and Graph layouts like Radial, Tree, etc.
 * 
 */

/*
 * Object: Layouts
 * 
 * Parent object for common layouts.
 *
 */
var Layouts = $jit.Layouts = {};


//Some util shared layout functions are defined here.
var NodeDim = {
  label: null,
  
  compute: function(graph, prop, opt) {
    this.initializeLabel(opt);
    var label = this.label, style = label.style;
    graph.eachNode(function(n) {
      var autoWidth  = n.getData('autoWidth'),
          autoHeight = n.getData('autoHeight');
      if(autoWidth || autoHeight) {
        //delete dimensions since these are
        //going to be overridden now.
        delete n.data.$width;
        delete n.data.$height;
        delete n.data.$dim;
        
        var width  = n.getData('width'),
            height = n.getData('height');
        //reset label dimensions
        style.width  = autoWidth? 'auto' : width + 'px';
        style.height = autoHeight? 'auto' : height + 'px';
        
        //TODO(nico) should let the user choose what to insert here.
        label.innerHTML = n.name;
        
        var offsetWidth  = label.offsetWidth,
            offsetHeight = label.offsetHeight;
        var type = n.getData('type');
        if($.indexOf(['circle', 'square', 'triangle', 'star'], type) === -1) {
          n.setData('width', offsetWidth);
          n.setData('height', offsetHeight);
        } else {
          var dim = offsetWidth > offsetHeight? offsetWidth : offsetHeight;
          n.setData('width', dim);
          n.setData('height', dim);
          n.setData('dim', dim); 
        }
      }
    });
  },
  
  initializeLabel: function(opt) {
    if(!this.label) {
      this.label = document.createElement('div');
      document.body.appendChild(this.label);
    }
    this.setLabelStyles(opt);
  },
  
  setLabelStyles: function(opt) {
    $.extend(this.label.style, {
      'visibility': 'hidden',
      'position': 'absolute',
      'width': 'auto',
      'height': 'auto'
    });
    this.label.className = 'jit-autoadjust-label';
  }
};


/*
 * Class: Layouts.Tree
 * 
 * Implements a Tree Layout.
 * 
 * Implemented By:
 * 
 * <ST>
 * 
 * Inspired by:
 * 
 * Drawing Trees (Andrew J. Kennedy) <http://research.microsoft.com/en-us/um/people/akenn/fun/drawingtrees.pdf>
 * 
 */
Layouts.Tree = (function() {
  //Layout functions
  var slice = Array.prototype.slice;

  /*
     Calculates the max width and height nodes for a tree level
  */  
  function getBoundaries(graph, config, level, orn, prop) {
    var dim = config.Node;
    var multitree = config.multitree;
    if (dim.overridable) {
      var w = -1, h = -1;
      graph.eachNode(function(n) {
        if (n._depth == level
            && (!multitree || ('$orn' in n.data) && n.data.$orn == orn)) {
          var dw = n.getData('width', prop);
          var dh = n.getData('height', prop);
          w = (w < dw) ? dw : w;
          h = (h < dh) ? dh : h;
        }
      });
      return {
        'width' : w < 0 ? dim.width : w,
        'height' : h < 0 ? dim.height : h
      };
    } else {
      return dim;
    }
  }


  function movetree(node, prop, val, orn) {
    var p = (orn == "left" || orn == "right") ? "y" : "x";
    node.getPos(prop)[p] += val;
  }


  function moveextent(extent, val) {
    var ans = [];
    $.each(extent, function(elem) {
      elem = slice.call(elem);
      elem[0] += val;
      elem[1] += val;
      ans.push(elem);
    });
    return ans;
  }


  function merge(ps, qs) {
    if (ps.length == 0)
      return qs;
    if (qs.length == 0)
      return ps;
    var p = ps.shift(), q = qs.shift();
    return [ [ p[0], q[1] ] ].concat(merge(ps, qs));
  }


  function mergelist(ls, def) {
    def = def || [];
    if (ls.length == 0)
      return def;
    var ps = ls.pop();
    return mergelist(ls, merge(ps, def));
  }


  function fit(ext1, ext2, subtreeOffset, siblingOffset, i) {
    if (ext1.length <= i || ext2.length <= i)
      return 0;

    var p = ext1[i][1], q = ext2[i][0];
    return Math.max(fit(ext1, ext2, subtreeOffset, siblingOffset, ++i)
        + subtreeOffset, p - q + siblingOffset);
  }


  function fitlistl(es, subtreeOffset, siblingOffset) {
    function $fitlistl(acc, es, i) {
      if (es.length <= i)
        return [];
      var e = es[i], ans = fit(acc, e, subtreeOffset, siblingOffset, 0);
      return [ ans ].concat($fitlistl(merge(acc, moveextent(e, ans)), es, ++i));
    }
    ;
    return $fitlistl( [], es, 0);
  }


  function fitlistr(es, subtreeOffset, siblingOffset) {
    function $fitlistr(acc, es, i) {
      if (es.length <= i)
        return [];
      var e = es[i], ans = -fit(e, acc, subtreeOffset, siblingOffset, 0);
      return [ ans ].concat($fitlistr(merge(moveextent(e, ans), acc), es, ++i));
    }
    ;
    es = slice.call(es);
    var ans = $fitlistr( [], es.reverse(), 0);
    return ans.reverse();
  }


  function fitlist(es, subtreeOffset, siblingOffset, align) {
    var esl = fitlistl(es, subtreeOffset, siblingOffset), esr = fitlistr(es,
        subtreeOffset, siblingOffset);

    if (align == "left")
      esr = esl;
    else if (align == "right")
      esl = esr;

    for ( var i = 0, ans = []; i < esl.length; i++) {
      ans[i] = (esl[i] + esr[i]) / 2;
    }
    return ans;
  }


  function design(graph, node, prop, config, orn) {
    var multitree = config.multitree;
    var auxp = [ 'x', 'y' ], auxs = [ 'width', 'height' ];
    var ind = +(orn == "left" || orn == "right");
    var p = auxp[ind], notp = auxp[1 - ind];

    var cnode = config.Node;
    var s = auxs[ind], nots = auxs[1 - ind];

    var siblingOffset = config.siblingOffset;
    var subtreeOffset = config.subtreeOffset;
    var align = config.align;

    function $design(node, maxsize, acum) {
      var sval = node.getData(s, prop);
      var notsval = maxsize
          || (node.getData(nots, prop));

      var trees = [], extents = [], chmaxsize = false;
      var chacum = notsval + config.levelDistance;
      node.eachSubnode(function(n) {
            if (n.exist
                && (!multitree || ('$orn' in n.data) && n.data.$orn == orn)) {

              if (!chmaxsize)
                chmaxsize = getBoundaries(graph, config, n._depth, orn, prop);

              var s = $design(n, chmaxsize[nots], acum + chacum);
              trees.push(s.tree);
              extents.push(s.extent);
            }
          });
      var positions = fitlist(extents, subtreeOffset, siblingOffset, align);
      for ( var i = 0, ptrees = [], pextents = []; i < trees.length; i++) {
        movetree(trees[i], prop, positions[i], orn);
        pextents.push(moveextent(extents[i], positions[i]));
      }
      var resultextent = [ [ -sval / 2, sval / 2 ] ]
          .concat(mergelist(pextents));
      node.getPos(prop)[p] = 0;

      if (orn == "top" || orn == "left") {
        node.getPos(prop)[notp] = acum;
      } else {
        node.getPos(prop)[notp] = -acum;
      }

      return {
        tree : node,
        extent : resultextent
      };
    }

    $design(node, false, 0);
  }


  return new Class({
    /*
    Method: compute
    
    Computes nodes' positions.

     */
    compute : function(property, computeLevels) {
      var prop = property || 'start';
      var node = this.graph.getNode(this.root);
      $.extend(node, {
        'drawn' : true,
        'exist' : true,
        'selected' : true
      });
      NodeDim.compute(this.graph, prop, this.config);
      if (!!computeLevels || !("_depth" in node)) {
        this.graph.computeLevels(this.root, 0, "ignore");
      }
      
      this.computePositions(node, prop);
    },

    computePositions : function(node, prop) {
      var config = this.config;
      var multitree = config.multitree;
      var align = config.align;
      var indent = align !== 'center' && config.indent;
      var orn = config.orientation;
      var orns = multitree ? [ 'top', 'right', 'bottom', 'left' ] : [ orn ];
      var that = this;
      $.each(orns, function(orn) {
        //calculate layout
          design(that.graph, node, prop, that.config, orn, prop);
          var i = [ 'x', 'y' ][+(orn == "left" || orn == "right")];
          //absolutize
          (function red(node) {
            node.eachSubnode(function(n) {
              if (n.exist
                  && (!multitree || ('$orn' in n.data) && n.data.$orn == orn)) {

                n.getPos(prop)[i] += node.getPos(prop)[i];
                if (indent) {
                  n.getPos(prop)[i] += align == 'left' ? indent : -indent;
                }
                red(n);
              }
            });
          })(node);
        });
    }
  });
  
})();

/*
 * File: Spacetree.js
 */

/*
   Class: ST
   
  A Tree layout with advanced contraction and expansion animations.
     
  Inspired by:
 
  SpaceTree: Supporting Exploration in Large Node Link Tree, Design Evolution and Empirical Evaluation (Catherine Plaisant, Jesse Grosjean, Benjamin B. Bederson) 
  <http://hcil.cs.umd.edu/trs/2002-05/2002-05.pdf>
  
  Drawing Trees (Andrew J. Kennedy) <http://research.microsoft.com/en-us/um/people/akenn/fun/drawingtrees.pdf>
  
  Note:
 
  This visualization was built and engineered from scratch, taking only the papers as inspiration, and only shares some features with the visualization described in those papers.
 
  Implements:
  
  All <Loader> methods
  
  Constructor Options:
  
  Inherits options from
  
  - <Options.Canvas>
  - <Options.Controller>
  - <Options.Tree>
  - <Options.Node>
  - <Options.Edge>
  - <Options.Label>
  - <Options.Events>
  - <Options.Tips>
  - <Options.NodeStyles>
  - <Options.Navigation>
  
  Additionally, there are other parameters and some default values changed
  
  constrained - (boolean) Default's *true*. Whether to show the entire tree when loaded or just the number of levels specified by _levelsToShow_.
  levelsToShow - (number) Default's *2*. The number of levels to show for a subtree. This number is relative to the selected node.
  levelDistance - (number) Default's *30*. The distance between two consecutive levels of the tree.
  Node.type - Described in <Options.Node>. Default's set to *rectangle*.
  offsetX - (number) Default's *0*. The x-offset distance from the selected node to the center of the canvas.
  offsetY - (number) Default's *0*. The y-offset distance from the selected node to the center of the canvas.
  duration - Described in <Options.Fx>. It's default value has been changed to *700*.
  
  Instance Properties:
  
  canvas - Access a <Canvas> instance.
  graph - Access a <Graph> instance.
  op - Access a <ST.Op> instance.
  fx - Access a <ST.Plot> instance.
  labels - Access a <ST.Label> interface implementation.

 */

$jit.ST= (function() {
    // Define some private methods first...
    // Nodes in path
    var nodesInPath = [];
    // Nodes to contract
    function getNodesToHide(node) {
      node = node || this.clickedNode;
      if(!this.config.constrained) {
        return [];
      }
      var Geom = this.geom;
      var graph = this.graph;
      var canvas = this.canvas;
      var level = node._depth, nodeArray = [];
  	  graph.eachNode(function(n) {
          if(n.exist && !n.selected) {
              if(n.isDescendantOf(node.id)) {
                if(n._depth <= level) nodeArray.push(n);
              } else {
                nodeArray.push(n);
              }
          }
  	  });
  	  var leafLevel = Geom.getRightLevelToShow(node, canvas);
  	  node.eachLevel(leafLevel, leafLevel, function(n) {
          if(n.exist && !n.selected) nodeArray.push(n);
  	  });
  	    
  	  for (var i = 0; i < nodesInPath.length; i++) {
  	    var n = this.graph.getNode(nodesInPath[i]);
  	    if(!n.isDescendantOf(node.id)) {
  	      nodeArray.push(n);
  	    }
  	  } 
  	  return nodeArray;       
    };
    // Nodes to expand
     function getNodesToShow(node) {
        var nodeArray = [], config = this.config;
        node = node || this.clickedNode;
        this.clickedNode.eachLevel(0, config.levelsToShow, function(n) {
            if(config.multitree && !('$orn' in n.data) 
            		&& n.anySubnode(function(ch){ return ch.exist && !ch.drawn; })) {
            	nodeArray.push(n);
            } else if(n.drawn && !n.anySubnode("drawn")) {
              nodeArray.push(n);
            }
        });
        return nodeArray;
     };
    // Now define the actual class.
    return new Class({
    
        Implements: [Loader, Extras, Layouts.Tree],
        
        initialize: function(controller) {            
          var $ST = $jit.ST;
          
          var config= {
                levelsToShow: 2,
                levelDistance: 30,
                constrained: true,                
                Node: {
                  type: 'rectangle'
                },
                duration: 700,
                offsetX: 0,
                offsetY: 0
            };
            
            this.controller = this.config = $.merge(
                Options("Canvas", "Fx", "Tree", "Node", "Edge", "Controller", 
                    "Tips", "NodeStyles", "Events", "Navigation", "Label"), config, controller);

            var canvasConfig = this.config;
            if(canvasConfig.useCanvas) {
              this.canvas = canvasConfig.useCanvas;
              this.config.labelContainer = this.canvas.id + '-label';
            } else {
              if(canvasConfig.background) {
                canvasConfig.background = $.merge({
                  type: 'Circles'
                }, canvasConfig.background);
              }
              this.canvas = new Canvas(this, canvasConfig);
              this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
            }

            this.graphOptions = {
                'klass': Complex
            };
            this.graph = new Graph(this.graphOptions, this.config.Node, this.config.Edge);
            this.labels = new $ST.Label[canvasConfig.Label.type](this);
            this.fx = new $ST.Plot(this, $ST);
            this.op = new $ST.Op(this);
            this.group = new $ST.Group(this);
            this.geom = new $ST.Geom(this);
            this.clickedNode=  null;
            // initialize extras
            this.initializeExtras();
        },
    
        /*
         Method: plot
        
         Plots the <ST>. This is a shortcut to *fx.plot*.

        */  
        plot: function() { this.fx.plot(this.controller); },
    
      
        /*
         Method: switchPosition
        
         Switches the tree orientation.

         Parameters:

        pos - (string) The new tree orientation. Possible values are "top", "left", "right" and "bottom".
        method - (string) Set this to "animate" if you want to animate the tree when switching its position. You can also set this parameter to "replot" to just replot the subtree.
        onComplete - (optional|object) This callback is called once the "switching" animation is complete.

         Example:

         (start code js)
           st.switchPosition("right", "animate", {
            onComplete: function() {
              alert('completed!');
            } 
           });
         (end code)
        */  
        switchPosition: function(pos, method, onComplete) {
          var Geom = this.geom, Plot = this.fx, that = this;
          if(!Plot.busy) {
              Plot.busy = true;
              this.contract({
                  onComplete: function() {
                      Geom.switchOrientation(pos);
                      that.compute('end', false);
                      Plot.busy = false;
                      if(method == 'animate') {
                    	  that.onClick(that.clickedNode.id, onComplete);  
                      } else if(method == 'replot') {
                    	  that.select(that.clickedNode.id, onComplete);
                      }
                  }
              }, pos);
          }
        },

        /*
        Method: switchAlignment
       
        Switches the tree alignment.

        Parameters:

       align - (string) The new tree alignment. Possible values are "left", "center" and "right".
       method - (string) Set this to "animate" if you want to animate the tree after aligning its position. You can also set this parameter to "replot" to just replot the subtree.
       onComplete - (optional|object) This callback is called once the "switching" animation is complete.

        Example:

        (start code js)
          st.switchAlignment("right", "animate", {
           onComplete: function() {
             alert('completed!');
           } 
          });
        (end code)
       */  
       switchAlignment: function(align, method, onComplete) {
        this.config.align = align;
        if(method == 'animate') {
        	this.select(this.clickedNode.id, onComplete);
        } else if(method == 'replot') {
        	this.onClick(this.clickedNode.id, onComplete);	
        }
       },

       /*
        Method: addNodeInPath
       
        Adds a node to the current path as selected node. The selected node will be visible (as in non-collapsed) at all times.
        

        Parameters:

       id - (string) A <Graph.Node> id.

        Example:

        (start code js)
          st.addNodeInPath("nodeId");
        (end code)
       */  
       addNodeInPath: function(id) {
           nodesInPath.push(id);
           this.select((this.clickedNode && this.clickedNode.id) || this.root);
       },       

       /*
       Method: clearNodesInPath
      
       Removes all nodes tagged as selected by the <ST.addNodeInPath> method.
       
       See also:
       
       <ST.addNodeInPath>
     
       Example:

       (start code js)
         st.clearNodesInPath();
       (end code)
      */  
       clearNodesInPath: function(id) {
           nodesInPath.length = 0;
           this.select((this.clickedNode && this.clickedNode.id) || this.root);
       },
        
       /*
         Method: refresh
        
         Computes positions and plots the tree.
         
       */
       refresh: function() {
           this.reposition();
           //this.select((this.clickedNode && this.clickedNode.id) || this.root);
		   this.select(this.clickedNode && this.clickedNode.id);
       },    

       reposition: function() {
            this.graph.computeLevels(this.root, 0, "ignore");
             this.geom.setRightLevelToShow(this.clickedNode, this.canvas);
            this.graph.eachNode(function(n) {
                if(n.exist) n.drawn = true;
            });
            this.compute('end');
        },
        
        requestNodes: function(node, onComplete) {
          var handler = $.merge(this.controller, onComplete), 
          lev = this.config.levelsToShow;
          if(handler.request) {
              var leaves = [], d = node._depth;
              node.eachLevel(0, lev, function(n) {
                  if(n.drawn && 
                   !n.anySubnode()) {
                   leaves.push(n);
                   n._level = lev - (n._depth - d);
                  }
              });
              this.group.requestNodes(leaves, handler);
          }
            else
              handler.onComplete();
        },
     
        contract: function(onComplete, switched) {
          var orn  = this.config.orientation;
          var Geom = this.geom, Group = this.group;
          if(switched) Geom.switchOrientation(switched);
          var nodes = getNodesToHide.call(this);
          if(switched) Geom.switchOrientation(orn);
          Group.contract(nodes, $.merge(this.controller, onComplete));
        },
      
         move: function(node, onComplete) {
            this.compute('end', false);
            var move = onComplete.Move, offset = {
                'x': move.offsetX,
                'y': move.offsetY 
            };
            if(move.enable) {
                this.geom.translate(node.endPos.add(offset).$scale(-1), "end");
            }
            this.fx.animate($.merge(this.controller, { modes: ['linear'] }, onComplete));
         },
      
        expand: function (node, onComplete) {
            var nodeArray = getNodesToShow.call(this, node);
            this.group.expand(nodeArray, $.merge(this.controller, onComplete));
        },
    
        selectPath: function(node) {
          var that = this;
          this.graph.eachNode(function(n) { n.selected = false; }); 
          function path(node) {
              if(node == null || node.selected) return;
              node.selected = true;
              $.each(that.group.getSiblings([node])[node.id], 
              function(n) { 
                   n.exist = true; 
                   n.drawn = true; 
              });    
              var parents = node.getParents();
              parents = (parents.length > 0)? parents[0] : null;
              path(parents);
          };
          for(var i=0, ns = [node.id].concat(nodesInPath); i < ns.length; i++) {
              path(this.graph.getNode(ns[i]));
          }
        },
      
        /*
        Method: setRoot
     
         Switches the current root node. Changes the topology of the Tree.
     
        Parameters:
           id - (string) The id of the node to be set as root.
           method - (string) Set this to "animate" if you want to animate the tree after adding the subtree. You can also set this parameter to "replot" to just replot the subtree.
           onComplete - (optional|object) An action to perform after the animation (if any).
 
        Example:

        (start code js)
          st.setRoot('nodeId', 'animate', {
             onComplete: function() {
               alert('complete!');
             }
          });
        (end code)
     */
     setRoot: function(id, method, onComplete) {
        	if(this.busy) return;
        	this.busy = true;
          var that = this, canvas = this.canvas;
        	var rootNode = this.graph.getNode(this.root);
        	var clickedNode = this.graph.getNode(id);
        	function $setRoot() {
            	if(this.config.multitree && clickedNode.data.$orn) {
            		var orn = clickedNode.data.$orn;
            		var opp = {
            				'left': 'right',
            				'right': 'left',
            				'top': 'bottom',
            				'bottom': 'top'
            		}[orn];
            		rootNode.data.$orn = opp;
            		(function tag(rootNode) {
                		rootNode.eachSubnode(function(n) {
                			if(n.id != id) {
                				n.data.$orn = opp;
                				tag(n);
                			}
                		});
            		})(rootNode);
            		delete clickedNode.data.$orn;
            	}
            	this.root = id;
            	this.clickedNode = clickedNode;
            	this.graph.computeLevels(this.root, 0, "ignore");
            	this.geom.setRightLevelToShow(clickedNode, canvas, {
            	  execHide: false,
            	  onShow: function(node) {
            	    if(!node.drawn) {
                    node.drawn = true;
                    node.setData('alpha', 1, 'end');
                    node.setData('alpha', 0);
                    node.pos.setc(clickedNode.pos.x, clickedNode.pos.y);
            	    }
            	  }
            	});
              this.compute('end');
              this.busy = true;
              this.fx.animate({
                modes: ['linear', 'node-property:alpha'],
                onComplete: function() {
                  that.busy = false;
                  that.onClick(id, {
                    onComplete: function() {
                      onComplete && onComplete.onComplete();
                    }
                  });
                }
              });
        	}

        	// delete previous orientations (if any)
        	delete rootNode.data.$orns;

        	if(method == 'animate') {
        	  $setRoot.call(this);
        	  that.selectPath(clickedNode);
        	} else if(method == 'replot') {
        		$setRoot.call(this);
        		this.select(this.root);
        	}
     },

     /*
           Method: addSubtree
        
            Adds a subtree.
        
           Parameters:
              subtree - (object) A JSON Tree object. See also <Loader.loadJSON>.
              method - (string) Set this to "animate" if you want to animate the tree after adding the subtree. You can also set this parameter to "replot" to just replot the subtree.
              onComplete - (optional|object) An action to perform after the animation (if any).
    
           Example:

           (start code js)
             st.addSubtree(json, 'animate', {
                onComplete: function() {
                  alert('complete!');
                }
             });
           (end code)
        */
        addSubtree: function(subtree, method, onComplete) {
            if(method == 'replot') {
                this.op.sum(subtree, $.extend({ type: 'replot' }, onComplete || {}));
            } else if (method == 'animate') {
                this.op.sum(subtree, $.extend({ type: 'fade:seq' }, onComplete || {}));
            }
        },
    
        /*
           Method: removeSubtree
        
            Removes a subtree.
        
           Parameters:
              id - (string) The _id_ of the subtree to be removed.
              removeRoot - (boolean) Default's *false*. Remove the root of the subtree or only its subnodes.
              method - (string) Set this to "animate" if you want to animate the tree after removing the subtree. You can also set this parameter to "replot" to just replot the subtree.
              onComplete - (optional|object) An action to perform after the animation (if any).

          Example:

          (start code js)
            st.removeSubtree('idOfSubtreeToBeRemoved', false, 'animate', {
              onComplete: function() {
                alert('complete!');
              }
            });
          (end code)
    
        */
        removeSubtree: function(id, removeRoot, method, onComplete) {
            var node = this.graph.getNode(id), subids = [];
            node.eachLevel(+!removeRoot, false, function(n) {
                subids.push(n.id);
            });
            if(method == 'replot') {
                this.op.removeNode(subids, $.extend({ type: 'replot' }, onComplete || {}));
            } else if (method == 'animate') {
                this.op.removeNode(subids, $.extend({ type: 'fade:seq'}, onComplete || {}));
            }
        },
    
        /*
           Method: select
        
            Selects a node in the <ST> without performing an animation. Useful when selecting 
            nodes which are currently hidden or deep inside the tree.

          Parameters:
            id - (string) The id of the node to select.
            onComplete - (optional|object) an onComplete callback.

          Example:
          (start code js)
            st.select('mynodeid', {
              onComplete: function() {
                alert('complete!');
              }
            });
          (end code)
        */
        select: function(id, onComplete) {
            var group = this.group, geom = this.geom;
            var node=  this.graph.getNode(id), canvas = this.canvas;
            var root  = this.graph.getNode(this.root);
            var complete = $.merge(this.controller, onComplete);
            var that = this;
    
            complete.onBeforeCompute(node);
            this.selectPath(node);
            this.clickedNode= node;
            this.requestNodes(node, {
                onComplete: function(){
                    group.hide(group.prepare(getNodesToHide.call(that)), complete);
                    geom.setRightLevelToShow(node, canvas);
                    that.compute("current");
                    that.graph.eachNode(function(n) { 
                        var pos = n.pos.getc(true);
                        n.startPos.setc(pos.x, pos.y);
                        n.endPos.setc(pos.x, pos.y);
                        n.visited = false; 
                    });
                    var offset = { x: complete.offsetX, y: complete.offsetY };
                    that.geom.translate(node.endPos.add(offset).$scale(-1), ["start", "current", "end"]);
                    group.show(getNodesToShow.call(that));              
                    that.plot();
                    complete.onAfterCompute(that.clickedNode);
                    complete.onComplete();
                }
            });     
        },
    
      /*
         Method: onClick
    
        Animates the <ST> to center the node specified by *id*.
            
        Parameters:
        
        id - (string) A node id.
        options - (optional|object) A group of options and callbacks described below.
        onComplete - (object) An object callback called when the animation finishes.
        Move - (object) An object that has as properties _offsetX_ or _offsetY_ for adding some offset position to the centered node.

        Example:

        (start code js)
          st.onClick('mynodeid', {
	          Move: {
	          	enable: true,
	            offsetX: 30,
	            offsetY: 5
	          },
	          onComplete: function() {
	              alert('yay!');
	          }
          });
        (end code)
    
        */    
      onClick: function (id, options) {
        var canvas = this.canvas, that = this, Geom = this.geom, config = this.config;
        var innerController = {
            Move: {
        	    enable: true,
              offsetX: config.offsetX || 0,
              offsetY: config.offsetY || 0  
            },
            setRightLevelToShowConfig: false,
            onBeforeRequest: $.empty,
            onBeforeContract: $.empty,
            onBeforeMove: $.empty,
            onBeforeExpand: $.empty
        };
        var complete = $.merge(this.controller, innerController, options);
        
        if(!this.busy) {
            this.busy = true;
            var node = this.graph.getNode(id);
            this.selectPath(node, this.clickedNode);
           	this.clickedNode = node;
            complete.onBeforeCompute(node);
            complete.onBeforeRequest(node);
            this.requestNodes(node, {
                onComplete: function() {
                    complete.onBeforeContract(node);
                    that.contract({
                        onComplete: function() {
                            Geom.setRightLevelToShow(node, canvas, complete.setRightLevelToShowConfig);
                            complete.onBeforeMove(node);
                            that.move(node, {
                                Move: complete.Move,
                                onComplete: function() {
                                    complete.onBeforeExpand(node);
                                    that.expand(node, {
                                        onComplete: function() {
                                            that.busy = false;
                                            complete.onAfterCompute(id);
                                            complete.onComplete();
                                        }
                                    }); // expand
                                }
                            }); // move
                        }
                    });// contract
                }
            });// request
        }
      }
    });

})();

$jit.ST.$extend = true;

/*
   Class: ST.Op
    
   Custom extension of <Graph.Op>.

   Extends:

   All <Graph.Op> methods
   
   See also:
   
   <Graph.Op>

*/
$jit.ST.Op = new Class({

  Implements: Graph.Op
    
});

/*
    
     Performs operations on group of nodes.

*/
$jit.ST.Group = new Class({
    
    initialize: function(viz) {
        this.viz = viz;
        this.canvas = viz.canvas;
        this.config = viz.config;
        this.animation = new Animation;
        this.nodes = null;
    },
    
    /*
    
       Calls the request method on the controller to request a subtree for each node. 
    */
    requestNodes: function(nodes, controller) {
        var counter = 0, len = nodes.length, nodeSelected = {};
        var complete = function() { controller.onComplete(); };
        var viz = this.viz;
        if(len == 0) complete();
        for(var i=0; i<len; i++) {
            nodeSelected[nodes[i].id] = nodes[i];
            controller.request(nodes[i].id, nodes[i]._level, {
                onComplete: function(nodeId, data) {
                    if(data && data.children) {
                        data.id = nodeId;
                        viz.op.sum(data, { type: 'nothing' });
                    }
                    if(++counter == len) {
                        viz.graph.computeLevels(viz.root, 0);
                        complete();
                    }
                }
            });
        }
    },
    
    /*
    
       Collapses group of nodes. 
    */
    contract: function(nodes, controller) {
        var viz = this.viz;
        var that = this;

        nodes = this.prepare(nodes);
        this.animation.setOptions($.merge(controller, {
            $animating: false,
            compute: function(delta) {
              if(delta == 1) delta = 0.99;
              that.plotStep(1 - delta, controller, this.$animating);
              this.$animating = 'contract';
            },
            
            complete: function() {
                that.hide(nodes, controller);
            }       
        })).start();
    },
    
    hide: function(nodes, controller) {
        var viz = this.viz;
        for(var i=0; i<nodes.length; i++) {
            // TODO nodes are requested on demand, but not
            // deleted when hidden. Would that be a good feature?
            // Currently that feature is buggy, so I'll turn it off
            // Actually this feature is buggy because trimming should take
            // place onAfterCompute and not right after collapsing nodes.
            if (true || !controller || !controller.request) {
                nodes[i].eachLevel(1, false, function(elem){
                    if (elem.exist) {
                        $.extend(elem, {
                            'drawn': false,
                            'exist': false
                        });
                    }
                });
            } else {
                var ids = [];
                nodes[i].eachLevel(1, false, function(n) {
                    ids.push(n.id);
                });
                viz.op.removeNode(ids, { 'type': 'nothing' });
                viz.labels.clearLabels();
            }
        }
        controller.onComplete();
    },    
    

    /*
       Expands group of nodes. 
    */
    expand: function(nodes, controller) {
        var that = this;
        this.show(nodes);
        this.animation.setOptions($.merge(controller, {
            $animating: false,
            compute: function(delta) {
                that.plotStep(delta, controller, this.$animating);
                this.$animating = 'expand';
            },
            
            complete: function() {
                that.plotStep(undefined, controller, false);
                controller.onComplete();
            }       
        })).start();
        
    },
    
    show: function(nodes) {
        var config = this.config;
        this.prepare(nodes);
        $.each(nodes, function(n) {
        	// check for root nodes if multitree
        	if(config.multitree && !('$orn' in n.data)) {
        		delete n.data.$orns;
        		var orns = ' ';
        		n.eachSubnode(function(ch) {
        			if(('$orn' in ch.data) 
        					&& orns.indexOf(ch.data.$orn) < 0 
        					&& ch.exist && !ch.drawn) {
        				orns += ch.data.$orn + ' ';
        			}
        		});
        		n.data.$orns = orns;
        	}
            n.eachLevel(0, config.levelsToShow, function(n) {
            	if(n.exist) n.drawn = true;
            });     
        });
    },
    
    prepare: function(nodes) {
        this.nodes = this.getNodesWithChildren(nodes);
        return this.nodes;
    },
    
    /*
       Filters an array of nodes leaving only nodes with children.
    */
    getNodesWithChildren: function(nodes) {
        var ans = [], config = this.config, root = this.viz.root;
        nodes.sort(function(a, b) { return (a._depth <= b._depth) - (a._depth >= b._depth); });
        for(var i=0; i<nodes.length; i++) {
            if(nodes[i].anySubnode("exist")) {
            	for (var j = i+1, desc = false; !desc && j < nodes.length; j++) {
                    if(!config.multitree || '$orn' in nodes[j].data) {
                		desc = desc || nodes[i].isDescendantOf(nodes[j].id);                    	
                    }
                }
                if(!desc) ans.push(nodes[i]);
            }
        }
        return ans;
    },
    
    plotStep: function(delta, controller, animating) {
        var viz = this.viz,
        config = this.config,
        canvas = viz.canvas, 
        ctx = canvas.getCtx(),
        nodes = this.nodes;
        var i, node;
        // hide nodes that are meant to be collapsed/expanded
        var nds = {};
        for(i=0; i<nodes.length; i++) {
          node = nodes[i];
          nds[node.id] = [];
          var root = config.multitree && !('$orn' in node.data);
          var orns = root && node.data.$orns;
          node.eachSubgraph(function(n) { 
            // TODO(nico): Cleanup
        	  // special check for root node subnodes when
        	  // multitree is checked.
        	  if(root && orns && orns.indexOf(n.data.$orn) > 0 
        			  && n.drawn) {
        		  n.drawn = false;
                  nds[node.id].push(n);
              } else if((!root || !orns) && n.drawn) {
                n.drawn = false;
                nds[node.id].push(n);
              }
            });	
            node.drawn = true;
        }
        // plot the whole (non-scaled) tree
        if(nodes.length > 0) viz.fx.plot();
        // show nodes that were previously hidden
        for(i in nds) {
          $.each(nds[i], function(n) { n.drawn = true; });
        }
        // plot each scaled subtree
        for(i=0; i<nodes.length; i++) {
          node = nodes[i];
          ctx.save();
          viz.fx.plotSubtree(node, controller, delta, animating);                
          ctx.restore();
        }
      },

      getSiblings: function(nodes) {
        var siblings = {};
        $.each(nodes, function(n) {
            var par = n.getParents();
            if (par.length == 0) {
                siblings[n.id] = [n];
            } else {
                var ans = [];
                par[0].eachSubnode(function(sn) {
                    ans.push(sn);
                });
                siblings[n.id] = ans;
            }
        });
        return siblings;
    }
});

/*
   ST.Geom

   Performs low level geometrical computations.

   Access:

   This instance can be accessed with the _geom_ parameter of the st instance created.

   Example:

   (start code js)
    var st = new ST(canvas, config);
    st.geom.translate //or can also call any other <ST.Geom> method
   (end code)

*/

$jit.ST.Geom = new Class({
    Implements: Graph.Geom,
    /*
       Changes the tree current orientation to the one specified.

       You should usually use <ST.switchPosition> instead.
    */  
    switchOrientation: function(orn) {
    	this.config.orientation = orn;
    },

    /*
       Makes a value dispatch according to the current layout
       Works like a CSS property, either _top-right-bottom-left_ or _top|bottom - left|right_.
     */
    dispatch: function() {
    	  // TODO(nico) should store Array.prototype.slice.call somewhere.
        var args = Array.prototype.slice.call(arguments);
        var s = args.shift(), len = args.length;
        var val = function(a) { return typeof a == 'function'? a() : a; };
        if(len == 2) {
            return (s == "top" || s == "bottom")? val(args[0]) : val(args[1]);
        } else if(len == 4) {
            switch(s) {
                case "top": return val(args[0]);
                case "right": return val(args[1]);
                case "bottom": return val(args[2]);
                case "left": return val(args[3]);
            }
        }
        return undefined;
    },

    /*
       Returns label height or with, depending on the tree current orientation.
    */  
    getSize: function(n, invert) {
        var data = n.data, config = this.config;
        var siblingOffset = config.siblingOffset;
        var s = (config.multitree 
        		&& ('$orn' in data) 
        		&& data.$orn) || config.orientation;
        var w = n.getData('width') + siblingOffset;
        var h = n.getData('height') + siblingOffset;
        if(!invert)
            return this.dispatch(s, h, w);
        else
            return this.dispatch(s, w, h);
    },
    
    /*
       Calculates a subtree base size. This is an utility function used by _getBaseSize_
    */  
    getTreeBaseSize: function(node, level, leaf) {
        var size = this.getSize(node, true), baseHeight = 0, that = this;
        if(leaf(level, node)) return size;
        if(level === 0) return 0;
        node.eachSubnode(function(elem) {
            baseHeight += that.getTreeBaseSize(elem, level -1, leaf);
        });
        return (size > baseHeight? size : baseHeight) + this.config.subtreeOffset;
    },


    /*
       getEdge
       
       Returns a Complex instance with the begin or end position of the edge to be plotted.

       Parameters:

       node - A <Graph.Node> that is connected to this edge.
       type - Returns the begin or end edge position. Possible values are 'begin' or 'end'.

       Returns:

       A <Complex> number specifying the begin or end position.
    */  
    getEdge: function(node, type, s) {
    	var $C = function(a, b) { 
          return function(){
            return node.pos.add(new Complex(a, b));
          }; 
        };
        var dim = this.node;
        var w = node.getData('width');
        var h = node.getData('height');

        if(type == 'begin') {
            if(dim.align == "center") {
                return this.dispatch(s, $C(0, h/2), $C(-w/2, 0),
                                     $C(0, -h/2),$C(w/2, 0));
            } else if(dim.align == "left") {
                return this.dispatch(s, $C(0, h), $C(0, 0),
                                     $C(0, 0), $C(w, 0));
            } else if(dim.align == "right") {
                return this.dispatch(s, $C(0, 0), $C(-w, 0),
                                     $C(0, -h),$C(0, 0));
            } else throw "align: not implemented";
            
            
        } else if(type == 'end') {
            if(dim.align == "center") {
                return this.dispatch(s, $C(0, -h/2), $C(w/2, 0),
                                     $C(0, h/2),  $C(-w/2, 0));
            } else if(dim.align == "left") {
                return this.dispatch(s, $C(0, 0), $C(w, 0),
                                     $C(0, h), $C(0, 0));
            } else if(dim.align == "right") {
                return this.dispatch(s, $C(0, -h),$C(0, 0),
                                     $C(0, 0), $C(-w, 0));
            } else throw "align: not implemented";
        }
    },

    /*
       Adjusts the tree position due to canvas scaling or translation.
    */  
    getScaledTreePosition: function(node, scale) {
        var dim = this.node;
        var w = node.getData('width');
        var h = node.getData('height');
        var s = (this.config.multitree 
        		&& ('$orn' in node.data) 
        		&& node.data.$orn) || this.config.orientation;

        var $C = function(a, b) { 
          return function(){
            return node.pos.add(new Complex(a, b)).$scale(1 - scale);
          }; 
        };
        if(dim.align == "left") {
            return this.dispatch(s, $C(0, h), $C(0, 0),
                                 $C(0, 0), $C(w, 0));
        } else if(dim.align == "center") {
            return this.dispatch(s, $C(0, h / 2), $C(-w / 2, 0),
                                 $C(0, -h / 2),$C(w / 2, 0));
        } else if(dim.align == "right") {
            return this.dispatch(s, $C(0, 0), $C(-w, 0),
                                 $C(0, -h),$C(0, 0));
        } else throw "align: not implemented";
    },

    /*
       treeFitsInCanvas
       
       Returns a Boolean if the current subtree fits in canvas.

       Parameters:

       node - A <Graph.Node> which is the current root of the subtree.
       canvas - The <Canvas> object.
       level - The depth of the subtree to be considered.
    */  
    treeFitsInCanvas: function(node, canvas, level) {
        var csize = canvas.getSize();
        var s = (this.config.multitree 
        		&& ('$orn' in node.data) 
        		&& node.data.$orn) || this.config.orientation;

        var size = this.dispatch(s, csize.width, csize.height);
        var baseSize = this.getTreeBaseSize(node, level, function(level, node) { 
          return level === 0 || !node.anySubnode();
        });
        return (baseSize < size);
    }
});

/*
  Class: ST.Plot
  
  Custom extension of <Graph.Plot>.

  Extends:

  All <Graph.Plot> methods
  
  See also:
  
  <Graph.Plot>

*/
$jit.ST.Plot = new Class({
    
    Implements: Graph.Plot,
    
    /*
       Plots a subtree from the spacetree.
    */
    plotSubtree: function(node, opt, scale, animating) {
        var viz = this.viz, canvas = viz.canvas, config = viz.config;
        scale = Math.min(Math.max(0.001, scale), 1);
        if(scale >= 0) {
            node.drawn = false;     
            var ctx = canvas.getCtx();
            var diff = viz.geom.getScaledTreePosition(node, scale);
            ctx.translate(diff.x, diff.y);
            ctx.scale(scale, scale);
        }
        this.plotTree(node, $.merge(opt, {
          'withLabels': true,
          'hideLabels': !!scale,
          'plotSubtree': function(n, ch) {
            var root = config.multitree && !('$orn' in node.data);
            var orns = root && node.getData('orns');
            return !root || orns.indexOf(node.getData('orn')) > -1;
          }
        }), animating);
        if(scale >= 0) node.drawn = true;
    },   
   
    /*
        Method: getAlignedPos
        
        Returns a *x, y* object with the position of the top/left corner of a <ST> node.
        
        Parameters:
        
        pos - (object) A <Graph.Node> position.
        width - (number) The width of the node.
        height - (number) The height of the node.
        
     */
    getAlignedPos: function(pos, width, height) {
        var nconfig = this.node;
        var square, orn;
        if(nconfig.align == "center") {
            square = {
                x: pos.x - width / 2,
                y: pos.y - height / 2
            };
        } else if (nconfig.align == "left") {
            orn = this.config.orientation;
            if(orn == "bottom" || orn == "top") {
                square = {
                    x: pos.x - width / 2,
                    y: pos.y
                };
            } else {
                square = {
                    x: pos.x,
                    y: pos.y - height / 2
                };
            }
        } else if(nconfig.align == "right") {
            orn = this.config.orientation;
            if(orn == "bottom" || orn == "top") {
                square = {
                    x: pos.x - width / 2,
                    y: pos.y - height
                };
            } else {
                square = {
                    x: pos.x - width,
                    y: pos.y - height / 2
                };
            }
        } else throw "align: not implemented";
        
        return square;
    },
    
    getOrientation: function(adj) {
    	var config = this.config;
    	var orn = config.orientation;

    	if(config.multitree) {
        	var nodeFrom = adj.nodeFrom;
        	var nodeTo = adj.nodeTo;
    		orn = (('$orn' in nodeFrom.data) 
        		&& nodeFrom.data.$orn) 
        		|| (('$orn' in nodeTo.data) 
        		&& nodeTo.data.$orn);
    	}

    	return orn; 
    }
});

/*
  Class: ST.Label

  Custom extension of <Graph.Label>. 
  Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.

  Extends:

  All <Graph.Label> methods and subclasses.

  See also:

  <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.
 */ 
$jit.ST.Label = {};

/*
   ST.Label.Native

   Custom extension of <Graph.Label.Native>.

   Extends:

   All <Graph.Label.Native> methods

   See also:

   <Graph.Label.Native>
*/
$jit.ST.Label.Native = new Class({
  Implements: Graph.Label.Native,

  renderLabel: function(canvas, node, controller) {
    var ctx = canvas.getCtx(),
        coord = node.pos.getc(true),
        width = node.getData('width'),
        height = node.getData('height'),
        pos = this.viz.fx.getAlignedPos(coord, width, height);
    ctx.fillText(node.name, pos.x + width / 2, pos.y + height / 2);
  }
});

$jit.ST.Label.DOM = new Class({
  Implements: Graph.Label.DOM,

  /* 
      placeLabel

      Overrides abstract method placeLabel in <Graph.Plot>.

      Parameters:

      tag - A DOM label element.
      node - A <Graph.Node>.
      controller - A configuration/controller object passed to the visualization.
     
    */
    placeLabel: function(tag, node, controller) {
        var pos = node.pos.getc(true), 
            config = this.viz.config, 
            dim = config.Node, 
            canvas = this.viz.canvas,
            w = node.getData('width'),
            h = node.getData('height'),
            radius = canvas.getSize(),
            labelPos, orn;
        
        var ox = canvas.translateOffsetX,
            oy = canvas.translateOffsetY,
            sx = canvas.scaleOffsetX,
            sy = canvas.scaleOffsetY,
            posx = pos.x * sx + ox,
            posy = pos.y * sy + oy;

        if(dim.align == "center") {
            labelPos= {
                x: Math.round(posx - w / 2 + radius.width/2),
                y: Math.round(posy - h / 2 + radius.height/2)
            };
        } else if (dim.align == "left") {
            orn = config.orientation;
            if(orn == "bottom" || orn == "top") {
                labelPos= {
                    x: Math.round(posx - w / 2 + radius.width/2),
                    y: Math.round(posy + radius.height/2)
                };
            } else {
                labelPos= {
                    x: Math.round(posx + radius.width/2),
                    y: Math.round(posy - h / 2 + radius.height/2)
                };
            }
        } else if(dim.align == "right") {
            orn = config.orientation;
            if(orn == "bottom" || orn == "top") {
                labelPos= {
                    x: Math.round(posx - w / 2 + radius.width/2),
                    y: Math.round(posy - h + radius.height/2)
                };
            } else {
                labelPos= {
                    x: Math.round(posx - w + radius.width/2),
                    y: Math.round(posy - h / 2 + radius.height/2)
                };
            }
        } else throw "align: not implemented";

        var style = tag.style;
        style.left = labelPos.x + 'px';
        style.top  = labelPos.y + 'px';
        style.display = this.fitsInCanvas(labelPos, canvas)? '' : 'none';
        controller.onPlaceLabel(tag, node);
    }
});

/*
  ST.Label.SVG

  Custom extension of <Graph.Label.SVG>.

  Extends:

  All <Graph.Label.SVG> methods

  See also:

  <Graph.Label.SVG>
*/
$jit.ST.Label.SVG = new Class({
  Implements: [$jit.ST.Label.DOM, Graph.Label.SVG],

  initialize: function(viz) {
    this.viz = viz;
  }
});

/*
   ST.Label.HTML

   Custom extension of <Graph.Label.HTML>.

   Extends:

   All <Graph.Label.HTML> methods.

   See also:

   <Graph.Label.HTML>

*/
$jit.ST.Label.HTML = new Class({
  Implements: [$jit.ST.Label.DOM, Graph.Label.HTML],

  initialize: function(viz) {
    this.viz = viz;
  }
});


/*
  Class: ST.Plot.NodeTypes

  This class contains a list of <Graph.Node> built-in types. 
  Node types implemented are 'none', 'circle', 'rectangle', 'ellipse' and 'square'.

  You can add your custom node types, customizing your visualization to the extreme.

  Example:

  (start code js)
    ST.Plot.NodeTypes.implement({
      'mySpecialType': {
        'render': function(node, canvas) {
          //print your custom node to canvas
        },
        //optional
        'contains': function(node, pos) {
          //return true if pos is inside the node or false otherwise
        }
      }
    });
  (end code)

*/
$jit.ST.Plot.NodeTypes = new Class({
  'none': {
    'render': $.empty,
    'contains': $.lambda(false)
  },
  'circle': {
    'render': function(node, canvas) {
      var dim  = node.getData('dim'),
          pos = this.getAlignedPos(node.pos.getc(true), dim, dim),
          dim2 = dim/2;
      this.nodeHelper.circle.render('fill', {x:pos.x+dim2, y:pos.y+dim2}, dim2, canvas);
    },
    'contains': function(node, pos) {
      var dim  = node.getData('dim'),
          npos = this.getAlignedPos(node.pos.getc(true), dim, dim),
          dim2 = dim/2;
      this.nodeHelper.circle.contains({x:npos.x+dim2, y:npos.y+dim2}, pos, dim2);
    }
  },
  'square': {
    'render': function(node, canvas) {
      var dim  = node.getData('dim'),
          dim2 = dim/2,
          pos = this.getAlignedPos(node.pos.getc(true), dim, dim);
      this.nodeHelper.square.render('fill', {x:pos.x+dim2, y:pos.y+dim2}, dim2, canvas);
    },
    'contains': function(node, pos) {
      var dim  = node.getData('dim'),
          npos = this.getAlignedPos(node.pos.getc(true), dim, dim),
          dim2 = dim/2;
      this.nodeHelper.square.contains({x:npos.x+dim2, y:npos.y+dim2}, pos, dim2);
    }
  },
  'ellipse': {
    'render': function(node, canvas) {
      var width = node.getData('width'),
          height = node.getData('height'),
          pos = this.getAlignedPos(node.pos.getc(true), width, height);
      this.nodeHelper.ellipse.render('fill', {x:pos.x+width/2, y:pos.y+height/2}, width, height, canvas);
    },
    'contains': function(node, pos) {
      var width = node.getData('width'),
          height = node.getData('height'),
          npos = this.getAlignedPos(node.pos.getc(true), width, height);
      this.nodeHelper.ellipse.contains({x:npos.x+width/2, y:npos.y+height/2}, pos, width, height);
    }
  },
  'rectangle': {
    'render': function(node, canvas) {
      var width = node.getData('width'),
          height = node.getData('height'),
          pos = this.getAlignedPos(node.pos.getc(true), width, height);
      this.nodeHelper.rectangle.render('fill', {x:pos.x+width/2, y:pos.y+height/2}, width, height, canvas);
    },
    'contains': function(node, pos) {
      var width = node.getData('width'),
          height = node.getData('height'),
          npos = this.getAlignedPos(node.pos.getc(true), width, height);
      this.nodeHelper.rectangle.contains({x:npos.x+width/2, y:npos.y+height/2}, pos, width, height);
    }
  }
});

/*
  Class: ST.Plot.EdgeTypes

  This class contains a list of <Graph.Adjacence> built-in types. 
  Edge types implemented are 'none', 'line', 'arrow', 'quadratic:begin', 'quadratic:end', 'bezier'.

  You can add your custom edge types, customizing your visualization to the extreme.

  Example:

  (start code js)
    ST.Plot.EdgeTypes.implement({
      'mySpecialType': {
        'render': function(adj, canvas) {
          //print your custom edge to canvas
        },
        //optional
        'contains': function(adj, pos) {
          //return true if pos is inside the arc or false otherwise
        }
      }
    });
  (end code)

*/
$jit.ST.Plot.EdgeTypes = new Class({
    'none': $.empty,
    'line': {
      'render': function(adj, canvas) {
        var orn = this.getOrientation(adj),
            nodeFrom = adj.nodeFrom, 
            nodeTo = adj.nodeTo,
            rel = nodeFrom._depth < nodeTo._depth,
            from = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),
            to =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn);
        this.edgeHelper.line.render(from, to, canvas);
      },
      'contains': function(adj, pos) {
        var orn = this.getOrientation(adj),
            nodeFrom = adj.nodeFrom, 
            nodeTo = adj.nodeTo,
            rel = nodeFrom._depth < nodeTo._depth,
            from = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),
            to =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn);
        return this.edgeHelper.line.contains(from, to, pos, this.edge.epsilon);
      }
    },
     'arrow': {
       'render': function(adj, canvas) {
         var orn = this.getOrientation(adj),
             node = adj.nodeFrom, 
             child = adj.nodeTo,
             dim = adj.getData('dim'),
             from = this.viz.geom.getEdge(node, 'begin', orn),
             to = this.viz.geom.getEdge(child, 'end', orn),
             direction = adj.data.$direction,
             inv = (direction && direction.length>1 && direction[0] != node.id);
         this.edgeHelper.arrow.render(from, to, dim, inv, canvas);
       },
       'contains': function(adj, pos) {
         var orn = this.getOrientation(adj),
             nodeFrom = adj.nodeFrom, 
             nodeTo = adj.nodeTo,
             rel = nodeFrom._depth < nodeTo._depth,
             from = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),
             to =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn);
         return this.edgeHelper.arrow.contains(from, to, pos, this.edge.epsilon);
       }
     },
    'quadratic:begin': {
       'render': function(adj, canvas) {
          var orn = this.getOrientation(adj);
          var nodeFrom = adj.nodeFrom, 
              nodeTo = adj.nodeTo,
              rel = nodeFrom._depth < nodeTo._depth,
              begin = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),
              end =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn),
              dim = adj.getData('dim'),
              ctx = canvas.getCtx();
          ctx.beginPath();
          ctx.moveTo(begin.x, begin.y);
          switch(orn) {
            case "left":
              ctx.quadraticCurveTo(begin.x + dim, begin.y, end.x, end.y);
              break;
            case "right":
              ctx.quadraticCurveTo(begin.x - dim, begin.y, end.x, end.y);
              break;
            case "top":
              ctx.quadraticCurveTo(begin.x, begin.y + dim, end.x, end.y);
              break;
            case "bottom":
              ctx.quadraticCurveTo(begin.x, begin.y - dim, end.x, end.y);
              break;
          }
          ctx.stroke();
        }
     },
    'quadratic:end': {
       'render': function(adj, canvas) {
          var orn = this.getOrientation(adj);
          var nodeFrom = adj.nodeFrom, 
              nodeTo = adj.nodeTo,
              rel = nodeFrom._depth < nodeTo._depth,
              begin = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),
              end =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn),
              dim = adj.getData('dim'),
              ctx = canvas.getCtx();
          ctx.beginPath();
          ctx.moveTo(begin.x, begin.y);
          switch(orn) {
            case "left":
              ctx.quadraticCurveTo(end.x - dim, end.y, end.x, end.y);
              break;
            case "right":
              ctx.quadraticCurveTo(end.x + dim, end.y, end.x, end.y);
              break;
            case "top":
              ctx.quadraticCurveTo(end.x, end.y - dim, end.x, end.y);
              break;
            case "bottom":
              ctx.quadraticCurveTo(end.x, end.y + dim, end.x, end.y);
              break;
          }
          ctx.stroke();
       }
     },
    'bezier': {
       'render': function(adj, canvas) {
         var orn = this.getOrientation(adj),
             nodeFrom = adj.nodeFrom, 
             nodeTo = adj.nodeTo,
             rel = nodeFrom._depth < nodeTo._depth,
             begin = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),
             end =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn),
             dim = adj.getData('dim'),
             ctx = canvas.getCtx();
         ctx.beginPath();
         ctx.moveTo(begin.x, begin.y);
         switch(orn) {
           case "left":
             ctx.bezierCurveTo(begin.x + dim, begin.y, end.x - dim, end.y, end.x, end.y);
             break;
           case "right":
             ctx.bezierCurveTo(begin.x - dim, begin.y, end.x + dim, end.y, end.x, end.y);
             break;
           case "top":
             ctx.bezierCurveTo(begin.x, begin.y + dim, end.x, end.y - dim, end.x, end.y);
             break;
           case "bottom":
             ctx.bezierCurveTo(begin.x, begin.y - dim, end.x, end.y + dim, end.x, end.y);
             break;
         }
         ctx.stroke();
       }
    }
});



/*
 * File: AreaChart.js
 *
*/

$jit.ST.Plot.NodeTypes.implement({
  'areachart-stacked' : {
    'render' : function(node, canvas) {
      var pos = node.pos.getc(true), 
          width = node.getData('width'),
          height = node.getData('height'),
          algnPos = this.getAlignedPos(pos, width, height),
          x = algnPos.x, y = algnPos.y,
          stringArray = node.getData('stringArray'),
          dimArray = node.getData('dimArray'),
          valArray = node.getData('valueArray'),
          valLeft = $.reduce(valArray, function(x, y) { return x + y[0]; }, 0),
          valRight = $.reduce(valArray, function(x, y) { return x + y[1]; }, 0),
          colorArray = node.getData('colorArray'),
          colorLength = colorArray.length,
          config = node.getData('config'),
          gradient = node.getData('gradient'),
          showLabels = config.showLabels,
          aggregates = config.showAggregates,
          label = config.Label,
          prev = node.getData('prev');

      var ctx = canvas.getCtx(), border = node.getData('border');
      if (colorArray && dimArray && stringArray) {
        for (var i=0, l=dimArray.length, acumLeft=0, acumRight=0, valAcum=0; i<l; i++) {
          ctx.fillStyle = ctx.strokeStyle = colorArray[i % colorLength];
          ctx.save();
          if(gradient && (dimArray[i][0] > 0 || dimArray[i][1] > 0)) {
            var h1 = acumLeft + dimArray[i][0],
                h2 = acumRight + dimArray[i][1],
                alpha = Math.atan((h2 - h1) / width),
                delta = 55;
            var linear = ctx.createLinearGradient(x + width/2, 
                y - (h1 + h2)/2,
                x + width/2 + delta * Math.sin(alpha),
                y - (h1 + h2)/2 + delta * Math.cos(alpha));
            var color = $.rgbToHex($.map($.hexToRgb(colorArray[i % colorLength].slice(1)), 
                function(v) { return (v * 0.85) >> 0; }));
            linear.addColorStop(0, colorArray[i % colorLength]);
            linear.addColorStop(1, color);
            ctx.fillStyle = linear;
          }
          ctx.beginPath();
          ctx.moveTo(x, y - acumLeft);
          ctx.lineTo(x + width, y - acumRight);
          ctx.lineTo(x + width, y - acumRight - dimArray[i][1]);
          ctx.lineTo(x, y - acumLeft - dimArray[i][0]);
          ctx.lineTo(x, y - acumLeft);
          ctx.fill();
          ctx.restore();
          if(border) {
            var strong = border.name == stringArray[i];
            var perc = strong? 0.7 : 0.8;
            var color = $.rgbToHex($.map($.hexToRgb(colorArray[i % colorLength].slice(1)), 
                function(v) { return (v * perc) >> 0; }));
            ctx.strokeStyle = color;
            ctx.lineWidth = strong? 4 : 1;
            ctx.save();
            ctx.beginPath();
            if(border.index === 0) {
              ctx.moveTo(x, y - acumLeft);
              ctx.lineTo(x, y - acumLeft - dimArray[i][0]);
            } else {
              ctx.moveTo(x + width, y - acumRight);
              ctx.lineTo(x + width, y - acumRight - dimArray[i][1]);
            }
            ctx.stroke();
            ctx.restore();
          }
          acumLeft += (dimArray[i][0] || 0);
          acumRight += (dimArray[i][1] || 0);
          
          if(dimArray[i][0] > 0)
            valAcum += (valArray[i][0] || 0);
        }
        if(prev && label.type == 'Native') {
          ctx.save();
          ctx.beginPath();
          ctx.fillStyle = ctx.strokeStyle = label.color;
          ctx.font = label.style + ' ' + label.size + 'px ' + label.family;
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var aggValue = aggregates(node.name, valLeft, valRight, node, valAcum);
          if(aggValue !== false) {
            ctx.fillText(aggValue !== true? aggValue : valAcum, x, y - acumLeft - config.labelOffset - label.size/2, width);
          }
          if(showLabels(node.name, valLeft, valRight, node)) {
            ctx.fillText(node.name, x, y + label.size/2 + config.labelOffset);
          }
          ctx.restore();
        }
      }
    },
    'contains': function(node, mpos) {
      var pos = node.pos.getc(true), 
          width = node.getData('width'),
          height = node.getData('height'),
          algnPos = this.getAlignedPos(pos, width, height),
          x = algnPos.x, y = algnPos.y,
          dimArray = node.getData('dimArray'),
          rx = mpos.x - x;
      //bounding box check
      if(mpos.x < x || mpos.x > x + width
        || mpos.y > y || mpos.y < y - height) {
        return false;
      }
      //deep check
      for(var i=0, l=dimArray.length, lAcum=y, rAcum=y; i<l; i++) {
        var dimi = dimArray[i];
        lAcum -= dimi[0];
        rAcum -= dimi[1];
        var intersec = lAcum + (rAcum - lAcum) * rx / width;
        if(mpos.y >= intersec) {
          var index = +(rx > width/2);
          return {
            'name': node.getData('stringArray')[i],
            'color': node.getData('colorArray')[i],
            'value': node.getData('valueArray')[i][index],
            'index': index
          };
        }
      }
      return false;
    }
  }
});

/*
  Class: AreaChart
  
  A visualization that displays stacked area charts.
  
  Constructor Options:
  
  See <Options.AreaChart>.

*/
$jit.AreaChart = new Class({
  st: null,
  colors: ["#416D9C", "#70A35E", "#EBB056", "#C74243", "#83548B", "#909291", "#557EAA"],
  selected: {},
  busy: false,
  
  initialize: function(opt) {
    this.controller = this.config = 
      $.merge(Options("Canvas", "Margin", "Label", "AreaChart"), {
        Label: { type: 'Native' }
      }, opt);
    //set functions for showLabels and showAggregates
    var showLabels = this.config.showLabels,
        typeLabels = $.type(showLabels),
        showAggregates = this.config.showAggregates,
        typeAggregates = $.type(showAggregates);
    this.config.showLabels = typeLabels == 'function'? showLabels : $.lambda(showLabels);
    this.config.showAggregates = typeAggregates == 'function'? showAggregates : $.lambda(showAggregates);
    
    this.initializeViz();
  },
  
  initializeViz: function() {
    var config = this.config,
        that = this,
        nodeType = config.type.split(":")[0],
        nodeLabels = {};

    var delegate = new $jit.ST({
      injectInto: config.injectInto,
      width: config.width,
      height: config.height,
      orientation: "bottom",
      levelDistance: 0,
      siblingOffset: 0,
      subtreeOffset: 0,
      withLabels: config.Label.type != 'Native',
      useCanvas: config.useCanvas,
      Label: {
        type: config.Label.type
      },
      Node: {
        overridable: true,
        type: 'areachart-' + nodeType,
        align: 'left',
        width: 1,
        height: 1
      },
      Edge: {
        type: 'none'
      },
      Tips: {
        enable: config.Tips.enable,
        type: 'Native',
        force: true,
        onShow: function(tip, node, contains) {
          var elem = contains;
          config.Tips.onShow(tip, elem, node);
        }
      },
      Events: {
        enable: true,
        type: 'Native',
        onClick: function(node, eventInfo, evt) {
          if(!config.filterOnClick && !config.Events.enable) return;
          var elem = eventInfo.getContains();
          if(elem) config.filterOnClick && that.filter(elem.name);
          config.Events.enable && config.Events.onClick(elem, eventInfo, evt);
        },
        onRightClick: function(node, eventInfo, evt) {
          if(!config.restoreOnRightClick) return;
          that.restore();
        },
        onMouseMove: function(node, eventInfo, evt) {
          if(!config.selectOnHover) return;
          if(node) {
            var elem = eventInfo.getContains();
            that.select(node.id, elem.name, elem.index);
          } else {
            that.select(false, false, false);
          }
        }
      },
      onCreateLabel: function(domElement, node) {
        var labelConf = config.Label,
            valueArray = node.getData('valueArray'),
            acumLeft = $.reduce(valueArray, function(x, y) { return x + y[0]; }, 0),
            acumRight = $.reduce(valueArray, function(x, y) { return x + y[1]; }, 0);
        if(node.getData('prev')) {
          var nlbs = {
            wrapper: document.createElement('div'),
            aggregate: document.createElement('div'),
            label: document.createElement('div')
          };
          var wrapper = nlbs.wrapper,
              label = nlbs.label,
              aggregate = nlbs.aggregate,
              wrapperStyle = wrapper.style,
              labelStyle = label.style,
              aggregateStyle = aggregate.style;
          //store node labels
          nodeLabels[node.id] = nlbs;
          //append labels
          wrapper.appendChild(label);
          wrapper.appendChild(aggregate);
          if(!config.showLabels(node.name, acumLeft, acumRight, node)) {
            label.style.display = 'none';
          }
          if(!config.showAggregates(node.name, acumLeft, acumRight, node)) {
            aggregate.style.display = 'none';
          }
          wrapperStyle.position = 'relative';
          wrapperStyle.overflow = 'visible';
          wrapperStyle.fontSize = labelConf.size + 'px';
          wrapperStyle.fontFamily = labelConf.family;
          wrapperStyle.color = labelConf.color;
          wrapperStyle.textAlign = 'center';
          aggregateStyle.position = labelStyle.position = 'absolute';
          
          domElement.style.width = node.getData('width') + 'px';
          domElement.style.height = node.getData('height') + 'px';
          label.innerHTML = node.name;
          
          domElement.appendChild(wrapper);
        }
      },
      onPlaceLabel: function(domElement, node) {
        if(!node.getData('prev')) return;
        var labels = nodeLabels[node.id],
            wrapperStyle = labels.wrapper.style,
            labelStyle = labels.label.style,
            aggregateStyle = labels.aggregate.style,
            width = node.getData('width'),
            height = node.getData('height'),
            dimArray = node.getData('dimArray'),
            valArray = node.getData('valueArray'),
            acumLeft = $.reduce(valArray, function(x, y) { return x + y[0]; }, 0),
            acumRight = $.reduce(valArray, function(x, y) { return x + y[1]; }, 0),
            font = parseInt(wrapperStyle.fontSize, 10),
            domStyle = domElement.style;
        
        if(dimArray && valArray) {
          if(config.showLabels(node.name, acumLeft, acumRight, node)) {
            labelStyle.display = '';
          } else {
            labelStyle.display = 'none';
          }
          var aggValue = config.showAggregates(node.name, acumLeft, acumRight, node);
          if(aggValue !== false) {
            aggregateStyle.display = '';
          } else {
            aggregateStyle.display = 'none';
          }
          wrapperStyle.width = aggregateStyle.width = labelStyle.width = domElement.style.width = width + 'px';
          aggregateStyle.left = labelStyle.left = -width/2 + 'px';
          for(var i=0, l=valArray.length, acum=0, leftAcum=0; i<l; i++) {
            if(dimArray[i][0] > 0) {
              acum+= valArray[i][0];
              leftAcum+= dimArray[i][0];
            }
          }
          aggregateStyle.top = (-font - config.labelOffset) + 'px';
          labelStyle.top = (config.labelOffset + leftAcum) + 'px';
          domElement.style.top = parseInt(domElement.style.top, 10) - leftAcum + 'px';
          domElement.style.height = wrapperStyle.height = leftAcum + 'px';
          labels.aggregate.innerHTML = aggValue !== true? aggValue : acum;
        }
      }
    });
    
    var size = delegate.canvas.getSize(),
        margin = config.Margin;
    delegate.config.offsetY = -size.height/2 + margin.bottom 
      + (config.showLabels && (config.labelOffset + config.Label.size));
    delegate.config.offsetX = (margin.right - margin.left)/2;
    this.delegate = delegate;
    this.canvas = this.delegate.canvas;
  },
  
 /*
  Method: loadJSON
 
  Loads JSON data into the visualization. 
  
  Parameters:
  
  json - The JSON data format. This format is described in <http://blog.thejit.org/2010/04/24/new-javascript-infovis-toolkit-visualizations/#json-data-format>.
  
  Example:
  (start code js)
  var areaChart = new $jit.AreaChart(options);
  areaChart.loadJSON(json);
  (end code)
 */  
  loadJSON: function(json) {
    var prefix = $.time(), 
        ch = [], 
        delegate = this.delegate,
        name = $.splat(json.label), 
        color = $.splat(json.color || this.colors),
        config = this.config,
        gradient = !!config.type.split(":")[1],
        animate = config.animate;
    
    for(var i=0, values=json.values, l=values.length; i<l-1; i++) {
      var val = values[i], prev = values[i-1], next = values[i+1];
      var valLeft = $.splat(values[i].values), valRight = $.splat(values[i+1].values);
      var valArray = $.zip(valLeft, valRight);
      var acumLeft = 0, acumRight = 0;
      ch.push({
        'id': prefix + val.label,
        'name': val.label,
        'data': {
          'value': valArray,
          '$valueArray': valArray,
          '$colorArray': color,
          '$stringArray': name,
          '$next': next.label,
          '$prev': prev? prev.label:false,
          '$config': config,
          '$gradient': gradient
        },
        'children': []
      });
    }
    var root = {
      'id': prefix + '$root',
      'name': '',
      'data': {
        '$type': 'none',
        '$width': 1,
        '$height': 1
      },
      'children': ch
    };
    delegate.loadJSON(root);
    
    this.normalizeDims();
    delegate.compute();
    delegate.select(delegate.root);
    if(animate) {
      delegate.fx.animate({
        modes: ['node-property:height:dimArray'],
        duration:1500
      });
    }
  },
  
 /*
  Method: updateJSON
 
  Use this method when updating values for the current JSON data. If the items specified by the JSON data already exist in the graph then their values will be updated.
  
  Parameters:
  
  json - (object) JSON data to be updated. The JSON format corresponds to the one described in <AreaChart.loadJSON>.
  onComplete - (object) A callback object to be called when the animation transition when updating the data end.
  
  Example:
  
  (start code js)
  areaChart.updateJSON(json, {
    onComplete: function() {
      alert('update complete!');
    }
  });
  (end code)
 */  
  updateJSON: function(json, onComplete) {
    if(this.busy) return;
    this.busy = true;
    
    var delegate = this.delegate,
        graph = delegate.graph,
        labels = json.label && $.splat(json.label),
        values = json.values,
        animate = this.config.animate,
        that = this,
        hashValues = {};

    //convert the whole thing into a hash
    for (var i = 0, l = values.length; i < l; i++) {
      hashValues[values[i].label] = values[i];
    }
  
    graph.eachNode(function(n) {
      var v = hashValues[n.name],
          stringArray = n.getData('stringArray'),
          valArray = n.getData('valueArray'),
          next = n.getData('next');
      
      if (v) {
        v.values = $.splat(v.values);
        $.each(valArray, function(a, i) {
          a[0] = v.values[i];
          if(labels) stringArray[i] = labels[i];
        });
        n.setData('valueArray', valArray);
      }
     
      if(next) {
        v = hashValues[next];
        if(v) {
          $.each(valArray, function(a, i) {
            a[1] = v.values[i];
          });
        }
      }
    });
    this.normalizeDims();
    delegate.compute();
    delegate.select(delegate.root);
    if(animate) {
      delegate.fx.animate({
        modes: ['node-property:height:dimArray'],
        duration:1500,
        onComplete: function() {
          that.busy = false;
          onComplete && onComplete.onComplete();
        }
      });
    }
  },
  
/*
  Method: filter
 
  Filter selected stacks, collapsing all other stacks. You can filter multiple stacks at the same time.
  
  Parameters:
  
  filters - (array) An array of strings with the name of the stacks to be filtered.
  callback - (object) An object with an *onComplete* callback method. 
  
  Example:
  
  (start code js)
  areaChart.filter(['label A', 'label C'], {
      onComplete: function() {
          console.log('done!');
      }
  });
  (end code)
  
  See also:
  
  <AreaChart.restore>.
 */  
  filter: function(filters, callback) {
    if(this.busy) return;
    this.busy = true;
    if(this.config.Tips.enable) this.delegate.tips.hide();
    this.select(false, false, false);
    var args = $.splat(filters);
    var rt = this.delegate.graph.getNode(this.delegate.root);
    var that = this;
    this.normalizeDims();
    rt.eachAdjacency(function(adj) {
      var n = adj.nodeTo, 
          dimArray = n.getData('dimArray', 'end'),
          stringArray = n.getData('stringArray');
      n.setData('dimArray', $.map(dimArray, function(d, i) {
        return ($.indexOf(args, stringArray[i]) > -1)? d:[0, 0];
      }), 'end');
    });
    this.delegate.fx.animate({
      modes: ['node-property:dimArray'],
      duration:1500,
      onComplete: function() {
        that.busy = false;
        callback && callback.onComplete();
      }
    });
  },
  
  /*
  Method: restore
 
  Sets all stacks that could have been filtered visible.
  
  Example:
  
  (start code js)
  areaChart.restore();
  (end code)
  
  See also:
  
  <AreaChart.filter>.
 */  
  restore: function(callback) {
    if(this.busy) return;
    this.busy = true;
    if(this.config.Tips.enable) this.delegate.tips.hide();
    this.select(false, false, false);
    this.normalizeDims();
    var that = this;
    this.delegate.fx.animate({
      modes: ['node-property:height:dimArray'],
      duration:1500,
      onComplete: function() {
        that.busy = false;
        callback && callback.onComplete();
      }
    });
  },
  //adds the little brown bar when hovering the node
  select: function(id, name, index) {
    if(!this.config.selectOnHover) return;
    var s = this.selected;
    if(s.id != id || s.name != name 
        || s.index != index) {
      s.id = id;
      s.name = name;
      s.index = index;
      this.delegate.graph.eachNode(function(n) {
        n.setData('border', false);
      });
      if(id) {
        var n = this.delegate.graph.getNode(id);
        n.setData('border', s);
        var link = index === 0? 'prev':'next';
        link = n.getData(link);
        if(link) {
          n = this.delegate.graph.getByName(link);
          if(n) {
            n.setData('border', {
              name: name,
              index: 1-index
            });
          }
        }
      }
      this.delegate.plot();
    }
  },
  
  /*
    Method: getLegend
   
    Returns an object containing as keys the legend names and as values hex strings with color values.
    
    Example:
    
    (start code js)
    var legend = areaChart.getLegend();
    (end code)
 */  
  getLegend: function() {
    var legend = {};
    var n;
    this.delegate.graph.getNode(this.delegate.root).eachAdjacency(function(adj) {
      n = adj.nodeTo;
    });
    var colors = n.getData('colorArray'),
        len = colors.length;
    $.each(n.getData('stringArray'), function(s, i) {
      legend[s] = colors[i % len];
    });
    return legend;
  },
  
  /*
    Method: getMaxValue
   
    Returns the maximum accumulated value for the stacks. This method is used for normalizing the graph heights according to the canvas height.
    
    Example:
    
    (start code js)
    var ans = areaChart.getMaxValue();
    (end code)
    
    In some cases it could be useful to override this method to normalize heights for a group of AreaCharts, like when doing small multiples.
    
    Example:
    
    (start code js)
    //will return 100 for all AreaChart instances,
    //displaying all of them with the same scale
    $jit.AreaChart.implement({
      'getMaxValue': function() {
        return 100;
      }
    });
    (end code)
    
*/  
  getMaxValue: function() {
    var maxValue = 0;
    this.delegate.graph.eachNode(function(n) {
      var valArray = n.getData('valueArray'),
          acumLeft = 0, acumRight = 0;
      $.each(valArray, function(v) { 
        acumLeft += +v[0];
        acumRight += +v[1];
      });
      var acum = acumRight>acumLeft? acumRight:acumLeft;
      maxValue = maxValue>acum? maxValue:acum;
    });
    return maxValue;
  },
  
  normalizeDims: function() {
    //number of elements
    var root = this.delegate.graph.getNode(this.delegate.root), l=0;
    root.eachAdjacency(function() {
      l++;
    });
    var maxValue = this.getMaxValue() || 1,
        size = this.delegate.canvas.getSize(),
        config = this.config,
        margin = config.Margin,
        labelOffset = config.labelOffset + config.Label.size,
        fixedDim = (size.width - (margin.left + margin.right)) / l,
        animate = config.animate,
        height = size.height - (margin.top + margin.bottom) - (config.showAggregates && labelOffset) 
          - (config.showLabels && labelOffset);
    this.delegate.graph.eachNode(function(n) {
      var acumLeft = 0, acumRight = 0, animateValue = [];
      $.each(n.getData('valueArray'), function(v) {
        acumLeft += +v[0];
        acumRight += +v[1];
        animateValue.push([0, 0]);
      });
      var acum = acumRight>acumLeft? acumRight:acumLeft;
      n.setData('width', fixedDim);
      if(animate) {
        n.setData('height', acum * height / maxValue, 'end');
        n.setData('dimArray', $.map(n.getData('valueArray'), function(n) { 
          return [n[0] * height / maxValue, n[1] * height / maxValue]; 
        }), 'end');
        var dimArray = n.getData('dimArray');
        if(!dimArray) {
          n.setData('dimArray', animateValue);
        }
      } else {
        n.setData('height', acum * height / maxValue);
        n.setData('dimArray', $.map(n.getData('valueArray'), function(n) { 
          return [n[0] * height / maxValue, n[1] * height / maxValue]; 
        }));
      }
    });
  }
});


/*
 * File: Options.BarChart.js
 *
*/

/*
  Object: Options.BarChart
  
  <BarChart> options. 
  Other options included in the BarChart are <Options.Canvas>, <Options.Label>, <Options.Margin>, <Options.Tips> and <Options.Events>.
  
  Syntax:
  
  (start code js)

  Options.BarChart = {
    animate: true,
    labelOffset: 3,
    barsOffset: 0,
    type: 'stacked',
    hoveredColor: '#9fd4ff',
    orientation: 'horizontal',
    showAggregates: true,
    showLabels: true
  };
  
  (end code)
  
  Example:
  
  (start code js)

  var barChart = new $jit.BarChart({
    animate: true,
    barsOffset: 10,
    type: 'stacked:gradient'
  });
  
  (end code)

  Parameters:
  
  animate - (boolean) Default's *true*. Whether to add animated transitions when filtering/restoring stacks.
  offset - (number) Default's *25*. Adds margin between the visualization and the canvas.
  labelOffset - (number) Default's *3*. Adds margin between the label and the default place where it should be drawn.
  barsOffset - (number) Default's *0*. Separation between bars.
  type - (string) Default's *'stacked'*. Stack or grouped styles. Posible values are 'stacked', 'grouped', 'stacked:gradient', 'grouped:gradient' to add gradients.
  hoveredColor - (boolean|string) Default's *'#9fd4ff'*. Sets the selected color for a hovered bar stack.
  orientation - (string) Default's 'horizontal'. Sets the direction of the bars. Possible options are 'vertical' or 'horizontal'.
  showAggregates - (boolean, function) Default's *true*. Display the sum the values of each bar. Can also be a function that returns *true* or *false* to display the value of the bar or not. That same function can also return a string with the formatted data to be added.
  showLabels - (boolean, function) Default's *true*. Display the name of the slots. Can also be a function that returns *true* or *false* for each bar to decide whether to show the label or not.
  
*/

Options.BarChart = {
  $extend: true,
  
  animate: true,
  type: 'stacked', //stacked, grouped, : gradient
  labelOffset: 3, //label offset
  barsOffset: 0, //distance between bars
  hoveredColor: '#9fd4ff',
  orientation: 'horizontal',
  showAggregates: true,
  showLabels: true,
  Tips: {
    enable: false,
    onShow: $.empty,
    onHide: $.empty
  },
  Events: {
    enable: false,
    onClick: $.empty
  }
};

/*
 * File: BarChart.js
 *
*/

$jit.ST.Plot.NodeTypes.implement({
  'barchart-stacked' : {
    'render' : function(node, canvas) {
      var pos = node.pos.getc(true), 
          width = node.getData('width'),
          height = node.getData('height'),
          algnPos = this.getAlignedPos(pos, width, height),
          x = algnPos.x, y = algnPos.y,
          dimArray = node.getData('dimArray'),
          valueArray = node.getData('valueArray'),
          colorArray = node.getData('colorArray'),
          colorLength = colorArray.length,
          stringArray = node.getData('stringArray');

      var ctx = canvas.getCtx(),
          opt = {},
          border = node.getData('border'),
          gradient = node.getData('gradient'),
          config = node.getData('config'),
          horz = config.orientation == 'horizontal',
          aggregates = config.showAggregates,
          showLabels = config.showLabels,
          label = config.Label;
      
      if (colorArray && dimArray && stringArray) {
        for (var i=0, l=dimArray.length, acum=0, valAcum=0; i<l; i++) {
          ctx.fillStyle = ctx.strokeStyle = colorArray[i % colorLength];
          if(gradient) {
            var linear;
            if(horz) {
              linear = ctx.createLinearGradient(x + acum + dimArray[i]/2, y, 
                  x + acum + dimArray[i]/2, y + height);
            } else {
              linear = ctx.createLinearGradient(x, y - acum - dimArray[i]/2, 
                  x + width, y - acum- dimArray[i]/2);
            }
            var color = $.rgbToHex($.map($.hexToRgb(colorArray[i % colorLength].slice(1)), 
                function(v) { return (v * 0.5) >> 0; }));
            linear.addColorStop(0, color);
            linear.addColorStop(0.5, colorArray[i % colorLength]);
            linear.addColorStop(1, color);
            ctx.fillStyle = linear;
          }
          if(horz) {
            ctx.fillRect(x + acum, y, dimArray[i], height);
          } else {
            ctx.fillRect(x, y - acum - dimArray[i], width, dimArray[i]);
          }
          if(border && border.name == stringArray[i]) {
            opt.acum = acum;
            opt.dimValue = dimArray[i];
          }
          acum += (dimArray[i] || 0);
          valAcum += (valueArray[i] || 0);
        }
        if(border) {
          ctx.save();
          ctx.lineWidth = 2;
          ctx.strokeStyle = border.color;
          if(horz) {
            ctx.strokeRect(x + opt.acum + 1, y + 1, opt.dimValue -2, height - 2);
          } else {
            ctx.strokeRect(x + 1, y - opt.acum - opt.dimValue + 1, width -2, opt.dimValue -2);
          }
          ctx.restore();
        }
        if(label.type == 'Native') {
          ctx.save();
          ctx.fillStyle = ctx.strokeStyle = label.color;
          ctx.font = label.style + ' ' + label.size + 'px ' + label.family;
          ctx.textBaseline = 'middle';
          var aggValue = aggregates(node.name, valAcum, node);
          if(aggValue !== false) {
            aggValue = aggValue !== true? aggValue : valAcum;
            if(horz) {
              ctx.textAlign = 'right';
              ctx.fillText(aggValue, x + acum - config.labelOffset, y + height/2);
            } else {
              ctx.textAlign = 'center';
              ctx.fillText(aggValue, x + width/2, y - height - label.size/2 - config.labelOffset);
            }
          }
          if(showLabels(node.name, valAcum, node)) {
            if(horz) {
              ctx.textAlign = 'center';
              ctx.translate(x - config.labelOffset - label.size/2, y + height/2);
              ctx.rotate(Math.PI / 2);
              ctx.fillText(node.name, 0, 0);
            } else {
              ctx.textAlign = 'center';
              ctx.fillText(node.name, x + width/2, y + label.size/2 + config.labelOffset);
            }
          }
          ctx.restore();
        }
      }
    },
    'contains': function(node, mpos) {
      var pos = node.pos.getc(true), 
          width = node.getData('width'),
          height = node.getData('height'),
          algnPos = this.getAlignedPos(pos, width, height),
          x = algnPos.x, y = algnPos.y,
          dimArray = node.getData('dimArray'),
          config = node.getData('config'),
          rx = mpos.x - x,
          horz = config.orientation == 'horizontal';
      //bounding box check
      if(horz) {
        if(mpos.x < x || mpos.x > x + width
            || mpos.y > y + height || mpos.y < y) {
            return false;
          }
      } else {
        if(mpos.x < x || mpos.x > x + width
            || mpos.y > y || mpos.y < y - height) {
            return false;
          }
      }
      //deep check
      for(var i=0, l=dimArray.length, acum=(horz? x:y); i<l; i++) {
        var dimi = dimArray[i];
        if(horz) {
          acum += dimi;
          var intersec = acum;
          if(mpos.x <= intersec) {
            return {
              'name': node.getData('stringArray')[i],
              'color': node.getData('colorArray')[i],
              'value': node.getData('valueArray')[i],
              'label': node.name
            };
          }
        } else {
          acum -= dimi;
          var intersec = acum;
          if(mpos.y >= intersec) {
            return {
              'name': node.getData('stringArray')[i],
              'color': node.getData('colorArray')[i],
              'value': node.getData('valueArray')[i],
              'label': node.name
            };
          }
        }
      }
      return false;
    }
  },
  'barchart-grouped' : {
    'render' : function(node, canvas) {
      var pos = node.pos.getc(true), 
          width = node.getData('width'),
          height = node.getData('height'),
          algnPos = this.getAlignedPos(pos, width, height),
          x = algnPos.x, y = algnPos.y,
          dimArray = node.getData('dimArray'),
          valueArray = node.getData('valueArray'),
          valueLength = valueArray.length,
          colorArray = node.getData('colorArray'),
          colorLength = colorArray.length,
          stringArray = node.getData('stringArray'); 

      var ctx = canvas.getCtx(),
          opt = {},
          border = node.getData('border'),
          gradient = node.getData('gradient'),
          config = node.getData('config'),
          horz = config.orientation == 'horizontal',
          aggregates = config.showAggregates,
          showLabels = config.showLabels,
          label = config.Label,
          fixedDim = (horz? height : width) / valueLength;
      
      if (colorArray && dimArray && stringArray) {
        for (var i=0, l=valueLength, acum=0, valAcum=0; i<l; i++) {
          ctx.fillStyle = ctx.strokeStyle = colorArray[i % colorLength];
          if(gradient) {
            var linear;
            if(horz) {
              linear = ctx.createLinearGradient(x + dimArray[i]/2, y + fixedDim * i, 
                  x + dimArray[i]/2, y + fixedDim * (i + 1));
            } else {
              linear = ctx.createLinearGradient(x + fixedDim * i, y - dimArray[i]/2, 
                  x + fixedDim * (i + 1), y - dimArray[i]/2);
            }
            var color = $.rgbToHex($.map($.hexToRgb(colorArray[i % colorLength].slice(1)), 
                function(v) { return (v * 0.5) >> 0; }));
            linear.addColorStop(0, color);
            linear.addColorStop(0.5, colorArray[i % colorLength]);
            linear.addColorStop(1, color);
            ctx.fillStyle = linear;
          }
          if(horz) {
            ctx.fillRect(x, y + fixedDim * i, dimArray[i], fixedDim);
          } else {
            ctx.fillRect(x + fixedDim * i, y - dimArray[i], fixedDim, dimArray[i]);
          }
          if(border && border.name == stringArray[i]) {
            opt.acum = fixedDim * i;
            opt.dimValue = dimArray[i];
          }
          acum += (dimArray[i] || 0);
          valAcum += (valueArray[i] || 0);
        }
        if(border) {
          ctx.save();
          ctx.lineWidth = 2;
          ctx.strokeStyle = border.color;
          if(horz) {
            ctx.strokeRect(x + 1, y + opt.acum + 1, opt.dimValue -2, fixedDim - 2);
          } else {
            ctx.strokeRect(x + opt.acum + 1, y - opt.dimValue + 1, fixedDim -2, opt.dimValue -2);
          }
          ctx.restore();
        }
        if(label.type == 'Native') {
          ctx.save();
          ctx.fillStyle = ctx.strokeStyle = label.color;
          ctx.font = label.style + ' ' + label.size + 'px ' + label.family;
          ctx.textBaseline = 'middle';
          var aggValue = aggregates(node.name, valAcum, node);
          if(aggValue !== false) {
            aggValue = aggValue !== true? aggValue : valAcum;
            if(horz) {
              ctx.textAlign = 'right';
              ctx.fillText(aggValue, x + Math.max.apply(null, dimArray) - config.labelOffset, y + height/2);
            } else {
              ctx.textAlign = 'center';
              ctx.fillText(aggValue, x + width/2, y - Math.max.apply(null, dimArray) - label.size/2 - config.labelOffset);
            }
          }
          if(showLabels(node.name, valAcum, node)) {
            if(horz) {
              ctx.textAlign = 'center';
              ctx.translate(x - config.labelOffset - label.size/2, y + height/2);
              ctx.rotate(Math.PI / 2);
              ctx.fillText(node.name, 0, 0);
            } else {
              ctx.textAlign = 'center';
              ctx.fillText(node.name, x + width/2, y + label.size/2 + config.labelOffset);
            }
          }
          ctx.restore();
        }
      }
    },
    'contains': function(node, mpos) {
      var pos = node.pos.getc(true), 
          width = node.getData('width'),
          height = node.getData('height'),
          algnPos = this.getAlignedPos(pos, width, height),
          x = algnPos.x, y = algnPos.y,
          dimArray = node.getData('dimArray'),
          len = dimArray.length,
          config = node.getData('config'),
          rx = mpos.x - x,
          horz = config.orientation == 'horizontal',
          fixedDim = (horz? height : width) / len;
      //bounding box check
      if(horz) {
        if(mpos.x < x || mpos.x > x + width
            || mpos.y > y + height || mpos.y < y) {
            return false;
          }
      } else {
        if(mpos.x < x || mpos.x > x + width
            || mpos.y > y || mpos.y < y - height) {
            return false;
          }
      }
      //deep check
      for(var i=0, l=dimArray.length; i<l; i++) {
        var dimi = dimArray[i];
        if(horz) {
          var limit = y + fixedDim * i;
          if(mpos.x <= x+ dimi && mpos.y >= limit && mpos.y <= limit + fixedDim) {
            return {
              'name': node.getData('stringArray')[i],
              'color': node.getData('colorArray')[i],
              'value': node.getData('valueArray')[i],
              'label': node.name
            };
          }
        } else {
          var limit = x + fixedDim * i;
          if(mpos.x >= limit && mpos.x <= limit + fixedDim && mpos.y >= y - dimi) {
            return {
              'name': node.getData('stringArray')[i],
              'color': node.getData('colorArray')[i],
              'value': node.getData('valueArray')[i],
              'label': node.name
            };
          }
        }
      }
      return false;
    }
  }
});

/*
  Class: BarChart
  
  A visualization that displays stacked bar charts.
  
  Constructor Options:
  
  See <Options.BarChart>.

*/
$jit.BarChart = new Class({
  st: null,
  colors: ["#416D9C", "#70A35E", "#EBB056", "#C74243", "#83548B", "#909291", "#557EAA"],
  selected: {},
  busy: false,
  
  initialize: function(opt) {
    this.controller = this.config = 
      $.merge(Options("Canvas", "Margin", "Label", "BarChart"), {
        Label: { type: 'Native' }
      }, opt);
    //set functions for showLabels and showAggregates
    var showLabels = this.config.showLabels,
        typeLabels = $.type(showLabels),
        showAggregates = this.config.showAggregates,
        typeAggregates = $.type(showAggregates);
    this.config.showLabels = typeLabels == 'function'? showLabels : $.lambda(showLabels);
    this.config.showAggregates = typeAggregates == 'function'? showAggregates : $.lambda(showAggregates);
    
    this.initializeViz();
  },
  
  initializeViz: function() {
    var config = this.config, that = this;
    var nodeType = config.type.split(":")[0],
        horz = config.orientation == 'horizontal',
        nodeLabels = {};
    
    var delegate = new $jit.ST({
      injectInto: config.injectInto,
      width: config.width,
      height: config.height,
      orientation: horz? 'left' : 'bottom',
      levelDistance: 0,
      siblingOffset: config.barsOffset,
      subtreeOffset: 0,
      withLabels: config.Label.type != 'Native',      
      useCanvas: config.useCanvas,
      Label: {
        type: config.Label.type
      },
      Node: {
        overridable: true,
        type: 'barchart-' + nodeType,
        align: 'left',
        width: 1,
        height: 1
      },
      Edge: {
        type: 'none'
      },
      Tips: {
        enable: config.Tips.enable,
        type: 'Native',
        force: true,
        onShow: function(tip, node, contains) {
          var elem = contains;
          config.Tips.onShow(tip, elem, node);
        }
      },
      Events: {
        enable: true,
        type: 'Native',
        onClick: function(node, eventInfo, evt) {
          if(!config.Events.enable) return;
          var elem = eventInfo.getContains();
          config.Events.onClick(elem, eventInfo, evt);
        },
        onMouseMove: function(node, eventInfo, evt) {
          if(!config.hoveredColor) return;
          if(node) {
            var elem = eventInfo.getContains();
            that.select(node.id, elem.name, elem.index);
          } else {
            that.select(false, false, false);
          }
        }
      },
      onCreateLabel: function(domElement, node) {
        var labelConf = config.Label,
            valueArray = node.getData('valueArray'),
            acum = $.reduce(valueArray, function(x, y) { return x + y; }, 0);
        var nlbs = {
          wrapper: document.createElement('div'),
          aggregate: document.createElement('div'),
          label: document.createElement('div')
        };
        var wrapper = nlbs.wrapper,
            label = nlbs.label,
            aggregate = nlbs.aggregate,
            wrapperStyle = wrapper.style,
            labelStyle = label.style,
            aggregateStyle = aggregate.style;
        //store node labels
        nodeLabels[node.id] = nlbs;
        //append labels
        wrapper.appendChild(label);
        wrapper.appendChild(aggregate);
        if(!config.showLabels(node.name, acum, node)) {
          labelStyle.display = 'none';
        }
        if(!config.showAggregates(node.name, acum, node)) {
          aggregateStyle.display = 'none';
        }
        wrapperStyle.position = 'relative';
        wrapperStyle.overflow = 'visible';
        wrapperStyle.fontSize = labelConf.size + 'px';
        wrapperStyle.fontFamily = labelConf.family;
        wrapperStyle.color = labelConf.color;
        wrapperStyle.textAlign = 'center';
        aggregateStyle.position = labelStyle.position = 'absolute';
        
        domElement.style.width = node.getData('width') + 'px';
        domElement.style.height = node.getData('height') + 'px';
        aggregateStyle.left = labelStyle.left =  '0px';

        label.innerHTML = node.name;
        
        domElement.appendChild(wrapper);
      },
      onPlaceLabel: function(domElement, node) {
        if(!nodeLabels[node.id]) return;
        var labels = nodeLabels[node.id],
            wrapperStyle = labels.wrapper.style,
            labelStyle = labels.label.style,
            aggregateStyle = labels.aggregate.style,
            grouped = config.type.split(':')[0] == 'grouped',
            horz = config.orientation == 'horizontal',
            dimArray = node.getData('dimArray'),
            valArray = node.getData('valueArray'),
            width = (grouped && horz)? Math.max.apply(null, dimArray) : node.getData('width'),
            height = (grouped && !horz)? Math.max.apply(null, dimArray) : node.getData('height'),
            font = parseInt(wrapperStyle.fontSize, 10),
            domStyle = domElement.style;
            
        
        if(dimArray && valArray) {
          wrapperStyle.width = aggregateStyle.width = labelStyle.width = domElement.style.width = width + 'px';
          for(var i=0, l=valArray.length, acum=0; i<l; i++) {
            if(dimArray[i] > 0) {
              acum+= valArray[i];
            }
          }
          if(config.showLabels(node.name, acum, node)) {
            labelStyle.display = '';
          } else {
            labelStyle.display = 'none';
          }
          var aggValue = config.showAggregates(node.name, acum, node);
          if(aggValue !== false) {
            aggregateStyle.display = '';
          } else {
            aggregateStyle.display = 'none';
          }
          if(config.orientation == 'horizontal') {
            aggregateStyle.textAlign = 'right';
            labelStyle.textAlign = 'left';
            labelStyle.textIndex = aggregateStyle.textIndent = config.labelOffset + 'px';
            aggregateStyle.top = labelStyle.top = (height-font)/2 + 'px';
            domElement.style.height = wrapperStyle.height = height + 'px';
          } else {
            aggregateStyle.top = (-font - config.labelOffset) + 'px';
            labelStyle.top = (config.labelOffset + height) + 'px';
            domElement.style.top = parseInt(domElement.style.top, 10) - height + 'px';
            domElement.style.height = wrapperStyle.height = height + 'px';
          }
          labels.aggregate.innerHTML = aggValue !== true? aggValue : acum;
        }
      }
    });
    
    var size = delegate.canvas.getSize(),
        margin = config.Margin;
    if(horz) {
      delegate.config.offsetX = size.width/2 - margin.left
        - (config.showLabels && (config.labelOffset + config.Label.size));    
      delegate.config.offsetY = (margin.bottom - margin.top)/2;
    } else {
      delegate.config.offsetY = -size.height/2 + margin.bottom 
        + (config.showLabels && (config.labelOffset + config.Label.size));
      delegate.config.offsetX = (margin.right - margin.left)/2;
    }
    this.delegate = delegate;
    this.canvas = this.delegate.canvas;
  },
  
  /*
    Method: loadJSON
   
    Loads JSON data into the visualization. 
    
    Parameters:
    
    json - The JSON data format. This format is described in <http://blog.thejit.org/2010/04/24/new-javascript-infovis-toolkit-visualizations/#json-data-format>.
    
    Example:
    (start code js)
    var barChart = new $jit.BarChart(options);
    barChart.loadJSON(json);
    (end code)
 */  
  loadJSON: function(json) {
    if(this.busy) return;
    this.busy = true;
    
    var prefix = $.time(), 
        ch = [], 
        delegate = this.delegate,
        name = $.splat(json.label), 
        color = $.splat(json.color || this.colors),
        config = this.config,
        gradient = !!config.type.split(":")[1],
        animate = config.animate,
        horz = config.orientation == 'horizontal',
        that = this;
    
    for(var i=0, values=json.values, l=values.length; i<l; i++) {
      var val = values[i]
      var valArray = $.splat(values[i].values);
      var acum = 0;
      ch.push({
        'id': prefix + val.label,
        'name': val.label,
        'data': {
          'value': valArray,
          '$valueArray': valArray,
          '$colorArray': color,
          '$stringArray': name,
          '$gradient': gradient,
          '$config': config
        },
        'children': []
      });
    }
    var root = {
      'id': prefix + '$root',
      'name': '',
      'data': {
        '$type': 'none',
        '$width': 1,
        '$height': 1
      },
      'children': ch
    };
    delegate.loadJSON(root);
    
    this.normalizeDims();
    delegate.compute();
    delegate.select(delegate.root);
    if(animate) {
      if(horz) {
        delegate.fx.animate({
          modes: ['node-property:width:dimArray'],
          duration:1500,
          onComplete: function() {
            that.busy = false;
          }
        });
      } else {
        delegate.fx.animate({
          modes: ['node-property:height:dimArray'],
          duration:1500,
          onComplete: function() {
            that.busy = false;
          }
        });
      }
    } else {
      this.busy = false;
    }
  },
  
  /*
    Method: updateJSON
   
    Use this method when updating values for the current JSON data. If the items specified by the JSON data already exist in the graph then their values will be updated.
    
    Parameters:
    
    json - (object) JSON data to be updated. The JSON format corresponds to the one described in <BarChart.loadJSON>.
    onComplete - (object) A callback object to be called when the animation transition when updating the data end.
    
    Example:
    
    (start code js)
    barChart.updateJSON(json, {
      onComplete: function() {
        alert('update complete!');
      }
    });
    (end code)
 */  
  updateJSON: function(json, onComplete) {
    if(this.busy) return;
    this.busy = true;
    this.select(false, false, false);
    var delegate = this.delegate;
    var graph = delegate.graph;
    var values = json.values;
    var animate = this.config.animate;
    var that = this;
    var horz = this.config.orientation == 'horizontal';
    $.each(values, function(v) {
      var n = graph.getByName(v.label);
      if(n) {
        n.setData('valueArray', $.splat(v.values));
        if(json.label) {
          n.setData('stringArray', $.splat(json.label));
        }
      }
    });
    this.normalizeDims();
    delegate.compute();
    delegate.select(delegate.root);
    if(animate) {
      if(horz) {
        delegate.fx.animate({
          modes: ['node-property:width:dimArray'],
          duration:1500,
          onComplete: function() {
            that.busy = false;
            onComplete && onComplete.onComplete();
          }
        });
      } else {
        delegate.fx.animate({
          modes: ['node-property:height:dimArray'],
          duration:1500,
          onComplete: function() {
            that.busy = false;
            onComplete && onComplete.onComplete();
          }
        });
      }
    }
  },
  
  //adds the little brown bar when hovering the node
  select: function(id, name) {
    if(!this.config.hoveredColor) return;
    var s = this.selected;
    if(s.id != id || s.name != name) {
      s.id = id;
      s.name = name;
      s.color = this.config.hoveredColor;
      this.delegate.graph.eachNode(function(n) {
        if(id == n.id) {
          n.setData('border', s);
        } else {
          n.setData('border', false);
        }
      });
      this.delegate.plot();
    }
  },
  
  /*
    Method: getLegend
   
    Returns an object containing as keys the legend names and as values hex strings with color values.
    
    Example:
    
    (start code js)
    var legend = barChart.getLegend();
    (end code)
  */  
  getLegend: function() {
    var legend = {};
    var n;
    this.delegate.graph.getNode(this.delegate.root).eachAdjacency(function(adj) {
      n = adj.nodeTo;
    });
    var colors = n.getData('colorArray'),
        len = colors.length;
    $.each(n.getData('stringArray'), function(s, i) {
      legend[s] = colors[i % len];
    });
    return legend;
  },
  
  /*
    Method: getMaxValue
   
    Returns the maximum accumulated value for the stacks. This method is used for normalizing the graph heights according to the canvas height.
    
    Example:
    
    (start code js)
    var ans = barChart.getMaxValue();
    (end code)
    
    In some cases it could be useful to override this method to normalize heights for a group of BarCharts, like when doing small multiples.
    
    Example:
    
    (start code js)
    //will return 100 for all BarChart instances,
    //displaying all of them with the same scale
    $jit.BarChart.implement({
      'getMaxValue': function() {
        return 100;
      }
    });
    (end code)
    
  */  
  getMaxValue: function() {
    var maxValue = 0, stacked = this.config.type.split(':')[0] == 'stacked';
    this.delegate.graph.eachNode(function(n) {
      var valArray = n.getData('valueArray'),
          acum = 0;
      if(!valArray) return;
      if(stacked) {
        $.each(valArray, function(v) { 
          acum += +v;
        });
      } else {
        acum = Math.max.apply(null, valArray);
      }
      maxValue = maxValue>acum? maxValue:acum;
    });
    return maxValue;
  },
  
  setBarType: function(type) {
    this.config.type = type;
    this.delegate.config.Node.type = 'barchart-' + type.split(':')[0];
  },
  
  normalizeDims: function() {
    //number of elements
    var root = this.delegate.graph.getNode(this.delegate.root), l=0;
    root.eachAdjacency(function() {
      l++;
    });
    var maxValue = this.getMaxValue() || 1,
        size = this.delegate.canvas.getSize(),
        config = this.config,
        margin = config.Margin,
        marginWidth = margin.left + margin.right,
        marginHeight = margin.top + margin.bottom,
        horz = config.orientation == 'horizontal',
        fixedDim = (size[horz? 'height':'width'] - (horz? marginHeight:marginWidth) - (l -1) * config.barsOffset) / l,
        animate = config.animate,
        height = size[horz? 'width':'height'] - (horz? marginWidth:marginHeight) 
          - (!horz && config.showAggregates && (config.Label.size + config.labelOffset))
          - (config.showLabels && (config.Label.size + config.labelOffset)),
        dim1 = horz? 'height':'width',
        dim2 = horz? 'width':'height';
    this.delegate.graph.eachNode(function(n) {
      var acum = 0, animateValue = [];
      $.each(n.getData('valueArray'), function(v) {
        acum += +v;
        animateValue.push(0);
      });
      n.setData(dim1, fixedDim);
      if(animate) {
        n.setData(dim2, acum * height / maxValue, 'end');
        n.setData('dimArray', $.map(n.getData('valueArray'), function(n) { 
          return n * height / maxValue; 
        }), 'end');
        var dimArray = n.getData('dimArray');
        if(!dimArray) {
          n.setData('dimArray', animateValue);
        }
      } else {
        n.setData(dim2, acum * height / maxValue);
        n.setData('dimArray', $.map(n.getData('valueArray'), function(n) { 
          return n * height / maxValue; 
        }));
      }
    });
  }
});


/*
 * File: Options.PieChart.js
 *
*/
/*
  Object: Options.PieChart
  
  <PieChart> options. 
  Other options included in the PieChart are <Options.Canvas>, <Options.Label>, <Options.Tips> and <Options.Events>.
  
  Syntax:
  
  (start code js)

  Options.PieChart = {
    animate: true,
    offset: 25,
    sliceOffset:0,
    labelOffset: 3,
    type: 'stacked',
    hoveredColor: '#9fd4ff',
    showLabels: true,
    resizeLabels: false,
    updateHeights: false
  };  

  (end code)
  
  Example:
  
  (start code js)

  var pie = new $jit.PieChart({
    animate: true,
    sliceOffset: 5,
    type: 'stacked:gradient'
  });  

  (end code)
  
  Parameters:
  
  animate - (boolean) Default's *true*. Whether to add animated transitions when plotting/updating the visualization.
  offset - (number) Default's *25*. Adds margin between the visualization and the canvas.
  sliceOffset - (number) Default's *0*. Separation between the center of the canvas and each pie slice.
  labelOffset - (number) Default's *3*. Adds margin between the label and the default place where it should be drawn.
  type - (string) Default's *'stacked'*. Stack style. Posible values are 'stacked', 'stacked:gradient' to add gradients.
  hoveredColor - (boolean|string) Default's *'#9fd4ff'*. Sets the selected color for a hovered pie stack.
  showLabels - (boolean) Default's *true*. Display the name of the slots.
  resizeLabels - (boolean|number) Default's *false*. Resize the pie labels according to their stacked values. Set a number for *resizeLabels* to set a font size minimum.
  updateHeights - (boolean) Default's *false*. Only for mono-valued (most common) pie charts. Resize the height of the pie slices according to their current values.

*/
Options.PieChart = {
  $extend: true,

  animate: true,
  offset: 25, // page offset
  sliceOffset:0,
  labelOffset: 3, // label offset
  type: 'stacked', // gradient
  hoveredColor: '#9fd4ff',
  Events: {
    enable: false,
    onClick: $.empty
  },
  Tips: {
    enable: false,
    onShow: $.empty,
    onHide: $.empty
  },
  showLabels: true,
  resizeLabels: false,
  
  //only valid for mono-valued datasets
  updateHeights: false
};

/*
 * Class: Layouts.Radial
 * 
 * Implements a Radial Layout.
 * 
 * Implemented By:
 * 
 * <RGraph>, <Hypertree>
 * 
 */
Layouts.Radial = new Class({

  /*
   * Method: compute
   * 
   * Computes nodes' positions.
   * 
   * Parameters:
   * 
   * property - _optional_ A <Graph.Node> position property to store the new
   * positions. Possible values are 'pos', 'end' or 'start'.
   * 
   */
  compute : function(property) {
    var prop = $.splat(property || [ 'current', 'start', 'end' ]);
    NodeDim.compute(this.graph, prop, this.config);
    this.graph.computeLevels(this.root, 0, "ignore");
    var lengthFunc = this.createLevelDistanceFunc(); 
    this.computeAngularWidths(prop);
    this.computePositions(prop, lengthFunc);
  },

  /*
   * computePositions
   * 
   * Performs the main algorithm for computing node positions.
   */
  computePositions : function(property, getLength) {
    var propArray = property;
    var graph = this.graph;
    var root = graph.getNode(this.root);
    var parent = this.parent;
    var config = this.config;

    for ( var i=0, l=propArray.length; i < l; i++) {
      var pi = propArray[i];
      root.setPos($P(0, 0), pi);
      root.setData('span', Math.PI * 2, pi);
    }

    root.angleSpan = {
      begin : 0,
      end : 2 * Math.PI
    };

    graph.eachBFS(this.root, function(elem) {
      var angleSpan = elem.angleSpan.end - elem.angleSpan.begin;
      var angleInit = elem.angleSpan.begin;
      var len = getLength(elem);
      //Calculate the sum of all angular widths
      var totalAngularWidths = 0, subnodes = [], maxDim = {};
      elem.eachSubnode(function(sib) {
        totalAngularWidths += sib._treeAngularWidth;
        //get max dim
        for ( var i=0, l=propArray.length; i < l; i++) {
          var pi = propArray[i], dim = sib.getData('dim', pi);
          maxDim[pi] = (pi in maxDim)? (dim > maxDim[pi]? dim : maxDim[pi]) : dim;
        }
        subnodes.push(sib);
      }, "ignore");
      //Maintain children order
      //Second constraint for <http://bailando.sims.berkeley.edu/papers/infovis01.htm>
      if (parent && parent.id == elem.id && subnodes.length > 0
          && subnodes[0].dist) {
        subnodes.sort(function(a, b) {
          return (a.dist >= b.dist) - (a.dist <= b.dist);
        });
      }
      //Calculate nodes positions.
      for (var k = 0, ls=subnodes.length; k < ls; k++) {
        var child = subnodes[k];
        if (!child._flag) {
          var angleProportion = child._treeAngularWidth / totalAngularWidths * angleSpan;
          var theta = angleInit + angleProportion / 2;

          for ( var i=0, l=propArray.length; i < l; i++) {
            var pi = propArray[i];
            child.setPos($P(theta, len), pi);
            child.setData('span', angleProportion, pi);
            child.setData('dim-quotient', child.getData('dim', pi) / maxDim[pi], pi);
          }

          child.angleSpan = {
            begin : angleInit,
            end : angleInit + angleProportion
          };
          angleInit += angleProportion;
        }
      }
    }, "ignore");
  },

  /*
   * Method: setAngularWidthForNodes
   * 
   * Sets nodes angular widths.
   */
  setAngularWidthForNodes : function(prop) {
    this.graph.eachBFS(this.root, function(elem, i) {
      var diamValue = elem.getData('angularWidth', prop[0]) || 5;
      elem._angularWidth = diamValue / i;
    }, "ignore");
  },

  /*
   * Method: setSubtreesAngularWidth
   * 
   * Sets subtrees angular widths.
   */
  setSubtreesAngularWidth : function() {
    var that = this;
    this.graph.eachNode(function(elem) {
      that.setSubtreeAngularWidth(elem);
    }, "ignore");
  },

  /*
   * Method: setSubtreeAngularWidth
   * 
   * Sets the angular width for a subtree.
   */
  setSubtreeAngularWidth : function(elem) {
    var that = this, nodeAW = elem._angularWidth, sumAW = 0;
    elem.eachSubnode(function(child) {
      that.setSubtreeAngularWidth(child);
      sumAW += child._treeAngularWidth;
    }, "ignore");
    elem._treeAngularWidth = Math.max(nodeAW, sumAW);
  },

  /*
   * Method: computeAngularWidths
   * 
   * Computes nodes and subtrees angular widths.
   */
  computeAngularWidths : function(prop) {
    this.setAngularWidthForNodes(prop);
    this.setSubtreesAngularWidth();
  }

});


/*
 * File: Sunburst.js
 */

/*
   Class: Sunburst
      
   A radial space filling tree visualization.
   
   Inspired by:
 
   Sunburst <http://www.cc.gatech.edu/gvu/ii/sunburst/>.
   
   Note:
   
   This visualization was built and engineered from scratch, taking only the paper as inspiration, and only shares some features with the visualization described in the paper.
   
  Implements:
  
  All <Loader> methods
  
   Constructor Options:
   
   Inherits options from
   
   - <Options.Canvas>
   - <Options.Controller>
   - <Options.Node>
   - <Options.Edge>
   - <Options.Label>
   - <Options.Events>
   - <Options.Tips>
   - <Options.NodeStyles>
   - <Options.Navigation>
   
   Additionally, there are other parameters and some default values changed
   
   interpolation - (string) Default's *linear*. Describes the way nodes are interpolated. Possible values are 'linear' and 'polar'.
   levelDistance - (number) Default's *100*. The distance between levels of the tree. 
   Node.type - Described in <Options.Node>. Default's to *multipie*.
   Node.height - Described in <Options.Node>. Default's *0*.
   Edge.type - Described in <Options.Edge>. Default's *none*.
   Label.textAlign - Described in <Options.Label>. Default's *start*.
   Label.textBaseline - Described in <Options.Label>. Default's *middle*.
     
   Instance Properties:

   canvas - Access a <Canvas> instance.
   graph - Access a <Graph> instance.
   op - Access a <Sunburst.Op> instance.
   fx - Access a <Sunburst.Plot> instance.
   labels - Access a <Sunburst.Label> interface implementation.   

*/

$jit.Sunburst = new Class({

  Implements: [ Loader, Extras, Layouts.Radial ],

  initialize: function(controller) {
    var $Sunburst = $jit.Sunburst;

    var config = {
      interpolation: 'linear',
      levelDistance: 100,
      Node: {
        'type': 'multipie',
        'height':0
      },
      Edge: {
        'type': 'none'
      },
      Label: {
        textAlign: 'start',
        textBaseline: 'middle'
      }
    };

    this.controller = this.config = $.merge(Options("Canvas", "Node", "Edge",
        "Fx", "Tips", "NodeStyles", "Events", "Navigation", "Controller", "Label"), config, controller);

    var canvasConfig = this.config;
    if(canvasConfig.useCanvas) {
      this.canvas = canvasConfig.useCanvas;
      this.config.labelContainer = this.canvas.id + '-label';
    } else {
      if(canvasConfig.background) {
        canvasConfig.background = $.merge({
          type: 'Circles'
        }, canvasConfig.background);
      }
      this.canvas = new Canvas(this, canvasConfig);
      this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
    }

    this.graphOptions = {
      'klass': Polar,
      'Node': {
        'selected': false,
        'exist': true,
        'drawn': true
      }
    };
    this.graph = new Graph(this.graphOptions, this.config.Node,
        this.config.Edge);
    this.labels = new $Sunburst.Label[canvasConfig.Label.type](this);
    this.fx = new $Sunburst.Plot(this, $Sunburst);
    this.op = new $Sunburst.Op(this);
    this.json = null;
    this.root = null;
    this.rotated = null;
    this.busy = false;
    // initialize extras
    this.initializeExtras();
  },

  /* 
  
    createLevelDistanceFunc 
  
    Returns the levelDistance function used for calculating a node distance 
    to its origin. This function returns a function that is computed 
    per level and not per node, such that all nodes with the same depth will have the 
    same distance to the origin. The resulting function gets the 
    parent node as parameter and returns a float.

   */
  createLevelDistanceFunc: function() {
    var ld = this.config.levelDistance;
    return function(elem) {
      return (elem._depth + 1) * ld;
    };
  },

  /* 
     Method: refresh 
     
     Computes positions and plots the tree.

   */
  refresh: function() {
    this.compute();
    this.plot();
  },

  /*
   reposition
  
   An alias for computing new positions to _endPos_

   See also:

   <Sunburst.compute>
   
  */
  reposition: function() {
    this.compute('end');
  },

  /*
  Method: rotate
  
  Rotates the graph so that the selected node is horizontal on the right.

  Parameters:
  
  node - (object) A <Graph.Node>.
  method - (string) Whether to perform an animation or just replot the graph. Possible values are "replot" or "animate".
  opt - (object) Configuration options merged with this visualization configuration options.
  
  See also:

  <Sunburst.rotateAngle>
  
  */
  rotate: function(node, method, opt) {
    var theta = node.getPos(opt.property || 'current').getp(true).theta;
    this.rotated = node;
    this.rotateAngle(-theta, method, opt);
  },

  /*
  Method: rotateAngle
  
  Rotates the graph of an angle theta.
  
   Parameters:
   
   node - (object) A <Graph.Node>.
   method - (string) Whether to perform an animation or just replot the graph. Possible values are "replot" or "animate".
   opt - (object) Configuration options merged with this visualization configuration options.
   
   See also:

   <Sunburst.rotate>
  
  */
  rotateAngle: function(theta, method, opt) {
    var that = this;
    var options = $.merge(this.config, opt || {}, {
      modes: [ 'polar' ]
    });
    var prop = opt.property || (method === "animate" ? 'end' : 'current');
    if(method === 'animate') {
      this.fx.animation.pause();
    }
    this.graph.eachNode(function(n) {
      var p = n.getPos(prop);
      p.theta += theta;
      if (p.theta < 0) {
        p.theta += Math.PI * 2;
      }
    });
    if (method == 'animate') {
      this.fx.animate(options);
    } else if (method == 'replot') {
      this.fx.plot();
      this.busy = false;
    }
  },

  /*
   Method: plot
  
   Plots the Sunburst. This is a shortcut to *fx.plot*.
  */
  plot: function() {
    this.fx.plot();
  }
});

$jit.Sunburst.$extend = true;

(function(Sunburst) {

  /*
     Class: Sunburst.Op

     Custom extension of <Graph.Op>.

     Extends:

     All <Graph.Op> methods
     
     See also:
     
     <Graph.Op>

  */
  Sunburst.Op = new Class( {

    Implements: Graph.Op

  });

  /*
     Class: Sunburst.Plot

    Custom extension of <Graph.Plot>.
  
    Extends:
  
    All <Graph.Plot> methods
    
    See also:
    
    <Graph.Plot>
  
  */
  Sunburst.Plot = new Class( {

    Implements: Graph.Plot

  });

  /*
    Class: Sunburst.Label

    Custom extension of <Graph.Label>. 
    Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.
  
    Extends:
  
    All <Graph.Label> methods and subclasses.
  
    See also:
  
    <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.
  
   */
  Sunburst.Label = {};

  /*
     Sunburst.Label.Native

     Custom extension of <Graph.Label.Native>.

     Extends:

     All <Graph.Label.Native> methods

     See also:

     <Graph.Label.Native>
  */
  Sunburst.Label.Native = new Class( {
    Implements: Graph.Label.Native,

    initialize: function(viz) {
      this.viz = viz;
      this.label = viz.config.Label;
      this.config = viz.config;
    },

    renderLabel: function(canvas, node, controller) {
      var span = node.getData('span');
      if(span < Math.PI /2 && Math.tan(span) * 
          this.config.levelDistance * node._depth < 10) {
        return;
      }
      var ctx = canvas.getCtx();
      var measure = ctx.measureText(node.name);
      if (node.id == this.viz.root) {
        var x = -measure.width / 2, y = 0, thetap = 0;
        var ld = 0;
      } else {
        var indent = 5;
        var ld = controller.levelDistance - indent;
        var clone = node.pos.clone();
        clone.rho += indent;
        var p = clone.getp(true);
        var ct = clone.getc(true);
        var x = ct.x, y = ct.y;
        // get angle in degrees
        var pi = Math.PI;
        var cond = (p.theta > pi / 2 && p.theta < 3 * pi / 2);
        var thetap = cond ? p.theta + pi : p.theta;
        if (cond) {
          x -= Math.abs(Math.cos(p.theta) * measure.width);
          y += Math.sin(p.theta) * measure.width;
        } else if (node.id == this.viz.root) {
          x -= measure.width / 2;
        }
      }
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(thetap);
      ctx.fillText(node.name, 0, 0);
      ctx.restore();
    }
  });

  /*
     Sunburst.Label.SVG

    Custom extension of <Graph.Label.SVG>.
  
    Extends:
  
    All <Graph.Label.SVG> methods
  
    See also:
  
    <Graph.Label.SVG>
  
  */
  Sunburst.Label.SVG = new Class( {
    Implements: Graph.Label.SVG,

    initialize: function(viz) {
      this.viz = viz;
    },

    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller) {
      var pos = node.pos.getc(true), viz = this.viz, canvas = this.viz.canvas;
      var radius = canvas.getSize();
      var labelPos = {
        x: Math.round(pos.x + radius.width / 2),
        y: Math.round(pos.y + radius.height / 2)
      };
      tag.setAttribute('x', labelPos.x);
      tag.setAttribute('y', labelPos.y);

      var bb = tag.getBBox();
      if (bb) {
        // center the label
    var x = tag.getAttribute('x');
    var y = tag.getAttribute('y');
    // get polar coordinates
    var p = node.pos.getp(true);
    // get angle in degrees
    var pi = Math.PI;
    var cond = (p.theta > pi / 2 && p.theta < 3 * pi / 2);
    if (cond) {
      tag.setAttribute('x', x - bb.width);
      tag.setAttribute('y', y - bb.height);
    } else if (node.id == viz.root) {
      tag.setAttribute('x', x - bb.width / 2);
    }

    var thetap = cond ? p.theta + pi : p.theta;
    if(node._depth)
      tag.setAttribute('transform', 'rotate(' + thetap * 360 / (2 * pi) + ' ' + x
          + ' ' + y + ')');
  }

  controller.onPlaceLabel(tag, node);
}
  });

  /*
     Sunburst.Label.HTML

     Custom extension of <Graph.Label.HTML>.

     Extends:

     All <Graph.Label.HTML> methods.

     See also:

     <Graph.Label.HTML>

  */
  Sunburst.Label.HTML = new Class( {
    Implements: Graph.Label.HTML,

    initialize: function(viz) {
      this.viz = viz;
    },
    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller) {
      var pos = node.pos.clone(), 
          canvas = this.viz.canvas,
          height = node.getData('height'),
          ldist = ((height || node._depth == 0)? height : this.viz.config.levelDistance) /2,
          radius = canvas.getSize();
      pos.rho += ldist;
      pos = pos.getc(true);
      
      var labelPos = {
        x: Math.round(pos.x + radius.width / 2),
        y: Math.round(pos.y + radius.height / 2)
      };

      var style = tag.style;
      style.left = labelPos.x + 'px';
      style.top = labelPos.y + 'px';
      style.display = this.fitsInCanvas(labelPos, canvas) ? '' : 'none';

      controller.onPlaceLabel(tag, node);
    }
  });

  /*
    Class: Sunburst.Plot.NodeTypes

    This class contains a list of <Graph.Node> built-in types. 
    Node types implemented are 'none', 'pie', 'multipie', 'gradient-pie' and 'gradient-multipie'.

    You can add your custom node types, customizing your visualization to the extreme.

    Example:

    (start code js)
      Sunburst.Plot.NodeTypes.implement({
        'mySpecialType': {
          'render': function(node, canvas) {
            //print your custom node to canvas
          },
          //optional
          'contains': function(node, pos) {
            //return true if pos is inside the node or false otherwise
          }
        }
      });
    (end code)

  */
  Sunburst.Plot.NodeTypes = new Class( {
    'none': {
      'render': $.empty,
      'contains': $.lambda(false),
      'anglecontains': function(node, pos) {
        var span = node.getData('span') / 2, theta = node.pos.theta;
        var begin = theta - span, end = theta + span;
        if (begin < 0)
          begin += Math.PI * 2;
        var atan = Math.atan2(pos.y, pos.x);
        if (atan < 0)
          atan += Math.PI * 2;
        if (begin > end) {
          return (atan > begin && atan <= Math.PI * 2) || atan < end;
        } else {
          return atan > begin && atan < end;
        }
      }
    },

    'pie': {
      'render': function(node, canvas) {
        var span = node.getData('span') / 2, theta = node.pos.theta;
        var begin = theta - span, end = theta + span;
        var polarNode = node.pos.getp(true);
        var polar = new Polar(polarNode.rho, begin);
        var p1coord = polar.getc(true);
        polar.theta = end;
        var p2coord = polar.getc(true);

        var ctx = canvas.getCtx();
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(p1coord.x, p1coord.y);
        ctx.moveTo(0, 0);
        ctx.lineTo(p2coord.x, p2coord.y);
        ctx.moveTo(0, 0);
        ctx.arc(0, 0, polarNode.rho * node.getData('dim-quotient'), begin, end,
            false);
        ctx.fill();
      },
      'contains': function(node, pos) {
        if (this.nodeTypes['none'].anglecontains.call(this, node, pos)) {
          var rho = Math.sqrt(pos.x * pos.x + pos.y * pos.y);
          var ld = this.config.levelDistance, d = node._depth;
          return (rho <= ld * d);
        }
        return false;
      }
    },
    'multipie': {
      'render': function(node, canvas) {
        var height = node.getData('height');
        var ldist = height? height : this.config.levelDistance;
        var span = node.getData('span') / 2, theta = node.pos.theta;
        var begin = theta - span, end = theta + span;
        var polarNode = node.pos.getp(true);

        var polar = new Polar(polarNode.rho, begin);
        var p1coord = polar.getc(true);

        polar.theta = end;
        var p2coord = polar.getc(true);

        polar.rho += ldist;
        var p3coord = polar.getc(true);

        polar.theta = begin;
        var p4coord = polar.getc(true);

        var ctx = canvas.getCtx();
        ctx.moveTo(0, 0);
        ctx.beginPath();
        ctx.arc(0, 0, polarNode.rho, begin, end, false);
        ctx.arc(0, 0, polarNode.rho + ldist, end, begin, true);
        ctx.moveTo(p1coord.x, p1coord.y);
        ctx.lineTo(p4coord.x, p4coord.y);
        ctx.moveTo(p2coord.x, p2coord.y);
        ctx.lineTo(p3coord.x, p3coord.y);
        ctx.fill();

        if (node.collapsed) {
          ctx.save();
          ctx.lineWidth = 2;
          ctx.moveTo(0, 0);
          ctx.beginPath();
          ctx.arc(0, 0, polarNode.rho + ldist + 5, end - 0.01, begin + 0.01,
              true);
          ctx.stroke();
          ctx.restore();
        }
      },
      'contains': function(node, pos) {
        if (this.nodeTypes['none'].anglecontains.call(this, node, pos)) {
          var rho = Math.sqrt(pos.x * pos.x + pos.y * pos.y);
          var height = node.getData('height');
          var ldist = height? height : this.config.levelDistance;
          var ld = this.config.levelDistance, d = node._depth;
          return (rho >= ld * d) && (rho <= (ld * d + ldist));
        }
        return false;
      }
    },

    'gradient-multipie': {
      'render': function(node, canvas) {
        var ctx = canvas.getCtx();
        var height = node.getData('height');
        var ldist = height? height : this.config.levelDistance;
        var radialGradient = ctx.createRadialGradient(0, 0, node.getPos().rho,
            0, 0, node.getPos().rho + ldist);

        var colorArray = $.hexToRgb(node.getData('color')), ans = [];
        $.each(colorArray, function(i) {
          ans.push(parseInt(i * 0.5, 10));
        });
        var endColor = $.rgbToHex(ans);
        radialGradient.addColorStop(0, endColor);
        radialGradient.addColorStop(1, node.getData('color'));
        ctx.fillStyle = radialGradient;
        this.nodeTypes['multipie'].render.call(this, node, canvas);
      },
      'contains': function(node, pos) {
        return this.nodeTypes['multipie'].contains.call(this, node, pos);
      }
    },

    'gradient-pie': {
      'render': function(node, canvas) {
        var ctx = canvas.getCtx();
        var radialGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, node
            .getPos().rho);

        var colorArray = $.hexToRgb(node.getData('color')), ans = [];
        $.each(colorArray, function(i) {
          ans.push(parseInt(i * 0.5, 10));
        });
        var endColor = $.rgbToHex(ans);
        radialGradient.addColorStop(1, endColor);
        radialGradient.addColorStop(0, node.getData('color'));
        ctx.fillStyle = radialGradient;
        this.nodeTypes['pie'].render.call(this, node, canvas);
      },
      'contains': function(node, pos) {
        return this.nodeTypes['pie'].contains.call(this, node, pos);
      }
    }
  });

  /*
    Class: Sunburst.Plot.EdgeTypes

    This class contains a list of <Graph.Adjacence> built-in types. 
    Edge types implemented are 'none', 'line' and 'arrow'.
  
    You can add your custom edge types, customizing your visualization to the extreme.
  
    Example:
  
    (start code js)
      Sunburst.Plot.EdgeTypes.implement({
        'mySpecialType': {
          'render': function(adj, canvas) {
            //print your custom edge to canvas
          },
          //optional
          'contains': function(adj, pos) {
            //return true if pos is inside the arc or false otherwise
          }
        }
      });
    (end code)
  
  */
  Sunburst.Plot.EdgeTypes = new Class({
    'none': $.empty,
    'line': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        this.edgeHelper.line.render(from, to, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        return this.edgeHelper.line.contains(from, to, pos, this.edge.epsilon);
      }
    },
    'arrow': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true),
            dim = adj.getData('dim'),
            direction = adj.data.$direction,
            inv = (direction && direction.length>1 && direction[0] != adj.nodeFrom.id);
        this.edgeHelper.arrow.render(from, to, dim, inv, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        return this.edgeHelper.arrow.contains(from, to, pos, this.edge.epsilon);
      }
    },
    'hyperline': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(),
            to = adj.nodeTo.pos.getc(),
            dim = Math.max(from.norm(), to.norm());
        this.edgeHelper.hyperline.render(from.$scale(1/dim), to.$scale(1/dim), dim, canvas);
      },
      'contains': $.lambda(false) //TODO(nico): Implement this!
    }
  });

})($jit.Sunburst);


/*
 * File: PieChart.js
 *
*/

$jit.Sunburst.Plot.NodeTypes.implement({
  'piechart-stacked' : {
    'render' : function(node, canvas) {
      var pos = node.pos.getp(true),
          dimArray = node.getData('dimArray'),
          valueArray = node.getData('valueArray'),
          colorArray = node.getData('colorArray'),
          colorLength = colorArray.length,
          stringArray = node.getData('stringArray'),
          span = node.getData('span') / 2,
          theta = node.pos.theta,
          begin = theta - span,
          end = theta + span,
          polar = new Polar;
    
      var ctx = canvas.getCtx(), 
          opt = {},
          gradient = node.getData('gradient'),
          border = node.getData('border'),
          config = node.getData('config'),
          showLabels = config.showLabels,
          resizeLabels = config.resizeLabels,
          label = config.Label;

      var xpos = config.sliceOffset * Math.cos((begin + end) /2);
      var ypos = config.sliceOffset * Math.sin((begin + end) /2);

      if (colorArray && dimArray && stringArray) {
        for (var i=0, l=dimArray.length, acum=0, valAcum=0; i<l; i++) {
          var dimi = dimArray[i], colori = colorArray[i % colorLength];
          if(dimi <= 0) continue;
          ctx.fillStyle = ctx.strokeStyle = colori;
          if(gradient && dimi) {
            var radialGradient = ctx.createRadialGradient(xpos, ypos, acum + config.sliceOffset,
                xpos, ypos, acum + dimi + config.sliceOffset);
            var colorRgb = $.hexToRgb(colori), 
                ans = $.map(colorRgb, function(i) { return (i * 0.8) >> 0; }),
                endColor = $.rgbToHex(ans);

            radialGradient.addColorStop(0, colori);
            radialGradient.addColorStop(0.5, colori);
            radialGradient.addColorStop(1, endColor);
            ctx.fillStyle = radialGradient;
          }
          
          polar.rho = acum + config.sliceOffset;
          polar.theta = begin;
          var p1coord = polar.getc(true);
          polar.theta = end;
          var p2coord = polar.getc(true);
          polar.rho += dimi;
          var p3coord = polar.getc(true);
          polar.theta = begin;
          var p4coord = polar.getc(true);

          ctx.beginPath();
          //fixing FF arc method + fill
          ctx.arc(xpos, ypos, acum + .01, begin, end, false);
          ctx.arc(xpos, ypos, acum + dimi + .01, end, begin, true);
          ctx.fill();
          if(border && border.name == stringArray[i]) {
            opt.acum = acum;
            opt.dimValue = dimArray[i];
            opt.begin = begin;
            opt.end = end;
          }
          acum += (dimi || 0);
          valAcum += (valueArray[i] || 0);
        }
        if(border) {
          ctx.save();
          ctx.globalCompositeOperation = "source-over";
          ctx.lineWidth = 2;
          ctx.strokeStyle = border.color;
          var s = begin < end? 1 : -1;
          ctx.beginPath();
          //fixing FF arc method + fill
          ctx.arc(xpos, ypos, opt.acum + .01 + 1, opt.begin, opt.end, false);
          ctx.arc(xpos, ypos, opt.acum + opt.dimValue + .01 - 1, opt.end, opt.begin, true);
          ctx.closePath();
          ctx.stroke();
          ctx.restore();
        }
        if(showLabels && label.type == 'Native') {
          ctx.save();
          ctx.fillStyle = ctx.strokeStyle = label.color;
          var scale = resizeLabels? node.getData('normalizedDim') : 1,
              fontSize = (label.size * scale) >> 0;
          fontSize = fontSize < +resizeLabels? +resizeLabels : fontSize;
          
          ctx.font = label.style + ' ' + fontSize + 'px ' + label.family;
          ctx.textBaseline = 'middle';
          ctx.textAlign = 'center';
          
          polar.rho = acum + config.labelOffset + config.sliceOffset;
          polar.theta = node.pos.theta;
          var cart = polar.getc(true);
          
          ctx.fillText(node.name, cart.x, cart.y);
          ctx.restore();
        }
      }
    },
    'contains': function(node, pos) {
      if (this.nodeTypes['none'].anglecontains.call(this, node, pos)) {
        var rho = Math.sqrt(pos.x * pos.x + pos.y * pos.y);
        var ld = this.config.levelDistance, d = node._depth;
        var config = node.getData('config');
        if(rho <=ld * d + config.sliceOffset) {
          var dimArray = node.getData('dimArray');
          for(var i=0,l=dimArray.length,acum=config.sliceOffset; i<l; i++) {
            var dimi = dimArray[i];
            if(rho >= acum && rho <= acum + dimi) {
              return {
                name: node.getData('stringArray')[i],
                color: node.getData('colorArray')[i],
                value: node.getData('valueArray')[i],
                label: node.name
              };
            }
            acum += dimi;
          }
        }
        return false;
        
      }
      return false;
    }
  }
});

/*
  Class: PieChart
  
  A visualization that displays stacked bar charts.
  
  Constructor Options:
  
  See <Options.PieChart>.

*/
$jit.PieChart = new Class({
  sb: null,
  colors: ["#416D9C", "#70A35E", "#EBB056", "#C74243", "#83548B", "#909291", "#557EAA"],
  selected: {},
  busy: false,
  
  initialize: function(opt) {
    this.controller = this.config = 
      $.merge(Options("Canvas", "PieChart", "Label"), {
        Label: { type: 'Native' }
      }, opt);
    this.initializeViz();
  },
  
  initializeViz: function() {
    var config = this.config, that = this;
    var nodeType = config.type.split(":")[0];
    var delegate = new $jit.Sunburst({
      injectInto: config.injectInto,
      width: config.width,
      height: config.height,
      useCanvas: config.useCanvas,
      withLabels: config.Label.type != 'Native',
      Label: {
        type: config.Label.type
      },
      Node: {
        overridable: true,
        type: 'piechart-' + nodeType,
        width: 1,
        height: 1
      },
      Edge: {
        type: 'none'
      },
      Tips: {
        enable: config.Tips.enable,
        type: 'Native',
        force: true,
        onShow: function(tip, node, contains) {
          var elem = contains;
          config.Tips.onShow(tip, elem, node);
        }
      },
      Events: {
        enable: true,
        type: 'Native',
        onClick: function(node, eventInfo, evt) {
          if(!config.Events.enable) return;
          var elem = eventInfo.getContains();
          config.Events.onClick(elem, eventInfo, evt);
        },
        onMouseMove: function(node, eventInfo, evt) {
          if(!config.hoveredColor) return;
          if(node) {
            var elem = eventInfo.getContains();
            that.select(node.id, elem.name, elem.index);
          } else {
            that.select(false, false, false);
          }
        }
      },
      onCreateLabel: function(domElement, node) {
        var labelConf = config.Label;
        if(config.showLabels) {
          var style = domElement.style;
          style.fontSize = labelConf.size + 'px';
          style.fontFamily = labelConf.family;
          style.color = labelConf.color;
          style.textAlign = 'center';
          domElement.innerHTML = node.name;
        }
      },
      onPlaceLabel: function(domElement, node) {
        if(!config.showLabels) return;
        var pos = node.pos.getp(true),
            dimArray = node.getData('dimArray'),
            span = node.getData('span') / 2,
            theta = node.pos.theta,
            begin = theta - span,
            end = theta + span,
            polar = new Polar;
      
        var showLabels = config.showLabels,
            resizeLabels = config.resizeLabels,
            label = config.Label;
        
        if (dimArray) {
          for (var i=0, l=dimArray.length, acum=0; i<l; i++) {
            acum += dimArray[i];
          }
          var scale = resizeLabels? node.getData('normalizedDim') : 1,
              fontSize = (label.size * scale) >> 0;
          fontSize = fontSize < +resizeLabels? +resizeLabels : fontSize;
          domElement.style.fontSize = fontSize + 'px';
          polar.rho = acum + config.labelOffset + config.sliceOffset;
          polar.theta = (begin + end) / 2;
          var pos = polar.getc(true);
          var radius = that.canvas.getSize();
          var labelPos = {
            x: Math.round(pos.x + radius.width / 2),
            y: Math.round(pos.y + radius.height / 2)
          };
          domElement.style.left = labelPos.x + 'px';
          domElement.style.top = labelPos.y + 'px';
        }
      }
    });
    
    var size = delegate.canvas.getSize(),
        min = Math.min;
    delegate.config.levelDistance = min(size.width, size.height)/2 
      - config.offset - config.sliceOffset;
    this.delegate = delegate;
    this.canvas = this.delegate.canvas;
    this.canvas.getCtx().globalCompositeOperation = 'lighter';
  },
  
  /*
    Method: loadJSON
   
    Loads JSON data into the visualization. 
    
    Parameters:
    
    json - The JSON data format. This format is described in <http://blog.thejit.org/2010/04/24/new-javascript-infovis-toolkit-visualizations/#json-data-format>.
    
    Example:
    (start code js)
    var pieChart = new $jit.PieChart(options);
    pieChart.loadJSON(json);
    (end code)
  */  
  loadJSON: function(json) {
    var prefix = $.time(), 
        ch = [], 
        delegate = this.delegate,
        name = $.splat(json.label),
        nameLength = name.length,
        color = $.splat(json.color || this.colors),
        colorLength = color.length,
        config = this.config,
        gradient = !!config.type.split(":")[1],
        animate = config.animate,
        mono = nameLength == 1;
    
    for(var i=0, values=json.values, l=values.length; i<l; i++) {
      var val = values[i];
      var valArray = $.splat(val.values);
      ch.push({
        'id': prefix + val.label,
        'name': val.label,
        'data': {
          'value': valArray,
          '$valueArray': valArray,
          '$colorArray': mono? $.splat(color[i % colorLength]) : color,
          '$stringArray': name,
          '$gradient': gradient,
          '$config': config,
          '$angularWidth': $.reduce(valArray, function(x,y){return x+y;})
        },
        'children': []
      });
    }
    var root = {
      'id': prefix + '$root',
      'name': '',
      'data': {
        '$type': 'none',
        '$width': 1,
        '$height': 1
      },
      'children': ch
    };
    delegate.loadJSON(root);
    
    this.normalizeDims();
    delegate.refresh();
    if(animate) {
      delegate.fx.animate({
        modes: ['node-property:dimArray'],
        duration:1500
      });
    }
  },
  
  /*
    Method: updateJSON
   
    Use this method when updating values for the current JSON data. If the items specified by the JSON data already exist in the graph then their values will be updated.
    
    Parameters:
    
    json - (object) JSON data to be updated. The JSON format corresponds to the one described in <PieChart.loadJSON>.
    onComplete - (object) A callback object to be called when the animation transition when updating the data end.
    
    Example:
    
    (start code js)
    pieChart.updateJSON(json, {
      onComplete: function() {
        alert('update complete!');
      }
    });
    (end code)
  */  
  updateJSON: function(json, onComplete) {
    if(this.busy) return;
    this.busy = true;
    
    var delegate = this.delegate;
    var graph = delegate.graph;
    var values = json.values;
    var animate = this.config.animate;
    var that = this;
    $.each(values, function(v) {
      var n = graph.getByName(v.label),
          vals = $.splat(v.values);
      if(n) {
        n.setData('valueArray', vals);
        n.setData('angularWidth', $.reduce(vals, function(x,y){return x+y;}));
        if(json.label) {
          n.setData('stringArray', $.splat(json.label));
        }
      }
    });
    this.normalizeDims();
    if(animate) {
      delegate.compute('end');
      delegate.fx.animate({
        modes: ['node-property:dimArray:span', 'linear'],
        duration:1500,
        onComplete: function() {
          that.busy = false;
          onComplete && onComplete.onComplete();
        }
      });
    } else {
      delegate.refresh();
    }
  },
    
  //adds the little brown bar when hovering the node
  select: function(id, name) {
    if(!this.config.hoveredColor) return;
    var s = this.selected;
    if(s.id != id || s.name != name) {
      s.id = id;
      s.name = name;
      s.color = this.config.hoveredColor;
      this.delegate.graph.eachNode(function(n) {
        if(id == n.id) {
          n.setData('border', s);
        } else {
          n.setData('border', false);
        }
      });
      this.delegate.plot();
    }
  },
  
  /*
    Method: getLegend
   
    Returns an object containing as keys the legend names and as values hex strings with color values.
    
    Example:
    
    (start code js)
    var legend = pieChart.getLegend();
    (end code)
  */  
  getLegend: function() {
    var legend = {};
    var n;
    this.delegate.graph.getNode(this.delegate.root).eachAdjacency(function(adj) {
      n = adj.nodeTo;
    });
    var colors = n.getData('colorArray'),
        len = colors.length;
    $.each(n.getData('stringArray'), function(s, i) {
      legend[s] = colors[i % len];
    });
    return legend;
  },
  
  /*
    Method: getMaxValue
   
    Returns the maximum accumulated value for the stacks. This method is used for normalizing the graph heights according to the canvas height.
    
    Example:
    
    (start code js)
    var ans = pieChart.getMaxValue();
    (end code)
    
    In some cases it could be useful to override this method to normalize heights for a group of PieCharts, like when doing small multiples.
    
    Example:
    
    (start code js)
    //will return 100 for all PieChart instances,
    //displaying all of them with the same scale
    $jit.PieChart.implement({
      'getMaxValue': function() {
        return 100;
      }
    });
    (end code)
    
  */  
  getMaxValue: function() {
    var maxValue = 0;
    this.delegate.graph.eachNode(function(n) {
      var valArray = n.getData('valueArray'),
          acum = 0;
      $.each(valArray, function(v) { 
        acum += +v;
      });
      maxValue = maxValue>acum? maxValue:acum;
    });
    return maxValue;
  },
  
  normalizeDims: function() {
    //number of elements
    var root = this.delegate.graph.getNode(this.delegate.root), l=0;
    root.eachAdjacency(function() {
      l++;
    });
    var maxValue = this.getMaxValue() || 1,
        config = this.config,
        animate = config.animate,
        rho = this.delegate.config.levelDistance;
    this.delegate.graph.eachNode(function(n) {
      var acum = 0, animateValue = [];
      $.each(n.getData('valueArray'), function(v) {
        acum += +v;
        animateValue.push(1);
      });
      var stat = (animateValue.length == 1) && !config.updateHeights;
      if(animate) {
        n.setData('dimArray', $.map(n.getData('valueArray'), function(n) { 
          return stat? rho: (n * rho / maxValue); 
        }), 'end');
        var dimArray = n.getData('dimArray');
        if(!dimArray) {
          n.setData('dimArray', animateValue);
        }
      } else {
        n.setData('dimArray', $.map(n.getData('valueArray'), function(n) { 
          return stat? rho : (n * rho / maxValue); 
        }));
      }
      n.setData('normalizedDim', acum / maxValue);
    });
  }
});


/*
 * Class: Layouts.TM
 * 
 * Implements TreeMaps layouts (SliceAndDice, Squarified, Strip).
 * 
 * Implemented By:
 * 
 * <TM>
 * 
 */
Layouts.TM = {};

Layouts.TM.SliceAndDice = new Class({
  compute: function(prop) {
    var root = this.graph.getNode(this.clickedNode && this.clickedNode.id || this.root);
    this.controller.onBeforeCompute(root);
    var size = this.canvas.getSize(),
        config = this.config,
        width = size.width,
        height = size.height;
    this.graph.computeLevels(this.root, 0, "ignore");
    //set root position and dimensions
    root.getPos(prop).setc(-width/2, -height/2);
    root.setData('width', width, prop);
    root.setData('height', height + config.titleHeight, prop);
    this.computePositions(root, root, this.layout.orientation, prop);
    this.controller.onAfterCompute(root);
  },
  
  computePositions: function(par, ch, orn, prop) {
    //compute children areas
    var totalArea = 0;
    par.eachSubnode(function(n) {
      totalArea += n.getData('area', prop);
    });
    
    var config = this.config,
        offst = config.offset,
        width  = par.getData('width', prop),
        height = Math.max(par.getData('height', prop) - config.titleHeight, 0),
        fact = par == ch? 1 : (ch.getData('area', prop) / totalArea);

    var otherSize, size, dim, pos, pos2, posth, pos2th;
    var horizontal = (orn == "h");
    if(horizontal) {
      orn = 'v';
      otherSize = height;
      size = width * fact;
      dim = 'height';
      pos = 'y';
      pos2 = 'x';
      posth = config.titleHeight;
      pos2th = 0;
    } else {
      orn = 'h';    
      otherSize = height * fact;
      size = width;
      dim = 'width';
      pos = 'x';
      pos2 = 'y';
      posth = 0;
      pos2th = config.titleHeight;
    }
    var cpos = ch.getPos(prop);
    ch.setData('width', size, prop);
    ch.setData('height', otherSize, prop);
    var offsetSize = 0, tm = this;
    ch.eachSubnode(function(n) {
      var p = n.getPos(prop);
      p[pos] = offsetSize + cpos[pos] + posth;
      p[pos2] = cpos[pos2] + pos2th;
      tm.computePositions(ch, n, orn, prop);
      offsetSize += n.getData(dim, prop);
    });
  }

});

Layouts.TM.Area = {
 /*
    Method: compute
 
   Called by loadJSON to calculate recursively all node positions and lay out the tree.
 
    Parameters:

       json - A JSON tree. See also <Loader.loadJSON>.
       coord - A coordinates object specifying width, height, left and top style properties.
 */
 compute: function(prop) {
    prop = prop || "current";
    var root = this.graph.getNode(this.clickedNode && this.clickedNode.id || this.root);
    this.controller.onBeforeCompute(root);
    var config = this.config,
        size = this.canvas.getSize(),
        width = size.width,
        height = size.height,
        offst = config.offset,
        offwdth = width - offst,
        offhght = height - offst;
    this.graph.computeLevels(this.root, 0, "ignore");
    //set root position and dimensions
    root.getPos(prop).setc(-width/2, -height/2);
    root.setData('width', width, prop);
    root.setData('height', height, prop);
    //create a coordinates object
    var coord = {
        'top': -height/2 + config.titleHeight,
        'left': -width/2,
        'width': offwdth,
        'height': offhght - config.titleHeight
    };
    this.computePositions(root, coord, prop);
    this.controller.onAfterCompute(root);
 }, 
 
 /*
    Method: computeDim
 
   Computes dimensions and positions of a group of nodes
   according to a custom layout row condition. 
 
    Parameters:

       tail - An array of nodes.  
       initElem - An array of nodes (containing the initial node to be laid).
       w - A fixed dimension where nodes will be layed out.
       coord - A coordinates object specifying width, height, left and top style properties.
       comp - A custom comparison function
 */
 computeDim: function(tail, initElem, w, coord, comp, prop) {
   if(tail.length + initElem.length == 1) {
     var l = (tail.length == 1)? tail : initElem;
     this.layoutLast(l, w, coord, prop);
     return;
   }
   if(tail.length >= 2 && initElem.length == 0) {
     initElem = [tail.shift()];
   }
   if(tail.length == 0) {
     if(initElem.length > 0) this.layoutRow(initElem, w, coord, prop);
     return;
   }
   var c = tail[0];
   if(comp(initElem, w) >= comp([c].concat(initElem), w)) {
     this.computeDim(tail.slice(1), initElem.concat([c]), w, coord, comp, prop);
   } else {
     var newCoords = this.layoutRow(initElem, w, coord, prop);
     this.computeDim(tail, [], newCoords.dim, newCoords, comp, prop);
   }
 },

 
 /*
    Method: worstAspectRatio
 
   Calculates the worst aspect ratio of a group of rectangles. 
       
    See also:
       
       <http://en.wikipedia.org/wiki/Aspect_ratio>
   
    Parameters:

     ch - An array of nodes.  
     w  - The fixed dimension where rectangles are being laid out.

    Returns:
 
        The worst aspect ratio.


 */
 worstAspectRatio: function(ch, w) {
   if(!ch || ch.length == 0) return Number.MAX_VALUE;
   var areaSum = 0, maxArea = 0, minArea = Number.MAX_VALUE;
   for(var i=0, l=ch.length; i<l; i++) {
     var area = ch[i]._area;
     areaSum += area; 
     minArea = minArea < area? minArea : area;
     maxArea = maxArea > area? maxArea : area; 
   }
   var sqw = w * w, sqAreaSum = areaSum * areaSum;
   return Math.max(sqw * maxArea / sqAreaSum,
           sqAreaSum / (sqw * minArea));
 },
 
 /*
    Method: avgAspectRatio
 
   Calculates the average aspect ratio of a group of rectangles. 
       
       See also:
       
       <http://en.wikipedia.org/wiki/Aspect_ratio>
   
    Parameters:

     ch - An array of nodes.  
       w - The fixed dimension where rectangles are being laid out.

    Returns:
 
        The average aspect ratio.


 */
 avgAspectRatio: function(ch, w) {
   if(!ch || ch.length == 0) return Number.MAX_VALUE;
   var arSum = 0;
   for(var i=0, l=ch.length; i<l; i++) {
     var area = ch[i]._area;
     var h = area / w;
     arSum += w > h? w / h : h / w;
   }
   return arSum / l;
 },

 /*
    layoutLast
 
   Performs the layout of the last computed sibling.
 
    Parameters:

       ch - An array of nodes.  
       w - A fixed dimension where nodes will be layed out.
     coord - A coordinates object specifying width, height, left and top style properties.
 */
 layoutLast: function(ch, w, coord, prop) {
   var child = ch[0];
   child.getPos(prop).setc(coord.left, coord.top);
   child.setData('width', coord.width, prop);
   child.setData('height', coord.height, prop);
 }
};


Layouts.TM.Squarified = new Class({
 Implements: Layouts.TM.Area,
 
 computePositions: function(node, coord, prop) {
   var config = this.config, 
       max = Math.max;
   
   if (coord.width >= coord.height) 
     this.layout.orientation = 'h';
   else
     this.layout.orientation = 'v';
   
   var ch = node.getSubnodes([1, 1], "ignore");
   if(ch.length > 0) {
     this.processChildrenLayout(node, ch, coord, prop);
     for(var i=0, l=ch.length; i<l; i++) {
       var chi = ch[i], 
           offst = config.offset,
           height = max(chi.getData('height', prop) - offst - config.titleHeight, 0),
           width = max(chi.getData('width', prop) - offst, 0),
           chipos = chi.getPos(prop);

       coord = {
         'width': width,
         'height': height,
         'top': chipos.y + config.titleHeight,
         'left': chipos.x
       };
       this.computePositions(chi, coord, prop);
     }
   }
 },

 /*
    Method: processChildrenLayout
 
   Computes children real areas and other useful parameters for performing the Squarified algorithm.
 
    Parameters:

       par - The parent node of the json subtree.  
       ch - An Array of nodes
     coord - A coordinates object specifying width, height, left and top style properties.
 */
 processChildrenLayout: function(par, ch, coord, prop) {
   //compute children real areas
   var parentArea = coord.width * coord.height;
   var i, l=ch.length, totalChArea=0, chArea = [];
   for(i=0; i<l; i++) {
     chArea[i] = parseFloat(ch[i].getData('area', prop));
     totalChArea += chArea[i];
   }
   for(i=0; i<l; i++) {
     ch[i]._area = parentArea * chArea[i] / totalChArea;
   }
   var minimumSideValue = this.layout.horizontal()? coord.height : coord.width;
   ch.sort(function(a, b) { 
     var diff = b._area - a._area; 
     return diff? diff : (b.id == a.id? 0 : (b.id < a.id? 1 : -1)); 
   });
   var initElem = [ch[0]];
   var tail = ch.slice(1);
   this.squarify(tail, initElem, minimumSideValue, coord, prop);
 },

 /*
   Method: squarify
 
   Performs an heuristic method to calculate div elements sizes in order to have a good aspect ratio.
 
    Parameters:

       tail - An array of nodes.  
       initElem - An array of nodes, containing the initial node to be laid out.
       w - A fixed dimension where nodes will be laid out.
       coord - A coordinates object specifying width, height, left and top style properties.
 */
 squarify: function(tail, initElem, w, coord, prop) {
   this.computeDim(tail, initElem, w, coord, this.worstAspectRatio, prop);
 },
 
 /*
    Method: layoutRow
 
   Performs the layout of an array of nodes.
 
    Parameters:

       ch - An array of nodes.  
       w - A fixed dimension where nodes will be laid out.
       coord - A coordinates object specifying width, height, left and top style properties.
 */
 layoutRow: function(ch, w, coord, prop) {
   if(this.layout.horizontal()) {
     return this.layoutV(ch, w, coord, prop);
   } else {
     return this.layoutH(ch, w, coord, prop);
   }
 },
 
 layoutV: function(ch, w, coord, prop) {
   var totalArea = 0, rnd = function(x) { return x; }; 
   $.each(ch, function(elem) { totalArea += elem._area; });
   var width = rnd(totalArea / w), top =  0; 
   for(var i=0, l=ch.length; i<l; i++) {
     var h = rnd(ch[i]._area / width);
     var chi = ch[i];
     chi.getPos(prop).setc(coord.left, coord.top + top);
     chi.setData('width', width, prop);
     chi.setData('height', h, prop);
     top += h;
   }
   var ans = {
     'height': coord.height,
     'width': coord.width - width,
     'top': coord.top,
     'left': coord.left + width
   };
   //take minimum side value.
   ans.dim = Math.min(ans.width, ans.height);
   if(ans.dim != ans.height) this.layout.change();
   return ans;
 },
 
 layoutH: function(ch, w, coord, prop) {
   var totalArea = 0; 
   $.each(ch, function(elem) { totalArea += elem._area; });
   var height = totalArea / w,
       top = coord.top, 
       left = 0;
   
   for(var i=0, l=ch.length; i<l; i++) {
     var chi = ch[i];
     var w = chi._area / height;
     chi.getPos(prop).setc(coord.left + left, top);
     chi.setData('width', w, prop);
     chi.setData('height', height, prop);
     left += w;
   }
   var ans = {
     'height': coord.height - height,
     'width': coord.width,
     'top': coord.top + height,
     'left': coord.left
   };
   ans.dim = Math.min(ans.width, ans.height);
   if(ans.dim != ans.width) this.layout.change();
   return ans;
 }
});

Layouts.TM.Strip = new Class({
  Implements: Layouts.TM.Area,

    /*
      Method: compute
    
     Called by loadJSON to calculate recursively all node positions and lay out the tree.
    
      Parameters:
    
         json - A JSON subtree. See also <Loader.loadJSON>. 
       coord - A coordinates object specifying width, height, left and top style properties.
    */
    computePositions: function(node, coord, prop) {
     var  ch = node.getSubnodes([1, 1], "ignore"), 
          config = this.config,
          max = Math.max;
     if(ch.length > 0) {
       this.processChildrenLayout(node, ch, coord, prop);
       for(var i=0, l=ch.length; i<l; i++) {
         var chi = ch[i];
         var offst = config.offset,
             height = max(chi.getData('height', prop) - offst - config.titleHeight, 0),
             width  = max(chi.getData('width', prop)  - offst, 0);
         var chipos = chi.getPos(prop);
         coord = {
           'width': width,
           'height': height,
           'top': chipos.y + config.titleHeight,
           'left': chipos.x
         };
         this.computePositions(chi, coord, prop);
       }
     }
    },
    
    /*
      Method: processChildrenLayout
    
     Computes children real areas and other useful parameters for performing the Strip algorithm.
    
      Parameters:
    
         par - The parent node of the json subtree.  
         ch - An Array of nodes
         coord - A coordinates object specifying width, height, left and top style properties.
    */
    processChildrenLayout: function(par, ch, coord, prop) {
     //compute children real areas
      var parentArea = coord.width * coord.height;
      var i, l=ch.length, totalChArea=0, chArea = [];
      for(i=0; i<l; i++) {
        chArea[i] = +ch[i].getData('area', prop);
        totalChArea += chArea[i];
      }
      for(i=0; i<l; i++) {
        ch[i]._area = parentArea * chArea[i] / totalChArea;
      }
     var side = this.layout.horizontal()? coord.width : coord.height;
     var initElem = [ch[0]];
     var tail = ch.slice(1);
     this.stripify(tail, initElem, side, coord, prop);
    },
    
    /*
      Method: stripify
    
     Performs an heuristic method to calculate div elements sizes in order to have 
     a good compromise between aspect ratio and order.
    
      Parameters:
    
         tail - An array of nodes.  
         initElem - An array of nodes.
         w - A fixed dimension where nodes will be layed out.
       coord - A coordinates object specifying width, height, left and top style properties.
    */
    stripify: function(tail, initElem, w, coord, prop) {
     this.computeDim(tail, initElem, w, coord, this.avgAspectRatio, prop);
    },
    
    /*
      Method: layoutRow
    
     Performs the layout of an array of nodes.
    
      Parameters:
    
         ch - An array of nodes.  
         w - A fixed dimension where nodes will be laid out.
         coord - A coordinates object specifying width, height, left and top style properties.
    */
    layoutRow: function(ch, w, coord, prop) {
     if(this.layout.horizontal()) {
       return this.layoutH(ch, w, coord, prop);
     } else {
       return this.layoutV(ch, w, coord, prop);
     }
    },
    
    layoutV: function(ch, w, coord, prop) {
     var totalArea = 0; 
     $.each(ch, function(elem) { totalArea += elem._area; });
     var width = totalArea / w, top =  0; 
     for(var i=0, l=ch.length; i<l; i++) {
       var chi = ch[i];
       var h = chi._area / width;
       chi.getPos(prop).setc(coord.left, 
           coord.top + (w - h - top));
       chi.setData('width', width, prop);
       chi.setData('height', h, prop);
       top += h;
     }
    
     return {
       'height': coord.height,
       'width': coord.width - width,
       'top': coord.top,
       'left': coord.left + width,
       'dim': w
     };
    },
    
    layoutH: function(ch, w, coord, prop) {
     var totalArea = 0; 
     $.each(ch, function(elem) { totalArea += elem._area; });
     var height = totalArea / w,
         top = coord.height - height, 
         left = 0;
     
     for(var i=0, l=ch.length; i<l; i++) {
       var chi = ch[i];
       var s = chi._area / height;
       chi.getPos(prop).setc(coord.left + left, coord.top + top);
       chi.setData('width', s, prop);
       chi.setData('height', height, prop);
       left += s;
     }
     return {
       'height': coord.height - height,
       'width': coord.width,
       'top': coord.top,
       'left': coord.left,
       'dim': w
     };
    }
 });


/*
 * Class: Layouts.Icicle
 *
 * Implements the icicle tree layout.
 *
 * Implemented By:
 *
 * <Icicle>
 *
 */

Layouts.Icicle = new Class({
 /*
  * Method: compute
  *
  * Called by loadJSON to calculate all node positions.
  *
  * Parameters:
  *
  * posType - The nodes' position to compute. Either "start", "end" or
  *            "current". Defaults to "current".
  */
  compute: function(posType) {
    posType = posType || "current";

    var root = this.graph.getNode(this.root),
        config = this.config,
        size = this.canvas.getSize(),
        width = size.width,
        height = size.height,
        offset = config.offset,
        levelsToShow = config.constrained ? config.levelsToShow : Number.MAX_VALUE;

    this.controller.onBeforeCompute(root);

    Graph.Util.computeLevels(this.graph, root.id, 0, "ignore");

    var treeDepth = 0;

    Graph.Util.eachLevel(root, 0, false, function (n, d) { if(d > treeDepth) treeDepth = d; });

    var startNode = this.graph.getNode(this.clickedNode && this.clickedNode.id || root.id);
    var maxDepth = Math.min(treeDepth, levelsToShow-1);
    var initialDepth = startNode._depth;
    if(this.layout.horizontal()) {
      this.computeSubtree(startNode, -width/2, -height/2, width/(maxDepth+1), height, initialDepth, maxDepth, posType);
    } else {
      this.computeSubtree(startNode, -width/2, -height/2, width, height/(maxDepth+1), initialDepth, maxDepth, posType);
    }
  },

  computeSubtree: function (root, x, y, width, height, initialDepth, maxDepth, posType) {
    root.getPos(posType).setc(x, y);
    root.setData('width', width, posType);
    root.setData('height', height, posType);

    var nodeLength, prevNodeLength = 0, totalDim = 0;
    var children = Graph.Util.getSubnodes(root, [1, 1], 'ignore'); // next level from this node

    if(!children.length)
      return;

    $.each(children, function(e) { totalDim += e.getData('dim'); });

    for(var i=0, l=children.length; i < l; i++) {
      if(this.layout.horizontal()) {
        nodeLength = height * children[i].getData('dim') / totalDim;
        this.computeSubtree(children[i], x+width, y, width, nodeLength, initialDepth, maxDepth, posType);
        y += nodeLength;
      } else {
        nodeLength = width * children[i].getData('dim') / totalDim;
        this.computeSubtree(children[i], x, y+height, nodeLength, height, initialDepth, maxDepth, posType);
        x += nodeLength;
      }
    }
  }
});



/*
 * File: Icicle.js
 *
*/

/*
  Class: Icicle
  
  Icicle space filling visualization.
  
  Implements:
  
  All <Loader> methods
  
  Constructor Options:
  
  Inherits options from
  
  - <Options.Canvas>
  - <Options.Controller>
  - <Options.Node>
  - <Options.Edge>
  - <Options.Label>
  - <Options.Events>
  - <Options.Tips>
  - <Options.NodeStyles>
  - <Options.Navigation>
  
  Additionally, there are other parameters and some default values changed

  orientation - (string) Default's *h*. Whether to set horizontal or vertical layouts. Possible values are 'h' and 'v'.
  offset - (number) Default's *2*. Boxes offset.
  constrained - (boolean) Default's *false*. Whether to show the entire tree when loaded or just the number of levels specified by _levelsToShow_.
  levelsToShow - (number) Default's *3*. The number of levels to show for a subtree. This number is relative to the selected node.
  animate - (boolean) Default's *false*. Whether to animate transitions.
  Node.type - Described in <Options.Node>. Default's *rectangle*.
  Label.type - Described in <Options.Label>. Default's *Native*.
  duration - Described in <Options.Fx>. Default's *700*.
  fps - Described in <Options.Fx>. Default's *45*.
  
  Instance Properties:
  
  canvas - Access a <Canvas> instance.
  graph - Access a <Graph> instance.
  op - Access a <Icicle.Op> instance.
  fx - Access a <Icicle.Plot> instance.
  labels - Access a <Icicle.Label> interface implementation.

*/

$jit.Icicle = new Class({
  Implements: [ Loader, Extras, Layouts.Icicle ],

  layout: {
    orientation: "h",
    vertical: function(){
      return this.orientation == "v";
    },
    horizontal: function(){
      return this.orientation == "h";
    },
    change: function(){
      this.orientation = this.vertical()? "h" : "v";
    }
  },

  initialize: function(controller) {
    var config = {
      animate: false,
      orientation: "h",
      offset: 2,
      levelsToShow: Number.MAX_VALUE,
      constrained: false,
      Node: {
        type: 'rectangle',
        overridable: true
      },
      Edge: {
        type: 'none'
      },
      Label: {
        type: 'Native'
      },
      duration: 700,
      fps: 45
    };

    var opts = Options("Canvas", "Node", "Edge", "Fx", "Tips", "NodeStyles",
                       "Events", "Navigation", "Controller", "Label");
    this.controller = this.config = $.merge(opts, config, controller);
    this.layout.orientation = this.config.orientation;

    var canvasConfig = this.config;
    if (canvasConfig.useCanvas) {
      this.canvas = canvasConfig.useCanvas;
      this.config.labelContainer = this.canvas.id + '-label';
    } else {
      this.canvas = new Canvas(this, canvasConfig);
      this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
    }

    this.graphOptions = {
      'klass': Complex,
      'Node': {
        'selected': false,
        'exist': true,
        'drawn': true
      }
    };

    this.graph = new Graph(
      this.graphOptions, this.config.Node, this.config.Edge, this.config.Label);

    this.labels = new $jit.Icicle.Label[this.config.Label.type](this);
    this.fx = new $jit.Icicle.Plot(this, $jit.Icicle);
    this.op = new $jit.Icicle.Op(this);
    this.group = new $jit.Icicle.Group(this);
    this.clickedNode = null;

    this.initializeExtras();
  },

  /* 
    Method: refresh 
    
    Computes positions and plots the tree.
  */
  refresh: function(){
    var labelType = this.config.Label.type;
    if(labelType != 'Native') {
      var that = this;
      this.graph.eachNode(function(n) { that.labels.hideLabel(n, false); });
    }
    this.compute();
    this.plot();
  },

  /* 
    Method: plot 
    
    Plots the Icicle visualization. This is a shortcut to *fx.plot*. 
  
   */
  plot: function(){
    this.fx.plot(this.config);
  },

  /* 
    Method: enter 
    
    Sets the node as root.
    
     Parameters:
     
     node - (object) A <Graph.Node>.
  
   */
  enter: function (node) {
    if (this.busy)
      return;
    this.busy = true;

    var that = this,
        config = this.config;

    var callback = {
      onComplete: function() {
        //compute positions of newly inserted nodes
        if(config.request)
          that.compute();

        if(config.animate) {
          that.graph.nodeList.setDataset(['current', 'end'], {
            'alpha': [1, 0] //fade nodes
          });

          Graph.Util.eachSubgraph(node, function(n) {
            n.setData('alpha', 1, 'end');
          }, "ignore");

          that.fx.animate({
            duration: 500,
            modes:['node-property:alpha'],
            onComplete: function() {
              that.clickedNode = node;
              that.compute('end');

              that.fx.animate({
                modes:['linear', 'node-property:width:height'],
                duration: 1000,
                onComplete: function() {
                  that.busy = false;
                  that.clickedNode = node;
                }
              });
            }
          });
        } else {
          that.clickedNode = node;
          that.busy = false;
          that.refresh();
        }
      }
    };

    if(config.request) {
      this.requestNodes(clickedNode, callback);
    } else {
      callback.onComplete();
    }
  },

  /* 
    Method: out 
    
    Sets the parent node of the current selected node as root.
  
   */
  out: function(){
    if(this.busy)
      return;

    var that = this,
        GUtil = Graph.Util,
        config = this.config,
        graph = this.graph,
        parents = GUtil.getParents(graph.getNode(this.clickedNode && this.clickedNode.id || this.root)),
        parent = parents[0],
        clickedNode = parent,
        previousClickedNode = this.clickedNode;

    this.busy = true;
    this.events.hoveredNode = false;

    if(!parent) {
      this.busy = false;
      return;
    }

    //final plot callback
    callback = {
      onComplete: function() {
        that.clickedNode = parent;
        if(config.request) {
          that.requestNodes(parent, {
            onComplete: function() {
              that.compute();
              that.plot();
              that.busy = false;
            }
          });
        } else {
          that.compute();
          that.plot();
          that.busy = false;
        }
      }
    };

    //animate node positions
    if(config.animate) {
      this.clickedNode = clickedNode;
      this.compute('end');
      //animate the visible subtree only
      this.clickedNode = previousClickedNode;
      this.fx.animate({
        modes:['linear', 'node-property:width:height'],
        duration: 1000,
        onComplete: function() {
          //animate the parent subtree
          that.clickedNode = clickedNode;
          //change nodes alpha
          graph.nodeList.setDataset(['current', 'end'], {
            'alpha': [0, 1]
          });
          GUtil.eachSubgraph(previousClickedNode, function(node) {
            node.setData('alpha', 1);
          }, "ignore");
          that.fx.animate({
            duration: 500,
            modes:['node-property:alpha'],
            onComplete: function() {
              callback.onComplete();
            }
          });
        }
      });
    } else {
      callback.onComplete();
    }
  },
  requestNodes: function(node, onComplete){
    var handler = $.merge(this.controller, onComplete),
        levelsToShow = this.config.constrained ? this.config.levelsToShow : Number.MAX_VALUE;

    if (handler.request) {
      var leaves = [], d = node._depth;
      Graph.Util.eachLevel(node, 0, levelsToShow, function(n){
        if (n.drawn && !Graph.Util.anySubnode(n)) {
          leaves.push(n);
          n._level = n._depth - d;
          if (this.config.constrained)
            n._level = levelsToShow - n._level;

        }
      });
      this.group.requestNodes(leaves, handler);
    } else {
      handler.onComplete();
    }
  }
});

/*
  Class: Icicle.Op
  
  Custom extension of <Graph.Op>.
  
  Extends:
  
  All <Graph.Op> methods
  
  See also:
  
  <Graph.Op>
  
  */
$jit.Icicle.Op = new Class({

  Implements: Graph.Op

});

/*
 * Performs operations on group of nodes.
 */
$jit.Icicle.Group = new Class({

  initialize: function(viz){
    this.viz = viz;
    this.canvas = viz.canvas;
    this.config = viz.config;
  },

  /*
   * Calls the request method on the controller to request a subtree for each node.
   */
  requestNodes: function(nodes, controller){
    var counter = 0, len = nodes.length, nodeSelected = {};
    var complete = function(){
      controller.onComplete();
    };
    var viz = this.viz;
    if (len == 0)
      complete();
    for(var i = 0; i < len; i++) {
      nodeSelected[nodes[i].id] = nodes[i];
      controller.request(nodes[i].id, nodes[i]._level, {
        onComplete: function(nodeId, data){
          if (data && data.children) {
            data.id = nodeId;
            viz.op.sum(data, {
              type: 'nothing'
            });
          }
          if (++counter == len) {
            Graph.Util.computeLevels(viz.graph, viz.root, 0);
            complete();
          }
        }
      });
    }
  }
});

/*
  Class: Icicle.Plot
  
  Custom extension of <Graph.Plot>.
  
  Extends:
  
  All <Graph.Plot> methods
  
  See also:
  
  <Graph.Plot>
  
  */
$jit.Icicle.Plot = new Class({
  Implements: Graph.Plot,

  plot: function(opt, animating){
    opt = opt || this.viz.controller;
    var viz = this.viz,
        graph = viz.graph,
        root = graph.getNode(viz.clickedNode && viz.clickedNode.id || viz.root),
        initialDepth = root._depth;

    viz.canvas.clear();
    this.plotTree(root, $.merge(opt, {
      'withLabels': true,
      'hideLabels': false,
      'plotSubtree': function(root, node) {
        return !viz.config.constrained ||
               (node._depth - initialDepth < viz.config.levelsToShow);
      }
    }), animating);
  }
});

/*
  Class: Icicle.Label
  
  Custom extension of <Graph.Label>. 
  Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.
  
  Extends:
  
  All <Graph.Label> methods and subclasses.
  
  See also:
  
  <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.
  
  */
$jit.Icicle.Label = {};

/*
  Icicle.Label.Native
  
  Custom extension of <Graph.Label.Native>.
  
  Extends:
  
  All <Graph.Label.Native> methods
  
  See also:
  
  <Graph.Label.Native>

  */
$jit.Icicle.Label.Native = new Class({
  Implements: Graph.Label.Native,

  renderLabel: function(canvas, node, controller) {
    var ctx = canvas.getCtx(),
        width = node.getData('width'),
        height = node.getData('height'),
        size = node.getLabelData('size'),
        m = ctx.measureText(node.name);

    // Guess as much as possible if the label will fit in the node
    if(height < (size * 1.5) || width < m.width)
      return;

    var pos = node.pos.getc(true);
    ctx.fillText(node.name,
                 pos.x + width / 2,
                 pos.y + height / 2);
  }
});

/*
  Icicle.Label.SVG
  
  Custom extension of <Graph.Label.SVG>.
  
  Extends:
  
  All <Graph.Label.SVG> methods
  
  See also:
  
  <Graph.Label.SVG>
*/
$jit.Icicle.Label.SVG = new Class( {
  Implements: Graph.Label.SVG,

  initialize: function(viz){
    this.viz = viz;
  },

  /*
    placeLabel
   
    Overrides abstract method placeLabel in <Graph.Plot>.
   
    Parameters:
   
    tag - A DOM label element.
    node - A <Graph.Node>.
    controller - A configuration/controller object passed to the visualization.
   */
  placeLabel: function(tag, node, controller){
    var pos = node.pos.getc(true), canvas = this.viz.canvas;
    var radius = canvas.getSize();
    var labelPos = {
      x: Math.round(pos.x + radius.width / 2),
      y: Math.round(pos.y + radius.height / 2)
    };
    tag.setAttribute('x', labelPos.x);
    tag.setAttribute('y', labelPos.y);

    controller.onPlaceLabel(tag, node);
  }
});

/*
  Icicle.Label.HTML
  
  Custom extension of <Graph.Label.HTML>.
  
  Extends:
  
  All <Graph.Label.HTML> methods.
  
  See also:
  
  <Graph.Label.HTML>
  
  */
$jit.Icicle.Label.HTML = new Class( {
  Implements: Graph.Label.HTML,

  initialize: function(viz){
    this.viz = viz;
  },

  /*
    placeLabel
   
    Overrides abstract method placeLabel in <Graph.Plot>.
   
    Parameters:
   
    tag - A DOM label element.
    node - A <Graph.Node>.
    controller - A configuration/controller object passed to the visualization.
   */
  placeLabel: function(tag, node, controller){
    var pos = node.pos.getc(true), canvas = this.viz.canvas;
    var radius = canvas.getSize();
    var labelPos = {
      x: Math.round(pos.x + radius.width / 2),
      y: Math.round(pos.y + radius.height / 2)
    };

    var style = tag.style;
    style.left = labelPos.x + 'px';
    style.top = labelPos.y + 'px';
    style.display = '';

    controller.onPlaceLabel(tag, node);
  }
});

/*
  Class: Icicle.Plot.NodeTypes
  
  This class contains a list of <Graph.Node> built-in types. 
  Node types implemented are 'none', 'rectangle'.
  
  You can add your custom node types, customizing your visualization to the extreme.
  
  Example:
  
  (start code js)
    Icicle.Plot.NodeTypes.implement({
      'mySpecialType': {
        'render': function(node, canvas) {
          //print your custom node to canvas
        },
        //optional
        'contains': function(node, pos) {
          //return true if pos is inside the node or false otherwise
        }
      }
    });
  (end code)
  
  */
$jit.Icicle.Plot.NodeTypes = new Class( {
  'none': {
    'render': $.empty
  },

  'rectangle': {
    'render': function(node, canvas, animating) {
      var config = this.viz.config;
      var offset = config.offset;
      var width = node.getData('width');
      var height = node.getData('height');
      var border = node.getData('border');
      var pos = node.pos.getc(true);
      var posx = pos.x + offset / 2, posy = pos.y + offset / 2;
      var ctx = canvas.getCtx();
      
      if(width - offset < 2 || height - offset < 2) return;
      
      if(config.cushion) {
        var color = node.getData('color');
        var lg = ctx.createRadialGradient(posx + (width - offset)/2, 
                                          posy + (height - offset)/2, 1, 
                                          posx + (width-offset)/2, posy + (height-offset)/2, 
                                          width < height? height : width);
        var colorGrad = $.rgbToHex($.map($.hexToRgb(color), 
            function(r) { return r * 0.3 >> 0; }));
        lg.addColorStop(0, color);
        lg.addColorStop(1, colorGrad);
        ctx.fillStyle = lg;
      }

      if (border) {
        ctx.strokeStyle = border;
        ctx.lineWidth = 3;
      }

      ctx.fillRect(posx, posy, Math.max(0, width - offset), Math.max(0, height - offset));
      border && ctx.strokeRect(pos.x, pos.y, width, height);
    },

    'contains': function(node, pos) {
      if(this.viz.clickedNode && !$jit.Graph.Util.isDescendantOf(node, this.viz.clickedNode.id)) return false;
      var npos = node.pos.getc(true),
          width = node.getData('width'),
          height = node.getData('height');
      return this.nodeHelper.rectangle.contains({x: npos.x + width/2, y: npos.y + height/2}, pos, width, height);
    }
  }
});

$jit.Icicle.Plot.EdgeTypes = new Class( {
  'none': $.empty
});



/*
 * File: Layouts.ForceDirected.js
 *
*/

/*
 * Class: Layouts.ForceDirected
 * 
 * Implements a Force Directed Layout.
 * 
 * Implemented By:
 * 
 * <ForceDirected>
 * 
 * Credits:
 * 
 * Marcus Cobden <http://marcuscobden.co.uk>
 * 
 */
Layouts.ForceDirected = new Class({

  getOptions: function(random) {
    var s = this.canvas.getSize();
    var w = s.width, h = s.height;
    //count nodes
    var count = 0;
    this.graph.eachNode(function(n) { 
      count++;
    });
    var k2 = w * h / count, k = Math.sqrt(k2);
    var l = this.config.levelDistance;
    
    return {
      width: w,
      height: h,
      tstart: w * 0.1,
      nodef: function(x) { return k2 / (x || 1); },
      edgef: function(x) { return /* x * x / k; */ k * (x - l); }
    };
  },
  
  compute: function(property, incremental) {
    var prop = $.splat(property || ['current', 'start', 'end']);
    var opt = this.getOptions();
    NodeDim.compute(this.graph, prop, this.config);
    this.graph.computeLevels(this.root, 0, "ignore");
    this.graph.eachNode(function(n) {
      $.each(prop, function(p) {
        var pos = n.getPos(p);
        if(pos.equals(Complex.KER)) {
          pos.x = opt.width/5 * (Math.random() - 0.5);
          pos.y = opt.height/5 * (Math.random() - 0.5);
        }
        //initialize disp vector
        n.disp = {};
        $.each(prop, function(p) {
          n.disp[p] = $C(0, 0);
        });
      });
    });
    this.computePositions(prop, opt, incremental);
  },
  
  computePositions: function(property, opt, incremental) {
    var times = this.config.iterations, i = 0, that = this;
    if(incremental) {
      (function iter() {
        for(var total=incremental.iter, j=0; j<total; j++) {
          opt.t = opt.tstart;
          if(times) opt.t *= (1 - i++/(times -1));
          that.computePositionStep(property, opt);
          if(times && i >= times) {
            incremental.onComplete();
            return;
          }
        }
        incremental.onStep(Math.round(i / (times -1) * 100));
        setTimeout(iter, 1);
      })();
    } else {
      for(; i < times; i++) {
        opt.t = opt.tstart * (1 - i/(times -1));
        this.computePositionStep(property, opt);
      }
    }
  },
  
  computePositionStep: function(property, opt) {
    var graph = this.graph;
    var min = Math.min, max = Math.max;
    var dpos = $C(0, 0);
    //calculate repulsive forces
    graph.eachNode(function(v) {
      //initialize disp
      $.each(property, function(p) {
        v.disp[p].x = 0; v.disp[p].y = 0;
      });
      graph.eachNode(function(u) {
        if(u.id != v.id) {
          $.each(property, function(p) {
            var vp = v.getPos(p), up = u.getPos(p);
            dpos.x = vp.x - up.x;
            dpos.y = vp.y - up.y;
            var norm = dpos.norm() || 1;
            v.disp[p].$add(dpos
                .$scale(opt.nodef(norm) / norm));
          });
        }
      });
    });
    //calculate attractive forces
    var T = !!graph.getNode(this.root).visited;
    graph.eachNode(function(node) {
      node.eachAdjacency(function(adj) {
        var nodeTo = adj.nodeTo;
        if(!!nodeTo.visited === T) {
          $.each(property, function(p) {
            var vp = node.getPos(p), up = nodeTo.getPos(p);
            dpos.x = vp.x - up.x;
            dpos.y = vp.y - up.y;
            var norm = dpos.norm() || 1;
            node.disp[p].$add(dpos.$scale(-opt.edgef(norm) / norm));
            nodeTo.disp[p].$add(dpos.$scale(-1));
          });
        }
      });
      node.visited = !T;
    });
    //arrange positions to fit the canvas
    var t = opt.t, w2 = opt.width / 2, h2 = opt.height / 2;
    graph.eachNode(function(u) {
      $.each(property, function(p) {
        var disp = u.disp[p];
        var norm = disp.norm() || 1;
        var p = u.getPos(p);
        p.$add($C(disp.x * min(Math.abs(disp.x), t) / norm, 
            disp.y * min(Math.abs(disp.y), t) / norm));
        p.x = min(w2, max(-w2, p.x));
        p.y = min(h2, max(-h2, p.y));
      });
    });
  }
});

/*
 * File: ForceDirected.js
 */

/*
   Class: ForceDirected
      
   A visualization that lays graphs using a Force-Directed layout algorithm.
   
   Inspired by:
  
   Force-Directed Drawing Algorithms (Stephen G. Kobourov) <http://www.cs.brown.edu/~rt/gdhandbook/chapters/force-directed.pdf>
   
  Implements:
  
  All <Loader> methods
  
   Constructor Options:
   
   Inherits options from
   
   - <Options.Canvas>
   - <Options.Controller>
   - <Options.Node>
   - <Options.Edge>
   - <Options.Label>
   - <Options.Events>
   - <Options.Tips>
   - <Options.NodeStyles>
   - <Options.Navigation>
   
   Additionally, there are two parameters
   
   levelDistance - (number) Default's *50*. The natural length desired for the edges.
   iterations - (number) Default's *50*. The number of iterations for the spring layout simulation. Depending on the browser's speed you could set this to a more 'interesting' number, like *200*. 
     
   Instance Properties:

   canvas - Access a <Canvas> instance.
   graph - Access a <Graph> instance.
   op - Access a <ForceDirected.Op> instance.
   fx - Access a <ForceDirected.Plot> instance.
   labels - Access a <ForceDirected.Label> interface implementation.

*/

$jit.ForceDirected = new Class( {

  Implements: [ Loader, Extras, Layouts.ForceDirected ],

  initialize: function(controller) {
    var $ForceDirected = $jit.ForceDirected;

    var config = {
      iterations: 50,
      levelDistance: 50
    };

    this.controller = this.config = $.merge(Options("Canvas", "Node", "Edge",
        "Fx", "Tips", "NodeStyles", "Events", "Navigation", "Controller", "Label"), config, controller);

    var canvasConfig = this.config;
    if(canvasConfig.useCanvas) {
      this.canvas = canvasConfig.useCanvas;
      this.config.labelContainer = this.canvas.id + '-label';
    } else {
      if(canvasConfig.background) {
        canvasConfig.background = $.merge({
          type: 'Circles'
        }, canvasConfig.background);
      }
      this.canvas = new Canvas(this, canvasConfig);
      this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
    }

    this.graphOptions = {
      'klass': Complex,
      'Node': {
        'selected': false,
        'exist': true,
        'drawn': true
      }
    };
    this.graph = new Graph(this.graphOptions, this.config.Node,
        this.config.Edge);
    this.labels = new $ForceDirected.Label[canvasConfig.Label.type](this);
    this.fx = new $ForceDirected.Plot(this, $ForceDirected);
    this.op = new $ForceDirected.Op(this);
    this.json = null;
    this.busy = false;
    // initialize extras
    this.initializeExtras();
  },

  /* 
    Method: refresh 
    
    Computes positions and plots the tree.
  */
  refresh: function() {
    this.compute();
    this.plot();
  },

  reposition: function() {
    this.compute('end');
  },

/*
  Method: computeIncremental
  
  Performs the Force Directed algorithm incrementally.
  
  Description:
  
  ForceDirected algorithms can perform many computations and lead to JavaScript taking too much time to complete. 
  This method splits the algorithm into smaller parts allowing the user to track the evolution of the algorithm and 
  avoiding browser messages such as "This script is taking too long to complete".
  
  Parameters:
  
  opt - (object) The object properties are described below
  
  iter - (number) Default's *20*. Split the algorithm into pieces of _iter_ iterations. For example, if the _iterations_ configuration property 
  of your <ForceDirected> class is 100, then you could set _iter_ to 20 to split the main algorithm into 5 smaller pieces.
  
  property - (string) Default's *end*. Whether to update starting, current or ending node positions. Possible values are 'end', 'start', 'current'. 
  You can also set an array of these properties. If you'd like to keep the current node positions but to perform these 
  computations for final animation positions then you can just choose 'end'.
  
  onStep - (function) A callback function called when each "small part" of the algorithm completed. This function gets as first formal 
  parameter a percentage value.
  
  onComplete - A callback function called when the algorithm completed.
  
  Example:
  
  In this example I calculate the end positions and then animate the graph to those positions
  
  (start code js)
  var fd = new $jit.ForceDirected(...);
  fd.computeIncremental({
    iter: 20,
    property: 'end',
    onStep: function(perc) {
      Log.write("loading " + perc + "%");
    },
    onComplete: function() {
      Log.write("done");
      fd.animate();
    }
  });
  (end code)
  
  In this example I calculate all positions and (re)plot the graph
  
  (start code js)
  var fd = new ForceDirected(...);
  fd.computeIncremental({
    iter: 20,
    property: ['end', 'start', 'current'],
    onStep: function(perc) {
      Log.write("loading " + perc + "%");
    },
    onComplete: function() {
      Log.write("done");
      fd.plot();
    }
  });
  (end code)
  
  */
  computeIncremental: function(opt) {
    opt = $.merge( {
      iter: 20,
      property: 'end',
      onStep: $.empty,
      onComplete: $.empty
    }, opt || {});

    this.config.onBeforeCompute(this.graph.getNode(this.root));
    this.compute(opt.property, opt);
  },

  /*
    Method: plot
   
    Plots the ForceDirected graph. This is a shortcut to *fx.plot*.
   */
  plot: function() {
    this.fx.plot();
  },

  /*
     Method: animate
    
     Animates the graph from the current positions to the 'end' node positions.
  */
  animate: function(opt) {
    this.fx.animate($.merge( {
      modes: [ 'linear' ]
    }, opt || {}));
  }
});

$jit.ForceDirected.$extend = true;

(function(ForceDirected) {

  /*
     Class: ForceDirected.Op
     
     Custom extension of <Graph.Op>.

     Extends:

     All <Graph.Op> methods
     
     See also:
     
     <Graph.Op>

  */
  ForceDirected.Op = new Class( {

    Implements: Graph.Op

  });

  /*
    Class: ForceDirected.Plot
    
    Custom extension of <Graph.Plot>.
  
    Extends:
  
    All <Graph.Plot> methods
    
    See also:
    
    <Graph.Plot>
  
  */
  ForceDirected.Plot = new Class( {

    Implements: Graph.Plot

  });

  /*
    Class: ForceDirected.Label
    
    Custom extension of <Graph.Label>. 
    Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.
  
    Extends:
  
    All <Graph.Label> methods and subclasses.
  
    See also:
  
    <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.
  
  */
  ForceDirected.Label = {};

  /*
     ForceDirected.Label.Native
     
     Custom extension of <Graph.Label.Native>.

     Extends:

     All <Graph.Label.Native> methods

     See also:

     <Graph.Label.Native>

  */
  ForceDirected.Label.Native = new Class( {
    Implements: Graph.Label.Native
  });

  /*
    ForceDirected.Label.SVG
    
    Custom extension of <Graph.Label.SVG>.
  
    Extends:
  
    All <Graph.Label.SVG> methods
  
    See also:
  
    <Graph.Label.SVG>
  
  */
  ForceDirected.Label.SVG = new Class( {
    Implements: Graph.Label.SVG,

    initialize: function(viz) {
      this.viz = viz;
    },

    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Label>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller) {
      var pos = node.pos.getc(true), 
          canvas = this.viz.canvas,
          ox = canvas.translateOffsetX,
          oy = canvas.translateOffsetY,
          sx = canvas.scaleOffsetX,
          sy = canvas.scaleOffsetY,
          radius = canvas.getSize();
      var labelPos = {
        x: Math.round(pos.x * sx + ox + radius.width / 2),
        y: Math.round(pos.y * sy + oy + radius.height / 2)
      };
      tag.setAttribute('x', labelPos.x);
      tag.setAttribute('y', labelPos.y);

      controller.onPlaceLabel(tag, node);
    }
  });

  /*
     ForceDirected.Label.HTML
     
     Custom extension of <Graph.Label.HTML>.

     Extends:

     All <Graph.Label.HTML> methods.

     See also:

     <Graph.Label.HTML>

  */
  ForceDirected.Label.HTML = new Class( {
    Implements: Graph.Label.HTML,

    initialize: function(viz) {
      this.viz = viz;
    },
    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller) {
      var pos = node.pos.getc(true), 
          canvas = this.viz.canvas,
          ox = canvas.translateOffsetX,
          oy = canvas.translateOffsetY,
          sx = canvas.scaleOffsetX,
          sy = canvas.scaleOffsetY,
          radius = canvas.getSize();
      var labelPos = {
        x: Math.round(pos.x * sx + ox + radius.width / 2),
        y: Math.round(pos.y * sy + oy + radius.height / 2)
      };
      var style = tag.style;
      style.left = labelPos.x + 'px';
      style.top = labelPos.y + 'px';
      style.display = this.fitsInCanvas(labelPos, canvas) ? '' : 'none';

      controller.onPlaceLabel(tag, node);
    }
  });

  /*
    Class: ForceDirected.Plot.NodeTypes

    This class contains a list of <Graph.Node> built-in types. 
    Node types implemented are 'none', 'circle', 'triangle', 'rectangle', 'star', 'ellipse' and 'square'.

    You can add your custom node types, customizing your visualization to the extreme.

    Example:

    (start code js)
      ForceDirected.Plot.NodeTypes.implement({
        'mySpecialType': {
          'render': function(node, canvas) {
            //print your custom node to canvas
          },
          //optional
          'contains': function(node, pos) {
            //return true if pos is inside the node or false otherwise
          }
        }
      });
    (end code)

  */
  ForceDirected.Plot.NodeTypes = new Class({
    'none': {
      'render': $.empty,
      'contains': $.lambda(false)
    },
    'circle': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            dim = node.getData('dim');
        this.nodeHelper.circle.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            dim = node.getData('dim');
        return this.nodeHelper.circle.contains(npos, pos, dim);
      }
    },
    'ellipse': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        this.nodeHelper.ellipse.render('fill', pos, width, height, canvas);
        },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        return this.nodeHelper.ellipse.contains(npos, pos, width, height);
      }
    },
    'square': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            dim = node.getData('dim');
        this.nodeHelper.square.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            dim = node.getData('dim');
        return this.nodeHelper.square.contains(npos, pos, dim);
      }
    },
    'rectangle': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        this.nodeHelper.rectangle.render('fill', pos, width, height, canvas);
      },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        return this.nodeHelper.rectangle.contains(npos, pos, width, height);
      }
    },
    'triangle': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            dim = node.getData('dim');
        this.nodeHelper.triangle.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos) {
        var npos = node.pos.getc(true), 
            dim = node.getData('dim');
        return this.nodeHelper.triangle.contains(npos, pos, dim);
      }
    },
    'star': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true),
            dim = node.getData('dim');
        this.nodeHelper.star.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos) {
        var npos = node.pos.getc(true),
            dim = node.getData('dim');
        return this.nodeHelper.star.contains(npos, pos, dim);
      }
    }
  });

  /*
    Class: ForceDirected.Plot.EdgeTypes
  
    This class contains a list of <Graph.Adjacence> built-in types. 
    Edge types implemented are 'none', 'line' and 'arrow'.
  
    You can add your custom edge types, customizing your visualization to the extreme.
  
    Example:
  
    (start code js)
      ForceDirected.Plot.EdgeTypes.implement({
        'mySpecialType': {
          'render': function(adj, canvas) {
            //print your custom edge to canvas
          },
          //optional
          'contains': function(adj, pos) {
            //return true if pos is inside the arc or false otherwise
          }
        }
      });
    (end code)
  
  */
  ForceDirected.Plot.EdgeTypes = new Class({
    'none': $.empty,
    'line': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        this.edgeHelper.line.render(from, to, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        return this.edgeHelper.line.contains(from, to, pos, this.edge.epsilon);
      }
    },
    'arrow': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true),
            dim = adj.getData('dim'),
            direction = adj.data.$direction,
            inv = (direction && direction.length>1 && direction[0] != adj.nodeFrom.id);
        this.edgeHelper.arrow.render(from, to, dim, inv, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        return this.edgeHelper.arrow.contains(from, to, pos, this.edge.epsilon);
      }
    }
  });

})($jit.ForceDirected);


/*
 * File: Treemap.js
 *
*/

$jit.TM = {};

var TM = $jit.TM;

$jit.TM.$extend = true;

/*
  Class: TM.Base
  
  Abstract class providing base functionality for <TM.Squarified>, <TM.Strip> and <TM.SliceAndDice> visualizations.
  
  Implements:
  
  All <Loader> methods
  
  Constructor Options:
  
  Inherits options from
  
  - <Options.Canvas>
  - <Options.Controller>
  - <Options.Node>
  - <Options.Edge>
  - <Options.Label>
  - <Options.Events>
  - <Options.Tips>
  - <Options.NodeStyles>
  - <Options.Navigation>
  
  Additionally, there are other parameters and some default values changed

  orientation - (string) Default's *h*. Whether to set horizontal or vertical layouts. Possible values are 'h' and 'v'.
  titleHeight - (number) Default's *13*. The height of the title rectangle for inner (non-leaf) nodes.
  offset - (number) Default's *2*. Boxes offset.
  constrained - (boolean) Default's *false*. Whether to show the entire tree when loaded or just the number of levels specified by _levelsToShow_.
  levelsToShow - (number) Default's *3*. The number of levels to show for a subtree. This number is relative to the selected node.
  animate - (boolean) Default's *false*. Whether to animate transitions.
  Node.type - Described in <Options.Node>. Default's *rectangle*.
  duration - Described in <Options.Fx>. Default's *700*.
  fps - Described in <Options.Fx>. Default's *45*.
  
  Instance Properties:
  
  canvas - Access a <Canvas> instance.
  graph - Access a <Graph> instance.
  op - Access a <TM.Op> instance.
  fx - Access a <TM.Plot> instance.
  labels - Access a <TM.Label> interface implementation.

  Inspired by:
  
  Squarified Treemaps (Mark Bruls, Kees Huizing, and Jarke J. van Wijk) <http://www.win.tue.nl/~vanwijk/stm.pdf>
  
  Tree visualization with tree-maps: 2-d space-filling approach (Ben Shneiderman) <http://hcil.cs.umd.edu/trs/91-03/91-03.html>
  
   Note:
   
   This visualization was built and engineered from scratch, taking only the paper as inspiration, and only shares some features with the visualization described in the paper.

*/
TM.Base = {
  layout: {
    orientation: "h",
    vertical: function(){
      return this.orientation == "v";
    },
    horizontal: function(){
      return this.orientation == "h";
    },
    change: function(){
      this.orientation = this.vertical()? "h" : "v";
    }
  },

  initialize: function(controller){
    var config = {
      orientation: "h",
      titleHeight: 13,
      offset: 2,
      levelsToShow: 0,
      constrained: false,
      animate: false,
      Node: {
        type: 'rectangle',
        overridable: true,
        //we all know why this is not zero,
        //right, Firefox?
        width: 3,
        height: 3,
        color: '#444'
      },
      Label: {
        textAlign: 'center',
        textBaseline: 'top'
      },
      Edge: {
        type: 'none'
      },
      duration: 700,
      fps: 45
    };

    this.controller = this.config = $.merge(Options("Canvas", "Node", "Edge",
        "Fx", "Controller", "Tips", "NodeStyles", "Events", "Navigation", "Label"), config, controller);
    this.layout.orientation = this.config.orientation;

    var canvasConfig = this.config;
    if (canvasConfig.useCanvas) {
      this.canvas = canvasConfig.useCanvas;
      this.config.labelContainer = this.canvas.id + '-label';
    } else {
      if(canvasConfig.background) {
        canvasConfig.background = $.merge({
          type: 'Circles'
        }, canvasConfig.background);
      }
      this.canvas = new Canvas(this, canvasConfig);
      this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
    }

    this.graphOptions = {
      'klass': Complex,
      'Node': {
        'selected': false,
        'exist': true,
        'drawn': true
      }
    };
    this.graph = new Graph(this.graphOptions, this.config.Node,
        this.config.Edge);
    this.labels = new TM.Label[canvasConfig.Label.type](this);
    this.fx = new TM.Plot(this);
    this.op = new TM.Op(this);
    this.group = new TM.Group(this);
    this.geom = new TM.Geom(this);
    this.clickedNode = null;
    this.busy = false;
    // initialize extras
    this.initializeExtras();
  },

  /* 
    Method: refresh 
    
    Computes positions and plots the tree.
  */
  refresh: function(){
    if(this.busy) return;
    this.busy = true;
    var that = this;
    if(this.config.animate) {
      this.compute('end');
      this.config.levelsToShow > 0 && this.geom.setRightLevelToShow(this.graph.getNode(this.clickedNode 
          && this.clickedNode.id || this.root));
      this.fx.animate($.merge(this.config, {
        modes: ['linear', 'node-property:width:height'],
        onComplete: function() {
          that.busy = false;
        }
      }));
    } else {
      var labelType = this.config.Label.type;
      if(labelType != 'Native') {
        var that = this;
        this.graph.eachNode(function(n) { that.labels.hideLabel(n, false); });
      }
      this.busy = false;
      this.compute();
      this.config.levelsToShow > 0 && this.geom.setRightLevelToShow(this.graph.getNode(this.clickedNode 
          && this.clickedNode.id || this.root));
      this.plot();
    }
  },

  /* 
    Method: plot 
    
    Plots the TreeMap. This is a shortcut to *fx.plot*. 
  
   */
  plot: function(){
    this.fx.plot();
  },

  /* 
  Method: leaf 
  
  Returns whether the node is a leaf.
  
   Parameters:
   
   n - (object) A <Graph.Node>.

 */
  leaf: function(n){
    return n.getSubnodes([
        1, 1
    ], "ignore").length == 0;
  },
  
  /* 
  Method: enter 
  
  Sets the node as root.
  
   Parameters:
   
   n - (object) A <Graph.Node>.

 */
  enter: function(n){
    if(this.busy) return;
    this.busy = true;
    
    var that = this,
        config = this.config,
        graph = this.graph,
        clickedNode = n,
        previousClickedNode = this.clickedNode;

    var callback = {
      onComplete: function() {
        //ensure that nodes are shown for that level
        if(config.levelsToShow > 0) {
          that.geom.setRightLevelToShow(n);
        }
        //compute positions of newly inserted nodes
        if(config.levelsToShow > 0 || config.request) that.compute();
        if(config.animate) {
          //fade nodes
          graph.nodeList.setData('alpha', 0, 'end');
          n.eachSubgraph(function(n) {
            n.setData('alpha', 1, 'end');
          }, "ignore");
          that.fx.animate({
            duration: 500,
            modes:['node-property:alpha'],
            onComplete: function() {
              //compute end positions
              that.clickedNode = clickedNode;
              that.compute('end');
              //animate positions
              //TODO(nico) commenting this line didn't seem to throw errors...
              that.clickedNode = previousClickedNode;
              that.fx.animate({
                modes:['linear', 'node-property:width:height'],
                duration: 1000,
                onComplete: function() { 
                  that.busy = false;
                  //TODO(nico) check comment above
                  that.clickedNode = clickedNode;
                }
              });
            }
          });
        } else {
          that.busy = false;
          that.clickedNode = n;
          that.refresh();
        }
      }
    };
    if(config.request) {
      this.requestNodes(clickedNode, callback);
    } else {
      callback.onComplete();
    }
  },

  /* 
  Method: out 
  
  Sets the parent node of the current selected node as root.

 */
  out: function(){
    if(this.busy) return;
    this.busy = true;
    this.events.hoveredNode = false;
    var that = this,
        config = this.config,
        graph = this.graph,
        parents = graph.getNode(this.clickedNode 
            && this.clickedNode.id || this.root).getParents(),
        parent = parents[0],
        clickedNode = parent,
        previousClickedNode = this.clickedNode;
    
    //if no parents return
    if(!parent) {
      this.busy = false;
      return;
    }
    //final plot callback
    callback = {
      onComplete: function() {
        that.clickedNode = parent;
        if(config.request) {
          that.requestNodes(parent, {
            onComplete: function() {
              that.compute();
              that.plot();
              that.busy = false;
            }
          });
        } else {
          that.compute();
          that.plot();
          that.busy = false;
        }
      }
    };
    //prune tree
    if (config.levelsToShow > 0)
      this.geom.setRightLevelToShow(parent);
    //animate node positions
    if(config.animate) {
      this.clickedNode = clickedNode;
      this.compute('end');
      //animate the visible subtree only
      this.clickedNode = previousClickedNode;
      this.fx.animate({
        modes:['linear', 'node-property:width:height'],
        duration: 1000,
        onComplete: function() {
          //animate the parent subtree
          that.clickedNode = clickedNode;
          //change nodes alpha
          graph.eachNode(function(n) {
            n.setDataset(['current', 'end'], {
              'alpha': [0, 1]
            });
          }, "ignore");
          previousClickedNode.eachSubgraph(function(node) {
            node.setData('alpha', 1);
          }, "ignore");
          that.fx.animate({
            duration: 500,
            modes:['node-property:alpha'],
            onComplete: function() {
              callback.onComplete();
            }
          });
        }
      });
    } else {
      callback.onComplete();
    }
  },

  requestNodes: function(node, onComplete){
    var handler = $.merge(this.controller, onComplete), 
        lev = this.config.levelsToShow;
    if (handler.request) {
      var leaves = [], d = node._depth;
      node.eachLevel(0, lev, function(n){
        var nodeLevel = lev - (n._depth - d);
        if (n.drawn && !n.anySubnode() && nodeLevel > 0) {
          leaves.push(n);
          n._level = nodeLevel;
        }
      });
      this.group.requestNodes(leaves, handler);
    } else {
      handler.onComplete();
    }
  },
  
  reposition: function() {
    this.compute('end');
  }
};

/*
  Class: TM.Op
  
  Custom extension of <Graph.Op>.
  
  Extends:
  
  All <Graph.Op> methods
  
  See also:
  
  <Graph.Op>
  
  */
TM.Op = new Class({
  Implements: Graph.Op,

  initialize: function(viz){
    this.viz = viz;
  }
});

//extend level methods of Graph.Geom
TM.Geom = new Class({
  Implements: Graph.Geom,
  
  getRightLevelToShow: function() {
    return this.viz.config.levelsToShow;
  },
  
  setRightLevelToShow: function(node) {
    var level = this.getRightLevelToShow(), 
        fx = this.viz.labels;
    node.eachLevel(0, level+1, function(n) {
      var d = n._depth - node._depth;
      if(d > level) {
        n.drawn = false; 
        n.exist = false;
        n.ignore = true;
        fx.hideLabel(n, false);
      } else {
        n.drawn = true;
        n.exist = true;
        delete n.ignore;
      }
    });
    node.drawn = true;
    delete node.ignore;
  }
});

/*

Performs operations on group of nodes.

*/
TM.Group = new Class( {

  initialize: function(viz){
    this.viz = viz;
    this.canvas = viz.canvas;
    this.config = viz.config;
  },

  /*
  
    Calls the request method on the controller to request a subtree for each node. 
  */
  requestNodes: function(nodes, controller){
    var counter = 0, len = nodes.length, nodeSelected = {};
    var complete = function(){
      controller.onComplete();
    };
    var viz = this.viz;
    if (len == 0)
      complete();
    for ( var i = 0; i < len; i++) {
      nodeSelected[nodes[i].id] = nodes[i];
      controller.request(nodes[i].id, nodes[i]._level, {
        onComplete: function(nodeId, data){
          if (data && data.children) {
            data.id = nodeId;
            viz.op.sum(data, {
              type: 'nothing'
            });
          }
          if (++counter == len) {
            viz.graph.computeLevels(viz.root, 0);
            complete();
          }
        }
      });
    }
  }
});

/*
  Class: TM.Plot
  
  Custom extension of <Graph.Plot>.
  
  Extends:
  
  All <Graph.Plot> methods
  
  See also:
  
  <Graph.Plot>
  
  */
TM.Plot = new Class({

  Implements: Graph.Plot,

  initialize: function(viz){
    this.viz = viz;
    this.config = viz.config;
    this.node = this.config.Node;
    this.edge = this.config.Edge;
    this.animation = new Animation;
    this.nodeTypes = new TM.Plot.NodeTypes;
    this.edgeTypes = new TM.Plot.EdgeTypes;
    this.labels = viz.labels;
  },

  plot: function(opt, animating){
    var viz = this.viz, 
        graph = viz.graph;
    viz.canvas.clear();
    this.plotTree(graph.getNode(viz.clickedNode && viz.clickedNode.id || viz.root), $.merge(viz.config, opt || {}, {
      'withLabels': true,
      'hideLabels': false,
      'plotSubtree': function(n, ch){
        return n.anySubnode("exist");
      }
    }), animating);
  }
});

/*
  Class: TM.Label
  
  Custom extension of <Graph.Label>. 
  Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.

  Extends:

  All <Graph.Label> methods and subclasses.

  See also:

  <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.
  
*/
TM.Label = {};

/*
 TM.Label.Native

 Custom extension of <Graph.Label.Native>.

 Extends:

 All <Graph.Label.Native> methods

 See also:

 <Graph.Label.Native>
*/
TM.Label.Native = new Class({
  Implements: Graph.Label.Native,

  initialize: function(viz) {
    this.config = viz.config;
    this.leaf = viz.leaf;
  },
  
  renderLabel: function(canvas, node, controller){
    if(!this.leaf(node) && !this.config.titleHeight) return;
    var pos = node.pos.getc(true), 
        ctx = canvas.getCtx(),
        width = node.getData('width'),
        height = node.getData('height'),
        x = pos.x + width/2,
        y = pos.y;
        
    ctx.fillText(node.name, x, y, width);
  }
});

/*
 TM.Label.SVG

  Custom extension of <Graph.Label.SVG>.

  Extends:

  All <Graph.Label.SVG> methods

  See also:

  <Graph.Label.SVG>
*/
TM.Label.SVG = new Class( {
  Implements: Graph.Label.SVG,

  initialize: function(viz){
    this.viz = viz;
    this.leaf = viz.leaf;
    this.config = viz.config;
  },

  /* 
  placeLabel

  Overrides abstract method placeLabel in <Graph.Plot>.

  Parameters:

  tag - A DOM label element.
  node - A <Graph.Node>.
  controller - A configuration/controller object passed to the visualization.
  
  */
  placeLabel: function(tag, node, controller){
    var pos = node.pos.getc(true), 
        canvas = this.viz.canvas,
        ox = canvas.translateOffsetX,
        oy = canvas.translateOffsetY,
        sx = canvas.scaleOffsetX,
        sy = canvas.scaleOffsetY,
        radius = canvas.getSize();
    var labelPos = {
      x: Math.round(pos.x * sx + ox + radius.width / 2),
      y: Math.round(pos.y * sy + oy + radius.height / 2)
    };
    tag.setAttribute('x', labelPos.x);
    tag.setAttribute('y', labelPos.y);

    if(!this.leaf(node) && !this.config.titleHeight) {
      tag.style.display = 'none';
    }
    controller.onPlaceLabel(tag, node);
  }
});

/*
 TM.Label.HTML

 Custom extension of <Graph.Label.HTML>.

 Extends:

 All <Graph.Label.HTML> methods.

 See also:

 <Graph.Label.HTML>

*/
TM.Label.HTML = new Class( {
  Implements: Graph.Label.HTML,

  initialize: function(viz){
    this.viz = viz;
    this.leaf = viz.leaf;
    this.config = viz.config;
  },

  /* 
    placeLabel
  
    Overrides abstract method placeLabel in <Graph.Plot>.
  
    Parameters:
  
    tag - A DOM label element.
    node - A <Graph.Node>.
    controller - A configuration/controller object passed to the visualization.
  
  */
  placeLabel: function(tag, node, controller){
    var pos = node.pos.getc(true), 
        canvas = this.viz.canvas,
        ox = canvas.translateOffsetX,
        oy = canvas.translateOffsetY,
        sx = canvas.scaleOffsetX,
        sy = canvas.scaleOffsetY,
        radius = canvas.getSize();
    var labelPos = {
      x: Math.round(pos.x * sx + ox + radius.width / 2),
      y: Math.round(pos.y * sy + oy + radius.height / 2)
    };

    var style = tag.style;
    style.left = labelPos.x + 'px';
    style.top = labelPos.y + 'px';
    style.width = node.getData('width') * sx + 'px';
    style.height = node.getData('height') * sy + 'px';
    style.zIndex = node._depth * 100;
    style.display = '';

    if(!this.leaf(node) && !this.config.titleHeight) {
      tag.style.display = 'none';
    }
    controller.onPlaceLabel(tag, node);
  }
});

/*
  Class: TM.Plot.NodeTypes

  This class contains a list of <Graph.Node> built-in types. 
  Node types implemented are 'none', 'rectangle'.

  You can add your custom node types, customizing your visualization to the extreme.

  Example:

  (start code js)
    TM.Plot.NodeTypes.implement({
      'mySpecialType': {
        'render': function(node, canvas) {
          //print your custom node to canvas
        },
        //optional
        'contains': function(node, pos) {
          //return true if pos is inside the node or false otherwise
        }
      }
    });
  (end code)

*/
TM.Plot.NodeTypes = new Class( {
  'none': {
    'render': $.empty
  },

  'rectangle': {
    'render': function(node, canvas, animating){
      var leaf = this.viz.leaf(node),
          config = this.config,
          offst = config.offset,
          titleHeight = config.titleHeight,
          pos = node.pos.getc(true),
          width = node.getData('width'),
          height = node.getData('height'),
          border = node.getData('border'),
          ctx = canvas.getCtx(),
          posx = pos.x + offst / 2, 
          posy = pos.y + offst / 2;
      if(width <= offst || height <= offst) return;
      if (leaf) {
        if(config.cushion) {
          var lg = ctx.createRadialGradient(posx + (width-offst)/2, posy + (height-offst)/2, 1, 
              posx + (width-offst)/2, posy + (height-offst)/2, width < height? height : width);
          var color = node.getData('color');
          var colorGrad = $.rgbToHex($.map($.hexToRgb(color), 
              function(r) { return r * 0.2 >> 0; }));
          lg.addColorStop(0, color);
          lg.addColorStop(1, colorGrad);
          ctx.fillStyle = lg;
        }
        ctx.fillRect(posx, posy, width - offst, height - offst);
        if(border) {
          ctx.save();
          ctx.strokeStyle = border;
          ctx.strokeRect(posx, posy, width - offst, height - offst);
          ctx.restore();
        }
      } else if(titleHeight > 0){
        ctx.fillRect(pos.x + offst / 2, pos.y + offst / 2, width - offst,
            titleHeight - offst);
        if(border) {
          ctx.save();
          ctx.strokeStyle = border;
          ctx.strokeRect(pos.x + offst / 2, pos.y + offst / 2, width - offst,
              height - offst);
          ctx.restore();
        }
      }
    },
    'contains': function(node, pos) {
      if(this.viz.clickedNode && !node.isDescendantOf(this.viz.clickedNode.id) || node.ignore) return false;
      var npos = node.pos.getc(true),
          width = node.getData('width'), 
          leaf = this.viz.leaf(node),
          height = leaf? node.getData('height') : this.config.titleHeight;
      return this.nodeHelper.rectangle.contains({x: npos.x + width/2, y: npos.y + height/2}, pos, width, height);
    }
  }
});

TM.Plot.EdgeTypes = new Class( {
  'none': $.empty
});

/*
  Class: TM.SliceAndDice
  
  A slice and dice TreeMap visualization.
  
  Implements:
  
  All <TM.Base> methods and properties.
*/
TM.SliceAndDice = new Class( {
  Implements: [
      Loader, Extras, TM.Base, Layouts.TM.SliceAndDice
  ]
});

/*
  Class: TM.Squarified
  
  A squarified TreeMap visualization.

  Implements:
  
  All <TM.Base> methods and properties.
*/
TM.Squarified = new Class( {
  Implements: [
      Loader, Extras, TM.Base, Layouts.TM.Squarified
  ]
});

/*
  Class: TM.Strip
  
  A strip TreeMap visualization.

  Implements:
  
  All <TM.Base> methods and properties.
*/
TM.Strip = new Class( {
  Implements: [
      Loader, Extras, TM.Base, Layouts.TM.Strip
  ]
});


/*
 * File: RGraph.js
 *
 */

/*
   Class: RGraph
   
   A radial graph visualization with advanced animations.
   
   Inspired by:
 
   Animated Exploration of Dynamic Graphs with Radial Layout (Ka-Ping Yee, Danyel Fisher, Rachna Dhamija, Marti Hearst) <http://bailando.sims.berkeley.edu/papers/infovis01.htm>
   
   Note:
   
   This visualization was built and engineered from scratch, taking only the paper as inspiration, and only shares some features with the visualization described in the paper.
   
  Implements:
  
  All <Loader> methods
  
   Constructor Options:
   
   Inherits options from
   
   - <Options.Canvas>
   - <Options.Controller>
   - <Options.Node>
   - <Options.Edge>
   - <Options.Label>
   - <Options.Events>
   - <Options.Tips>
   - <Options.NodeStyles>
   - <Options.Navigation>
   
   Additionally, there are other parameters and some default values changed
   
   interpolation - (string) Default's *linear*. Describes the way nodes are interpolated. Possible values are 'linear' and 'polar'.
   levelDistance - (number) Default's *100*. The distance between levels of the tree. 
     
   Instance Properties:

   canvas - Access a <Canvas> instance.
   graph - Access a <Graph> instance.
   op - Access a <RGraph.Op> instance.
   fx - Access a <RGraph.Plot> instance.
   labels - Access a <RGraph.Label> interface implementation.   
*/

$jit.RGraph = new Class( {

  Implements: [
      Loader, Extras, Layouts.Radial
  ],

  initialize: function(controller){
    var $RGraph = $jit.RGraph;

    var config = {
      interpolation: 'linear',
      levelDistance: 100
    };

    this.controller = this.config = $.merge(Options("Canvas", "Node", "Edge",
        "Fx", "Controller", "Tips", "NodeStyles", "Events", "Navigation", "Label"), config, controller);

    var canvasConfig = this.config;
    if(canvasConfig.useCanvas) {
      this.canvas = canvasConfig.useCanvas;
      this.config.labelContainer = this.canvas.id + '-label';
    } else {
      if(canvasConfig.background) {
        canvasConfig.background = $.merge({
          type: 'Circles'
        }, canvasConfig.background);
      }
      this.canvas = new Canvas(this, canvasConfig);
      this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
    }

    this.graphOptions = {
      'klass': Polar,
      'Node': {
        'selected': false,
        'exist': true,
        'drawn': true
      }
    };
    this.graph = new Graph(this.graphOptions, this.config.Node,
        this.config.Edge);
    this.labels = new $RGraph.Label[canvasConfig.Label.type](this);
    this.fx = new $RGraph.Plot(this, $RGraph);
    this.op = new $RGraph.Op(this);
    this.json = null;
    this.root = null;
    this.busy = false;
    this.parent = false;
    // initialize extras
    this.initializeExtras();
  },

  /* 
  
    createLevelDistanceFunc 
  
    Returns the levelDistance function used for calculating a node distance 
    to its origin. This function returns a function that is computed 
    per level and not per node, such that all nodes with the same depth will have the 
    same distance to the origin. The resulting function gets the 
    parent node as parameter and returns a float.

   */
  createLevelDistanceFunc: function(){
    var ld = this.config.levelDistance;
    return function(elem){
      return (elem._depth + 1) * ld;
    };
  },

  /* 
     Method: refresh 
     
     Computes positions and plots the tree.

   */
  refresh: function(){
    this.compute();
    this.plot();
  },

  reposition: function(){
    this.compute('end');
  },

  /*
   Method: plot
  
   Plots the RGraph. This is a shortcut to *fx.plot*.
  */
  plot: function(){
    this.fx.plot();
  },
  /*
   getNodeAndParentAngle
  
   Returns the _parent_ of the given node, also calculating its angle span.
  */
  getNodeAndParentAngle: function(id){
    var theta = false;
    var n = this.graph.getNode(id);
    var ps = n.getParents();
    var p = (ps.length > 0)? ps[0] : false;
    if (p) {
      var posParent = p.pos.getc(), posChild = n.pos.getc();
      var newPos = posParent.add(posChild.scale(-1));
      theta = Math.atan2(newPos.y, newPos.x);
      if (theta < 0)
        theta += 2 * Math.PI;
    }
    return {
      parent: p,
      theta: theta
    };
  },
  /*
   tagChildren
  
   Enumerates the children in order to maintain child ordering (second constraint of the paper).
  */
  tagChildren: function(par, id){
    if (par.angleSpan) {
      var adjs = [];
      par.eachAdjacency(function(elem){
        adjs.push(elem.nodeTo);
      }, "ignore");
      var len = adjs.length;
      for ( var i = 0; i < len && id != adjs[i].id; i++)
        ;
      for ( var j = (i + 1) % len, k = 0; id != adjs[j].id; j = (j + 1) % len) {
        adjs[j].dist = k++;
      }
    }
  },
  /* 
  Method: onClick 
  
  Animates the <RGraph> to center the node specified by *id*.

   Parameters:

   id - A <Graph.Node> id.
   opt - (optional|object) An object containing some extra properties described below
   hideLabels - (boolean) Default's *true*. Hide labels when performing the animation.

   Example:

   (start code js)
     rgraph.onClick('someid');
     //or also...
     rgraph.onClick('someid', {
      hideLabels: false
     });
    (end code)
    
  */
  onClick: function(id, opt){
    if (this.root != id && !this.busy) {
      this.busy = true;
      this.root = id;
      var that = this;
      this.controller.onBeforeCompute(this.graph.getNode(id));
      var obj = this.getNodeAndParentAngle(id);

      // second constraint
      this.tagChildren(obj.parent, id);
      this.parent = obj.parent;
      this.compute('end');

      // first constraint
      var thetaDiff = obj.theta - obj.parent.endPos.theta;
      this.graph.eachNode(function(elem){
        elem.endPos.set(elem.endPos.getp().add($P(thetaDiff, 0)));
      });

      var mode = this.config.interpolation;
      opt = $.merge( {
        onComplete: $.empty
      }, opt || {});

      this.fx.animate($.merge( {
        hideLabels: true,
        modes: [
          mode
        ]
      }, opt, {
        onComplete: function(){
          that.busy = false;
          opt.onComplete();
        }
      }));
    }
  }
});

$jit.RGraph.$extend = true;

(function(RGraph){

  /*
     Class: RGraph.Op
     
     Custom extension of <Graph.Op>.

     Extends:

     All <Graph.Op> methods
     
     See also:
     
     <Graph.Op>

  */
  RGraph.Op = new Class( {

    Implements: Graph.Op

  });

  /*
     Class: RGraph.Plot
    
    Custom extension of <Graph.Plot>.
  
    Extends:
  
    All <Graph.Plot> methods
    
    See also:
    
    <Graph.Plot>
  
  */
  RGraph.Plot = new Class( {

    Implements: Graph.Plot

  });

  /*
    Object: RGraph.Label

    Custom extension of <Graph.Label>. 
    Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.
  
    Extends:
  
    All <Graph.Label> methods and subclasses.
  
    See also:
  
    <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.
  
   */
  RGraph.Label = {};

  /*
     RGraph.Label.Native

     Custom extension of <Graph.Label.Native>.

     Extends:

     All <Graph.Label.Native> methods

     See also:

     <Graph.Label.Native>

  */
  RGraph.Label.Native = new Class( {
    Implements: Graph.Label.Native
  });

  /*
     RGraph.Label.SVG
    
    Custom extension of <Graph.Label.SVG>.
  
    Extends:
  
    All <Graph.Label.SVG> methods
  
    See also:
  
    <Graph.Label.SVG>
  
  */
  RGraph.Label.SVG = new Class( {
    Implements: Graph.Label.SVG,

    initialize: function(viz){
      this.viz = viz;
    },

    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller){
      var pos = node.pos.getc(true), 
          canvas = this.viz.canvas,
          ox = canvas.translateOffsetX,
          oy = canvas.translateOffsetY,
          sx = canvas.scaleOffsetX,
          sy = canvas.scaleOffsetY,
          radius = canvas.getSize();
      var labelPos = {
        x: Math.round(pos.x * sx + ox + radius.width / 2),
        y: Math.round(pos.y * sy + oy + radius.height / 2)
      };
      tag.setAttribute('x', labelPos.x);
      tag.setAttribute('y', labelPos.y);

      controller.onPlaceLabel(tag, node);
    }
  });

  /*
     RGraph.Label.HTML

     Custom extension of <Graph.Label.HTML>.

     Extends:

     All <Graph.Label.HTML> methods.

     See also:

     <Graph.Label.HTML>

  */
  RGraph.Label.HTML = new Class( {
    Implements: Graph.Label.HTML,

    initialize: function(viz){
      this.viz = viz;
    },
    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller){
      var pos = node.pos.getc(true), 
          canvas = this.viz.canvas,
          ox = canvas.translateOffsetX,
          oy = canvas.translateOffsetY,
          sx = canvas.scaleOffsetX,
          sy = canvas.scaleOffsetY,
          radius = canvas.getSize();
      var labelPos = {
        x: Math.round(pos.x * sx + ox + radius.width / 2),
        y: Math.round(pos.y * sy + oy + radius.height / 2)
      };

      var style = tag.style;
      style.left = labelPos.x + 'px';
      style.top = labelPos.y + 'px';
      style.display = this.fitsInCanvas(labelPos, canvas)? '' : 'none';

      controller.onPlaceLabel(tag, node);
    }
  });

  /*
    Class: RGraph.Plot.NodeTypes

    This class contains a list of <Graph.Node> built-in types. 
    Node types implemented are 'none', 'circle', 'triangle', 'rectangle', 'star', 'ellipse' and 'square'.

    You can add your custom node types, customizing your visualization to the extreme.

    Example:

    (start code js)
      RGraph.Plot.NodeTypes.implement({
        'mySpecialType': {
          'render': function(node, canvas) {
            //print your custom node to canvas
          },
          //optional
          'contains': function(node, pos) {
            //return true if pos is inside the node or false otherwise
          }
        }
      });
    (end code)

  */
  RGraph.Plot.NodeTypes = new Class({
    'none': {
      'render': $.empty,
      'contains': $.lambda(false)
    },
    'circle': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            dim = node.getData('dim');
        this.nodeHelper.circle.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            dim = node.getData('dim');
        return this.nodeHelper.circle.contains(npos, pos, dim);
      }
    },
    'ellipse': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        this.nodeHelper.ellipse.render('fill', pos, width, height, canvas);
        },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        return this.nodeHelper.ellipse.contains(npos, pos, width, height);
      }
    },
    'square': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            dim = node.getData('dim');
        this.nodeHelper.square.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            dim = node.getData('dim');
        return this.nodeHelper.square.contains(npos, pos, dim);
      }
    },
    'rectangle': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        this.nodeHelper.rectangle.render('fill', pos, width, height, canvas);
      },
      'contains': function(node, pos){
        var npos = node.pos.getc(true), 
            width = node.getData('width'), 
            height = node.getData('height');
        return this.nodeHelper.rectangle.contains(npos, pos, width, height);
      }
    },
    'triangle': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true), 
            dim = node.getData('dim');
        this.nodeHelper.triangle.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos) {
        var npos = node.pos.getc(true), 
            dim = node.getData('dim');
        return this.nodeHelper.triangle.contains(npos, pos, dim);
      }
    },
    'star': {
      'render': function(node, canvas){
        var pos = node.pos.getc(true),
            dim = node.getData('dim');
        this.nodeHelper.star.render('fill', pos, dim, canvas);
      },
      'contains': function(node, pos) {
        var npos = node.pos.getc(true),
            dim = node.getData('dim');
        return this.nodeHelper.star.contains(npos, pos, dim);
      }
    }
  });

  /*
    Class: RGraph.Plot.EdgeTypes

    This class contains a list of <Graph.Adjacence> built-in types. 
    Edge types implemented are 'none', 'line' and 'arrow'.
  
    You can add your custom edge types, customizing your visualization to the extreme.
  
    Example:
  
    (start code js)
      RGraph.Plot.EdgeTypes.implement({
        'mySpecialType': {
          'render': function(adj, canvas) {
            //print your custom edge to canvas
          },
          //optional
          'contains': function(adj, pos) {
            //return true if pos is inside the arc or false otherwise
          }
        }
      });
    (end code)
  
  */
  RGraph.Plot.EdgeTypes = new Class({
    'none': $.empty,
    'line': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        this.edgeHelper.line.render(from, to, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        return this.edgeHelper.line.contains(from, to, pos, this.edge.epsilon);
      }
    },
    'arrow': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true),
            dim = adj.getData('dim'),
            direction = adj.data.$direction,
            inv = (direction && direction.length>1 && direction[0] != adj.nodeFrom.id);
        this.edgeHelper.arrow.render(from, to, dim, inv, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true);
        return this.edgeHelper.arrow.contains(from, to, pos, this.edge.epsilon);
      }
    }
  });

})($jit.RGraph);


/*
 * File: Hypertree.js
 * 
*/

/* 
     Complex 
     
     A multi-purpose Complex Class with common methods. Extended for the Hypertree. 
 
*/
/* 
   moebiusTransformation 
 
   Calculates a moebius transformation for this point / complex. 
    For more information go to: 
        http://en.wikipedia.org/wiki/Moebius_transformation. 
 
   Parameters: 
 
      c - An initialized Complex instance representing a translation Vector. 
*/

Complex.prototype.moebiusTransformation = function(c) {
  var num = this.add(c);
  var den = c.$conjugate().$prod(this);
  den.x++;
  return num.$div(den);
};

/* 
    moebiusTransformation 
     
    Calculates a moebius transformation for the hyperbolic tree. 
     
    <http://en.wikipedia.org/wiki/Moebius_transformation> 
      
     Parameters: 
     
        graph - A <Graph> instance.
        pos - A <Complex>.
        prop - A property array.
        theta - Rotation angle. 
        startPos - _optional_ start position. 
*/
Graph.Util.moebiusTransformation = function(graph, pos, prop, startPos, flags) {
  this.eachNode(graph, function(elem) {
    for ( var i = 0; i < prop.length; i++) {
      var p = pos[i].scale(-1), property = startPos ? startPos : prop[i];
      elem.getPos(prop[i]).set(elem.getPos(property).getc().moebiusTransformation(p));
    }
  }, flags);
};

/* 
   Class: Hypertree 
   
   A Hyperbolic Tree/Graph visualization.
   
   Inspired by:
 
   A Focus+Context Technique Based on Hyperbolic Geometry for Visualizing Large Hierarchies (John Lamping, Ramana Rao, and Peter Pirolli). 
   <http://www.cs.tau.ac.il/~asharf/shrek/Projects/HypBrowser/startree-chi95.pdf>
 
  Note:
 
  This visualization was built and engineered from scratch, taking only the paper as inspiration, and only shares some features with the Hypertree described in the paper.

  Implements:
  
  All <Loader> methods
  
  Constructor Options:
  
  Inherits options from
  
  - <Options.Canvas>
  - <Options.Controller>
  - <Options.Node>
  - <Options.Edge>
  - <Options.Label>
  - <Options.Events>
  - <Options.Tips>
  - <Options.NodeStyles>
  - <Options.Navigation>
  
  Additionally, there are other parameters and some default values changed
  
  radius - (string|number) Default's *auto*. The radius of the disc to plot the <Hypertree> in. 'auto' will take the smaller value from the width and height canvas dimensions. You can also set this to a custom value, for example *250*.
  offset - (number) Default's *0*. A number in the range [0, 1) that will be substracted to each node position to make a more compact <Hypertree>. This will avoid placing nodes too far from each other when a there's a selected node.
  fps - Described in <Options.Fx>. It's default value has been changed to *35*.
  duration - Described in <Options.Fx>. It's default value has been changed to *1500*.
  Edge.type - Described in <Options.Edge>. It's default value has been changed to *hyperline*. 
  
  Instance Properties:
  
  canvas - Access a <Canvas> instance.
  graph - Access a <Graph> instance.
  op - Access a <Hypertree.Op> instance.
  fx - Access a <Hypertree.Plot> instance.
  labels - Access a <Hypertree.Label> interface implementation.

*/

$jit.Hypertree = new Class( {

  Implements: [ Loader, Extras, Layouts.Radial ],

  initialize: function(controller) {
    var $Hypertree = $jit.Hypertree;

    var config = {
      radius: "auto",
      offset: 0,
      Edge: {
        type: 'hyperline'
      },
      duration: 1500,
      fps: 35
    };
    this.controller = this.config = $.merge(Options("Canvas", "Node", "Edge",
        "Fx", "Tips", "NodeStyles", "Events", "Navigation", "Controller", "Label"), config, controller);

    var canvasConfig = this.config;
    if(canvasConfig.useCanvas) {
      this.canvas = canvasConfig.useCanvas;
      this.config.labelContainer = this.canvas.id + '-label';
    } else {
      if(canvasConfig.background) {
        canvasConfig.background = $.merge({
          type: 'Circles'
        }, canvasConfig.background);
      }
      this.canvas = new Canvas(this, canvasConfig);
      this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';
    }

    this.graphOptions = {
      'klass': Polar,
      'Node': {
        'selected': false,
        'exist': true,
        'drawn': true
      }
    };
    this.graph = new Graph(this.graphOptions, this.config.Node,
        this.config.Edge);
    this.labels = new $Hypertree.Label[canvasConfig.Label.type](this);
    this.fx = new $Hypertree.Plot(this, $Hypertree);
    this.op = new $Hypertree.Op(this);
    this.json = null;
    this.root = null;
    this.busy = false;
    // initialize extras
    this.initializeExtras();
  },

  /* 
  
  createLevelDistanceFunc 

  Returns the levelDistance function used for calculating a node distance 
  to its origin. This function returns a function that is computed 
  per level and not per node, such that all nodes with the same depth will have the 
  same distance to the origin. The resulting function gets the 
  parent node as parameter and returns a float.

  */
  createLevelDistanceFunc: function() {
    // get max viz. length.
    var r = this.getRadius();
    // get max depth.
    var depth = 0, max = Math.max, config = this.config;
    this.graph.eachNode(function(node) {
      depth = max(node._depth, depth);
    }, "ignore");
    depth++;
    // node distance generator
    var genDistFunc = function(a) {
      return function(node) {
        node.scale = r;
        var d = node._depth + 1;
        var acum = 0, pow = Math.pow;
        while (d) {
          acum += pow(a, d--);
        }
        return acum - config.offset;
      };
    };
    // estimate better edge length.
    for ( var i = 0.51; i <= 1; i += 0.01) {
      var valSeries = (1 - Math.pow(i, depth)) / (1 - i);
      if (valSeries >= 2) { return genDistFunc(i - 0.01); }
    }
    return genDistFunc(0.75);
  },

  /* 
    Method: getRadius 
    
    Returns the current radius of the visualization. If *config.radius* is *auto* then it 
    calculates the radius by taking the smaller size of the <Canvas> widget.
    
    See also:
    
    <Canvas.getSize>
   
  */
  getRadius: function() {
    var rad = this.config.radius;
    if (rad !== "auto") { return rad; }
    var s = this.canvas.getSize();
    return Math.min(s.width, s.height) / 2;
  },

  /* 
    Method: refresh 
    
    Computes positions and plots the tree.

    Parameters:

    reposition - (optional|boolean) Set this to *true* to force all positions (current, start, end) to match.

   */
  refresh: function(reposition) {
    if (reposition) {
      this.reposition();
      this.graph.eachNode(function(node) {
        node.startPos.rho = node.pos.rho = node.endPos.rho;
        node.startPos.theta = node.pos.theta = node.endPos.theta;
      });
    } else {
      this.compute();
    }
    this.plot();
  },

  /* 
   reposition 
   
   Computes nodes' positions and restores the tree to its previous position.

   For calculating nodes' positions the root must be placed on its origin. This method does this 
     and then attemps to restore the hypertree to its previous position.
    
  */
  reposition: function() {
    this.compute('end');
    var vector = this.graph.getNode(this.root).pos.getc().scale(-1);
    Graph.Util.moebiusTransformation(this.graph, [ vector ], [ 'end' ],
        'end', "ignore");
    this.graph.eachNode(function(node) {
      if (node.ignore) {
        node.endPos.rho = node.pos.rho;
        node.endPos.theta = node.pos.theta;
      }
    });
  },

  /* 
   Method: plot 
   
   Plots the <Hypertree>. This is a shortcut to *fx.plot*. 

  */
  plot: function() {
    this.fx.plot();
  },

  /* 
   Method: onClick 
   
   Animates the <Hypertree> to center the node specified by *id*.

   Parameters:

   id - A <Graph.Node> id.
   opt - (optional|object) An object containing some extra properties described below
   hideLabels - (boolean) Default's *true*. Hide labels when performing the animation.

   Example:

   (start code js)
     ht.onClick('someid');
     //or also...
     ht.onClick('someid', {
      hideLabels: false
     });
    (end code)
    
  */
  onClick: function(id, opt) {
    var pos = this.graph.getNode(id).pos.getc(true);
    this.move(pos, opt);
  },

  /* 
   Method: move 

   Translates the tree to the given position. 

   Parameters:

   pos - (object) A *x, y* coordinate object where x, y in [0, 1), to move the tree to.
   opt - This object has been defined in <Hypertree.onClick>
   
   Example:
   
   (start code js)
     ht.move({ x: 0, y: 0.7 }, {
       hideLabels: false
     });
   (end code)

  */
  move: function(pos, opt) {
    var versor = $C(pos.x, pos.y);
    if (this.busy === false && versor.norm() < 1) {
      this.busy = true;
      var root = this.graph.getClosestNodeToPos(versor), that = this;
      this.graph.computeLevels(root.id, 0);
      this.controller.onBeforeCompute(root);
      opt = $.merge( {
        onComplete: $.empty
      }, opt || {});
      this.fx.animate($.merge( {
        modes: [ 'moebius' ],
        hideLabels: true
      }, opt, {
        onComplete: function() {
          that.busy = false;
          opt.onComplete();
        }
      }), versor);
    }
  }
});

$jit.Hypertree.$extend = true;

(function(Hypertree) {

  /* 
     Class: Hypertree.Op 
   
     Custom extension of <Graph.Op>.

     Extends:

     All <Graph.Op> methods
     
     See also:
     
     <Graph.Op>

  */
  Hypertree.Op = new Class( {

    Implements: Graph.Op

  });

  /* 
     Class: Hypertree.Plot 
   
    Custom extension of <Graph.Plot>.
  
    Extends:
  
    All <Graph.Plot> methods
    
    See also:
    
    <Graph.Plot>
  
  */
  Hypertree.Plot = new Class( {

    Implements: Graph.Plot

  });

  /*
    Object: Hypertree.Label

    Custom extension of <Graph.Label>. 
    Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.
  
    Extends:
  
    All <Graph.Label> methods and subclasses.
  
    See also:
  
    <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.

   */
  Hypertree.Label = {};

  /*
     Hypertree.Label.Native

     Custom extension of <Graph.Label.Native>.

     Extends:

     All <Graph.Label.Native> methods

     See also:

     <Graph.Label.Native>

  */
  Hypertree.Label.Native = new Class( {
    Implements: Graph.Label.Native,

    initialize: function(viz) {
      this.viz = viz;
    },

    renderLabel: function(canvas, node, controller) {
      var ctx = canvas.getCtx();
      var coord = node.pos.getc(true);
      var s = this.viz.getRadius();
      ctx.fillText(node.name, coord.x * s, coord.y * s);
    }
  });

  /*
     Hypertree.Label.SVG

    Custom extension of <Graph.Label.SVG>.
  
    Extends:
  
    All <Graph.Label.SVG> methods
  
    See also:
  
    <Graph.Label.SVG>
  
  */
  Hypertree.Label.SVG = new Class( {
    Implements: Graph.Label.SVG,

    initialize: function(viz) {
      this.viz = viz;
    },

    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller) {
      var pos = node.pos.getc(true), 
          canvas = this.viz.canvas,
          ox = canvas.translateOffsetX,
          oy = canvas.translateOffsetY,
          sx = canvas.scaleOffsetX,
          sy = canvas.scaleOffsetY,
          radius = canvas.getSize(),
          r = this.viz.getRadius();
      var labelPos = {
        x: Math.round((pos.x * sx) * r + ox + radius.width / 2),
        y: Math.round((pos.y * sy) * r + oy + radius.height / 2)
      };
      tag.setAttribute('x', labelPos.x);
      tag.setAttribute('y', labelPos.y);
      controller.onPlaceLabel(tag, node);
    }
  });

  /*
     Hypertree.Label.HTML

     Custom extension of <Graph.Label.HTML>.

     Extends:

     All <Graph.Label.HTML> methods.

     See also:

     <Graph.Label.HTML>

  */
  Hypertree.Label.HTML = new Class( {
    Implements: Graph.Label.HTML,

    initialize: function(viz) {
      this.viz = viz;
    },
    /* 
       placeLabel

       Overrides abstract method placeLabel in <Graph.Plot>.

       Parameters:

       tag - A DOM label element.
       node - A <Graph.Node>.
       controller - A configuration/controller object passed to the visualization.
      
     */
    placeLabel: function(tag, node, controller) {
      var pos = node.pos.getc(true), 
          canvas = this.viz.canvas,
          ox = canvas.translateOffsetX,
          oy = canvas.translateOffsetY,
          sx = canvas.scaleOffsetX,
          sy = canvas.scaleOffsetY,
          radius = canvas.getSize(),
          r = this.viz.getRadius();
      var labelPos = {
        x: Math.round((pos.x * sx) * r + ox + radius.width / 2),
        y: Math.round((pos.y * sy) * r + oy + radius.height / 2)
      };
      var style = tag.style;
      style.left = labelPos.x + 'px';
      style.top = labelPos.y + 'px';
      style.display = this.fitsInCanvas(labelPos, canvas) ? '' : 'none';

      controller.onPlaceLabel(tag, node);
    }
  });

  /*
    Class: Hypertree.Plot.NodeTypes

    This class contains a list of <Graph.Node> built-in types. 
    Node types implemented are 'none', 'circle', 'triangle', 'rectangle', 'star', 'ellipse' and 'square'.

    You can add your custom node types, customizing your visualization to the extreme.

    Example:

    (start code js)
      Hypertree.Plot.NodeTypes.implement({
        'mySpecialType': {
          'render': function(node, canvas) {
            //print your custom node to canvas
          },
          //optional
          'contains': function(node, pos) {
            //return true if pos is inside the node or false otherwise
          }
        }
      });
    (end code)

  */
  Hypertree.Plot.NodeTypes = new Class({
    'none': {
      'render': $.empty,
      'contains': $.lambda(false)
    },
    'circle': {
      'render': function(node, canvas) {
        var nconfig = this.node,
            dim = node.getData('dim'),
            p = node.pos.getc();
        dim = nconfig.transform? dim * (1 - p.squaredNorm()) : dim;
        p.$scale(node.scale);
        if (dim > 0.2) {
          this.nodeHelper.circle.render('fill', p, dim, canvas);
        }
      },
      'contains': function(node, pos) {
        var dim = node.getData('dim'),
            npos = node.pos.getc().$scale(node.scale);
        return this.nodeHelper.circle.contains(npos, pos, dim);
      }
    },
    'ellipse': {
      'render': function(node, canvas) {
        var pos = node.pos.getc().$scale(node.scale),
            width = node.getData('width'),
            height = node.getData('height');
        this.nodeHelper.ellipse.render('fill', pos, width, height, canvas);
      },
      'contains': function(node, pos) {
        var width = node.getData('width'),
            height = node.getData('height'),
            npos = node.pos.getc().$scale(node.scale);
        return this.nodeHelper.circle.contains(npos, pos, width, height);
      }
    },
    'square': {
      'render': function(node, canvas) {
        var nconfig = this.node,
            dim = node.getData('dim'),
            p = node.pos.getc();
        dim = nconfig.transform? dim * (1 - p.squaredNorm()) : dim;
        p.$scale(node.scale);
        if (dim > 0.2) {
          this.nodeHelper.square.render('fill', p, dim, canvas);
        }
      },
      'contains': function(node, pos) {
        var dim = node.getData('dim'),
            npos = node.pos.getc().$scale(node.scale);
        return this.nodeHelper.square.contains(npos, pos, dim);
      }
    },
    'rectangle': {
      'render': function(node, canvas) {
        var nconfig = this.node,
            width = node.getData('width'),
            height = node.getData('height'),
            pos = node.pos.getc();
        width = nconfig.transform? width * (1 - pos.squaredNorm()) : width;
        height = nconfig.transform? height * (1 - pos.squaredNorm()) : height;
        pos.$scale(node.scale);
        if (width > 0.2 && height > 0.2) {
          this.nodeHelper.rectangle.render('fill', pos, width, height, canvas);
        }
      },
      'contains': function(node, pos) {
        var width = node.getData('width'),
            height = node.getData('height'),
            npos = node.pos.getc().$scale(node.scale);
        return this.nodeHelper.rectangle.contains(npos, pos, width, height);
      }
    },
    'triangle': {
      'render': function(node, canvas) {
        var nconfig = this.node,
            dim = node.getData('dim'),
            p = node.pos.getc();
        dim = nconfig.transform? dim * (1 - p.squaredNorm()) : dim;
        p.$scale(node.scale);
        if (dim > 0.2) {
          this.nodeHelper.triangle.render('fill', p, dim, canvas);
        }
      },
      'contains': function(node, pos) {
        var dim = node.getData('dim'),
            npos = node.pos.getc().$scale(node.scale);
        return this.nodeHelper.triangle.contains(npos, pos, dim);
      }
    },
    'star': {
      'render': function(node, canvas) {
        var nconfig = this.node,
            dim = node.getData('dim'),
            p = node.pos.getc();
        dim = nconfig.transform? dim * (1 - p.squaredNorm()) : dim;
        p.$scale(node.scale);
        if (dim > 0.2) {
          this.nodeHelper.star.render('fill', p, dim, canvas);
        }
      },
      'contains': function(node, pos) {
        var dim = node.getData('dim'),
            npos = node.pos.getc().$scale(node.scale);
        return this.nodeHelper.star.contains(npos, pos, dim);
      }
    }
  });

  /*
   Class: Hypertree.Plot.EdgeTypes

    This class contains a list of <Graph.Adjacence> built-in types. 
    Edge types implemented are 'none', 'line', 'arrow' and 'hyperline'.
  
    You can add your custom edge types, customizing your visualization to the extreme.
  
    Example:
  
    (start code js)
      Hypertree.Plot.EdgeTypes.implement({
        'mySpecialType': {
          'render': function(adj, canvas) {
            //print your custom edge to canvas
          },
          //optional
          'contains': function(adj, pos) {
            //return true if pos is inside the arc or false otherwise
          }
        }
      });
    (end code)
  
  */
  Hypertree.Plot.EdgeTypes = new Class({
    'none': $.empty,
    'line': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
          to = adj.nodeTo.pos.getc(true),
          r = adj.nodeFrom.scale;
          this.edgeHelper.line.render({x:from.x*r, y:from.y*r}, {x:to.x*r, y:to.y*r}, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true),
            r = adj.nodeFrom.scale;
            this.edgeHelper.line.contains({x:from.x*r, y:from.y*r}, {x:to.x*r, y:to.y*r}, pos, this.edge.epsilon);
      }
    },
    'arrow': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true),
            r = adj.nodeFrom.scale,
            dim = adj.getData('dim'),
            direction = adj.data.$direction,
            inv = (direction && direction.length>1 && direction[0] != adj.nodeFrom.id);
        this.edgeHelper.arrow.render({x:from.x*r, y:from.y*r}, {x:to.x*r, y:to.y*r}, dim, inv, canvas);
      },
      'contains': function(adj, pos) {
        var from = adj.nodeFrom.pos.getc(true),
            to = adj.nodeTo.pos.getc(true),
            r = adj.nodeFrom.scale;
        this.edgeHelper.arrow.contains({x:from.x*r, y:from.y*r}, {x:to.x*r, y:to.y*r}, pos, this.edge.epsilon);
      }
    },
    'hyperline': {
      'render': function(adj, canvas) {
        var from = adj.nodeFrom.pos.getc(),
            to = adj.nodeTo.pos.getc(),
            dim = this.viz.getRadius();
        this.edgeHelper.hyperline.render(from, to, dim, canvas);
      },
      'contains': $.lambda(false)
    }
  });

})($jit.Hypertree);




 })();</script>

<!-- Example File -->
<script type="text/javascript">
var labelType, useGradients, nativeTextSupport, animate;

(function() {
  var ua = navigator.userAgent,
      iStuff = ua.match(/iPhone/i) || ua.match(/iPad/i),
      typeOfCanvas = typeof HTMLCanvasElement,
      nativeCanvasSupport = (typeOfCanvas == 'object' || typeOfCanvas == 'function'),
      textSupport = nativeCanvasSupport 
        && (typeof document.createElement('canvas').getContext('2d').fillText == 'function');
  //I'm setting this based on the fact that ExCanvas provides text support for IE
  //and that as of today iPhone/iPad current text support is lame
  labelType = (!nativeCanvasSupport || (textSupport && !iStuff))? 'Native' : 'HTML';
  nativeTextSupport = labelType == 'Native';
  useGradients = nativeCanvasSupport;
  animate = !(iStuff || !nativeCanvasSupport);
})();

var Log = {
  elem: false,
  write: function(text){
    if (!this.elem) 
      this.elem = document.getElementById('log');
    this.elem.innerHTML = text;
    this.elem.style.left = (500 - this.elem.offsetWidth / 2) + 'px';
  }
};


function init(){
    //init data
    var json =   {
  
      "id": "Views0",
      "name": "Views",
      "children": [
        {
          "id": "Status View1",
          "name": "Status View",
          "children": [
            {
              "id": "Thermostat2",
              "name": "Thermostat",
              "children": [
                {
                  "id": "Y1 - Thermostat3",
                  "name": "Y1 - Thermostat",
                  "children": {
                    "id": "Y1 - Thermostat4",
                    "name": "Y1 - Thermostat",
                    "data": {
                      "-shortname": "Y1-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "281",
                      "-n2pointtype": "BI",
                      "-n2address": "1",
                      "-bacoid": "29504",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Y2 - Thermostat4",
                  "name": "Y2 - Thermostat",
                  "children": {
                    "id": "Y2 - Thermostat5",
                    "name": "Y2 - Thermostat",
                    "data": {
                      "-shortname": "Y2-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modbusaddr": "282",
                      "-n2pointtype": "BI",
                      "-n2address": "2",
                      "-bacoid": "29505",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Y3 - Thermostat5",
                  "name": "Y3 - Thermostat",
                  "children": {
                    "id": "Y3 - Thermostat6",
                    "name": "Y3 - Thermostat",
                    "data": {
                      "-shortname": "Y3-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "283",
                      "-n2pointtype": "BI",
                      "-n2address": "3",
                      "-bacoid": "29506",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Y4 - Thermostat6",
                  "name": "Y4 - Thermostat",
                  "children": {
                    "id": "Y4 - Thermostat7",
                    "name": "Y4 - Thermostat",
                    "data": {
                      "-shortname": "Y4-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "284",
                      "-n2pointtype": "BI",
                      "-n2address": "4",
                      "-bacoid": "29507",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "W1 - Thermostat7",
                  "name": "W1 - Thermostat",
                  "children": {
                    "id": "W1 - Thermostat8",
                    "name": "W1 - Thermostat",
                    "data": {
                      "-shortname": "W1-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "285",
                      "-n2pointtype": "BI",
                      "-n2address": "5",
                      "-bacoid": "29508",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "W2 - Thermostat8",
                  "name": "W2 - Thermostat",
                  "children": {
                    "id": "W2 - Thermostat9",
                    "name": "W2 - Thermostat",
                    "data": {
                      "-shortname": "W2-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7005",
                      "-modbusaddr": "286",
                      "-n2pointtype": "BI",
                      "-n2address": "6",
                      "-bacoid": "29509",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "W3 - Thermostat9",
                  "name": "W3 - Thermostat",
                  "children": {
                    "id": "W3 - Thermostat10",
                    "name": "W3 - Thermostat",
                    "data": {
                      "-shortname": "W3-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7006",
                      "-modbusaddr": "287",
                      "-n2pointtype": "BI",
                      "-n2address": "7",
                      "-bacoid": "29510",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "G - Thermostat10",
                  "name": "G - Thermostat",
                  "children": {
                    "id": "G - Thermostat11",
                    "name": "G - Thermostat",
                    "data": {
                      "-shortname": "G-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modbusaddr": "288",
                      "-n2pointtype": "BI",
                      "-n2address": "8",
                      "-bacoid": "29511",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Local Occupancy Input - Thermostat11",
                  "name": "Local Occupancy Input - Thermostat",
                  "children": {
                    "id": "Local Occupancy Input - Thermostat12",
                    "name": "Local Occupancy Input - Thermostat",
                    "data": {
                      "-shortname": "Occ-Tstat",
                      "-pointtype": "MV",
                      "-attributeid": "7008",
                      "-bacoid": "29512",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                }
              ]
            },
            {
              "id": "Smoke Control12",
              "name": "Smoke Control",
              "children": [
                {
                  "id": "Operating Purge Command13",
                  "name": "Operating Purge Command",
                  "children": {
                    "id": "Operating Purge Command14",
                    "name": "Operating Purge Command",
                    "data": {
                      "-shortname": "OprPurgeCmd",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "381",
                      "-n2pointtype": "ADI",
                      "-n2address": "98",
                      "-bacoid": "29798",
                      "-modify": "Read Only",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Purge Command Source14",
                  "name": "Purge Command Source",
                  "children": {
                    "id": "Purge Command Source15",
                    "name": "Purge Command Source",
                    "data": {
                      "-shortname": "PurgeCmdSrc",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modbusaddr": "382",
                      "-n2pointtype": "ADI",
                      "-n2address": "99",
                      "-bacoid": "29799",
                      "-modify": "Read Only",
                      "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                    }
                  }
                },
                {
                  "id": "Local Purge Command Input15",
                  "name": "Local Purge Command Input",
                  "children": {
                    "id": "Local Purge Command Input16",
                    "name": "Local Purge Command Input",
                    "data": {
                      "-shortname": "Purge",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "383",
                      "-n2pointtype": "ADI",
                      "-n2address": "100",
                      "-bacoid": "29800",
                      "-modify": "Read Only",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Network Override Purge Command16",
                  "name": "Network Override Purge Command",
                  "children": {
                    "id": "Network Override Purge Command17",
                    "name": "Network Override Purge Command",
                    "data": {
                      "-shortname": "NetPurge",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "125",
                      "-n2pointtype": "ADI",
                      "-n2address": "101",
                      "-bacoid": "29801",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Shutdown Input/Smoke Detector17",
                  "name": "Shutdown Input/Smoke Detector",
                  "children": {
                    "id": "Shutdown Input/Smoke Detector18",
                    "name": "Shutdown Input/Smoke Detector",
                    "data": {
                      "-shortname": "SD",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "384",
                      "-n2pointtype": "ADI",
                      "-n2address": "102",
                      "-bacoid": "29802",
                      "-modify": "Read Only",
                      "-enumset": "Normal/Alarm"
                    }
                  }
                }
              ]
            },
            {
              "id": "Status18",
              "name": "Status",
              "children": [
                {
                  "id": "Unit Status19",
                  "name": "Unit Status",
                  "children": {
                    "id": "Unit Status20",
                    "name": "Unit Status",
                    "data": {
                      "-shortname": "Unit-S",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "280",
                      "-n2pointtype": "ADI",
                      "-n2address": "1",
                      "-bacoid": "29803",
                      "-modify": "Read Only",
                      "-enumset": "Idle/SD Alarm/Purge Command/Self Test/Morning Warm Up/Air Tempering/Dehumidification/Heating/Cooling/Economizer/Fan Only/Comfort Ventilation/Startup Delay"
                    }
                  }
                },
                {
                  "id": "Economizer Status20",
                  "name": "Economizer Status",
                  "children": {
                    "id": "Economizer Status21",
                    "name": "Economizer Status",
                    "data": {
                      "-shortname": "Econ-S",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "370",
                      "-n2pointtype": "ADI",
                      "-n2address": "86",
                      "-bacoid": "29750",
                      "-modify": "Read Only",
                      "-enumset": "Disabled/Damper Not Functional/Purge/Unavailable-Sensor Fault/Econ Loading/SA-T High Limit/Mixed Air Low Limit Cycle/Demand Ventilation Air Quality/Outdoor Airflow Control/Free Cooling is Active/Minimum Position/Test/Comfort Ventilation/Low OA Ambient"
                    }
                  }
                },
                {
                  "id": "Exhaust Fan Status21",
                  "name": "Exhaust Fan Status",
                  "children": {
                    "id": "Exhaust Fan Status22",
                    "name": "Exhaust Fan Status",
                    "data": {
                      "-shortname": "ExF-S",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "377",
                      "-n2pointtype": "BI",
                      "-n2address": "39",
                      "-bacoid": "29777",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/On-Normal Command/Off-Disabled/Off-VFD Fault/Off-Low Building Static Pressure/Off-Economizer Damper Position"
                    }
                  }
                },
                {
                  "id": "Fan Status22",
                  "name": "Fan Status",
                  "children": {
                    "id": "Fan Status23",
                    "name": "Fan Status",
                    "data": {
                      "-shortname": "Fan-S",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "302",
                      "-n2pointtype": "ADI",
                      "-n2address": "23",
                      "-bacoid": "29550",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/On-Purge/On-Gas Valve or Limit Fault/On-Defrost/On-Thermostat Request/On-Fan Off Delay For Cool/On-Fan Off Delay For Heat/On-Continuous Fan Occupied Operation/On-Normal Command/Off-Exceeding Duct Pressure Shutdown SP/Off-Low Voltage/Off-Fan Overload Lockout/Off-Fan VFD Fault/Off-Hot Water Freeze Stat/Off-Air Proving Switch/Off-Minimum Off Delay/Off-Fan On Delay For Heat/Off-Fan Off Delay For Cool"
                    }
                  }
                },
                {
                  "id": "Hot Gas Reheat Status23",
                  "name": "Hot Gas Reheat Status",
                  "children": {
                    "id": "Hot Gas Reheat Status24",
                    "name": "Hot Gas Reheat Status",
                    "data": {
                      "-shortname": "HGR-S",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "380",
                      "-n2pointtype": "BI",
                      "-n2address": "41",
                      "-bacoid": "29791",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/On-Normal Command/On-Alternate Operation Command/Off-Disabled"
                    }
                  }
                },
                {
                  "id": "Cooling Status24",
                  "name": "Cooling Status",
                  "children": {
                    "id": "Cooling Status25",
                    "name": "Cooling Status",
                    "data": {
                      "-shortname": "Clg-S",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "308",
                      "-n2pointtype": "ADI",
                      "-n2address": "28",
                      "-bacoid": "29577",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/Thermostat Cooling/Unoccupied Cooling/Occupied Cooling/Off-OAT Lockout/Off-Disabled/Off-Lockout/Off-Low Supply Voltage/Off-Low Ambient/Off-Low Ambient Pre-Run Delay/Off-Waiting For Changeover Delay/Off-Free Cooling/Comfort Ventilation"
                    }
                  }
                },
                {
                  "id": "Dirty Filter Switch25",
                  "name": "Dirty Filter Switch",
                  "children": {
                    "id": "Dirty Filter Switch26",
                    "name": "Dirty Filter Switch",
                    "data": {
                      "-shortname": "DFS",
                      "-pointtype": "MV",
                      "-attributeid": "7012",
                      "-modbusaddr": "306",
                      "-n2pointtype": "BI",
                      "-n2address": "13",
                      "-bacoid": "29562",
                      "-modify": "Read Only",
                      "-enumset": "Normal/Alarm"
                    }
                  }
                },
                {
                  "id": "UCB 24VAC Input26",
                  "name": "UCB 24VAC Input",
                  "children": {
                    "id": "UCB 24VAC Input27",
                    "name": "UCB 24VAC Input",
                    "data": {
                      "-shortname": "UCB24VForOutp",
                      "-pointtype": "AV",
                      "-attributeid": "7009",
                      "-modify": "Read Only",
                      "-IPunits": "V",
                      "-SIunits": "V"
                    }
                  }
                }
              ]
            },
            {
              "id": "Control27",
              "name": "Control",
              "children": [
                {
                  "id": "Econ Controller28",
                  "name": "Econ Controller",
                  "children": {
                    "id": "Econ Controller29",
                    "name": "Econ Controller",
                    "data": {
                      "-shortname": "EconCntlr",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "385",
                      "-n2pointtype": "ADI",
                      "-n2address": "103",
                      "-bacoid": "29813",
                      "-modify": "Read Only",
                      "-enumset": "Not Present/Offline/Online"
                    }
                  }
                },
                {
                  "id": "4 Stage Controller29",
                  "name": "4 Stage Controller",
                  "children": {
                    "id": "4 Stage Controller30",
                    "name": "4 Stage Controller",
                    "data": {
                      "-shortname": "4StgCntlr",
                      "-pointtype": "MV",
                      "-attributeid": "7005",
                      "-modbusaddr": "386",
                      "-n2pointtype": "ADI",
                      "-n2address": "104",
                      "-bacoid": "29814",
                      "-modify": "Read Only",
                      "-enumset": "Not Present/Offline/Online"
                    }
                  }
                },
                {
                  "id": "FDD Master Controller30",
                  "name": "FDD Master Controller",
                  "children": {
                    "id": "FDD Master Controller31",
                    "name": "FDD Master Controller",
                    "data": {
                      "-shortname": "FDDMCntlr",
                      "-pointtype": "MV",
                      "-attributeid": "7006",
                      "-modbusaddr": "387",
                      "-n2pointtype": "ADI",
                      "-n2address": "105",
                      "-bacoid": "29815",
                      "-modify": "Read Only",
                      "-enumset": "Not Present/Offline/Online"
                    }
                  }
                },
                {
                  "id": "FDD Slave Controller31",
                  "name": "FDD Slave Controller",
                  "children": {
                    "id": "FDD Slave Controller32",
                    "name": "FDD Slave Controller",
                    "data": {
                      "-shortname": "FDDSCntlr",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modbusaddr": "388",
                      "-n2pointtype": "ADI",
                      "-n2address": "106",
                      "-bacoid": "29816",
                      "-modify": "Read Only",
                      "-enumset": "Not Present/Offline/Online"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Summary View32",
          "name": "Summary View",
          "children": [
            {
              "id": "Sensors33",
              "name": "Sensors",
              "children": [
                {
                  "id": "Operational Mode34",
                  "name": "Operational Mode",
                  "children": [
                    {
                      "id": "Operational Outdoor Air Temperature35",
                      "name": "Operational Outdoor Air Temperature",
                      "children": {
                        "id": "Operational Outdoor Air Temperature36",
                        "name": "Operational Outdoor Air Temperature",
                        "data": {
                          "-shortname": "OprOAT",
                          "-pointtype": "AV",
                          "-attributeid": "7000",
                          "-modbusaddr": "153",
                          "-n2pointtype": "ADF",
                          "-n2address": "23",
                          "-bacoid": "29541",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Temperature36",
                      "name": "Operational Space Temperature",
                      "children": {
                        "id": "Operational Space Temperature37",
                        "name": "Operational Space Temperature",
                        "data": {
                          "-shortname": "OprST",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "135",
                          "-n2pointtype": "AI",
                          "-n2address": "31",
                          "-bacoid": "29522",
                          "-modify": "Read Only",
                          "-IPdefault": "70",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Temperature Setpoint Offset37",
                      "name": "Operational Space Temperature Setpoint Offset",
                      "children": {
                        "id": "Operational Space Temperature Setpoint Offset38",
                        "name": "Operational Space Temperature Setpoint Offset",
                        "data": {
                          "-shortname": "OprSSO",
                          "-pointtype": "AV",
                          "-attributeid": "7024",
                          "-modbusaddr": "140",
                          "-n2pointtype": "ADF",
                          "-n2address": "9",
                          "-bacoid": "29537",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "delta ?F",
                          "-SIunits": "delta ?K"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Humidity38",
                      "name": "Operational Space Humidity",
                      "children": {
                        "id": "Operational Space Humidity39",
                        "name": "Operational Space Humidity",
                        "data": {
                          "-shortname": "OprSH",
                          "-pointtype": "AV",
                          "-attributeid": "7017",
                          "-modbusaddr": "137",
                          "-n2pointtype": "AI",
                          "-n2address": "32",
                          "-bacoid": "29531",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Operational Outdoor Air Humidity39",
                      "name": "Operational Outdoor Air Humidity",
                      "children": {
                        "id": "Operational Outdoor Air Humidity40",
                        "name": "Operational Outdoor Air Humidity",
                        "data": {
                          "-shortname": "OprOAH",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "154",
                          "-n2pointtype": "ADF",
                          "-n2address": "25",
                          "-bacoid": "29544",
                          "-modify": "Read Only",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Operational Indoor Air Quality40",
                      "name": "Operational Indoor Air Quality",
                      "children": {
                        "id": "Operational Indoor Air Quality41",
                        "name": "Operational Indoor Air Quality",
                        "data": {
                          "-shortname": "OprIAQ",
                          "-pointtype": "AV",
                          "-attributeid": "7012",
                          "-modbusaddr": "136",
                          "-n2pointtype": "ADF",
                          "-n2address": "4",
                          "-bacoid": "29527",
                          "-modify": "Read Only",
                          "-IPunits": "ppm",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Operational Outdoor Air Quality41",
                      "name": "Operational Outdoor Air Quality",
                      "children": {
                        "id": "Operational Outdoor Air Quality42",
                        "name": "Operational Outdoor Air Quality",
                        "data": {
                          "-shortname": "OprOAQ",
                          "-pointtype": "AV",
                          "-attributeid": "7009",
                          "-modbusaddr": "156",
                          "-n2pointtype": "ADF",
                          "-n2address": "28",
                          "-bacoid": "29547",
                          "-modify": "Read Only",
                          "-IPunits": "ppm",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Operating Purge Command42",
                      "name": "Operating Purge Command",
                      "children": {
                        "id": "Operating Purge Command43",
                        "name": "Operating Purge Command",
                        "data": {
                          "-shortname": "OprPurgeCmd",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "381",
                          "-n2pointtype": "ADI",
                          "-n2address": "98",
                          "-bacoid": "29798",
                          "-modify": "Read Only",
                          "-enumset": "False/True"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Sensors43",
                  "name": "Sensors",
                  "children": [
                    {
                      "id": "Supply Air Temperature44",
                      "name": "Supply Air Temperature",
                      "children": {
                        "id": "Supply Air Temperature45",
                        "name": "Supply Air Temperature",
                        "data": {
                          "-shortname": "SAT",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "158",
                          "-n2pointtype": "AI",
                          "-n2address": "3",
                          "-bacoid": "29564",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Return Air Temperature45",
                      "name": "Return Air Temperature",
                      "children": {
                        "id": "Return Air Temperature46",
                        "name": "Return Air Temperature",
                        "data": {
                          "-shortname": "RAT",
                          "-pointtype": "AV",
                          "-attributeid": "7038",
                          "-modbusaddr": "139",
                          "-n2pointtype": "AI",
                          "-n2address": "2",
                          "-bacoid": "29764",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Temperature Input46",
                      "name": "Outdoor Air Temperature Input",
                      "children": {
                        "id": "Outdoor Air Temperature Input47",
                        "name": "Outdoor Air Temperature Input",
                        "data": {
                          "-shortname": "OAT",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Temperature Source47",
                      "name": "Outdoor Air Temperature Source",
                      "children": {
                        "id": "Outdoor Air Temperature Source48",
                        "name": "Outdoor Air Temperature Source",
                        "data": {
                          "-shortname": "OATSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "300",
                          "-n2pointtype": "ADI",
                          "-n2address": "21",
                          "-bacoid": "29542",
                          "-modify": "Read Only",
                          "-IPdefault": "Unreliable",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Space Temperature Input48",
                      "name": "Space Temperature Input",
                      "children": {
                        "id": "Space Temperature Input49",
                        "name": "Space Temperature Input",
                        "data": {
                          "-shortname": "ST",
                          "-pointtype": "AV",
                          "-attributeid": "7010",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Space Temperature Source49",
                      "name": "Space Temperature Source",
                      "children": {
                        "id": "Space Temperature Source50",
                        "name": "Space Temperature Source",
                        "data": {
                          "-shortname": "STSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "293",
                          "-n2pointtype": "ADI",
                          "-n2address": "10",
                          "-bacoid": "29523",
                          "-modify": "Read Only",
                          "-IPdefault": "Unreliable",
                          "-enumset": "Unreliable/Return Air Temp/Local Input/Network Sensor/BAS Override/Not Available"
                        }
                      }
                    },
                    {
                      "id": "Space Temperature Alarm Setpoint Offset50",
                      "name": "Space Temperature Alarm Setpoint Offset",
                      "children": {
                        "id": "Space Temperature Alarm Setpoint Offset51",
                        "name": "Space Temperature Alarm Setpoint Offset",
                        "data": {
                          "-shortname": "STAlarmOffset",
                          "-pointtype": "AV",
                          "-attributeid": "7008",
                          "-modbusaddr": "274",
                          "-n2pointtype": "ADF",
                          "-n2address": "2",
                          "-bacoid": "29524",
                          "-modify": "Read/Write",
                          "-IPdefault": "5",
                          "-IPmin": "0",
                          "-IPmax": "25",
                          "-IPunits": "?F",
                          "-SImin": "0",
                          "-SImax": "14",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Space Temperature Alarm Time Delay51",
                      "name": "Space Temperature Alarm Time Delay",
                      "children": {
                        "id": "Space Temperature Alarm Time Delay52",
                        "name": "Space Temperature Alarm Time Delay",
                        "data": {
                          "-shortname": "STAlarmDelay",
                          "-pointtype": "AV",
                          "-attributeid": "7009",
                          "-modbusaddr": "86",
                          "-n2pointtype": "ADI",
                          "-n2address": "11",
                          "-bacoid": "29525",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "0",
                          "-IPmax": "120",
                          "-IPunits": "minutes",
                          "-SImin": "0",
                          "-SImax": "120",
                          "-SIunits": "minutes"
                        }
                      }
                    },
                    {
                      "id": "Space Temp Setpoint Offset Input52",
                      "name": "Space Temp Setpoint Offset Input",
                      "children": {
                        "id": "Space Temp Setpoint Offset Input53",
                        "name": "Space Temp Setpoint Offset Input",
                        "data": {
                          "-shortname": "SSO",
                          "-pointtype": "AV",
                          "-attributeid": "7026",
                          "-modbusaddr": "141",
                          "-n2pointtype": "ADF",
                          "-n2address": "10",
                          "-bacoid": "29539",
                          "-modify": "Read Only",
                          "-IPunits": "delta ?F",
                          "-SIunits": "delta ?K"
                        }
                      }
                    },
                    {
                      "id": "Space Temperature Setpoint Offset Source53",
                      "name": "Space Temperature Setpoint Offset Source",
                      "children": {
                        "id": "Space Temperature Setpoint Offset Source54",
                        "name": "Space Temperature Setpoint Offset Source",
                        "data": {
                          "-shortname": "SSOSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7025",
                          "-modbusaddr": "298",
                          "-n2pointtype": "ADI",
                          "-n2address": "17",
                          "-bacoid": "29538",
                          "-modify": "Read Only",
                          "-IPdefault": "Unreliable",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Space Temperature Setpoint Offset Range54",
                      "name": "Space Temperature Setpoint Offset Range",
                      "children": {
                        "id": "Space Temperature Setpoint Offset Range55",
                        "name": "Space Temperature Setpoint Offset Range",
                        "data": {
                          "-shortname": "SSORange",
                          "-pointtype": "AV",
                          "-attributeid": "7028",
                          "-modify": "Read/Write",
                          "-IPdefault": "3",
                          "-IPmin": "0",
                          "-IPmax": "5",
                          "-IPunits": "delta ?F",
                          "-SImin": "0",
                          "-SImax": "3",
                          "-SIunits": "delta ?K"
                        }
                      }
                    },
                    {
                      "id": "Space Humidity RAH Input55",
                      "name": "Space Humidity RAH Input",
                      "children": {
                        "id": "Space Humidity RAH Input56",
                        "name": "Space Humidity RAH Input",
                        "data": {
                          "-shortname": "RAH",
                          "-pointtype": "AV",
                          "-attributeid": "7019",
                          "-modbusaddr": "138",
                          "-n2pointtype": "AI",
                          "-n2address": "1",
                          "-bacoid": "29828",
                          "-modify": "Read Only",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Space Humidity Source56",
                      "name": "Space Humidity Source",
                      "children": {
                        "id": "Space Humidity Source57",
                        "name": "Space Humidity Source",
                        "data": {
                          "-shortname": "SHSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7018",
                          "-modbusaddr": "295",
                          "-n2pointtype": "ADI",
                          "-n2address": "13",
                          "-bacoid": "29532",
                          "-modify": "Read Only",
                          "-IPdefault": "Unreliable",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Humidity Input57",
                      "name": "Outdoor Air Humidity Input",
                      "children": {
                        "id": "Outdoor Air Humidity Input58",
                        "name": "Outdoor Air Humidity Input",
                        "data": {
                          "-shortname": "OAH",
                          "-pointtype": "AV",
                          "-attributeid": "7007",
                          "-modify": "Read Only",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Humidity Source58",
                      "name": "Outdoor Air Humidity Source",
                      "children": {
                        "id": "Outdoor Air Humidity Source59",
                        "name": "Outdoor Air Humidity Source",
                        "data": {
                          "-shortname": "OAHSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-modify": "Read Only",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Indoor Air Quality59",
                      "name": "Indoor Air Quality",
                      "children": {
                        "id": "Indoor Air Quality60",
                        "name": "Indoor Air Quality",
                        "data": {
                          "-shortname": "IAQ",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modify": "Read Only",
                          "-IPunits": "ppm",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Indoor Air Quality Source60",
                      "name": "Indoor Air Quality Source",
                      "children": {
                        "id": "Indoor Air Quality Source61",
                        "name": "Indoor Air Quality Source",
                        "data": {
                          "-shortname": "IAQSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "294",
                          "-n2pointtype": "ADI",
                          "-n2address": "12",
                          "-bacoid": "29528",
                          "-modify": "Read Only",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Quality Input61",
                      "name": "Outdoor Air Quality Input",
                      "children": {
                        "id": "Outdoor Air Quality Input62",
                        "name": "Outdoor Air Quality Input",
                        "data": {
                          "-shortname": "OAQ",
                          "-pointtype": "AV",
                          "-attributeid": "7011",
                          "-modify": "Read Only",
                          "-IPunits": "ppm",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Quality Source62",
                      "name": "Outdoor Air Quality Source",
                      "children": {
                        "id": "Outdoor Air Quality Source63",
                        "name": "Outdoor Air Quality Source",
                        "data": {
                          "-shortname": "OAQSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "301",
                          "-n2pointtype": "ADI",
                          "-n2address": "22",
                          "-bacoid": "29548",
                          "-modify": "Read Only",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Purge Command Source63",
                      "name": "Purge Command Source",
                      "children": {
                        "id": "Purge Command Source64",
                        "name": "Purge Command Source",
                        "data": {
                          "-shortname": "PurgeCmdSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "382",
                          "-n2pointtype": "ADI",
                          "-n2address": "99",
                          "-bacoid": "29799",
                          "-modify": "Read Only",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Supply Air Humidity64",
                      "name": "Supply Air Humidity",
                      "children": {
                        "id": "Supply Air Humidity65",
                        "name": "Supply Air Humidity",
                        "data": {
                          "-shortname": "SAH",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "256",
                          "-n2pointtype": "AI",
                          "-n2address": "30",
                          "-bacoid": "29762",
                          "-modify": "Read Only",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Mixed Air Temperature65",
                      "name": "Mixed Air Temperature",
                      "children": {
                        "id": "Mixed Air Temperature66",
                        "name": "Mixed Air Temperature",
                        "data": {
                          "-shortname": "MAT",
                          "-pointtype": "AV",
                          "-attributeid": "7012",
                          "-modbusaddr": "255",
                          "-n2pointtype": "AI",
                          "-n2address": "29",
                          "-bacoid": "29760",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Building Static Pressure66",
                      "name": "Building Static Pressure",
                      "children": {
                        "id": "Building Static Pressure67",
                        "name": "Building Static Pressure",
                        "data": {
                          "-shortname": "BldgPres",
                          "-pointtype": "AV",
                          "-attributeid": "7007",
                          "-modbusaddr": "260",
                          "-n2pointtype": "AI",
                          "-n2address": "33",
                          "-bacoid": "29781",
                          "-modify": "Read Only",
                          "-IPunits": "in wc",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Duct Static Pressure67",
                      "name": "Duct Static Pressure",
                      "children": {
                        "id": "Duct Static Pressure68",
                        "name": "Duct Static Pressure",
                        "data": {
                          "-shortname": "DctPrs",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "159",
                          "-n2pointtype": "AI",
                          "-n2address": "4",
                          "-bacoid": "29565",
                          "-modify": "Read Only",
                          "-IPunits": "in wc",
                          "-SIunits": "kPa"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Unit68",
              "name": "Unit",
              "children": [
                {
                  "id": "Unit Name69",
                  "name": "Unit Name",
                  "children": {
                    "id": "Unit Name70",
                    "name": "Unit Name",
                    "data": {
                      "-shortname": "Name",
                      "-pointtype": "SV",
                      "-attributeid": "7001",
                      "-bacoid": "29804",
                      "-modify": "Read/Write",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "Unit Model Number70",
                  "name": "Unit Model Number",
                  "children": {
                    "id": "Unit Model Number71",
                    "name": "Unit Model Number",
                    "data": {
                      "-shortname": "Model#",
                      "-pointtype": "SV",
                      "-attributeid": "7002",
                      "-bacoid": "29805",
                      "-modify": "Read/Write",
                      "-IPdefault": "RTUxxxxx",
                      "-IPmax": "40",
                      "-SImax": "40"
                    }
                  }
                },
                {
                  "id": "Unit Serial Number71",
                  "name": "Unit Serial Number",
                  "children": {
                    "id": "Unit Serial Number72",
                    "name": "Unit Serial Number",
                    "data": {
                      "-shortname": "Serial#",
                      "-pointtype": "SV",
                      "-attributeid": "7003",
                      "-bacoid": "29806",
                      "-modify": "Read/Write",
                      "-IPmax": "40",
                      "-SImax": "40"
                    }
                  }
                },
                {
                  "id": "Model Name72",
                  "name": "Model Name",
                  "children": {
                    "id": "Model Name73",
                    "name": "Model Name",
                    "data": {
                      "-shortname": "ModelName",
                      "-pointtype": "SV",
                      "-attributeid": "7014",
                      "-modify": "Read Only",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "Unit Status73",
                  "name": "Unit Status",
                  "children": {
                    "id": "Unit Status74",
                    "name": "Unit Status",
                    "data": {
                      "-shortname": "Unit-S",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "280",
                      "-n2pointtype": "ADI",
                      "-n2address": "1",
                      "-bacoid": "29803",
                      "-modify": "Read Only",
                      "-enumset": "Idle/SD Alarm/Purge Command/Self Test/Morning Warm Up/Air Tempering/Dehumidification/Heating/Cooling/Economizer/Fan Only/Comfort Ventilation/Startup Delay"
                    }
                  }
                },
                {
                  "id": "Unit Enable74",
                  "name": "Unit Enable",
                  "children": {
                    "id": "Unit Enable75",
                    "name": "Unit Enable",
                    "data": {
                      "-shortname": "UnitEn",
                      "-pointtype": "MV",
                      "-attributeid": "7019",
                      "-modbusaddr": "411",
                      "-n2pointtype": "ADI",
                      "-n2address": "128",
                      "-bacoid": "29896",
                      "-modify": "Read/Write",
                      "-IPdefault": "Enable",
                      "-enumset": "Shutdown/Enable"
                    }
                  }
                },
                {
                  "id": "Hardware Reset75",
                  "name": "Hardware Reset",
                  "children": {
                    "id": "Hardware Reset76",
                    "name": "Hardware Reset",
                    "data": {
                      "-shortname": "HdwrReset",
                      "-pointtype": "MV",
                      "-attributeid": "7021",
                      "-modbusaddr": "126",
                      "-n2pointtype": "ADI",
                      "-n2address": "109",
                      "-bacoid": "29909",
                      "-modify": "Read/Write",
                      "-IPdefault": "No",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Reset Lockouts76",
                  "name": "Reset Lockouts",
                  "children": {
                    "id": "Reset Lockouts77",
                    "name": "Reset Lockouts",
                    "data": {
                      "-shortname": "ResetLO",
                      "-pointtype": "MV",
                      "-attributeid": "7011",
                      "-modbusaddr": "80",
                      "-n2pointtype": "ADI",
                      "-n2address": "2",
                      "-bacoid": "29826",
                      "-modify": "Read/Write",
                      "-IPdefault": "Off",
                      "-enumset": "Off/On"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Commissioning View77",
          "name": "Commissioning View",
          "children": [
            {
              "id": "Standard78",
              "name": "Standard",
              "children": [
                {
                  "id": "Occupancy Mode79",
                  "name": "Occupancy Mode",
                  "children": {
                    "id": "Occupancy Mode80",
                    "name": "Occupancy Mode",
                    "data": {
                      "-shortname": "OccMode",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "82",
                      "-n2pointtype": "ADI",
                      "-n2address": "6",
                      "-bacoid": "29518",
                      "-modify": "Read/Write",
                      "-IPdefault": "External",
                      "-enumset": "Schedule/External"
                    }
                  }
                },
                {
                  "id": "Thermostat Only Control Enabled80",
                  "name": "Thermostat Only Control Enabled",
                  "children": {
                    "id": "Thermostat Only Control Enabled81",
                    "name": "Thermostat Only Control Enabled",
                    "data": {
                      "-shortname": "Tstat-Only",
                      "-pointtype": "MV",
                      "-attributeid": "7010",
                      "-modbusaddr": "413",
                      "-n2pointtype": "BI",
                      "-n2address": "42",
                      "-bacoid": "29514",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Cooling Mode Enabled For Operation81",
                  "name": "Cooling Mode Enabled For Operation",
                  "children": {
                    "id": "Cooling Mode Enabled For Operation82",
                    "name": "Cooling Mode Enabled For Operation",
                    "data": {
                      "-shortname": "Clg-En",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "93",
                      "-n2pointtype": "ADI",
                      "-n2address": "27",
                      "-bacoid": "29575",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Number of Cooling Stages Installed82",
                  "name": "Number of Cooling Stages Installed",
                  "children": {
                    "id": "Number of Cooling Stages Installed83",
                    "name": "Number of Cooling Stages Installed",
                    "data": {
                      "-shortname": "#ClgStgs",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "401",
                      "-n2pointtype": "ADI",
                      "-n2address": "120",
                      "-bacoid": "29576",
                      "-modify": "Read/Write",
                      "-IPdefault": "1",
                      "-IPmin": "1",
                      "-IPmax": "4",
                      "-SImin": "1",
                      "-SImax": "4"
                    }
                  }
                },
                {
                  "id": "Heating Mode Enabled For Operation83",
                  "name": "Heating Mode Enabled For Operation",
                  "children": {
                    "id": "Heating Mode Enabled For Operation84",
                    "name": "Heating Mode Enabled For Operation",
                    "data": {
                      "-shortname": "Htg-En",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "105",
                      "-n2pointtype": "ADI",
                      "-n2address": "64",
                      "-bacoid": "29707",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Number of Heating Stages Installed84",
                  "name": "Number of Heating Stages Installed",
                  "children": {
                    "id": "Number of Heating Stages Installed85",
                    "name": "Number of Heating Stages Installed",
                    "data": {
                      "-shortname": "#HtgStgs",
                      "-pointtype": "AV",
                      "-attributeid": "7000",
                      "-modbusaddr": "430",
                      "-n2pointtype": "ADI",
                      "-n2address": "141",
                      "-bacoid": "29731",
                      "-modify": "Read/Write",
                      "-IPdefault": "0",
                      "-IPmin": "0",
                      "-IPmax": "3",
                      "-SImin": "0",
                      "-SImax": "3"
                    }
                  }
                },
                {
                  "id": "Economizer Enabled For Operation85",
                  "name": "Economizer Enabled For Operation",
                  "children": {
                    "id": "Economizer Enabled For Operation86",
                    "name": "Economizer Enabled For Operation",
                    "data": {
                      "-shortname": "Econ-En",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "118",
                      "-n2pointtype": "ADI",
                      "-n2address": "84",
                      "-bacoid": "29747",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Economizer Minimum Position Setpoint86",
                  "name": "Economizer Minimum Position Setpoint",
                  "children": {
                    "id": "Economizer Minimum Position Setpoint87",
                    "name": "Economizer Minimum Position Setpoint",
                    "data": {
                      "-shortname": "Econ-MinPos",
                      "-pointtype": "AV",
                      "-attributeid": "7017",
                      "-modbusaddr": "77",
                      "-n2pointtype": "ADF",
                      "-n2address": "163",
                      "-bacoid": "29759",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Economizer Damper Minimum Position Low Speed Fan87",
                  "name": "Economizer Damper Minimum Position Low Speed Fan",
                  "children": {
                    "id": "Economizer Damper Minimum Position Low Speed Fan88",
                    "name": "Economizer Damper Minimum Position Low Speed Fan",
                    "data": {
                      "-shortname": "LowSpeedFan-MinPos",
                      "-pointtype": "AV",
                      "-attributeid": "7025",
                      "-modbusaddr": "54",
                      "-n2pointtype": "ADF",
                      "-n2address": "135",
                      "-bacoid": "29808",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Continuous Fan Operation in Occupied Mode88",
                  "name": "Continuous Fan Operation in Occupied Mode",
                  "children": {
                    "id": "Continuous Fan Operation in Occupied Mode89",
                    "name": "Continuous Fan Operation in Occupied Mode",
                    "data": {
                      "-shortname": "FanOnOcc",
                      "-pointtype": "MV",
                      "-attributeid": "7018",
                      "-modbusaddr": "91",
                      "-n2pointtype": "ADI",
                      "-n2address": "25",
                      "-bacoid": "29568",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "Yes/No"
                    }
                  }
                },
                {
                  "id": "SAT Limit for Cooling Enable89",
                  "name": "SAT Limit for Cooling Enable",
                  "children": {
                    "id": "SAT Limit for Cooling Enable90",
                    "name": "SAT Limit for Cooling Enable",
                    "data": {
                      "-shortname": "SATCoolLimit-En",
                      "-pointtype": "MV",
                      "-attributeid": "7015",
                      "-modbusaddr": "98",
                      "-n2pointtype": "ADI",
                      "-n2address": "33",
                      "-bacoid": "29590",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "SAT Limit for Cooling Setpoint90",
                  "name": "SAT Limit for Cooling Setpoint",
                  "children": {
                    "id": "SAT Limit for Cooling Setpoint91",
                    "name": "SAT Limit for Cooling Setpoint",
                    "data": {
                      "-shortname": "SATCoolLimit-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7016",
                      "-modbusaddr": "25",
                      "-n2pointtype": "ADF",
                      "-n2address": "46",
                      "-bacoid": "29591",
                      "-modify": "Read/Write",
                      "-IPdefault": "45",
                      "-IPmin": "40",
                      "-IPmax": "65",
                      "-IPunits": "?F",
                      "-SImin": "4",
                      "-SImax": "18",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "OAT Cooling Cutout Enabled91",
                  "name": "OAT Cooling Cutout Enabled",
                  "children": {
                    "id": "OAT Cooling Cutout Enabled92",
                    "name": "OAT Cooling Cutout Enabled",
                    "data": {
                      "-shortname": "ClgOATCutout-En",
                      "-pointtype": "MV",
                      "-attributeid": "7006",
                      "-modbusaddr": "94",
                      "-n2pointtype": "ADI",
                      "-n2address": "29",
                      "-bacoid": "29581",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "OAT Cooling Cutout92",
                  "name": "OAT Cooling Cutout",
                  "children": {
                    "id": "OAT Cooling Cutout93",
                    "name": "OAT Cooling Cutout",
                    "data": {
                      "-shortname": "ClgOATCutout",
                      "-pointtype": "AV",
                      "-attributeid": "7007",
                      "-modbusaddr": "21",
                      "-n2pointtype": "ADF",
                      "-n2address": "42",
                      "-bacoid": "29582",
                      "-modify": "Read/Write",
                      "-IPdefault": "45",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "?F",
                      "-SImin": "-18",
                      "-SImax": "38",
                      "-SIunits": "?C"
                    }
                  }
                }
              ]
            },
            {
              "id": "Options93",
              "name": "Options",
              "children": [
                {
                  "id": "Fan Control Type94",
                  "name": "Fan Control Type",
                  "children": {
                    "id": "Fan Control Type95",
                    "name": "Fan Control Type",
                    "data": {
                      "-shortname": "FanCtl-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7005",
                      "-modbusaddr": "400",
                      "-n2pointtype": "ADI",
                      "-n2address": "119",
                      "-bacoid": "29555",
                      "-modify": "Read/Write",
                      "-IPdefault": "Single Speed",
                      "-enumset": "Single Speed/Not Used/Fixed Variable/Variable Speed"
                    }
                  }
                },
                {
                  "id": "Exhaust Type95",
                  "name": "Exhaust Type",
                  "children": {
                    "id": "Exhaust Type96",
                    "name": "Exhaust Type",
                    "data": {
                      "-shortname": "ExFType",
                      "-pointtype": "MV",
                      "-attributeid": "7008",
                      "-modbusaddr": "412",
                      "-n2pointtype": "ADI",
                      "-n2address": "129",
                      "-bacoid": "29503",
                      "-modify": "Read/Write",
                      "-enumset": "None/Non-Modulating/Modulating Damper/Variable Frequency Fan"
                    }
                  }
                },
                {
                  "id": "Number of Refrig Systems Installed96",
                  "name": "Number of Refrig Systems Installed",
                  "children": {
                    "id": "Number of Refrig Systems Installed97",
                    "name": "Number of Refrig Systems Installed",
                    "data": {
                      "-shortname": "#RefrigSys",
                      "-pointtype": "AV",
                      "-attributeid": "7044",
                      "-modbusaddr": "32",
                      "-n2pointtype": "ADF",
                      "-n2address": "55",
                      "-bacoid": "29890",
                      "-modify": "Read/Write",
                      "-IPdefault": "4",
                      "-IPmin": "0",
                      "-IPmax": "4",
                      "-SImin": "0",
                      "-SImax": "4"
                    }
                  }
                },
                {
                  "id": "Low Ambient Enabled97",
                  "name": "Low Ambient Enabled",
                  "children": {
                    "id": "Low Ambient Enabled98",
                    "name": "Low Ambient Enabled",
                    "data": {
                      "-shortname": "LowAmb-En",
                      "-pointtype": "MV",
                      "-attributeid": "7051",
                      "-modbusaddr": "429",
                      "-n2pointtype": "ADI",
                      "-n2address": "140",
                      "-bacoid": "29928",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Lead/Lag Equalize Cooling Stage Runtime Enabled98",
                  "name": "Lead/Lag Equalize Cooling Stage Runtime Enabled",
                  "children": {
                    "id": "Lead/Lag Equalize Cooling Stage Runtime Enabled99",
                    "name": "Lead/Lag Equalize Cooling Stage Runtime Enabled",
                    "data": {
                      "-shortname": "LeadLag-En",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "402",
                      "-n2pointtype": "ADI",
                      "-n2address": "121",
                      "-bacoid": "29579",
                      "-modify": "Read/Write",
                      "-IPdefault": "No",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Hot Gas Bypass Present99",
                  "name": "Hot Gas Bypass Present",
                  "children": [
                    {
                      "id": "Hot Gas Bypass Present100",
                      "name": "Hot Gas Bypass Present",
                      "data": {
                        "-shortname": "HGP-Inst",
                        "-pointtype": "MV",
                        "-attributeid": "7004",
                        "-modbusaddr": "408",
                        "-n2pointtype": "ADI",
                        "-n2address": "125",
                        "-bacoid": "29623",
                        "-modify": "Read/Write",
                        "-IPdefault": "No",
                        "-enumset": "No/Yes"
                      }
                    },
                    {
                      "id": "Hot Gas Bypass Present101",
                      "name": "Hot Gas Bypass Present",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "MV",
                        "-attributeid": "7004",
                        "-modify": "Read/Write",
                        "-enumset": "No/Yes"
                      }
                    },
                    {
                      "id": "Hot Gas Bypass Present102",
                      "name": "Hot Gas Bypass Present",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "MV",
                        "-attributeid": "7004",
                        "-modify": "Read/Write",
                        "-enumset": "No/Yes"
                      }
                    },
                    {
                      "id": "Hot Gas Bypass Present103",
                      "name": "Hot Gas Bypass Present",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "MV",
                        "-attributeid": "7004",
                        "-modify": "Read/Write",
                        "-enumset": "No/Yes"
                      }
                    }
                  ]
                },
                {
                  "id": "Heating Mode Enabled For Operation103",
                  "name": "Heating Mode Enabled For Operation",
                  "children": {
                    "id": "Heating Mode Enabled For Operation104",
                    "name": "Heating Mode Enabled For Operation",
                    "data": {
                      "-shortname": "Htg-En",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "105",
                      "-n2pointtype": "ADI",
                      "-n2address": "64",
                      "-bacoid": "29707",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Heating Control Type104",
                  "name": "Heating Control Type",
                  "children": {
                    "id": "Heating Control Type105",
                    "name": "Heating Control Type",
                    "data": {
                      "-shortname": "Htg-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7006",
                      "-bacoid": "29501",
                      "-modify": "Read/Write",
                      "-enumset": "Staged/Proportional"
                    }
                  }
                },
                {
                  "id": "SAT Air Temp Limit for Heating Enabled105",
                  "name": "SAT Air Temp Limit for Heating Enabled",
                  "children": {
                    "id": "SAT Air Temp Limit for Heating Enabled106",
                    "name": "SAT Air Temp Limit for Heating Enabled",
                    "data": {
                      "-shortname": "SATHtgLimit-En",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "106",
                      "-n2pointtype": "ADI",
                      "-n2address": "66",
                      "-bacoid": "29709",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "SAT Air Temp Limit For Heating Setpoint106",
                  "name": "SAT Air Temp Limit For Heating Setpoint",
                  "children": {
                    "id": "SAT Air Temp Limit For Heating Setpoint107",
                    "name": "SAT Air Temp Limit For Heating Setpoint",
                    "data": {
                      "-shortname": "SATHtgLimit-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7003",
                      "-modbusaddr": "37",
                      "-n2pointtype": "ADF",
                      "-n2address": "116",
                      "-bacoid": "29710",
                      "-modify": "Read/Write",
                      "-IPdefault": "140",
                      "-IPmin": "100",
                      "-IPmax": "180",
                      "-IPunits": "?F",
                      "-SImin": "38",
                      "-SImax": "82",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Outdoor Air Temp Heating Cutout Setpoint107",
                  "name": "Outdoor Air Temp Heating Cutout Setpoint",
                  "children": {
                    "id": "Outdoor Air Temp Heating Cutout Setpoint108",
                    "name": "Outdoor Air Temp Heating Cutout Setpoint",
                    "data": {
                      "-shortname": "HtgOATCutout-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7004",
                      "-modbusaddr": "38",
                      "-n2pointtype": "ADF",
                      "-n2address": "117",
                      "-bacoid": "29711",
                      "-modify": "Read/Write",
                      "-IPdefault": "75",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "?F",
                      "-SImin": "-18",
                      "-SImax": "38",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Air Proving Switch Setup108",
                  "name": "Air Proving Switch Setup",
                  "children": {
                    "id": "Air Proving Switch Setup109",
                    "name": "Air Proving Switch Setup",
                    "data": {
                      "-shortname": "APSSetup",
                      "-pointtype": "MV",
                      "-attributeid": "7006",
                      "-modbusaddr": "414",
                      "-n2pointtype": "ADI",
                      "-n2address": "130",
                      "-bacoid": "29556",
                      "-modify": "Read/Write",
                      "-IPdefault": "None",
                      "-enumset": "Constant Volume/Variable Volume/None"
                    }
                  }
                },
                {
                  "id": "Dirty Filter Switch Installed109",
                  "name": "Dirty Filter Switch Installed",
                  "children": {
                    "id": "Dirty Filter Switch Installed110",
                    "name": "Dirty Filter Switch Installed",
                    "data": {
                      "-shortname": "DFSInst",
                      "-pointtype": "MV",
                      "-attributeid": "7035",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Demand Ventilation Mode of Operation110",
                  "name": "Demand Ventilation Mode of Operation",
                  "children": {
                    "id": "Demand Ventilation Mode of Operation111",
                    "name": "Demand Ventilation Mode of Operation",
                    "data": {
                      "-shortname": "DVent-Mode",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "120",
                      "-n2pointtype": "ADI",
                      "-n2address": "93",
                      "-bacoid": "29765",
                      "-modify": "Read/Write",
                      "-IPdefault": "Disabled",
                      "-enumset": "Disabled/Controlled by IAQ/Diff between IAQ and OAQ"
                    }
                  }
                },
                {
                  "id": "Morning Warmup Enabled111",
                  "name": "Morning Warmup Enabled",
                  "children": {
                    "id": "Morning Warmup Enabled112",
                    "name": "Morning Warmup Enabled",
                    "data": {
                      "-shortname": "MornW-En",
                      "-pointtype": "MV",
                      "-attributeid": "7020",
                      "-modbusaddr": "109",
                      "-n2pointtype": "ADI",
                      "-n2address": "73",
                      "-bacoid": "29822",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Number of Heat Pump Stages Installed112",
                  "name": "Number of Heat Pump Stages Installed",
                  "children": {
                    "id": "Number of Heat Pump Stages Installed113",
                    "name": "Number of Heat Pump Stages Installed",
                    "data": {
                      "-shortname": "#HtPumpStgs",
                      "-pointtype": "AV",
                      "-attributeid": "7000",
                      "-modbusaddr": "434",
                      "-n2pointtype": "ADF",
                      "-n2address": "185",
                      "-bacoid": "29898",
                      "-modify": "Read/Write",
                      "-IPdefault": "0",
                      "-IPmin": "0",
                      "-IPmax": "2",
                      "-SImin": "0",
                      "-SImax": "2"
                    }
                  }
                },
                {
                  "id": "Low Ambient Fan Pre-run Time For Cooling113",
                  "name": "Low Ambient Fan Pre-run Time For Cooling",
                  "children": {
                    "id": "Low Ambient Fan Pre-run Time For Cooling114",
                    "name": "Low Ambient Fan Pre-run Time For Cooling",
                    "data": {
                      "-shortname": "LowAmbFanPrerunCool",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "418",
                      "-n2pointtype": "ADI",
                      "-n2address": "134",
                      "-bacoid": "29580",
                      "-modify": "Read/Write",
                      "-IPdefault": "60",
                      "-IPmin": "0",
                      "-IPmax": "255",
                      "-IPunits": "seconds",
                      "-SImin": "0",
                      "-SImax": "255",
                      "-SIunits": "seconds"
                    }
                  }
                },
                {
                  "id": "PID Tuning Reset114",
                  "name": "PID Tuning Reset",
                  "children": {
                    "id": "PID Tuning Reset115",
                    "name": "PID Tuning Reset",
                    "data": {
                      "-shortname": "PIDTunRst",
                      "-pointtype": "MV",
                      "-attributeid": "7063",
                      "-modbusaddr": "130",
                      "-n2pointtype": "ADI",
                      "-n2address": "113",
                      "-bacoid": "29919",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Low Ambient Start115",
                  "name": "Low Ambient Start",
                  "children": {
                    "id": "Low Ambient Start116",
                    "name": "Low Ambient Start",
                    "data": {
                      "-shortname": "LowAmbStart",
                      "-pointtype": "MV",
                      "-attributeid": "7056",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "SZ VAV Enabled116",
                  "name": "SZ VAV Enabled",
                  "children": {
                    "id": "SZ VAV Enabled117",
                    "name": "SZ VAV Enabled",
                    "data": {
                      "-shortname": "SZVAVEn",
                      "-pointtype": "MV",
                      "-attributeid": "7020",
                      "-modbusaddr": "399",
                      "-n2pointtype": "ADI",
                      "-n2address": "118",
                      "-bacoid": "29908",
                      "-modify": "Read/Write",
                      "-enumset": "Off/On"
                    }
                  }
                }
              ]
            },
            {
              "id": "Network Setup117",
              "name": "Network Setup",
              "children": [
                {
                  "id": "FC Comm Mode118",
                  "name": "FC Comm Mode",
                  "children": {
                    "id": "FC Comm Mode119",
                    "name": "FC Comm Mode",
                    "data": {
                      "-shortname": "FcBusMode",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modify": "Read Only",
                      "-enumset": "Wired Field Bus/Wireless Field Bus/N2 Slave Field Bus/Modbus Field Bus/Ethernet Field Bus/Indeterminate FC Bus Mode"
                    }
                  }
                },
                {
                  "id": "Address119",
                  "name": "Address",
                  "children": {
                    "id": "Address120",
                    "name": "Address",
                    "data": {
                      "-shortname": "Address",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "275",
                      "-modify": "Read/Write",
                      "-IPmin": "4",
                      "-IPmax": "127",
                      "-SImin": "4",
                      "-SImax": "127"
                    }
                  }
                },
                {
                  "id": "Device OID120",
                  "name": "Device OID",
                  "children": {
                    "id": "Device OID121",
                    "name": "Device OID",
                    "data": {
                      "-shortname": "DeviceId",
                      "-pointtype": "AV",
                      "-attributeid": "7002",
                      "-bacoid": "29897",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "4194302",
                      "-SImin": "0",
                      "-SImax": "4194302"
                    }
                  }
                },
                {
                  "id": "Baud Rate121",
                  "name": "Baud Rate",
                  "children": {
                    "id": "Baud Rate122",
                    "name": "Baud Rate",
                    "data": {
                      "-shortname": "BaudRate",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modify": "Read/Write",
                      "-enumset": "Auto/1200/9600/19200/38400/76800"
                    }
                  }
                },
                {
                  "id": "Device Name122",
                  "name": "Device Name",
                  "children": {
                    "id": "Device Name123",
                    "name": "Device Name",
                    "data": {
                      "-shortname": "DevName",
                      "-pointtype": "SV",
                      "-attributeid": "7009",
                      "-bacoid": "29818",
                      "-modify": "Read/Write",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "BACnet Encoding Type123",
                  "name": "BACnet Encoding Type",
                  "children": {
                    "id": "BACnet Encoding Type124",
                    "name": "BACnet Encoding Type",
                    "data": {
                      "-shortname": "EncodeType",
                      "-pointtype": "MV",
                      "-attributeid": "7008",
                      "-bacoid": "29934",
                      "-modify": "Read/Write",
                      "-enumset": "ISO 10646 (UCS-2)/ANSI X3.4 (US-ASCII)"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Controller View124",
          "name": "Controller View",
          "children": [
            {
              "id": "Network125",
              "name": "Network",
              "children": [
                {
                  "id": "Device Name126",
                  "name": "Device Name",
                  "children": {
                    "id": "Device Name127",
                    "name": "Device Name",
                    "data": {
                      "-shortname": "DevName",
                      "-pointtype": "SV",
                      "-attributeid": "7009",
                      "-bacoid": "29818",
                      "-modify": "Read/Write",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "BAS Communication127",
                  "name": "BAS Communication",
                  "children": {
                    "id": "BAS Communication128",
                    "name": "BAS Communication",
                    "data": {
                      "-shortname": "BASCom",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modify": "Read Only",
                      "-IPdefault": "BACnet",
                      "-enumset": "Not Installed/BACnet/N2/Modbus"
                    }
                  }
                },
                {
                  "id": "Address128",
                  "name": "Address",
                  "children": {
                    "id": "Address129",
                    "name": "Address",
                    "data": {
                      "-shortname": "Address",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "275",
                      "-modify": "Read/Write",
                      "-IPmin": "4",
                      "-IPmax": "127",
                      "-SImin": "4",
                      "-SImax": "127"
                    }
                  }
                },
                {
                  "id": "Time Zone129",
                  "name": "Time Zone",
                  "children": {
                    "id": "Time Zone130",
                    "name": "Time Zone",
                    "data": {
                      "-shortname": "TimeZone",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modify": "Read/Write",
                      "-enumset": "Eastern/Central/Mountain/Pacific/Newfoundland/Atlantic/Alaska/Hawaii"
                    }
                  }
                },
                {
                  "id": "Description130",
                  "name": "Description",
                  "children": {
                    "id": "Description131",
                    "name": "Description",
                    "data": {
                      "-shortname": "Descrip",
                      "-pointtype": "SV",
                      "-attributeid": "7010",
                      "-modify": "Read/Write",
                      "-IPmax": "40",
                      "-SImax": "40"
                    }
                  }
                },
                {
                  "id": "Communication Status131",
                  "name": "Communication Status",
                  "children": {
                    "id": "Communication Status132",
                    "name": "Communication Status",
                    "data": {
                      "-shortname": "Comm-S",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modify": "Read Only",
                      "-enumset": "Not Configured/Active/Waiting For Poll For Master/Not Received Token For Long/Duplicate MAC Address/Forcing BAUD/Remote Trunk"
                    }
                  }
                },
                {
                  "id": "FC Comm Mode132",
                  "name": "FC Comm Mode",
                  "children": {
                    "id": "FC Comm Mode133",
                    "name": "FC Comm Mode",
                    "data": {
                      "-shortname": "FcBusMode",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modify": "Read Only",
                      "-enumset": "Wired Field Bus/Wireless Field Bus/N2 Slave Field Bus/Modbus Field Bus/Ethernet Field Bus/Indeterminate FC Bus Mode"
                    }
                  }
                },
                {
                  "id": "Operating Baud Rate133",
                  "name": "Operating Baud Rate",
                  "children": {
                    "id": "Operating Baud Rate134",
                    "name": "Operating Baud Rate",
                    "data": {
                      "-shortname": "OprBaudRate",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modify": "Read Only",
                      "-enumset": "Auto/1200/9600/19200/38400/76800"
                    }
                  }
                },
                {
                  "id": "Baud Rate134",
                  "name": "Baud Rate",
                  "children": {
                    "id": "Baud Rate135",
                    "name": "Baud Rate",
                    "data": {
                      "-shortname": "BaudRate",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modify": "Read/Write",
                      "-enumset": "Auto/1200/9600/19200/38400/76800"
                    }
                  }
                },
                {
                  "id": "Device OID135",
                  "name": "Device OID",
                  "children": {
                    "id": "Device OID136",
                    "name": "Device OID",
                    "data": {
                      "-shortname": "DeviceId",
                      "-pointtype": "AV",
                      "-attributeid": "7002",
                      "-bacoid": "29897",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "4194302",
                      "-SImin": "0",
                      "-SImax": "4194302"
                    }
                  }
                },
                {
                  "id": "Language136",
                  "name": "Language",
                  "children": {
                    "id": "Language137",
                    "name": "Language",
                    "data": {
                      "-shortname": "Language",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modify": "Read/Write",
                      "-enumset": "English/French/Spanish"
                    }
                  }
                },
                {
                  "id": "Units137",
                  "name": "Units",
                  "children": {
                    "id": "Units138",
                    "name": "Units",
                    "data": {
                      "-shortname": "Units",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modify": "Read/Write",
                      "-enumset": "IP/SI"
                    }
                  }
                },
                {
                  "id": "Number of Network Sensors Online138",
                  "name": "Number of Network Sensors Online",
                  "children": {
                    "id": "Number of Network Sensors Online139",
                    "name": "Number of Network Sensors Online",
                    "data": {
                      "-shortname": "#NetSensors",
                      "-pointtype": "AV",
                      "-attributeid": "7029",
                      "-modify": "Read Only"
                    }
                  }
                },
                {
                  "id": "Relearn System139",
                  "name": "Relearn System",
                  "children": {
                    "id": "Relearn System140",
                    "name": "Relearn System",
                    "data": {
                      "-shortname": "Relearn",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "BACnet Encoding Type140",
                  "name": "BACnet Encoding Type",
                  "children": {
                    "id": "BACnet Encoding Type141",
                    "name": "BACnet Encoding Type",
                    "data": {
                      "-shortname": "EncodeType",
                      "-pointtype": "MV",
                      "-attributeid": "7008",
                      "-bacoid": "29934",
                      "-modify": "Read/Write",
                      "-enumset": "ISO 10646 (UCS-2)/ANSI X3.4 (US-ASCII)"
                    }
                  }
                }
              ]
            },
            {
              "id": "Firmware141",
              "name": "Firmware",
              "children": [
                {
                  "id": "Firmware Status142",
                  "name": "Firmware Status",
                  "children": {
                    "id": "Firmware Status143",
                    "name": "Firmware Status",
                    "data": {
                      "-shortname": "Firm-S",
                      "-pointtype": "MV",
                      "-attributeid": "7005",
                      "-modify": "Read Only",
                      "-enumset": "Firmware Versions OK/Firmware Versions Do Not Match the Package"
                    }
                  }
                },
                {
                  "id": "Firmware Version143",
                  "name": "Firmware Version",
                  "children": {
                    "id": "Firmware Version144",
                    "name": "Firmware Version",
                    "data": {
                      "-shortname": "FirmVer",
                      "-pointtype": "SV",
                      "-attributeid": "7004",
                      "-bacoid": "29807",
                      "-modify": "Read Only",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "Firmware Main Version144",
                  "name": "Firmware Main Version",
                  "children": [
                    {
                      "id": "Firmware Main Version145",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "UCBMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version146",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "EconMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version147",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "4StgMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version148",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDMMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version149",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDSMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version150",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Application Version150",
                  "name": "Application Version",
                  "children": [
                    {
                      "id": "Application Version151",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "UCBAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version152",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "EconAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version153",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "4StgAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version154",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDMAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version155",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDSAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version156",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Hardware Version156",
                  "name": "Hardware Version",
                  "children": [
                    {
                      "id": "Hardware Version157",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "UCBHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version158",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "EconHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version159",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "4StgHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version160",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDMHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version161",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDSHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version162",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Firmware Main Version162",
                  "name": "Firmware Main Version",
                  "children": [
                    {
                      "id": "Firmware Main Version163",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "UCBMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version164",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "EconMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version165",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "4StgMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version166",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDMMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version167",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDSMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version168",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Application Version168",
                  "name": "Application Version",
                  "children": [
                    {
                      "id": "Application Version169",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "UCBAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version170",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "EconAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version171",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "4StgAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version172",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDMAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version173",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDSAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version174",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Hardware Version174",
                  "name": "Hardware Version",
                  "children": [
                    {
                      "id": "Hardware Version175",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "UCBHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version176",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "EconHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version177",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "4StgHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version178",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDMHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version179",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDSHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version180",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Firmware Main Version180",
                  "name": "Firmware Main Version",
                  "children": [
                    {
                      "id": "Firmware Main Version181",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "UCBMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version182",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "EconMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version183",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "4StgMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version184",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDMMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version185",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDSMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version186",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Application Version186",
                  "name": "Application Version",
                  "children": [
                    {
                      "id": "Application Version187",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "UCBAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version188",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "EconAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version189",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "4StgAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version190",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDMAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version191",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDSAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version192",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Hardware Version192",
                  "name": "Hardware Version",
                  "children": [
                    {
                      "id": "Hardware Version193",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "UCBHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version194",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "EconHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version195",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "4StgHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version196",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDMHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version197",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDSHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version198",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Firmware Main Version198",
                  "name": "Firmware Main Version",
                  "children": [
                    {
                      "id": "Firmware Main Version199",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "UCBMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version200",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "EconMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version201",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "4StgMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version202",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDMMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version203",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDSMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version204",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Application Version204",
                  "name": "Application Version",
                  "children": [
                    {
                      "id": "Application Version205",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "UCBAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version206",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "EconAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version207",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "4StgAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version208",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDMAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version209",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDSAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version210",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Hardware Version210",
                  "name": "Hardware Version",
                  "children": [
                    {
                      "id": "Hardware Version211",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "UCBHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version212",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "EconHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version213",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "4StgHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version214",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDMHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version215",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDSHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version216",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Firmware Main Version216",
                  "name": "Firmware Main Version",
                  "children": [
                    {
                      "id": "Firmware Main Version217",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "UCBMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version218",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "EconMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version219",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "4StgMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version220",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDMMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version221",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "FDDSMainVer",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Firmware Main Version222",
                      "name": "Firmware Main Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7000",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Application Version222",
                  "name": "Application Version",
                  "children": [
                    {
                      "id": "Application Version223",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "UCBAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version224",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "EconAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version225",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "4StgAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version226",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDMAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version227",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "FDDSAppVer",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Application Version228",
                      "name": "Application Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7001",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                },
                {
                  "id": "Hardware Version228",
                  "name": "Hardware Version",
                  "children": [
                    {
                      "id": "Hardware Version229",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "UCBHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version230",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "EconHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version231",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "4StgHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version232",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDMHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version233",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "FDDSHardVer",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    },
                    {
                      "id": "Hardware Version234",
                      "name": "Hardware Version",
                      "data": {
                        "-shortname": "N/A",
                        "-pointtype": "SV",
                        "-attributeid": "7003",
                        "-modify": "Read Only",
                        "-IPmax": "30",
                        "-SImax": "30"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Network Inputs234",
              "name": "Network Inputs",
              "children": [
                {
                  "id": "Network Override Space Temperature235",
                  "name": "Network Override Space Temperature",
                  "children": {
                    "id": "Network Override Space Temperature236",
                    "name": "Network Override Space Temperature",
                    "data": {
                      "-shortname": "NetST",
                      "-pointtype": "AV",
                      "-attributeid": "7011",
                      "-modbusaddr": "1",
                      "-n2pointtype": "ADF",
                      "-n2address": "3",
                      "-bacoid": "29526",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "?F",
                      "-SImin": "4",
                      "-SImax": "38",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Network Override Space Setpoint Offset236",
                  "name": "Network Override Space Setpoint Offset",
                  "children": {
                    "id": "Network Override Space Setpoint Offset237",
                    "name": "Network Override Space Setpoint Offset",
                    "data": {
                      "-shortname": "NetSSO",
                      "-pointtype": "AV",
                      "-attributeid": "7027",
                      "-modbusaddr": "5",
                      "-n2pointtype": "ADF",
                      "-n2address": "11",
                      "-bacoid": "29540",
                      "-modify": "Read/Write",
                      "-IPmin": "-5",
                      "-IPmax": "5",
                      "-IPunits": "delta ?F",
                      "-SImin": "-3",
                      "-SImax": "3",
                      "-SIunits": "delta ?K"
                    }
                  }
                },
                {
                  "id": "Network Override Zone Humidity237",
                  "name": "Network Override Zone Humidity",
                  "children": {
                    "id": "Network Override Zone Humidity238",
                    "name": "Network Override Zone Humidity",
                    "data": {
                      "-shortname": "NetSH",
                      "-pointtype": "AV",
                      "-attributeid": "7020",
                      "-modbusaddr": "4",
                      "-n2pointtype": "ADF",
                      "-n2address": "8",
                      "-bacoid": "29533",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%RH",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%RH"
                    }
                  }
                },
                {
                  "id": "Network Occupancy Request238",
                  "name": "Network Occupancy Request",
                  "children": {
                    "id": "Network Occupancy Request239",
                    "name": "Network Occupancy Request",
                    "data": {
                      "-shortname": "NetOcc",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "84",
                      "-n2pointtype": "ADI",
                      "-n2address": "8",
                      "-bacoid": "29520",
                      "-modify": "Read/Write",
                      "-IPdefault": "Not Set",
                      "-enumset": "Occupied/UnOccupied/Not Set"
                    }
                  }
                },
                {
                  "id": "Network Temporary Occupancy Request239",
                  "name": "Network Temporary Occupancy Request",
                  "children": {
                    "id": "Network Temporary Occupancy Request240",
                    "name": "Network Temporary Occupancy Request",
                    "data": {
                      "-shortname": "NetTempOcc",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "83",
                      "-n2pointtype": "ADI",
                      "-n2address": "7",
                      "-bacoid": "29519",
                      "-modify": "Read/Write",
                      "-IPdefault": "False",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Network Override Indoor Air Quality240",
                  "name": "Network Override Indoor Air Quality",
                  "children": {
                    "id": "Network Override Indoor Air Quality241",
                    "name": "Network Override Indoor Air Quality",
                    "data": {
                      "-shortname": "NetIAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7016",
                      "-modbusaddr": "3",
                      "-n2pointtype": "ADF",
                      "-n2address": "6",
                      "-bacoid": "29530",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Network Override Fan Request241",
                  "name": "Network Override Fan Request",
                  "children": {
                    "id": "Network Override Fan Request242",
                    "name": "Network Override Fan Request",
                    "data": {
                      "-shortname": "NetFanReq",
                      "-pointtype": "MV",
                      "-attributeid": "7023",
                      "-modbusaddr": "87",
                      "-n2pointtype": "ADI",
                      "-n2address": "16",
                      "-bacoid": "29536",
                      "-modify": "Read/Write",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Network Override Outdoor Air Temperature242",
                  "name": "Network Override Outdoor Air Temperature",
                  "children": {
                    "id": "Network Override Outdoor Air Temperature243",
                    "name": "Network Override Outdoor Air Temperature",
                    "data": {
                      "-shortname": "NetOAT",
                      "-pointtype": "AV",
                      "-attributeid": "7003",
                      "-modbusaddr": "6",
                      "-n2pointtype": "ADF",
                      "-n2address": "24",
                      "-bacoid": "29543",
                      "-modify": "Read/Write",
                      "-IPmin": "-50",
                      "-IPmax": "125",
                      "-IPunits": "?F",
                      "-SImin": "-18",
                      "-SImax": "52",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Network Override Outdoor Air Humidity243",
                  "name": "Network Override Outdoor Air Humidity",
                  "children": {
                    "id": "Network Override Outdoor Air Humidity244",
                    "name": "Network Override Outdoor Air Humidity",
                    "data": {
                      "-shortname": "NetOAH",
                      "-pointtype": "AV",
                      "-attributeid": "7008",
                      "-modbusaddr": "7",
                      "-n2pointtype": "ADF",
                      "-n2address": "27",
                      "-bacoid": "29546",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%RH",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%RH"
                    }
                  }
                },
                {
                  "id": "Network Override Outdoor Air Quality244",
                  "name": "Network Override Outdoor Air Quality",
                  "children": {
                    "id": "Network Override Outdoor Air Quality245",
                    "name": "Network Override Outdoor Air Quality",
                    "data": {
                      "-shortname": "NetOAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7013",
                      "-modbusaddr": "8",
                      "-n2pointtype": "ADF",
                      "-n2address": "29",
                      "-bacoid": "29549",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Network Override Purge Command245",
                  "name": "Network Override Purge Command",
                  "children": {
                    "id": "Network Override Purge Command246",
                    "name": "Network Override Purge Command",
                    "data": {
                      "-shortname": "NetPurge",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "125",
                      "-n2pointtype": "ADI",
                      "-n2address": "101",
                      "-bacoid": "29801",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Direct Loadshed246",
                  "name": "Direct Loadshed",
                  "children": {
                    "id": "Direct Loadshed247",
                    "name": "Direct Loadshed",
                    "data": {
                      "-shortname": "DirLoadshd",
                      "-pointtype": "MV",
                      "-attributeid": "7061",
                      "-modbusaddr": "128",
                      "-n2pointtype": "ADI",
                      "-n2address": "111",
                      "-bacoid": "29910",
                      "-modify": "Read/Write",
                      "-IPdefault": "No",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Redline247",
                  "name": "Redline",
                  "children": {
                    "id": "Redline248",
                    "name": "Redline",
                    "data": {
                      "-shortname": "Redline",
                      "-pointtype": "MV",
                      "-attributeid": "7062",
                      "-modbusaddr": "129",
                      "-n2pointtype": "ADI",
                      "-n2address": "112",
                      "-bacoid": "29911",
                      "-modify": "Read/Write",
                      "-IPdefault": "No",
                      "-enumset": "No/Yes"
                    }
                  }
                }
              ]
            },
            {
              "id": "FDD248",
              "name": "FDD",
              "children": [
                {
                  "id": "Unit Type249",
                  "name": "Unit Type",
                  "children": {
                    "id": "Unit Type250",
                    "name": "Unit Type",
                    "data": {
                      "-shortname": "UnitType",
                      "-pointtype": "MV",
                      "-attributeid": "7020",
                      "-modbusaddr": "403",
                      "-n2pointtype": "ADI",
                      "-n2address": "122",
                      "-bacoid": "29595",
                      "-modify": "Read/Write",
                      "-enumset": "Not Used/Package Cool/Package HP/Split Cool/Split HP/Water Source Package HP/Water Source Split HP/Water Cooled Package Cool/Water Cooled Split Cool/Walk In Cooler/Walk In Freezer/n"
                    }
                  }
                },
                {
                  "id": "EER250",
                  "name": "EER",
                  "children": {
                    "id": "EER251",
                    "name": "EER",
                    "data": {
                      "-shortname": "EER",
                      "-pointtype": "AV",
                      "-attributeid": "7021",
                      "-modbusaddr": "404",
                      "-n2pointtype": "ADF",
                      "-n2address": "175",
                      "-bacoid": "29596",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "20",
                      "-SImin": "0",
                      "-SImax": "20"
                    }
                  }
                },
                {
                  "id": "Subcooling Goal251",
                  "name": "Subcooling Goal",
                  "children": {
                    "id": "Subcooling Goal252",
                    "name": "Subcooling Goal",
                    "data": {
                      "-shortname": "SubcoolGoal",
                      "-pointtype": "AV",
                      "-attributeid": "7022",
                      "-modbusaddr": "421",
                      "-n2pointtype": "ADF",
                      "-n2address": "179",
                      "-bacoid": "29597",
                      "-modify": "Read/Write",
                      "-IPmin": "-10",
                      "-IPmax": "20",
                      "-IPunits": "?F",
                      "-SImin": "-23",
                      "-SImax": "-6",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Refrigerant Type252",
                  "name": "Refrigerant Type",
                  "children": {
                    "id": "Refrigerant Type253",
                    "name": "Refrigerant Type",
                    "data": {
                      "-shortname": "RefrigType",
                      "-pointtype": "MV",
                      "-attributeid": "7023",
                      "-modbusaddr": "405",
                      "-n2pointtype": "ADI",
                      "-n2address": "123",
                      "-bacoid": "29598",
                      "-modify": "Read/Write",
                      "-enumset": "R22/R12/R500/R134A/R410A/R502/R409A/404A/507A/R407C/n"
                    }
                  }
                },
                {
                  "id": "High Side Port Location253",
                  "name": "High Side Port Location",
                  "children": {
                    "id": "High Side Port Location254",
                    "name": "High Side Port Location",
                    "data": {
                      "-shortname": "HiSidePortLoc",
                      "-pointtype": "MV",
                      "-attributeid": "7024",
                      "-modbusaddr": "422",
                      "-n2pointtype": "ADI",
                      "-n2address": "135",
                      "-bacoid": "29599",
                      "-modify": "Read/Write",
                      "-enumset": "Liquid/Discharge"
                    }
                  }
                },
                {
                  "id": "Evaporator Coil Type254",
                  "name": "Evaporator Coil Type",
                  "children": {
                    "id": "Evaporator Coil Type255",
                    "name": "Evaporator Coil Type",
                    "data": {
                      "-shortname": "EvapCoil-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7025",
                      "-modbusaddr": "406",
                      "-n2pointtype": "ADI",
                      "-n2address": "124",
                      "-bacoid": "29600",
                      "-modify": "Read/Write",
                      "-IPdefault": "MicroChannel",
                      "-enumset": "MicroChannel/Tube and Fin"
                    }
                  }
                },
                {
                  "id": "Condenser Coil Type255",
                  "name": "Condenser Coil Type",
                  "children": {
                    "id": "Condenser Coil Type256",
                    "name": "Condenser Coil Type",
                    "data": {
                      "-shortname": "CondCoil-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7026",
                      "-modbusaddr": "423",
                      "-n2pointtype": "ADI",
                      "-n2address": "136",
                      "-bacoid": "29601",
                      "-modify": "Read/Write",
                      "-IPdefault": "MicroChannel",
                      "-enumset": "MicroChannel/Tube and Fin"
                    }
                  }
                },
                {
                  "id": "Indoor Metering Device Type256",
                  "name": "Indoor Metering Device Type",
                  "children": {
                    "id": "Indoor Metering Device Type257",
                    "name": "Indoor Metering Device Type",
                    "data": {
                      "-shortname": "InMeterDev-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7027",
                      "-modbusaddr": "424",
                      "-n2pointtype": "ADI",
                      "-n2address": "137",
                      "-bacoid": "29602",
                      "-modify": "Read/Write",
                      "-enumset": "TxV/FO/TxV Or FO/n"
                    }
                  }
                },
                {
                  "id": "Outdoor Metering Device Type257",
                  "name": "Outdoor Metering Device Type",
                  "children": {
                    "id": "Outdoor Metering Device Type258",
                    "name": "Outdoor Metering Device Type",
                    "data": {
                      "-shortname": "OutMeterDev-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7028",
                      "-modbusaddr": "425",
                      "-n2pointtype": "ADI",
                      "-n2address": "138",
                      "-bacoid": "29603",
                      "-modify": "Read/Write",
                      "-enumset": "TxV/FO/TxV Or FO/n"
                    }
                  }
                },
                {
                  "id": "Unit Capacity258",
                  "name": "Unit Capacity",
                  "children": {
                    "id": "Unit Capacity259",
                    "name": "Unit Capacity",
                    "data": {
                      "-shortname": "UnitCap",
                      "-pointtype": "AV",
                      "-attributeid": "7038",
                      "-modbusaddr": "407",
                      "-n2pointtype": "ADF",
                      "-n2address": "176",
                      "-bacoid": "29886",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "130",
                      "-IPunits": "tons",
                      "-SImin": "0",
                      "-SImax": "460",
                      "-SIunits": "kW"
                    }
                  }
                },
                {
                  "id": "Fan Power259",
                  "name": "Fan Power",
                  "children": {
                    "id": "Fan Power260",
                    "name": "Fan Power",
                    "data": {
                      "-shortname": "FanPower",
                      "-pointtype": "AV",
                      "-attributeid": "7039",
                      "-modbusaddr": "426",
                      "-n2pointtype": "ADF",
                      "-n2address": "180",
                      "-bacoid": "29887",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "19",
                      "-IPunits": "kW",
                      "-SImin": "0",
                      "-SImax": "19",
                      "-SIunits": "kW"
                    }
                  }
                },
                {
                  "id": "Super Heat Goal260",
                  "name": "Super Heat Goal",
                  "children": {
                    "id": "Super Heat Goal261",
                    "name": "Super Heat Goal",
                    "data": {
                      "-shortname": "SuperHeatGoal",
                      "-pointtype": "AV",
                      "-attributeid": "7040",
                      "-modbusaddr": "427",
                      "-n2pointtype": "ADF",
                      "-n2address": "181",
                      "-bacoid": "29888",
                      "-modify": "Read/Write",
                      "-IPmin": "10",
                      "-IPmax": "30",
                      "-IPunits": "?F",
                      "-SImin": "-12.2",
                      "-SImax": "-1.1",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Altitude261",
                  "name": "Altitude",
                  "children": {
                    "id": "Altitude262",
                    "name": "Altitude",
                    "data": {
                      "-shortname": "Altitude",
                      "-pointtype": "AV",
                      "-attributeid": "7041",
                      "-modbusaddr": "31",
                      "-n2pointtype": "ADF",
                      "-n2address": "54",
                      "-bacoid": "29889",
                      "-modify": "Read/Write",
                      "-IPmin": "-1500",
                      "-IPmax": "30000",
                      "-IPunits": "ft",
                      "-SImin": "-457.2",
                      "-SImax": "9144",
                      "-SIunits": "m"
                    }
                  }
                }
              ]
            },
            {
              "id": "Time262",
              "name": "Time",
              "children": [
                {
                  "id": "Time263",
                  "name": "Time",
                  "children": [
                    {
                      "id": "Time264",
                      "name": "Time",
                      "data": {
                        "-shortname": "Time",
                        "-pointtype": "AV",
                        "-attributeid": "7040",
                        "-modify": "Read/Write",
                        "-IPdefault": "60",
                        "-IPmin": "0",
                        "-IPmax": "600",
                        "-IPunits": "seconds",
                        "-SImin": "0",
                        "-SImax": "600",
                        "-SIunits": "seconds"
                      }
                    },
                    {
                      "id": "Time265",
                      "name": "Time",
                      "data": {
                        "-shortname": "Time",
                        "-pointtype": "AV",
                        "-attributeid": "7041",
                        "-modify": "Read/Write",
                        "-IPdefault": "90",
                        "-IPmin": "0",
                        "-IPmax": "600",
                        "-IPunits": "seconds",
                        "-SImin": "0",
                        "-SImax": "600",
                        "-SIunits": "seconds"
                      }
                    },
                    {
                      "id": "Time266",
                      "name": "Time",
                      "data": {
                        "-shortname": "Time",
                        "-pointtype": "Time",
                        "-attributeid": "7000",
                        "-modify": "Read Only"
                      }
                    }
                  ]
                },
                {
                  "id": "Date266",
                  "name": "Date",
                  "children": {
                    "id": "Date267",
                    "name": "Date",
                    "data": {
                      "-shortname": "Date",
                      "-pointtype": "Date",
                      "-attributeid": "7001",
                      "-modify": "Read Only"
                    }
                  }
                },
                {
                  "id": "Time Zone267",
                  "name": "Time Zone",
                  "children": {
                    "id": "Time Zone268",
                    "name": "Time Zone",
                    "data": {
                      "-shortname": "TimeZone",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modify": "Read/Write",
                      "-enumset": "Eastern/Central/Mountain/Pacific/Newfoundland/Atlantic/Alaska/Hawaii"
                    }
                  }
                },
                {
                  "id": "Daylight Savings Enable268",
                  "name": "Daylight Savings Enable",
                  "children": {
                    "id": "Daylight Savings Enable269",
                    "name": "Daylight Savings Enable",
                    "data": {
                      "-shortname": "DaylightSav",
                      "-pointtype": "MV",
                      "-attributeid": "7008",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Time Format269",
                  "name": "Time Format",
                  "children": {
                    "id": "Time Format270",
                    "name": "Time Format",
                    "data": {
                      "-shortname": "TimeFormat",
                      "-pointtype": "MV",
                      "-attributeid": "7009",
                      "-modify": "Read/Write",
                      "-enumset": "State 0/State 1/State 2/State 3/State 4/State 5/State 6/State 7/State 8/State 9/State 10/State 11/State 12/State 13/State 14/State 15/State 16/State 17/State 18/State 19/State 20/State 21/State 22/State 23/State 24/State 25/State 26/State 27/State 28/State 29/State 30/State 31"
                    }
                  }
                }
              ]
            },
            {
              "id": "Description270",
              "name": "Description",
              "children": [
                {
                  "id": "Rooftop Controller Type271",
                  "name": "Rooftop Controller Type",
                  "children": {
                    "id": "Rooftop Controller Type272",
                    "name": "Rooftop Controller Type",
                    "data": {
                      "-shortname": "CntrlType",
                      "-pointtype": "MV",
                      "-attributeid": "7017",
                      "-modify": "Read/Write",
                      "-IPdefault": "Constant Volume",
                      "-enumset": "Changeover Bypass/VAV/Constant Volume/TEC"
                    }
                  }
                },
                {
                  "id": "Rooftop Equipment Type272",
                  "name": "Rooftop Equipment Type",
                  "children": {
                    "id": "Rooftop Equipment Type273",
                    "name": "Rooftop Equipment Type",
                    "data": {
                      "-shortname": "EquipType",
                      "-pointtype": "MV",
                      "-attributeid": "7018",
                      "-modify": "Read/Write",
                      "-IPdefault": "RTU",
                      "-enumset": "Unknown/RTU/Split/HeatPump"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Details View273",
          "name": "Details View",
          "children": [
            {
              "id": "Occupancy Status274",
              "name": "Occupancy Status",
              "children": [
                {
                  "id": "Occupancy Mode275",
                  "name": "Occupancy Mode",
                  "children": {
                    "id": "Occupancy Mode276",
                    "name": "Occupancy Mode",
                    "data": {
                      "-shortname": "OccMode",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "82",
                      "-n2pointtype": "ADI",
                      "-n2address": "6",
                      "-bacoid": "29518",
                      "-modify": "Read/Write",
                      "-IPdefault": "External",
                      "-enumset": "Schedule/External"
                    }
                  }
                },
                {
                  "id": "Occupancy Input276",
                  "name": "Occupancy Input",
                  "children": {
                    "id": "Occupancy Input277",
                    "name": "Occupancy Input",
                    "data": {
                      "-shortname": "OCC",
                      "-pointtype": "MV",
                      "-attributeid": "7030",
                      "-modbusaddr": "291",
                      "-n2pointtype": "BI",
                      "-n2address": "9",
                      "-bacoid": "29516",
                      "-modify": "Read Only",
                      "-enumset": "Occupied/Unoccupied"
                    }
                  }
                },
                {
                  "id": "Operational Occupancy277",
                  "name": "Operational Occupancy",
                  "children": {
                    "id": "Operational Occupancy278",
                    "name": "Operational Occupancy",
                    "data": {
                      "-shortname": "OprOcc",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modbusaddr": "292",
                      "-n2pointtype": "ADI",
                      "-n2address": "5",
                      "-bacoid": "29517",
                      "-modify": "Read Only",
                      "-IPdefault": "UnOccupied",
                      "-enumset": "Occupied/UnOccupied/Bypass/Standby"
                    }
                  }
                },
                {
                  "id": "Occupancy Input Source278",
                  "name": "Occupancy Input Source",
                  "children": {
                    "id": "Occupancy Input Source279",
                    "name": "Occupancy Input Source",
                    "data": {
                      "-shortname": "OccSrc",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "290",
                      "-n2pointtype": "ADI",
                      "-n2address": "3",
                      "-bacoid": "29515",
                      "-modify": "Read Only",
                      "-enumset": "Local Input/Local Network Sensor/BAS Network Request/Local Schedule/Temporary Occupancy"
                    }
                  }
                },
                {
                  "id": "Temporary Occupancy Input279",
                  "name": "Temporary Occupancy Input",
                  "children": {
                    "id": "Temporary Occupancy Input280",
                    "name": "Temporary Occupancy Input",
                    "data": {
                      "-shortname": "TempOCC",
                      "-pointtype": "MV",
                      "-attributeid": "7040",
                      "-modbusaddr": "81",
                      "-n2pointtype": "ADI",
                      "-n2address": "4",
                      "-bacoid": "29825",
                      "-modify": "Read/Write",
                      "-enumset": "Disable/Enable"
                    }
                  }
                },
                {
                  "id": "Temporary Occupancy Timeout280",
                  "name": "Temporary Occupancy Timeout",
                  "children": {
                    "id": "Temporary Occupancy Timeout281",
                    "name": "Temporary Occupancy Timeout",
                    "data": {
                      "-shortname": "TempOccTimeout",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "85",
                      "-n2pointtype": "ADI",
                      "-n2address": "9",
                      "-bacoid": "29521",
                      "-modify": "Read/Write",
                      "-IPdefault": "120",
                      "-IPmin": "30",
                      "-IPmax": "480",
                      "-IPunits": "minutes",
                      "-SImin": "30",
                      "-SImax": "480",
                      "-SIunits": "minutes"
                    }
                  }
                },
                {
                  "id": "Off During Unoccupied281",
                  "name": "Off During Unoccupied",
                  "children": {
                    "id": "Off During Unoccupied282",
                    "name": "Off During Unoccupied",
                    "data": {
                      "-shortname": "OffDurUnocc",
                      "-pointtype": "MV",
                      "-attributeid": "7059",
                      "-modbusaddr": "88",
                      "-n2pointtype": "ADI",
                      "-n2address": "19",
                      "-bacoid": "29914",
                      "-modify": "Read/Write",
                      "-IPdefault": "No",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Optimal Start Enabled282",
                  "name": "Optimal Start Enabled",
                  "children": {
                    "id": "Optimal Start Enabled283",
                    "name": "Optimal Start Enabled",
                    "data": {
                      "-shortname": "OptStrt-En",
                      "-pointtype": "MV",
                      "-attributeid": "7036",
                      "-modbusaddr": "111",
                      "-n2pointtype": "ADI",
                      "-n2address": "75",
                      "-bacoid": "29893",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Early Start Period283",
                  "name": "Early Start Period",
                  "children": {
                    "id": "Early Start Period284",
                    "name": "Early Start Period",
                    "data": {
                      "-shortname": "EarlyStrtPeriod",
                      "-pointtype": "AV",
                      "-attributeid": "7038",
                      "-modbusaddr": "45",
                      "-n2pointtype": "ADF",
                      "-n2address": "126",
                      "-bacoid": "29895",
                      "-modify": "Read/Write",
                      "-IPdefault": "60",
                      "-IPmin": "0",
                      "-IPmax": "120",
                      "-IPunits": "minutes",
                      "-SImin": "0",
                      "-SImax": "120",
                      "-SIunits": "minutes"
                    }
                  }
                },
                {
                  "id": "Use Occupancy Schedule284",
                  "name": "Use Occupancy Schedule",
                  "children": {
                    "id": "Use Occupancy Schedule285",
                    "name": "Use Occupancy Schedule",
                    "data": {
                      "-shortname": "UseOccSched",
                      "-pointtype": "MV",
                      "-attributeid": "7060",
                      "-modbusaddr": "89",
                      "-n2pointtype": "ADI",
                      "-n2address": "20",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Pre Occupancy Purge Enable285",
                  "name": "Pre Occupancy Purge Enable",
                  "children": {
                    "id": "Pre Occupancy Purge Enable286",
                    "name": "Pre Occupancy Purge Enable",
                    "data": {
                      "-shortname": "PreOccPurgeEna",
                      "-pointtype": "MV",
                      "-attributeid": "7065",
                      "-modify": "Read/Write",
                      "-enumset": "Disable/Enable"
                    }
                  }
                },
                {
                  "id": "Pre Occupancy Purge Time286",
                  "name": "Pre Occupancy Purge Time",
                  "children": {
                    "id": "Pre Occupancy Purge Time287",
                    "name": "Pre Occupancy Purge Time",
                    "data": {
                      "-shortname": "PreOccPurgeTime",
                      "-pointtype": "AV",
                      "-attributeid": "7066",
                      "-modify": "Read/Write",
                      "-IPdefault": "60",
                      "-IPmin": "1",
                      "-IPmax": "120",
                      "-IPunits": "minutes",
                      "-SImin": "1",
                      "-SImax": "120",
                      "-SIunits": "minutes"
                    }
                  }
                },
                {
                  "id": "Pre Occupancy Purge Upper SAT Setpoint287",
                  "name": "Pre Occupancy Purge Upper SAT Setpoint",
                  "children": {
                    "id": "Pre Occupancy Purge Upper SAT Setpoint288",
                    "name": "Pre Occupancy Purge Upper SAT Setpoint",
                    "data": {
                      "-shortname": "PreOccUpSAT_SP",
                      "-pointtype": "AV",
                      "-attributeid": "7067",
                      "-modify": "Read/Write",
                      "-IPdefault": "90",
                      "-IPmin": "80",
                      "-IPmax": "100",
                      "-IPunits": "?F",
                      "-SImin": "26",
                      "-SImax": "38",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Pre Occupancy Purge Lower SAT Setpoint288",
                  "name": "Pre Occupancy Purge Lower SAT Setpoint",
                  "children": {
                    "id": "Pre Occupancy Purge Lower SAT Setpoint289",
                    "name": "Pre Occupancy Purge Lower SAT Setpoint",
                    "data": {
                      "-shortname": "PreOccLowSAT_SP",
                      "-pointtype": "AV",
                      "-attributeid": "7068",
                      "-modify": "Read/Write",
                      "-IPdefault": "45",
                      "-IPmin": "35",
                      "-IPmax": "55",
                      "-IPunits": "?F",
                      "-SImin": "1",
                      "-SImax": "13",
                      "-SIunits": "?C"
                    }
                  }
                }
              ]
            },
            {
              "id": "Cooling289",
              "name": "Cooling",
              "children": [
                {
                  "id": "Setup290",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Cooling Mode Enabled For Operation291",
                      "name": "Cooling Mode Enabled For Operation",
                      "children": {
                        "id": "Cooling Mode Enabled For Operation292",
                        "name": "Cooling Mode Enabled For Operation",
                        "data": {
                          "-shortname": "Clg-En",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "93",
                          "-n2pointtype": "ADI",
                          "-n2address": "27",
                          "-bacoid": "29575",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Number of Cooling Stages Installed292",
                      "name": "Number of Cooling Stages Installed",
                      "children": {
                        "id": "Number of Cooling Stages Installed293",
                        "name": "Number of Cooling Stages Installed",
                        "data": {
                          "-shortname": "#ClgStgs",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "401",
                          "-n2pointtype": "ADI",
                          "-n2address": "120",
                          "-bacoid": "29576",
                          "-modify": "Read/Write",
                          "-IPdefault": "1",
                          "-IPmin": "1",
                          "-IPmax": "4",
                          "-SImin": "1",
                          "-SImax": "4"
                        }
                      }
                    },
                    {
                      "id": "Number of Refrig Systems Installed293",
                      "name": "Number of Refrig Systems Installed",
                      "children": {
                        "id": "Number of Refrig Systems Installed294",
                        "name": "Number of Refrig Systems Installed",
                        "data": {
                          "-shortname": "#RefrigSys",
                          "-pointtype": "AV",
                          "-attributeid": "7044",
                          "-modbusaddr": "32",
                          "-n2pointtype": "ADF",
                          "-n2address": "55",
                          "-bacoid": "29890",
                          "-modify": "Read/Write",
                          "-IPdefault": "4",
                          "-IPmin": "0",
                          "-IPmax": "4",
                          "-SImin": "0",
                          "-SImax": "4"
                        }
                      }
                    },
                    {
                      "id": "CV Occupied Cooling Setpoint294",
                      "name": "CV Occupied Cooling Setpoint",
                      "children": {
                        "id": "CV Occupied Cooling Setpoint295",
                        "name": "CV Occupied Cooling Setpoint",
                        "data": {
                          "-shortname": "ClgOcc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7033",
                          "-modbusaddr": "29",
                          "-n2pointtype": "ADF",
                          "-n2address": "51",
                          "-bacoid": "29608",
                          "-modify": "Read/Write",
                          "-IPdefault": "72",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "CV Unoccupied Cooling Setpoint295",
                      "name": "CV Unoccupied Cooling Setpoint",
                      "children": {
                        "id": "CV Unoccupied Cooling Setpoint296",
                        "name": "CV Unoccupied Cooling Setpoint",
                        "data": {
                          "-shortname": "ClgUnocc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7034",
                          "-modbusaddr": "30",
                          "-n2pointtype": "ADF",
                          "-n2address": "52",
                          "-bacoid": "29609",
                          "-modify": "Read/Write",
                          "-IPdefault": "85",
                          "-IPmin": "46",
                          "-IPmax": "99",
                          "-IPunits": "?F",
                          "-SImin": "8",
                          "-SImax": "37",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 1 Enabled296",
                      "name": "Compressor Stage 1 Enabled",
                      "children": {
                        "id": "Compressor Stage 1 Enabled297",
                        "name": "Compressor Stage 1 Enabled",
                        "data": {
                          "-shortname": "C1-En",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "101",
                          "-n2pointtype": "ADI",
                          "-n2address": "36",
                          "-bacoid": "29619",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "Yes/No"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 2 Enabled297",
                      "name": "Compressor Stage 2 Enabled",
                      "children": {
                        "id": "Compressor Stage 2 Enabled298",
                        "name": "Compressor Stage 2 Enabled",
                        "data": {
                          "-shortname": "C2-En",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "102",
                          "-n2pointtype": "ADI",
                          "-n2address": "42",
                          "-bacoid": "29620",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "Yes/No"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 3 Enabled298",
                      "name": "Compressor Stage 3 Enabled",
                      "children": {
                        "id": "Compressor Stage 3 Enabled299",
                        "name": "Compressor Stage 3 Enabled",
                        "data": {
                          "-shortname": "C3-En",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "103",
                          "-n2pointtype": "ADI",
                          "-n2address": "48",
                          "-bacoid": "29621",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "Yes/No"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 4 Enabled299",
                      "name": "Compressor Stage 4 Enabled",
                      "children": {
                        "id": "Compressor Stage 4 Enabled300",
                        "name": "Compressor Stage 4 Enabled",
                        "data": {
                          "-shortname": "C4-En",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "104",
                          "-n2pointtype": "ADI",
                          "-n2address": "54",
                          "-bacoid": "29622",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "Yes/No"
                        }
                      }
                    },
                    {
                      "id": "Minimum Runtime for a Cooling Stage300",
                      "name": "Minimum Runtime for a Cooling Stage",
                      "children": {
                        "id": "Minimum Runtime for a Cooling Stage301",
                        "name": "Minimum Runtime for a Cooling Stage",
                        "data": {
                          "-shortname": "MinRtCoolStg",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "20",
                          "-n2pointtype": "ADF",
                          "-n2address": "41",
                          "-bacoid": "29578",
                          "-modify": "Read/Write",
                          "-IPdefault": "3",
                          "-IPmin": "3",
                          "-IPmax": "10",
                          "-IPunits": "minutes",
                          "-SImin": "3",
                          "-SImax": "10",
                          "-SIunits": "minutes"
                        }
                      }
                    },
                    {
                      "id": "Cooling Adaptive Tuning Enable301",
                      "name": "Cooling Adaptive Tuning Enable",
                      "children": {
                        "id": "Cooling Adaptive Tuning Enable302",
                        "name": "Cooling Adaptive Tuning Enable",
                        "data": {
                          "-shortname": "ClgAdapTunEn",
                          "-pointtype": "MV",
                          "-attributeid": "7043",
                          "-modbusaddr": "100",
                          "-n2pointtype": "ADI",
                          "-n2address": "35",
                          "-bacoid": "29882",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Enabled302",
                      "name": "Low Ambient Enabled",
                      "children": {
                        "id": "Low Ambient Enabled303",
                        "name": "Low Ambient Enabled",
                        "data": {
                          "-shortname": "LowAmb-En",
                          "-pointtype": "MV",
                          "-attributeid": "7051",
                          "-modbusaddr": "429",
                          "-n2pointtype": "ADI",
                          "-n2address": "140",
                          "-bacoid": "29928",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Cooling Stages 10 on 5 off Setpoint303",
                      "name": "Low Ambient Cooling Stages 10 on 5 off Setpoint",
                      "children": {
                        "id": "Low Ambient Cooling Stages 10 on 5 off Setpoint304",
                        "name": "Low Ambient Cooling Stages 10 on 5 off Setpoint",
                        "data": {
                          "-shortname": "LowAmb10On5OffSp",
                          "-pointtype": "AV",
                          "-attributeid": "7010",
                          "-modbusaddr": "419",
                          "-n2pointtype": "ADF",
                          "-n2address": "177",
                          "-bacoid": "29585",
                          "-modify": "Read/Write",
                          "-IPdefault": "45",
                          "-IPmin": "0",
                          "-IPmax": "60",
                          "-IPunits": "?F",
                          "-SImin": "-18",
                          "-SImax": "15",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Lead/Lag Equalize Cooling Stage Runtime Enabled304",
                      "name": "Lead/Lag Equalize Cooling Stage Runtime Enabled",
                      "children": {
                        "id": "Lead/Lag Equalize Cooling Stage Runtime Enabled305",
                        "name": "Lead/Lag Equalize Cooling Stage Runtime Enabled",
                        "data": {
                          "-shortname": "LeadLag-En",
                          "-pointtype": "MV",
                          "-attributeid": "7004",
                          "-modbusaddr": "402",
                          "-n2pointtype": "ADI",
                          "-n2address": "121",
                          "-bacoid": "29579",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "OAT Cooling Cutout Enabled305",
                      "name": "OAT Cooling Cutout Enabled",
                      "children": {
                        "id": "OAT Cooling Cutout Enabled306",
                        "name": "OAT Cooling Cutout Enabled",
                        "data": {
                          "-shortname": "ClgOATCutout-En",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-modbusaddr": "94",
                          "-n2pointtype": "ADI",
                          "-n2address": "29",
                          "-bacoid": "29581",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "OAT Cooling Cutout306",
                      "name": "OAT Cooling Cutout",
                      "children": {
                        "id": "OAT Cooling Cutout307",
                        "name": "OAT Cooling Cutout",
                        "data": {
                          "-shortname": "ClgOATCutout",
                          "-pointtype": "AV",
                          "-attributeid": "7007",
                          "-modbusaddr": "21",
                          "-n2pointtype": "ADF",
                          "-n2address": "42",
                          "-bacoid": "29582",
                          "-modify": "Read/Write",
                          "-IPdefault": "45",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "?F",
                          "-SImin": "-18",
                          "-SImax": "38",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "SAT Limit for Cooling Enable307",
                      "name": "SAT Limit for Cooling Enable",
                      "children": {
                        "id": "SAT Limit for Cooling Enable308",
                        "name": "SAT Limit for Cooling Enable",
                        "data": {
                          "-shortname": "SATCoolLimit-En",
                          "-pointtype": "MV",
                          "-attributeid": "7015",
                          "-modbusaddr": "98",
                          "-n2pointtype": "ADI",
                          "-n2address": "33",
                          "-bacoid": "29590",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "SAT Limit for Cooling Setpoint308",
                      "name": "SAT Limit for Cooling Setpoint",
                      "children": {
                        "id": "SAT Limit for Cooling Setpoint309",
                        "name": "SAT Limit for Cooling Setpoint",
                        "data": {
                          "-shortname": "SATCoolLimit-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "25",
                          "-n2pointtype": "ADF",
                          "-n2address": "46",
                          "-bacoid": "29591",
                          "-modify": "Read/Write",
                          "-IPdefault": "45",
                          "-IPmin": "40",
                          "-IPmax": "65",
                          "-IPunits": "?F",
                          "-SImin": "4",
                          "-SImax": "18",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Bypass Present309",
                      "name": "Hot Gas Bypass Present",
                      "children": [
                        {
                          "id": "Hot Gas Bypass Present310",
                          "name": "Hot Gas Bypass Present",
                          "data": {
                            "-shortname": "HGP-Inst",
                            "-pointtype": "MV",
                            "-attributeid": "7004",
                            "-modbusaddr": "408",
                            "-n2pointtype": "ADI",
                            "-n2address": "125",
                            "-bacoid": "29623",
                            "-modify": "Read/Write",
                            "-IPdefault": "No",
                            "-enumset": "No/Yes"
                          }
                        },
                        {
                          "id": "Hot Gas Bypass Present311",
                          "name": "Hot Gas Bypass Present",
                          "data": {
                            "-shortname": "N/A",
                            "-pointtype": "MV",
                            "-attributeid": "7004",
                            "-modify": "Read/Write",
                            "-enumset": "No/Yes"
                          }
                        },
                        {
                          "id": "Hot Gas Bypass Present312",
                          "name": "Hot Gas Bypass Present",
                          "data": {
                            "-shortname": "N/A",
                            "-pointtype": "MV",
                            "-attributeid": "7004",
                            "-modify": "Read/Write",
                            "-enumset": "No/Yes"
                          }
                        },
                        {
                          "id": "Hot Gas Bypass Present313",
                          "name": "Hot Gas Bypass Present",
                          "data": {
                            "-shortname": "N/A",
                            "-pointtype": "MV",
                            "-attributeid": "7004",
                            "-modify": "Read/Write",
                            "-enumset": "No/Yes"
                          }
                        }
                      ]
                    },
                    {
                      "id": "Freeze Condition Setpoint313",
                      "name": "Freeze Condition Setpoint",
                      "children": {
                        "id": "Freeze Condition Setpoint314",
                        "name": "Freeze Condition Setpoint",
                        "data": {
                          "-shortname": "Freeze-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7017",
                          "-modbusaddr": "420",
                          "-n2pointtype": "ADF",
                          "-n2address": "178",
                          "-bacoid": "29592",
                          "-modify": "Read/Write",
                          "-IPdefault": "26",
                          "-IPmin": "20",
                          "-IPmax": "32",
                          "-IPunits": "?F",
                          "-SImin": "-7",
                          "-SImax": "0",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Pump Out Enable314",
                      "name": "Pump Out Enable",
                      "children": {
                        "id": "Pump Out Enable315",
                        "name": "Pump Out Enable",
                        "data": {
                          "-shortname": "PmpOut-En",
                          "-pointtype": "MV",
                          "-attributeid": "7046",
                          "-modbusaddr": "428",
                          "-n2pointtype": "ADI",
                          "-n2address": "139",
                          "-bacoid": "29921",
                          "-modify": "Read/Write",
                          "-IPdefault": "Disable",
                          "-enumset": "Disable/Enable"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Fan Pre-run Time For Cooling315",
                      "name": "Low Ambient Fan Pre-run Time For Cooling",
                      "children": {
                        "id": "Low Ambient Fan Pre-run Time For Cooling316",
                        "name": "Low Ambient Fan Pre-run Time For Cooling",
                        "data": {
                          "-shortname": "LowAmbFanPrerunCool",
                          "-pointtype": "AV",
                          "-attributeid": "7005",
                          "-modbusaddr": "418",
                          "-n2pointtype": "ADI",
                          "-n2address": "134",
                          "-bacoid": "29580",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "0",
                          "-IPmax": "255",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "255",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Cooling Manual Tuning316",
                      "name": "Cooling Manual Tuning",
                      "children": {
                        "id": "Cooling Manual Tuning317",
                        "name": "Cooling Manual Tuning",
                        "data": {
                          "-shortname": "ClgManualTune",
                          "-pointtype": "MV",
                          "-attributeid": "7042",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Start317",
                      "name": "Low Ambient Start",
                      "children": {
                        "id": "Low Ambient Start318",
                        "name": "Low Ambient Start",
                        "data": {
                          "-shortname": "LowAmbStart",
                          "-pointtype": "MV",
                          "-attributeid": "7056",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "4 Pipe Split Enable318",
                      "name": "4 Pipe Split Enable",
                      "children": {
                        "id": "4 Pipe Split Enable319",
                        "name": "4 Pipe Split Enable",
                        "data": {
                          "-shortname": "4pipeEna",
                          "-pointtype": "MV",
                          "-attributeid": "7055",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service319",
                  "name": "Service",
                  "children": [
                    {
                      "id": "Unit320",
                      "name": "Unit",
                      "children": [
                        {
                          "id": "Staged Cooling Command321",
                          "name": "Staged Cooling Command",
                          "children": {
                            "id": "Staged Cooling Command322",
                            "name": "Staged Cooling Command",
                            "data": {
                              "-shortname": "StgClgCmd",
                              "-pointtype": "AV",
                              "-attributeid": "7047",
                              "-modbusaddr": "263",
                              "-n2pointtype": "ADF",
                              "-n2address": "165",
                              "-bacoid": "29922",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "CV Operating Cooling Setpoint322",
                          "name": "CV Operating Cooling Setpoint",
                          "children": {
                            "id": "CV Operating Cooling Setpoint323",
                            "name": "CV Operating Cooling Setpoint",
                            "data": {
                              "-shortname": "OprCVClg-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7035",
                              "-modbusaddr": "161",
                              "-n2pointtype": "ADF",
                              "-n2address": "53",
                              "-bacoid": "29610",
                              "-modify": "Read Only",
                              "-IPdefault": "72",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Cooling Status323",
                          "name": "Cooling Status",
                          "children": {
                            "id": "Cooling Status324",
                            "name": "Cooling Status",
                            "data": {
                              "-shortname": "Clg-S",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "308",
                              "-n2pointtype": "ADI",
                              "-n2address": "28",
                              "-bacoid": "29577",
                              "-modify": "Read Only",
                              "-enumset": "Off-Idle/Thermostat Cooling/Unoccupied Cooling/Occupied Cooling/Off-OAT Lockout/Off-Disabled/Off-Lockout/Off-Low Supply Voltage/Off-Low Ambient/Off-Low Ambient Pre-Run Delay/Off-Waiting For Changeover Delay/Off-Free Cooling/Comfort Ventilation"
                            }
                          }
                        },
                        {
                          "id": "Operational Outdoor Air Temperature324",
                          "name": "Operational Outdoor Air Temperature",
                          "children": {
                            "id": "Operational Outdoor Air Temperature325",
                            "name": "Operational Outdoor Air Temperature",
                            "data": {
                              "-shortname": "OprOAT",
                              "-pointtype": "AV",
                              "-attributeid": "7000",
                              "-modbusaddr": "153",
                              "-n2pointtype": "ADF",
                              "-n2address": "23",
                              "-bacoid": "29541",
                              "-modify": "Read Only",
                              "-IPdefault": "0",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Operational Space Temperature325",
                          "name": "Operational Space Temperature",
                          "children": {
                            "id": "Operational Space Temperature326",
                            "name": "Operational Space Temperature",
                            "data": {
                              "-shortname": "OprST",
                              "-pointtype": "AV",
                              "-attributeid": "7006",
                              "-modbusaddr": "135",
                              "-n2pointtype": "AI",
                              "-n2address": "31",
                              "-bacoid": "29522",
                              "-modify": "Read Only",
                              "-IPdefault": "70",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Return Air Temperature326",
                          "name": "Return Air Temperature",
                          "children": {
                            "id": "Return Air Temperature327",
                            "name": "Return Air Temperature",
                            "data": {
                              "-shortname": "RAT",
                              "-pointtype": "AV",
                              "-attributeid": "7038",
                              "-modbusaddr": "139",
                              "-n2pointtype": "AI",
                              "-n2address": "2",
                              "-bacoid": "29764",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Econ Free Cooling Available327",
                          "name": "Econ Free Cooling Available",
                          "children": {
                            "id": "Econ Free Cooling Available328",
                            "name": "Econ Free Cooling Available",
                            "data": {
                              "-shortname": "Econ-Free",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "369",
                              "-n2pointtype": "ADI",
                              "-n2address": "85",
                              "-bacoid": "29749",
                              "-modify": "Read Only",
                              "-enumset": "No/Yes"
                            }
                          }
                        },
                        {
                          "id": "Supply Air Temperature328",
                          "name": "Supply Air Temperature",
                          "children": {
                            "id": "Supply Air Temperature329",
                            "name": "Supply Air Temperature",
                            "data": {
                              "-shortname": "SAT",
                              "-pointtype": "AV",
                              "-attributeid": "7014",
                              "-modbusaddr": "158",
                              "-n2pointtype": "AI",
                              "-n2address": "3",
                              "-bacoid": "29564",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Y1 - Thermostat329",
                          "name": "Y1 - Thermostat",
                          "children": {
                            "id": "Y1 - Thermostat330",
                            "name": "Y1 - Thermostat",
                            "data": {
                              "-shortname": "Y1-Tstat",
                              "-pointtype": "MV",
                              "-attributeid": "7000",
                              "-modbusaddr": "281",
                              "-n2pointtype": "BI",
                              "-n2address": "1",
                              "-bacoid": "29504",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Y2 - Thermostat330",
                          "name": "Y2 - Thermostat",
                          "children": {
                            "id": "Y2 - Thermostat331",
                            "name": "Y2 - Thermostat",
                            "data": {
                              "-shortname": "Y2-Tstat",
                              "-pointtype": "MV",
                              "-attributeid": "7001",
                              "-modbusaddr": "282",
                              "-n2pointtype": "BI",
                              "-n2address": "2",
                              "-bacoid": "29505",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Y3 - Thermostat331",
                          "name": "Y3 - Thermostat",
                          "children": {
                            "id": "Y3 - Thermostat332",
                            "name": "Y3 - Thermostat",
                            "data": {
                              "-shortname": "Y3-Tstat",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "283",
                              "-n2pointtype": "BI",
                              "-n2address": "3",
                              "-bacoid": "29506",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Y4 - Thermostat332",
                          "name": "Y4 - Thermostat",
                          "children": {
                            "id": "Y4 - Thermostat333",
                            "name": "Y4 - Thermostat",
                            "data": {
                              "-shortname": "Y4-Tstat",
                              "-pointtype": "MV",
                              "-attributeid": "7003",
                              "-modbusaddr": "284",
                              "-n2pointtype": "BI",
                              "-n2address": "4",
                              "-bacoid": "29507",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Condenser Fan 1333",
                          "name": "Condenser Fan 1",
                          "children": {
                            "id": "Condenser Fan 1334",
                            "name": "Condenser Fan 1",
                            "data": {
                              "-shortname": "CN-Fan",
                              "-pointtype": "MV",
                              "-attributeid": "7018",
                              "-modbusaddr": "309",
                              "-n2pointtype": "BO",
                              "-n2address": "3",
                              "-bacoid": "29593",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Condenser Fan 2334",
                          "name": "Condenser Fan 2",
                          "children": {
                            "id": "Condenser Fan 2335",
                            "name": "Condenser Fan 2",
                            "data": {
                              "-shortname": "CF2",
                              "-pointtype": "MV",
                              "-attributeid": "7019",
                              "-modbusaddr": "310",
                              "-n2pointtype": "BO",
                              "-n2address": "4",
                              "-bacoid": "29594",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "Stage 1335",
                      "name": "Stage 1",
                      "children": [
                        {
                          "id": "Compressor Stage 1 Status336",
                          "name": "Compressor Stage 1 Status",
                          "children": {
                            "id": "Compressor Stage 1 Status337",
                            "name": "Compressor Stage 1 Status",
                            "data": {
                              "-shortname": "C1-S",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "312",
                              "-n2pointtype": "BI",
                              "-n2address": "14",
                              "-bacoid": "29615",
                              "-modify": "Read Only",
                              "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Command 1337",
                          "name": "Compressor Stage Command 1",
                          "children": {
                            "id": "Compressor Stage Command 1338",
                            "name": "Compressor Stage Command 1",
                            "data": {
                              "-shortname": "C1",
                              "-pointtype": "MV",
                              "-attributeid": "7001",
                              "-modbusaddr": "311",
                              "-n2pointtype": "BO",
                              "-n2address": "5",
                              "-bacoid": "29611",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Min On Time Remaining 1338",
                          "name": "Min On Time Remaining 1",
                          "children": {
                            "id": "Min On Time Remaining 1339",
                            "name": "Min On Time Remaining 1",
                            "data": {
                              "-shortname": "C1OnTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "162",
                              "-n2pointtype": "ADI",
                              "-n2address": "37",
                              "-bacoid": "29631",
                              "-modify": "Read Only",
                              "-IPdefault": "180",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Anti-Short Cycle Delay Time Remaining 1339",
                          "name": "Anti-Short Cycle Delay Time Remaining 1",
                          "children": {
                            "id": "Anti-Short Cycle Delay Time Remaining 1340",
                            "name": "Anti-Short Cycle Delay Time Remaining 1",
                            "data": {
                              "-shortname": "C1ASCDTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "163",
                              "-n2pointtype": "ADI",
                              "-n2address": "38",
                              "-bacoid": "29635",
                              "-modify": "Read Only",
                              "-IPdefault": "300",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Accumulated Runtime 1340",
                          "name": "Compressor Stage Accumulated Runtime 1",
                          "children": {
                            "id": "Compressor Stage Accumulated Runtime 1341",
                            "name": "Compressor Stage Accumulated Runtime 1",
                            "data": {
                              "-shortname": "C1RunTim",
                              "-pointtype": "AV",
                              "-attributeid": "7005",
                              "-modbusaddr": "33",
                              "-n2pointtype": "ADF",
                              "-n2address": "56",
                              "-bacoid": "29627",
                              "-modify": "Read/Write",
                              "-IPmin": "0",
                              "-IPmax": "10000",
                              "-IPunits": "hours",
                              "-SImin": "0",
                              "-SImax": "10000",
                              "-SIunits": "hours"
                            }
                          }
                        },
                        {
                          "id": "Efficiency Index 1341",
                          "name": "Efficiency Index 1",
                          "children": {
                            "id": "Efficiency Index 1342",
                            "name": "Efficiency Index 1",
                            "data": {
                              "-shortname": "C1-EI",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "185",
                              "-n2pointtype": "ADF",
                              "-n2address": "63",
                              "-bacoid": "29699",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Capacity Index 1342",
                          "name": "Capacity Index 1",
                          "children": {
                            "id": "Capacity Index 1343",
                            "name": "Capacity Index 1",
                            "data": {
                              "-shortname": "C1-CI",
                              "-pointtype": "AV",
                              "-attributeid": "7009",
                              "-modbusaddr": "186",
                              "-n2pointtype": "ADF",
                              "-n2address": "64",
                              "-bacoid": "29703",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Condensing Temperature over Ambient 1343",
                          "name": "Condensing Temperature over Ambient 1",
                          "children": {
                            "id": "Condensing Temperature over Ambient 1344",
                            "name": "Condensing Temperature over Ambient 1",
                            "data": {
                              "-shortname": "C1-CondTempOvrAmb",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "184",
                              "-n2pointtype": "ADF",
                              "-n2address": "62",
                              "-bacoid": "29695",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Evaporating Temperature Value Circuit 1344",
                          "name": "Evaporating Temperature Value Circuit 1"
                        }
                      ]
                    },
                    {
                      "id": "Stage 2344",
                      "name": "Stage 2",
                      "children": [
                        {
                          "id": "Compressor Stage 2 Status345",
                          "name": "Compressor Stage 2 Status",
                          "children": {
                            "id": "Compressor Stage 2 Status346",
                            "name": "Compressor Stage 2 Status",
                            "data": {
                              "-shortname": "C2-S",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "320",
                              "-n2pointtype": "BI",
                              "-n2address": "18",
                              "-bacoid": "29616",
                              "-modify": "Read Only",
                              "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Command 2346",
                          "name": "Compressor Stage Command 2",
                          "children": {
                            "id": "Compressor Stage Command 2347",
                            "name": "Compressor Stage Command 2",
                            "data": {
                              "-shortname": "C2",
                              "-pointtype": "MV",
                              "-attributeid": "7001",
                              "-modbusaddr": "319",
                              "-n2pointtype": "BO",
                              "-n2address": "6",
                              "-bacoid": "29612",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Min On Time Remaining 2347",
                          "name": "Min On Time Remaining 2",
                          "children": {
                            "id": "Min On Time Remaining 2348",
                            "name": "Min On Time Remaining 2",
                            "data": {
                              "-shortname": "C2OnTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "166",
                              "-n2pointtype": "ADI",
                              "-n2address": "43",
                              "-bacoid": "29632",
                              "-modify": "Read Only",
                              "-IPdefault": "180",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Anti-Short Cycle Delay Time Remaining 2348",
                          "name": "Anti-Short Cycle Delay Time Remaining 2",
                          "children": {
                            "id": "Anti-Short Cycle Delay Time Remaining 2349",
                            "name": "Anti-Short Cycle Delay Time Remaining 2",
                            "data": {
                              "-shortname": "C2ASCDTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "167",
                              "-n2pointtype": "ADI",
                              "-n2address": "44",
                              "-bacoid": "29636",
                              "-modify": "Read Only",
                              "-IPdefault": "300",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Accumulated Runtime 2349",
                          "name": "Compressor Stage Accumulated Runtime 2",
                          "children": {
                            "id": "Compressor Stage Accumulated Runtime 2350",
                            "name": "Compressor Stage Accumulated Runtime 2",
                            "data": {
                              "-shortname": "C2RunTim",
                              "-pointtype": "AV",
                              "-attributeid": "7005",
                              "-modbusaddr": "34",
                              "-n2pointtype": "ADF",
                              "-n2address": "57",
                              "-bacoid": "29628",
                              "-modify": "Read/Write",
                              "-IPmin": "0",
                              "-IPmax": "10000",
                              "-IPunits": "hours",
                              "-SImin": "0",
                              "-SImax": "10000",
                              "-SIunits": "hours"
                            }
                          }
                        },
                        {
                          "id": "Efficiency Index 2350",
                          "name": "Efficiency Index 2",
                          "children": {
                            "id": "Efficiency Index 2351",
                            "name": "Efficiency Index 2",
                            "data": {
                              "-shortname": "C2-EI",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "203",
                              "-n2pointtype": "ADF",
                              "-n2address": "77",
                              "-bacoid": "29700",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Capacity Index 2351",
                          "name": "Capacity Index 2",
                          "children": {
                            "id": "Capacity Index 2352",
                            "name": "Capacity Index 2",
                            "data": {
                              "-shortname": "C2-CI",
                              "-pointtype": "AV",
                              "-attributeid": "7009",
                              "-modbusaddr": "204",
                              "-n2pointtype": "ADF",
                              "-n2address": "78",
                              "-bacoid": "29704",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Condensing Temperature over Ambient 2352",
                          "name": "Condensing Temperature over Ambient 2",
                          "children": {
                            "id": "Condensing Temperature over Ambient 2353",
                            "name": "Condensing Temperature over Ambient 2",
                            "data": {
                              "-shortname": "C2-CondTempOvrAmb",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "202",
                              "-n2pointtype": "ADF",
                              "-n2address": "76",
                              "-bacoid": "29696",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Evaporating Temperature Value Circuit 2353",
                          "name": "Evaporating Temperature Value Circuit 2"
                        }
                      ]
                    },
                    {
                      "id": "Stage 3353",
                      "name": "Stage 3",
                      "children": [
                        {
                          "id": "Compressor Stage 3 Status354",
                          "name": "Compressor Stage 3 Status",
                          "children": {
                            "id": "Compressor Stage 3 Status355",
                            "name": "Compressor Stage 3 Status",
                            "data": {
                              "-shortname": "C3-S",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "328",
                              "-n2pointtype": "BI",
                              "-n2address": "22",
                              "-bacoid": "29617",
                              "-modify": "Read Only",
                              "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Command 3355",
                          "name": "Compressor Stage Command 3"
                        },
                        {
                          "id": "Min On Time Remaining 3355",
                          "name": "Min On Time Remaining 3",
                          "children": {
                            "id": "Min On Time Remaining 3356",
                            "name": "Min On Time Remaining 3",
                            "data": {
                              "-shortname": "C3OnTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "170",
                              "-n2pointtype": "ADI",
                              "-n2address": "49",
                              "-bacoid": "29633",
                              "-modify": "Read Only",
                              "-IPdefault": "180",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Anti-Short Cycle Delay Time Remaining 3356",
                          "name": "Anti-Short Cycle Delay Time Remaining 3",
                          "children": {
                            "id": "Anti-Short Cycle Delay Time Remaining 3357",
                            "name": "Anti-Short Cycle Delay Time Remaining 3",
                            "data": {
                              "-shortname": "C3ASCDTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "171",
                              "-n2pointtype": "ADI",
                              "-n2address": "50",
                              "-bacoid": "29637",
                              "-modify": "Read Only",
                              "-IPdefault": "300",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Accumulated Runtime 3357",
                          "name": "Compressor Stage Accumulated Runtime 3",
                          "children": {
                            "id": "Compressor Stage Accumulated Runtime 3358",
                            "name": "Compressor Stage Accumulated Runtime 3",
                            "data": {
                              "-shortname": "C3RunTim",
                              "-pointtype": "AV",
                              "-attributeid": "7005",
                              "-modbusaddr": "35",
                              "-n2pointtype": "ADF",
                              "-n2address": "58",
                              "-bacoid": "29629",
                              "-modify": "Read/Write",
                              "-IPmin": "0",
                              "-IPmax": "10000",
                              "-IPunits": "hours",
                              "-SImin": "0",
                              "-SImax": "10000",
                              "-SIunits": "hours"
                            }
                          }
                        },
                        {
                          "id": "Efficiency Index 3358",
                          "name": "Efficiency Index 3",
                          "children": {
                            "id": "Efficiency Index 3359",
                            "name": "Efficiency Index 3",
                            "data": {
                              "-shortname": "C3-EI",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "221",
                              "-n2pointtype": "ADF",
                              "-n2address": "91",
                              "-bacoid": "29701",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Capacity Index 3359",
                          "name": "Capacity Index 3",
                          "children": {
                            "id": "Capacity Index 3360",
                            "name": "Capacity Index 3",
                            "data": {
                              "-shortname": "C3-CI",
                              "-pointtype": "AV",
                              "-attributeid": "7009",
                              "-modbusaddr": "222",
                              "-n2pointtype": "ADF",
                              "-n2address": "92",
                              "-bacoid": "29705",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Condensing Temperature over Ambient 3360",
                          "name": "Condensing Temperature over Ambient 3",
                          "children": {
                            "id": "Condensing Temperature over Ambient 3361",
                            "name": "Condensing Temperature over Ambient 3",
                            "data": {
                              "-shortname": "C3-CondTempOvrAmb",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "220",
                              "-n2pointtype": "ADF",
                              "-n2address": "90",
                              "-bacoid": "29697",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Evaporating Temperature Value Circuit 3361",
                          "name": "Evaporating Temperature Value Circuit 3"
                        }
                      ]
                    },
                    {
                      "id": "Stage 4361",
                      "name": "Stage 4",
                      "children": [
                        {
                          "id": "Compressor Stage 4 Status362",
                          "name": "Compressor Stage 4 Status",
                          "children": {
                            "id": "Compressor Stage 4 Status363",
                            "name": "Compressor Stage 4 Status",
                            "data": {
                              "-shortname": "C4-S",
                              "-pointtype": "MV",
                              "-attributeid": "7002",
                              "-modbusaddr": "336",
                              "-n2pointtype": "BI",
                              "-n2address": "26",
                              "-bacoid": "29618",
                              "-modify": "Read Only",
                              "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Command 4363",
                          "name": "Compressor Stage Command 4",
                          "children": {
                            "id": "Compressor Stage Command 4364",
                            "name": "Compressor Stage Command 4",
                            "data": {
                              "-shortname": "C4",
                              "-pointtype": "MV",
                              "-attributeid": "7001",
                              "-modbusaddr": "335",
                              "-n2pointtype": "BO",
                              "-n2address": "8",
                              "-bacoid": "29614",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Min On Time Remaining 4364",
                          "name": "Min On Time Remaining 4",
                          "children": {
                            "id": "Min On Time Remaining 4365",
                            "name": "Min On Time Remaining 4",
                            "data": {
                              "-shortname": "C4OnTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "174",
                              "-n2pointtype": "ADI",
                              "-n2address": "55",
                              "-bacoid": "29634",
                              "-modify": "Read Only",
                              "-IPdefault": "180",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Anti-Short Cycle Delay Time Remaining 4365",
                          "name": "Anti-Short Cycle Delay Time Remaining 4",
                          "children": {
                            "id": "Anti-Short Cycle Delay Time Remaining 4366",
                            "name": "Anti-Short Cycle Delay Time Remaining 4",
                            "data": {
                              "-shortname": "C4ASCDTmr",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "175",
                              "-n2pointtype": "ADI",
                              "-n2address": "56",
                              "-bacoid": "29638",
                              "-modify": "Read Only",
                              "-IPdefault": "300",
                              "-IPunits": "seconds",
                              "-SIunits": "seconds"
                            }
                          }
                        },
                        {
                          "id": "Compressor Stage Accumulated Runtime 4366",
                          "name": "Compressor Stage Accumulated Runtime 4",
                          "children": {
                            "id": "Compressor Stage Accumulated Runtime 4367",
                            "name": "Compressor Stage Accumulated Runtime 4",
                            "data": {
                              "-shortname": "C4RunTim",
                              "-pointtype": "AV",
                              "-attributeid": "7005",
                              "-modbusaddr": "36",
                              "-n2pointtype": "ADF",
                              "-n2address": "59",
                              "-bacoid": "29630",
                              "-modify": "Read/Write",
                              "-IPmin": "0",
                              "-IPmax": "10000",
                              "-IPunits": "hours",
                              "-SImin": "0",
                              "-SImax": "10000",
                              "-SIunits": "hours"
                            }
                          }
                        },
                        {
                          "id": "Efficiency Index 4367",
                          "name": "Efficiency Index 4",
                          "children": {
                            "id": "Efficiency Index 4368",
                            "name": "Efficiency Index 4",
                            "data": {
                              "-shortname": "C4-EI",
                              "-pointtype": "AV",
                              "-attributeid": "7008",
                              "-modbusaddr": "239",
                              "-n2pointtype": "ADF",
                              "-n2address": "105",
                              "-bacoid": "29702",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Capacity Index 4368",
                          "name": "Capacity Index 4",
                          "children": {
                            "id": "Capacity Index 4369",
                            "name": "Capacity Index 4",
                            "data": {
                              "-shortname": "C4-CI",
                              "-pointtype": "AV",
                              "-attributeid": "7009",
                              "-modbusaddr": "240",
                              "-n2pointtype": "ADF",
                              "-n2address": "106",
                              "-bacoid": "29706",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Condensing Temperature over Ambient 4369",
                          "name": "Condensing Temperature over Ambient 4",
                          "children": {
                            "id": "Condensing Temperature over Ambient 4370",
                            "name": "Condensing Temperature over Ambient 4",
                            "data": {
                              "-shortname": "C4-CondTempOvrAmb",
                              "-pointtype": "AV",
                              "-attributeid": "7007",
                              "-modbusaddr": "238",
                              "-n2pointtype": "ADF",
                              "-n2address": "104",
                              "-bacoid": "29698",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Evaporating Temperature Value Circuit 4370",
                          "name": "Evaporating Temperature Value Circuit 4"
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "Sensors370",
                  "name": "Sensors",
                  "children": [
                    {
                      "id": "Evaporator Coil Temp 1371",
                      "name": "Evaporator Coil Temp 1",
                      "children": {
                        "id": "Evaporator Coil Temp 1372",
                        "name": "Evaporator Coil Temp 1",
                        "data": {
                          "-shortname": "EC1",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "164",
                          "-n2pointtype": "AI",
                          "-n2address": "5",
                          "-bacoid": "29663",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Condenser Coil Temp 1372",
                      "name": "Condenser Coil Temp 1",
                      "children": {
                        "id": "Condenser Coil Temp 1373",
                        "name": "Condenser Coil Temp 1",
                        "data": {
                          "-shortname": "CC1",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "165",
                          "-n2pointtype": "AI",
                          "-n2address": "6",
                          "-bacoid": "29667",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Suction Pressure 1373",
                      "name": "Suction Pressure 1",
                      "children": {
                        "id": "Suction Pressure 1374",
                        "name": "Suction Pressure 1",
                        "data": {
                          "-shortname": "SLP-1",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "178",
                          "-n2pointtype": "AI",
                          "-n2address": "13",
                          "-bacoid": "29671",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Liquid Pressure 1374",
                      "name": "Liquid Pressure 1",
                      "children": {
                        "id": "Liquid Pressure 1375",
                        "name": "Liquid Pressure 1",
                        "data": {
                          "-shortname": "LLP-1",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "179",
                          "-n2pointtype": "AI",
                          "-n2address": "14",
                          "-bacoid": "29675",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Suction Temperature 1375",
                      "name": "Suction Temperature 1",
                      "children": {
                        "id": "Suction Temperature 1376",
                        "name": "Suction Temperature 1",
                        "data": {
                          "-shortname": "SLT-1",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "180",
                          "-n2pointtype": "AI",
                          "-n2address": "15",
                          "-bacoid": "29679",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Liquid Temperature 1376",
                      "name": "Liquid Temperature 1",
                      "children": {
                        "id": "Liquid Temperature 1377",
                        "name": "Liquid Temperature 1",
                        "data": {
                          "-shortname": "LLT-1",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "181",
                          "-n2pointtype": "AI",
                          "-n2address": "16",
                          "-bacoid": "29683",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Evaporator Coil Temp 2377",
                      "name": "Evaporator Coil Temp 2",
                      "children": {
                        "id": "Evaporator Coil Temp 2378",
                        "name": "Evaporator Coil Temp 2",
                        "data": {
                          "-shortname": "EC2",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "168",
                          "-n2pointtype": "AI",
                          "-n2address": "7",
                          "-bacoid": "29664",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Condenser Coil Temp 2378",
                      "name": "Condenser Coil Temp 2",
                      "children": {
                        "id": "Condenser Coil Temp 2379",
                        "name": "Condenser Coil Temp 2",
                        "data": {
                          "-shortname": "CC2",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "169",
                          "-n2pointtype": "AI",
                          "-n2address": "8",
                          "-bacoid": "29668",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Suction Pressure 2379",
                      "name": "Suction Pressure 2",
                      "children": {
                        "id": "Suction Pressure 2380",
                        "name": "Suction Pressure 2",
                        "data": {
                          "-shortname": "SLP-2",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "196",
                          "-n2pointtype": "AI",
                          "-n2address": "17",
                          "-bacoid": "29672",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Liquid Pressure 2380",
                      "name": "Liquid Pressure 2",
                      "children": {
                        "id": "Liquid Pressure 2381",
                        "name": "Liquid Pressure 2",
                        "data": {
                          "-shortname": "LLP-2",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "197",
                          "-n2pointtype": "AI",
                          "-n2address": "18",
                          "-bacoid": "29676",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Suction Temperature 2381",
                      "name": "Suction Temperature 2",
                      "children": {
                        "id": "Suction Temperature 2382",
                        "name": "Suction Temperature 2",
                        "data": {
                          "-shortname": "SLT-2",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "198",
                          "-n2pointtype": "AI",
                          "-n2address": "19",
                          "-bacoid": "29680",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Liquid Temperature 2382",
                      "name": "Liquid Temperature 2",
                      "children": {
                        "id": "Liquid Temperature 2383",
                        "name": "Liquid Temperature 2",
                        "data": {
                          "-shortname": "LLT-2",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "199",
                          "-n2pointtype": "AI",
                          "-n2address": "20",
                          "-bacoid": "29684",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Evaporator Coil Temp 3383",
                      "name": "Evaporator Coil Temp 3",
                      "children": {
                        "id": "Evaporator Coil Temp 3384",
                        "name": "Evaporator Coil Temp 3",
                        "data": {
                          "-shortname": "EC3",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "172",
                          "-n2pointtype": "AI",
                          "-n2address": "9",
                          "-bacoid": "29665",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Condenser Coil Temp 3384",
                      "name": "Condenser Coil Temp 3",
                      "children": {
                        "id": "Condenser Coil Temp 3385",
                        "name": "Condenser Coil Temp 3",
                        "data": {
                          "-shortname": "CC3",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "173",
                          "-n2pointtype": "AI",
                          "-n2address": "10",
                          "-bacoid": "29669",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Suction Pressure 3385",
                      "name": "Suction Pressure 3",
                      "children": {
                        "id": "Suction Pressure 3386",
                        "name": "Suction Pressure 3",
                        "data": {
                          "-shortname": "SLP-3",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "214",
                          "-n2pointtype": "AI",
                          "-n2address": "21",
                          "-bacoid": "29673",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Liquid Pressure 3386",
                      "name": "Liquid Pressure 3",
                      "children": {
                        "id": "Liquid Pressure 3387",
                        "name": "Liquid Pressure 3",
                        "data": {
                          "-shortname": "LLP-3",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "215",
                          "-n2pointtype": "AI",
                          "-n2address": "22",
                          "-bacoid": "29677",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Suction Temperature 3387",
                      "name": "Suction Temperature 3",
                      "children": {
                        "id": "Suction Temperature 3388",
                        "name": "Suction Temperature 3",
                        "data": {
                          "-shortname": "SLT-3",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "216",
                          "-n2pointtype": "AI",
                          "-n2address": "23",
                          "-bacoid": "29681",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Liquid Temperature 3388",
                      "name": "Liquid Temperature 3",
                      "children": {
                        "id": "Liquid Temperature 3389",
                        "name": "Liquid Temperature 3",
                        "data": {
                          "-shortname": "LLT-3",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "217",
                          "-n2pointtype": "AI",
                          "-n2address": "24",
                          "-bacoid": "29685",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Evaporator Coil Temp 4389",
                      "name": "Evaporator Coil Temp 4",
                      "children": {
                        "id": "Evaporator Coil Temp 4390",
                        "name": "Evaporator Coil Temp 4",
                        "data": {
                          "-shortname": "EC4",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "176",
                          "-n2pointtype": "AI",
                          "-n2address": "11",
                          "-bacoid": "29666",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Condenser Coil Temp 4390",
                      "name": "Condenser Coil Temp 4",
                      "children": {
                        "id": "Condenser Coil Temp 4391",
                        "name": "Condenser Coil Temp 4",
                        "data": {
                          "-shortname": "CC4",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "177",
                          "-n2pointtype": "AI",
                          "-n2address": "12",
                          "-bacoid": "29670",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Suction Pressure 4391",
                      "name": "Suction Pressure 4",
                      "children": {
                        "id": "Suction Pressure 4392",
                        "name": "Suction Pressure 4",
                        "data": {
                          "-shortname": "SLP-4",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "232",
                          "-n2pointtype": "AI",
                          "-n2address": "25",
                          "-bacoid": "29674",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Liquid Pressure 4392",
                      "name": "Liquid Pressure 4",
                      "children": {
                        "id": "Liquid Pressure 4393",
                        "name": "Liquid Pressure 4",
                        "data": {
                          "-shortname": "LLP-4",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "233",
                          "-n2pointtype": "AI",
                          "-n2address": "26",
                          "-bacoid": "29678",
                          "-modify": "Read Only",
                          "-IPunits": "psi",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Suction Temperature 4393",
                      "name": "Suction Temperature 4",
                      "children": {
                        "id": "Suction Temperature 4394",
                        "name": "Suction Temperature 4",
                        "data": {
                          "-shortname": "SLT-4",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "234",
                          "-n2pointtype": "AI",
                          "-n2address": "27",
                          "-bacoid": "29682",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Liquid Temperature 4394",
                      "name": "Liquid Temperature 4",
                      "children": {
                        "id": "Liquid Temperature 4395",
                        "name": "Liquid Temperature 4",
                        "data": {
                          "-shortname": "LLT-4",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "235",
                          "-n2pointtype": "AI",
                          "-n2address": "28",
                          "-bacoid": "29686",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Safeties395",
                  "name": "Safeties",
                  "children": [
                    {
                      "id": "High Pressure Limit 1396",
                      "name": "High Pressure Limit 1",
                      "children": {
                        "id": "High Pressure Limit 1397",
                        "name": "High Pressure Limit 1",
                        "data": {
                          "-shortname": "HPS1",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "313",
                          "-n2pointtype": "BI",
                          "-n2address": "15",
                          "-bacoid": "29639",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Lockout 1397",
                      "name": "High Pressure Lockout 1",
                      "children": {
                        "id": "High Pressure Lockout 1398",
                        "name": "High Pressure Lockout 1",
                        "data": {
                          "-shortname": "HPS1-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "314",
                          "-n2pointtype": "ADI",
                          "-n2address": "39",
                          "-bacoid": "29643",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Limit 1398",
                      "name": "Low Pressure Limit 1",
                      "children": [
                        {
                          "id": "Low Pressure Limit 1399",
                          "name": "Low Pressure Limit 1",
                          "data": {
                            "-shortname": "DctPrs",
                            "-pointtype": "AV",
                            "-attributeid": "7038",
                            "-modify": "Read/Write",
                            "-IPdefault": "0.100000001490116",
                            "-IPmin": "0.01",
                            "-IPmax": "1",
                            "-IPunits": "in wc",
                            "-SImin": "2.5",
                            "-SImax": "250",
                            "-SIunits": "Pa"
                          }
                        },
                        {
                          "id": "Low Pressure Limit 1400",
                          "name": "Low Pressure Limit 1",
                          "data": {
                            "-shortname": "LPS1",
                            "-pointtype": "MV",
                            "-attributeid": "7011",
                            "-modbusaddr": "315",
                            "-n2pointtype": "BI",
                            "-n2address": "16",
                            "-bacoid": "29647",
                            "-modify": "Read Only",
                            "-enumset": "Normal/Alarm"
                          }
                        }
                      ]
                    },
                    {
                      "id": "Low Pressure Lockout 1400",
                      "name": "Low Pressure Lockout 1",
                      "children": {
                        "id": "Low Pressure Lockout 1401",
                        "name": "Low Pressure Lockout 1",
                        "data": {
                          "-shortname": "LPS1-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "316",
                          "-n2pointtype": "ADI",
                          "-n2address": "40",
                          "-bacoid": "29651",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition 1401",
                      "name": "Freeze Condition 1",
                      "children": {
                        "id": "Freeze Condition 1402",
                        "name": "Freeze Condition 1",
                        "data": {
                          "-shortname": "FS1",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "317",
                          "-n2pointtype": "BI",
                          "-n2address": "17",
                          "-bacoid": "29655",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition Lockout 1402",
                      "name": "Freeze Condition Lockout 1",
                      "children": {
                        "id": "Freeze Condition Lockout 1403",
                        "name": "Freeze Condition Lockout 1",
                        "data": {
                          "-shortname": "FS1-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7014",
                          "-modbusaddr": "318",
                          "-n2pointtype": "ADI",
                          "-n2address": "41",
                          "-bacoid": "29659",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Limit 2403",
                      "name": "High Pressure Limit 2",
                      "children": {
                        "id": "High Pressure Limit 2404",
                        "name": "High Pressure Limit 2",
                        "data": {
                          "-shortname": "HPS2",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "321",
                          "-n2pointtype": "BI",
                          "-n2address": "19",
                          "-bacoid": "29640",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Lockout 2404",
                      "name": "High Pressure Lockout 2",
                      "children": {
                        "id": "High Pressure Lockout 2405",
                        "name": "High Pressure Lockout 2",
                        "data": {
                          "-shortname": "HPS2-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "322",
                          "-n2pointtype": "ADI",
                          "-n2address": "45",
                          "-bacoid": "29644",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Limit 2405",
                      "name": "Low Pressure Limit 2",
                      "children": [
                        {
                          "id": "Low Pressure Limit 2406",
                          "name": "Low Pressure Limit 2",
                          "data": {
                            "-shortname": "DctPrs",
                            "-pointtype": "AV",
                            "-attributeid": "7039",
                            "-modify": "Read/Write",
                            "-IPdefault": "0.05",
                            "-IPmin": "0.01",
                            "-IPmax": "1",
                            "-IPunits": "in wc",
                            "-SImin": "2.5",
                            "-SImax": "250",
                            "-SIunits": "Pa"
                          }
                        },
                        {
                          "id": "Low Pressure Limit 2407",
                          "name": "Low Pressure Limit 2",
                          "data": {
                            "-shortname": "LPS2",
                            "-pointtype": "MV",
                            "-attributeid": "7011",
                            "-modbusaddr": "323",
                            "-n2pointtype": "BI",
                            "-n2address": "20",
                            "-bacoid": "29648",
                            "-modify": "Read Only",
                            "-enumset": "Normal/Alarm"
                          }
                        }
                      ]
                    },
                    {
                      "id": "Low Pressure Lockout 2407",
                      "name": "Low Pressure Lockout 2",
                      "children": {
                        "id": "Low Pressure Lockout 2408",
                        "name": "Low Pressure Lockout 2",
                        "data": {
                          "-shortname": "LPS2-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "324",
                          "-n2pointtype": "ADI",
                          "-n2address": "46",
                          "-bacoid": "29652",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition 2408",
                      "name": "Freeze Condition 2",
                      "children": {
                        "id": "Freeze Condition 2409",
                        "name": "Freeze Condition 2",
                        "data": {
                          "-shortname": "FS2",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "325",
                          "-n2pointtype": "BI",
                          "-n2address": "21",
                          "-bacoid": "29656",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition Lockout 2409",
                      "name": "Freeze Condition Lockout 2",
                      "children": {
                        "id": "Freeze Condition Lockout 2410",
                        "name": "Freeze Condition Lockout 2",
                        "data": {
                          "-shortname": "FS2-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7014",
                          "-modbusaddr": "326",
                          "-n2pointtype": "ADI",
                          "-n2address": "47",
                          "-bacoid": "29660",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Limit 3410",
                      "name": "High Pressure Limit 3",
                      "children": {
                        "id": "High Pressure Limit 3411",
                        "name": "High Pressure Limit 3",
                        "data": {
                          "-shortname": "HPS3",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "329",
                          "-n2pointtype": "BI",
                          "-n2address": "23",
                          "-bacoid": "29641",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Lockout 3411",
                      "name": "High Pressure Lockout 3",
                      "children": {
                        "id": "High Pressure Lockout 3412",
                        "name": "High Pressure Lockout 3",
                        "data": {
                          "-shortname": "HPS3-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "330",
                          "-n2pointtype": "ADI",
                          "-n2address": "51",
                          "-bacoid": "29645",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Limit 3412",
                      "name": "Low Pressure Limit 3",
                      "children": {
                        "id": "Low Pressure Limit 3413",
                        "name": "Low Pressure Limit 3",
                        "data": {
                          "-shortname": "LPS3",
                          "-pointtype": "MV",
                          "-attributeid": "7011",
                          "-modbusaddr": "331",
                          "-n2pointtype": "BI",
                          "-n2address": "24",
                          "-bacoid": "29649",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Lockout 3413",
                      "name": "Low Pressure Lockout 3",
                      "children": {
                        "id": "Low Pressure Lockout 3414",
                        "name": "Low Pressure Lockout 3",
                        "data": {
                          "-shortname": "LPS3-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "332",
                          "-n2pointtype": "ADI",
                          "-n2address": "52",
                          "-bacoid": "29653",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition 3414",
                      "name": "Freeze Condition 3",
                      "children": {
                        "id": "Freeze Condition 3415",
                        "name": "Freeze Condition 3",
                        "data": {
                          "-shortname": "FS3",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "333",
                          "-n2pointtype": "BI",
                          "-n2address": "25",
                          "-bacoid": "29657",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition Lockout 3415",
                      "name": "Freeze Condition Lockout 3",
                      "children": {
                        "id": "Freeze Condition Lockout 3416",
                        "name": "Freeze Condition Lockout 3",
                        "data": {
                          "-shortname": "FS3-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7014",
                          "-modbusaddr": "334",
                          "-n2pointtype": "ADI",
                          "-n2address": "53",
                          "-bacoid": "29661",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Limit 4416",
                      "name": "High Pressure Limit 4",
                      "children": {
                        "id": "High Pressure Limit 4417",
                        "name": "High Pressure Limit 4",
                        "data": {
                          "-shortname": "HPS4",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "337",
                          "-n2pointtype": "BI",
                          "-n2address": "27",
                          "-bacoid": "29642",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "High Pressure Lockout 4417",
                      "name": "High Pressure Lockout 4",
                      "children": {
                        "id": "High Pressure Lockout 4418",
                        "name": "High Pressure Lockout 4",
                        "data": {
                          "-shortname": "HPS4-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "338",
                          "-n2pointtype": "ADI",
                          "-n2address": "57",
                          "-bacoid": "29646",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Limit 4418",
                      "name": "Low Pressure Limit 4",
                      "children": {
                        "id": "Low Pressure Limit 4419",
                        "name": "Low Pressure Limit 4",
                        "data": {
                          "-shortname": "LPS4",
                          "-pointtype": "MV",
                          "-attributeid": "7011",
                          "-modbusaddr": "339",
                          "-n2pointtype": "BI",
                          "-n2address": "28",
                          "-bacoid": "29650",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Lockout 4419",
                      "name": "Low Pressure Lockout 4",
                      "children": {
                        "id": "Low Pressure Lockout 4420",
                        "name": "Low Pressure Lockout 4",
                        "data": {
                          "-shortname": "LPS4-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "340",
                          "-n2pointtype": "ADI",
                          "-n2address": "58",
                          "-bacoid": "29654",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition 4420",
                      "name": "Freeze Condition 4",
                      "children": {
                        "id": "Freeze Condition 4421",
                        "name": "Freeze Condition 4",
                        "data": {
                          "-shortname": "FS4",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "341",
                          "-n2pointtype": "BI",
                          "-n2address": "29",
                          "-bacoid": "29658",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Freeze Condition Lockout 4421",
                      "name": "Freeze Condition Lockout 4",
                      "children": {
                        "id": "Freeze Condition Lockout 4422",
                        "name": "Freeze Condition Lockout 4",
                        "data": {
                          "-shortname": "FS4-LO",
                          "-pointtype": "MV",
                          "-attributeid": "7014",
                          "-modbusaddr": "342",
                          "-n2pointtype": "ADI",
                          "-n2address": "59",
                          "-bacoid": "29662",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Misc422",
                  "name": "Misc",
                  "children": [
                    {
                      "id": "Maximum Temperature / Humidity Setpoint Offset423",
                      "name": "Maximum Temperature / Humidity Setpoint Offset",
                      "children": {
                        "id": "Maximum Temperature / Humidity Setpoint Offset424",
                        "name": "Maximum Temperature / Humidity Setpoint Offset",
                        "data": {
                          "-shortname": "MaxTempHumSpOff",
                          "-pointtype": "AV",
                          "-attributeid": "7013",
                          "-modbusaddr": "23",
                          "-n2pointtype": "ADF",
                          "-n2address": "44",
                          "-bacoid": "29588",
                          "-modify": "Read/Write",
                          "-IPdefault": "3",
                          "-IPmin": "0",
                          "-IPmax": "5",
                          "-IPunits": "delta ?F",
                          "-SImin": "0",
                          "-SImax": "3",
                          "-SIunits": "delta ?K"
                        }
                      }
                    },
                    {
                      "id": "Temperature/Humidity Setpoint424",
                      "name": "Temperature/Humidity Setpoint",
                      "children": {
                        "id": "Temperature/Humidity Setpoint425",
                        "name": "Temperature/Humidity Setpoint",
                        "data": {
                          "-shortname": "TempHum-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7012",
                          "-modbusaddr": "22",
                          "-n2pointtype": "ADF",
                          "-n2address": "43",
                          "-bacoid": "29587",
                          "-modify": "Read/Write",
                          "-IPdefault": "50",
                          "-IPmin": "20",
                          "-IPmax": "80",
                          "-IPunits": "%RH",
                          "-SImin": "20",
                          "-SImax": "80",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Temperature/Humidity (Return) Control Enable425",
                      "name": "Temperature/Humidity (Return) Control Enable",
                      "children": {
                        "id": "Temperature/Humidity (Return) Control Enable426",
                        "name": "Temperature/Humidity (Return) Control Enable",
                        "data": {
                          "-shortname": "TempHumCtrl-En",
                          "-pointtype": "MV",
                          "-attributeid": "7011",
                          "-modbusaddr": "97",
                          "-n2pointtype": "ADI",
                          "-n2address": "32",
                          "-bacoid": "29586",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Humidity426",
                      "name": "Operational Space Humidity",
                      "children": {
                        "id": "Operational Space Humidity427",
                        "name": "Operational Space Humidity",
                        "data": {
                          "-shortname": "OprSH",
                          "-pointtype": "AV",
                          "-attributeid": "7017",
                          "-modbusaddr": "137",
                          "-n2pointtype": "AI",
                          "-n2address": "32",
                          "-bacoid": "29531",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "CV Occupied Cooling Setpoint427",
                      "name": "CV Occupied Cooling Setpoint",
                      "children": {
                        "id": "CV Occupied Cooling Setpoint428",
                        "name": "CV Occupied Cooling Setpoint",
                        "data": {
                          "-shortname": "ClgOcc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7033",
                          "-modbusaddr": "29",
                          "-n2pointtype": "ADF",
                          "-n2address": "51",
                          "-bacoid": "29608",
                          "-modify": "Read/Write",
                          "-IPdefault": "72",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "CV Operating Cooling Setpoint428",
                      "name": "CV Operating Cooling Setpoint",
                      "children": {
                        "id": "CV Operating Cooling Setpoint429",
                        "name": "CV Operating Cooling Setpoint",
                        "data": {
                          "-shortname": "OprCVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7035",
                          "-modbusaddr": "161",
                          "-n2pointtype": "ADF",
                          "-n2address": "53",
                          "-bacoid": "29610",
                          "-modify": "Read Only",
                          "-IPdefault": "72",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Temperature / Humidity Value per Degree Offset429",
                      "name": "Temperature / Humidity Value per Degree Offset",
                      "children": {
                        "id": "Temperature / Humidity Value per Degree Offset430",
                        "name": "Temperature / Humidity Value per Degree Offset",
                        "data": {
                          "-shortname": "TempHumValPerDegOff",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "24",
                          "-n2pointtype": "ADF",
                          "-n2address": "45",
                          "-bacoid": "29589",
                          "-modify": "Read/Write",
                          "-IPdefault": "5",
                          "-IPmin": "1",
                          "-IPmax": "10",
                          "-IPunits": "%RH",
                          "-SImin": "1",
                          "-SImax": "10",
                          "-SIunits": "%RH"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Heating430",
              "name": "Heating",
              "children": [
                {
                  "id": "Setup431",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Heating Mode Enabled For Operation432",
                      "name": "Heating Mode Enabled For Operation",
                      "children": {
                        "id": "Heating Mode Enabled For Operation433",
                        "name": "Heating Mode Enabled For Operation",
                        "data": {
                          "-shortname": "Htg-En",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "105",
                          "-n2pointtype": "ADI",
                          "-n2address": "64",
                          "-bacoid": "29707",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Number of Heating Stages Installed433",
                      "name": "Number of Heating Stages Installed",
                      "children": {
                        "id": "Number of Heating Stages Installed434",
                        "name": "Number of Heating Stages Installed",
                        "data": {
                          "-shortname": "#HtgStgs",
                          "-pointtype": "AV",
                          "-attributeid": "7000",
                          "-modbusaddr": "430",
                          "-n2pointtype": "ADI",
                          "-n2address": "141",
                          "-bacoid": "29731",
                          "-modify": "Read/Write",
                          "-IPdefault": "0",
                          "-IPmin": "0",
                          "-IPmax": "3",
                          "-SImin": "0",
                          "-SImax": "3"
                        }
                      }
                    },
                    {
                      "id": "Heating Control Type434",
                      "name": "Heating Control Type",
                      "children": {
                        "id": "Heating Control Type435",
                        "name": "Heating Control Type",
                        "data": {
                          "-shortname": "Htg-Type",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-bacoid": "29501",
                          "-modify": "Read/Write",
                          "-enumset": "Staged/Proportional"
                        }
                      }
                    },
                    {
                      "id": "CV Occupied Heating Setpoint435",
                      "name": "CV Occupied Heating Setpoint",
                      "children": {
                        "id": "CV Occupied Heating Setpoint436",
                        "name": "CV Occupied Heating Setpoint",
                        "data": {
                          "-shortname": "CVHtgOcc-SP",
                          "-pointtype": "AV",
                          "-attributeid": "7023",
                          "-modbusaddr": "42",
                          "-n2pointtype": "ADF",
                          "-n2address": "122",
                          "-bacoid": "29728",
                          "-modify": "Read/Write",
                          "-IPdefault": "68",
                          "-IPmin": "46",
                          "-IPmax": "99",
                          "-IPunits": "?F",
                          "-SImin": "8",
                          "-SImax": "37",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "CV Unoccupied Heating Setpoint436",
                      "name": "CV Unoccupied Heating Setpoint",
                      "children": {
                        "id": "CV Unoccupied Heating Setpoint437",
                        "name": "CV Unoccupied Heating Setpoint",
                        "data": {
                          "-shortname": "CVHtgUnocc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7024",
                          "-modbusaddr": "43",
                          "-n2pointtype": "ADF",
                          "-n2address": "123",
                          "-bacoid": "29729",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Heating Adaptive Tuning Enable437",
                      "name": "Heating Adaptive Tuning Enable",
                      "children": {
                        "id": "Heating Adaptive Tuning Enable438",
                        "name": "Heating Adaptive Tuning Enable",
                        "data": {
                          "-shortname": "HtgAdapTunEn",
                          "-pointtype": "MV",
                          "-attributeid": "7041",
                          "-modbusaddr": "114",
                          "-n2pointtype": "ADI",
                          "-n2address": "78",
                          "-bacoid": "29881",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "SAT Air Temp Limit for Heating Enabled438",
                      "name": "SAT Air Temp Limit for Heating Enabled",
                      "children": {
                        "id": "SAT Air Temp Limit for Heating Enabled439",
                        "name": "SAT Air Temp Limit for Heating Enabled",
                        "data": {
                          "-shortname": "SATHtgLimit-En",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "106",
                          "-n2pointtype": "ADI",
                          "-n2address": "66",
                          "-bacoid": "29709",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "SAT Air Temp Limit For Heating Setpoint439",
                      "name": "SAT Air Temp Limit For Heating Setpoint",
                      "children": {
                        "id": "SAT Air Temp Limit For Heating Setpoint440",
                        "name": "SAT Air Temp Limit For Heating Setpoint",
                        "data": {
                          "-shortname": "SATHtgLimit-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "37",
                          "-n2pointtype": "ADF",
                          "-n2address": "116",
                          "-bacoid": "29710",
                          "-modify": "Read/Write",
                          "-IPdefault": "140",
                          "-IPmin": "100",
                          "-IPmax": "180",
                          "-IPunits": "?F",
                          "-SImin": "38",
                          "-SImax": "82",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Temp Heating Cutout Setpoint440",
                      "name": "Outdoor Air Temp Heating Cutout Setpoint",
                      "children": {
                        "id": "Outdoor Air Temp Heating Cutout Setpoint441",
                        "name": "Outdoor Air Temp Heating Cutout Setpoint",
                        "data": {
                          "-shortname": "HtgOATCutout-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "38",
                          "-n2pointtype": "ADF",
                          "-n2address": "117",
                          "-bacoid": "29711",
                          "-modify": "Read/Write",
                          "-IPdefault": "75",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "?F",
                          "-SImin": "-18",
                          "-SImax": "38",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Number of Gas Valves Installed441",
                      "name": "Number of Gas Valves Installed",
                      "children": {
                        "id": "Number of Gas Valves Installed442",
                        "name": "Number of Gas Valves Installed",
                        "data": {
                          "-shortname": "#GasVlvs",
                          "-pointtype": "AV",
                          "-attributeid": "7039",
                          "-modify": "Read/Write",
                          "-IPdefault": "0",
                          "-IPmin": "0",
                          "-IPmax": "3",
                          "-SImin": "0",
                          "-SImax": "3"
                        }
                      }
                    },
                    {
                      "id": "Number of Limit Switches442",
                      "name": "Number of Limit Switches",
                      "children": {
                        "id": "Number of Limit Switches443",
                        "name": "Number of Limit Switches",
                        "data": {
                          "-shortname": "#LimSwtchs",
                          "-pointtype": "AV",
                          "-attributeid": "7042",
                          "-modbusaddr": "47",
                          "-n2pointtype": "ADF",
                          "-n2address": "128",
                          "-modify": "Read Only"
                        }
                      }
                    },
                    {
                      "id": "Low Limit Enable443",
                      "name": "Low Limit Enable",
                      "children": {
                        "id": "Low Limit Enable444",
                        "name": "Low Limit Enable",
                        "data": {
                          "-shortname": "LL_Enable",
                          "-pointtype": "MV",
                          "-attributeid": "7052",
                          "-modify": "Read/Write",
                          "-enumset": "Disable/Enable"
                        }
                      }
                    },
                    {
                      "id": "Low Limit Upper SAT Setpoint444",
                      "name": "Low Limit Upper SAT Setpoint",
                      "children": {
                        "id": "Low Limit Upper SAT Setpoint445",
                        "name": "Low Limit Upper SAT Setpoint",
                        "data": {
                          "-shortname": "LL_UpSAT_SP",
                          "-pointtype": "AV",
                          "-attributeid": "7053",
                          "-modify": "Read/Write",
                          "-IPdefault": "80",
                          "-IPmin": "65",
                          "-IPmax": "85",
                          "-IPunits": "?F",
                          "-SImin": "18",
                          "-SImax": "30",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Low Limit Lower SAT Setpoint445",
                      "name": "Low Limit Lower SAT Setpoint",
                      "children": {
                        "id": "Low Limit Lower SAT Setpoint446",
                        "name": "Low Limit Lower SAT Setpoint",
                        "data": {
                          "-shortname": "LL_LowSAT_SP",
                          "-pointtype": "AV",
                          "-attributeid": "7054",
                          "-modify": "Read/Write",
                          "-IPdefault": "65",
                          "-IPmin": "60",
                          "-IPmax": "80",
                          "-IPunits": "?F",
                          "-SImin": "15",
                          "-SImax": "27",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Heating Manual Tuning446",
                      "name": "Heating Manual Tuning",
                      "children": {
                        "id": "Heating Manual Tuning447",
                        "name": "Heating Manual Tuning",
                        "data": {
                          "-shortname": "HtgManualTune",
                          "-pointtype": "MV",
                          "-attributeid": "7040",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service447",
                  "name": "Service",
                  "children": [
                    {
                      "id": "Staged Heating Command448",
                      "name": "Staged Heating Command",
                      "children": {
                        "id": "Staged Heating Command449",
                        "name": "Staged Heating Command",
                        "data": {
                          "-shortname": "StgHtgCmd",
                          "-pointtype": "AV",
                          "-attributeid": "7045",
                          "-modbusaddr": "264",
                          "-n2pointtype": "ADF",
                          "-n2address": "166",
                          "-bacoid": "29923",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "CV Operating Heating Setpoint449",
                      "name": "CV Operating Heating Setpoint",
                      "children": {
                        "id": "CV Operating Heating Setpoint450",
                        "name": "CV Operating Heating Setpoint",
                        "data": {
                          "-shortname": "CVOprHtg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7025",
                          "-modbusaddr": "251",
                          "-n2pointtype": "ADF",
                          "-n2address": "124",
                          "-bacoid": "29730",
                          "-modify": "Read Only",
                          "-IPdefault": "68",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Heating Status450",
                      "name": "Heating Status",
                      "children": {
                        "id": "Heating Status451",
                        "name": "Heating Status",
                        "data": {
                          "-shortname": "Htg-S",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "347",
                          "-n2pointtype": "ADI",
                          "-n2address": "65",
                          "-bacoid": "29708",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Defrost/SAT Tempering/Morning Warmup/Thermostat Heating/Unoccupied Heating/Occupied Heating/Off-Disabled/Off-OAT Lockout/Off-SAT Limit/Off-Waiting For Changeover Delay/Comfort Ventilation"
                        }
                      }
                    },
                    {
                      "id": "Operational Outdoor Air Temperature451",
                      "name": "Operational Outdoor Air Temperature",
                      "children": {
                        "id": "Operational Outdoor Air Temperature452",
                        "name": "Operational Outdoor Air Temperature",
                        "data": {
                          "-shortname": "OprOAT",
                          "-pointtype": "AV",
                          "-attributeid": "7000",
                          "-modbusaddr": "153",
                          "-n2pointtype": "ADF",
                          "-n2address": "23",
                          "-bacoid": "29541",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Temperature452",
                      "name": "Operational Space Temperature",
                      "children": {
                        "id": "Operational Space Temperature453",
                        "name": "Operational Space Temperature",
                        "data": {
                          "-shortname": "OprST",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "135",
                          "-n2pointtype": "AI",
                          "-n2address": "31",
                          "-bacoid": "29522",
                          "-modify": "Read Only",
                          "-IPdefault": "70",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Return Air Temperature453",
                      "name": "Return Air Temperature",
                      "children": {
                        "id": "Return Air Temperature454",
                        "name": "Return Air Temperature",
                        "data": {
                          "-shortname": "RAT",
                          "-pointtype": "AV",
                          "-attributeid": "7038",
                          "-modbusaddr": "139",
                          "-n2pointtype": "AI",
                          "-n2address": "2",
                          "-bacoid": "29764",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "W1 - Thermostat454",
                      "name": "W1 - Thermostat",
                      "children": {
                        "id": "W1 - Thermostat455",
                        "name": "W1 - Thermostat",
                        "data": {
                          "-shortname": "W1-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7004",
                          "-modbusaddr": "285",
                          "-n2pointtype": "BI",
                          "-n2address": "5",
                          "-bacoid": "29508",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "W2 - Thermostat455",
                      "name": "W2 - Thermostat",
                      "children": {
                        "id": "W2 - Thermostat456",
                        "name": "W2 - Thermostat",
                        "data": {
                          "-shortname": "W2-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7005",
                          "-modbusaddr": "286",
                          "-n2pointtype": "BI",
                          "-n2address": "6",
                          "-bacoid": "29509",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "W3 - Thermostat456",
                      "name": "W3 - Thermostat",
                      "children": {
                        "id": "W3 - Thermostat457",
                        "name": "W3 - Thermostat",
                        "data": {
                          "-shortname": "W3-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-modbusaddr": "287",
                          "-n2pointtype": "BI",
                          "-n2address": "7",
                          "-bacoid": "29510",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "G - Thermostat457",
                      "name": "G - Thermostat",
                      "children": {
                        "id": "G - Thermostat458",
                        "name": "G - Thermostat",
                        "data": {
                          "-shortname": "G-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "288",
                          "-n2pointtype": "BI",
                          "-n2address": "8",
                          "-bacoid": "29511",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 1 Status458",
                      "name": "Heating Stage 1 Status"
                    },
                    {
                      "id": "Heating Stage Command 1458",
                      "name": "Heating Stage Command 1"
                    },
                    {
                      "id": "Heating Stage 1 Min On Time Remaining458",
                      "name": "Heating Stage 1 Min On Time Remaining",
                      "children": {
                        "id": "Heating Stage 1 Min On Time Remaining459",
                        "name": "Heating Stage 1 Min On Time Remaining",
                        "data": {
                          "-shortname": "H1OnTmr",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modify": "Read Only",
                          "-IPdefault": "180",
                          "-IPunits": "seconds",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 1 Anti-Short Cycle Delay Time Remaining459",
                      "name": "Heating Stage 1 Anti-Short Cycle Delay Time Remaining",
                      "children": {
                        "id": "Heating Stage 1 Anti-Short Cycle Delay Time Remaining460",
                        "name": "Heating Stage 1 Anti-Short Cycle Delay Time Remaining",
                        "data": {
                          "-shortname": "H1ASCDTmr",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modify": "Read Only",
                          "-IPdefault": "300",
                          "-IPunits": "seconds",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 1 Accumulated Runtime460",
                      "name": "Heating Stage 1 Accumulated Runtime"
                    },
                    {
                      "id": "Heating Stage Command 2460",
                      "name": "Heating Stage Command 2"
                    },
                    {
                      "id": "Heating Stage 2 Status460",
                      "name": "Heating Stage 2 Status"
                    },
                    {
                      "id": "Heating Stage 2 Min On Time Remaining460",
                      "name": "Heating Stage 2 Min On Time Remaining",
                      "children": {
                        "id": "Heating Stage 2 Min On Time Remaining461",
                        "name": "Heating Stage 2 Min On Time Remaining",
                        "data": {
                          "-shortname": "H2OnTmr",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modify": "Read Only",
                          "-IPdefault": "180",
                          "-IPunits": "seconds",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 2 Anti-Short Cycle Delay Time Remaining461",
                      "name": "Heating Stage 2 Anti-Short Cycle Delay Time Remaining",
                      "children": {
                        "id": "Heating Stage 2 Anti-Short Cycle Delay Time Remaining462",
                        "name": "Heating Stage 2 Anti-Short Cycle Delay Time Remaining",
                        "data": {
                          "-shortname": "H2ASCDTmr",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modify": "Read Only",
                          "-IPdefault": "300",
                          "-IPunits": "seconds",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 2 Accumulated Runtime462",
                      "name": "Heating Stage 2 Accumulated Runtime"
                    },
                    {
                      "id": "Heating Stage Command 3462",
                      "name": "Heating Stage Command 3"
                    },
                    {
                      "id": "Heating Stage 3 Status462",
                      "name": "Heating Stage 3 Status"
                    },
                    {
                      "id": "Heating Stage 3 Min On Time Remaining462",
                      "name": "Heating Stage 3 Min On Time Remaining",
                      "children": {
                        "id": "Heating Stage 3 Min On Time Remaining463",
                        "name": "Heating Stage 3 Min On Time Remaining",
                        "data": {
                          "-shortname": "H3OnTmr",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modify": "Read Only",
                          "-IPdefault": "180",
                          "-IPunits": "seconds",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 3 Anti-Short Cycle Delay Time Remaining463",
                      "name": "Heating Stage 3 Anti-Short Cycle Delay Time Remaining",
                      "children": {
                        "id": "Heating Stage 3 Anti-Short Cycle Delay Time Remaining464",
                        "name": "Heating Stage 3 Anti-Short Cycle Delay Time Remaining",
                        "data": {
                          "-shortname": "H3ASCDTmr",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modify": "Read Only",
                          "-IPdefault": "300",
                          "-IPunits": "seconds",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage 3 Accumulated Runtime464",
                      "name": "Heating Stage 3 Accumulated Runtime"
                    }
                  ]
                },
                {
                  "id": "Safeties464",
                  "name": "Safeties",
                  "children": [
                    {
                      "id": "Heat Limit1 Switch465",
                      "name": "Heat Limit1 Switch",
                      "children": {
                        "id": "Heat Limit1 Switch466",
                        "name": "Heat Limit1 Switch",
                        "data": {
                          "-shortname": "Limit",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "352",
                          "-n2pointtype": "BI",
                          "-n2address": "33",
                          "-bacoid": "29716",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit1 Switch Lockout466",
                      "name": "Heat Limit1 Switch Lockout",
                      "children": {
                        "id": "Heat Limit1 Switch Lockout467",
                        "name": "Heat Limit1 Switch Lockout",
                        "data": {
                          "-shortname": "LimitLO",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "353",
                          "-n2pointtype": "ADI",
                          "-n2address": "68",
                          "-bacoid": "29717",
                          "-modify": "Read Only",
                          "-IPdefault": "Normal",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit2 Switch467",
                      "name": "Heat Limit2 Switch",
                      "children": {
                        "id": "Heat Limit2 Switch468",
                        "name": "Heat Limit2 Switch",
                        "data": {
                          "-shortname": "Lim2",
                          "-pointtype": "MV",
                          "-attributeid": "7011",
                          "-modbusaddr": "354",
                          "-n2pointtype": "BI",
                          "-n2address": "34",
                          "-bacoid": "29718",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit2 Switch Lockout468",
                      "name": "Heat Limit2 Switch Lockout",
                      "children": {
                        "id": "Heat Limit2 Switch Lockout469",
                        "name": "Heat Limit2 Switch Lockout",
                        "data": {
                          "-shortname": "Lim2LO",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "355",
                          "-n2pointtype": "ADI",
                          "-n2address": "69",
                          "-bacoid": "29719",
                          "-modify": "Read Only",
                          "-IPdefault": "Normal",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit3 Switch469",
                      "name": "Heat Limit3 Switch",
                      "children": {
                        "id": "Heat Limit3 Switch470",
                        "name": "Heat Limit3 Switch",
                        "data": {
                          "-shortname": "Lim3",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "356",
                          "-n2pointtype": "BI",
                          "-n2address": "35",
                          "-bacoid": "29720",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit3 Switch Lockout470",
                      "name": "Heat Limit3 Switch Lockout",
                      "children": {
                        "id": "Heat Limit3 Switch Lockout471",
                        "name": "Heat Limit3 Switch Lockout",
                        "data": {
                          "-shortname": "Lim3LO",
                          "-pointtype": "MV",
                          "-attributeid": "7014",
                          "-modbusaddr": "357",
                          "-n2pointtype": "ADI",
                          "-n2address": "70",
                          "-bacoid": "29721",
                          "-modify": "Read Only",
                          "-IPdefault": "Normal",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    },
                    {
                      "id": "Gas Valve1 Input471",
                      "name": "Gas Valve1 Input",
                      "children": {
                        "id": "Gas Valve1 Input472",
                        "name": "Gas Valve1 Input",
                        "data": {
                          "-shortname": "MV",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-modbusaddr": "349",
                          "-n2pointtype": "BI",
                          "-n2address": "30",
                          "-bacoid": "29713",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Gas Valve2 Input472",
                      "name": "Gas Valve2 Input",
                      "children": {
                        "id": "Gas Valve2 Input473",
                        "name": "Gas Valve2 Input",
                        "data": {
                          "-shortname": "GV2",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "350",
                          "-n2pointtype": "BI",
                          "-n2address": "31",
                          "-bacoid": "29714",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Gas Valve3 Input473",
                      "name": "Gas Valve3 Input",
                      "children": {
                        "id": "Gas Valve3 Input474",
                        "name": "Gas Valve3 Input",
                        "data": {
                          "-shortname": "GV3",
                          "-pointtype": "MV",
                          "-attributeid": "7008",
                          "-modbusaddr": "351",
                          "-n2pointtype": "BI",
                          "-n2address": "32",
                          "-bacoid": "29715",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Proportional474",
                  "name": "Proportional",
                  "children": [
                    {
                      "id": "Setup475",
                      "name": "Setup",
                      "children": [
                        {
                          "id": "Hydronic Heating Stage #1 Supply Air Setpoint476",
                          "name": "Hydronic Heating Stage #1 Supply Air Setpoint",
                          "children": {
                            "id": "Hydronic Heating Stage #1 Supply Air Setpoint477",
                            "name": "Hydronic Heating Stage #1 Supply Air Setpoint",
                            "data": {
                              "-shortname": "HydH1SA-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7002",
                              "-modbusaddr": "51",
                              "-n2pointtype": "ADF",
                              "-n2address": "132",
                              "-bacoid": "29743",
                              "-modify": "Read/Write",
                              "-IPdefault": "120",
                              "-IPmin": "80",
                              "-IPmax": "180",
                              "-IPunits": "?F",
                              "-SImin": "27",
                              "-SImax": "82",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Hydronic Heating Stage #2 Supply Air Setpoint477",
                          "name": "Hydronic Heating Stage #2 Supply Air Setpoint",
                          "children": {
                            "id": "Hydronic Heating Stage #2 Supply Air Setpoint478",
                            "name": "Hydronic Heating Stage #2 Supply Air Setpoint",
                            "data": {
                              "-shortname": "HydH2SA-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7003",
                              "-modbusaddr": "52",
                              "-n2pointtype": "ADF",
                              "-n2address": "133",
                              "-bacoid": "29744",
                              "-modify": "Read/Write",
                              "-IPdefault": "150",
                              "-IPmin": "80",
                              "-IPmax": "180",
                              "-IPunits": "?F",
                              "-SImin": "27",
                              "-SImax": "82",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Hydronic Heat SAT Tempering Enabled478",
                          "name": "Hydronic Heat SAT Tempering Enabled",
                          "children": {
                            "id": "Hydronic Heat SAT Tempering Enabled479",
                            "name": "Hydronic Heat SAT Tempering Enabled",
                            "data": {
                              "-shortname": "SATTempHydHt-En",
                              "-pointtype": "MV",
                              "-attributeid": "7004",
                              "-modbusaddr": "116",
                              "-n2pointtype": "ADI",
                              "-n2address": "80",
                              "-bacoid": "29745",
                              "-modify": "Read/Write",
                              "-IPdefault": "No",
                              "-enumset": "No/Yes"
                            }
                          }
                        },
                        {
                          "id": "Hydronic Heat SAT Tempering Setpoint479",
                          "name": "Hydronic Heat SAT Tempering Setpoint",
                          "children": {
                            "id": "Hydronic Heat SAT Tempering Setpoint480",
                            "name": "Hydronic Heat SAT Tempering Setpoint",
                            "data": {
                              "-shortname": "SATTempHydHt-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7005",
                              "-modbusaddr": "53",
                              "-n2pointtype": "ADF",
                              "-n2address": "134",
                              "-bacoid": "29746",
                              "-modify": "Read/Write",
                              "-IPdefault": "40",
                              "-IPmin": "40",
                              "-IPmax": "60",
                              "-IPunits": "?F",
                              "-SImin": "4",
                              "-SImax": "15",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Hydronic Heat Valve Reverse Acting480",
                          "name": "Hydronic Heat Valve Reverse Acting",
                          "children": {
                            "id": "Hydronic Heat Valve Reverse Acting481",
                            "name": "Hydronic Heat Valve Reverse Acting",
                            "data": {
                              "-shortname": "HydReverse",
                              "-pointtype": "MV",
                              "-attributeid": "7001",
                              "-modbusaddr": "115",
                              "-n2pointtype": "ADI",
                              "-n2address": "79",
                              "-bacoid": "29742",
                              "-modify": "Read/Write",
                              "-IPdefault": "No",
                              "-enumset": "No/Yes"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "Service481",
                      "name": "Service",
                      "children": [
                        {
                          "id": "CV Occupied Heating Setpoint482",
                          "name": "CV Occupied Heating Setpoint",
                          "children": {
                            "id": "CV Occupied Heating Setpoint483",
                            "name": "CV Occupied Heating Setpoint",
                            "data": {
                              "-shortname": "CVHtgOcc-SP",
                              "-pointtype": "AV",
                              "-attributeid": "7023",
                              "-modbusaddr": "42",
                              "-n2pointtype": "ADF",
                              "-n2address": "122",
                              "-bacoid": "29728",
                              "-modify": "Read/Write",
                              "-IPdefault": "68",
                              "-IPmin": "46",
                              "-IPmax": "99",
                              "-IPunits": "?F",
                              "-SImin": "8",
                              "-SImax": "37",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "CV Unoccupied Heating Setpoint483",
                          "name": "CV Unoccupied Heating Setpoint",
                          "children": {
                            "id": "CV Unoccupied Heating Setpoint484",
                            "name": "CV Unoccupied Heating Setpoint",
                            "data": {
                              "-shortname": "CVHtgUnocc-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7024",
                              "-modbusaddr": "43",
                              "-n2pointtype": "ADF",
                              "-n2address": "123",
                              "-bacoid": "29729",
                              "-modify": "Read/Write",
                              "-IPdefault": "60",
                              "-IPmin": "45",
                              "-IPmax": "98",
                              "-IPunits": "?F",
                              "-SImin": "7",
                              "-SImax": "36",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "CV Operating Heating Setpoint484",
                          "name": "CV Operating Heating Setpoint",
                          "children": {
                            "id": "CV Operating Heating Setpoint485",
                            "name": "CV Operating Heating Setpoint",
                            "data": {
                              "-shortname": "CVOprHtg-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7025",
                              "-modbusaddr": "251",
                              "-n2pointtype": "ADF",
                              "-n2address": "124",
                              "-bacoid": "29730",
                              "-modify": "Read Only",
                              "-IPdefault": "68",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "VAV Operating Heating Setpoint485",
                          "name": "VAV Operating Heating Setpoint",
                          "children": {
                            "id": "VAV Operating Heating Setpoint486",
                            "name": "VAV Operating Heating Setpoint",
                            "data": {
                              "-shortname": "VAVOprHtg-Sp",
                              "-pointtype": "AV",
                              "-attributeid": "7019",
                              "-modbusaddr": "250",
                              "-n2pointtype": "ADF",
                              "-n2address": "120",
                              "-bacoid": "29726",
                              "-modify": "Read Only",
                              "-IPdefault": "68",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Operational Space Temperature486",
                          "name": "Operational Space Temperature",
                          "children": {
                            "id": "Operational Space Temperature487",
                            "name": "Operational Space Temperature",
                            "data": {
                              "-shortname": "OprST",
                              "-pointtype": "AV",
                              "-attributeid": "7006",
                              "-modbusaddr": "135",
                              "-n2pointtype": "AI",
                              "-n2address": "31",
                              "-bacoid": "29522",
                              "-modify": "Read Only",
                              "-IPdefault": "70",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "Supply Air Temperature487",
                          "name": "Supply Air Temperature",
                          "children": {
                            "id": "Supply Air Temperature488",
                            "name": "Supply Air Temperature",
                            "data": {
                              "-shortname": "SAT",
                              "-pointtype": "AV",
                              "-attributeid": "7014",
                              "-modbusaddr": "158",
                              "-n2pointtype": "AI",
                              "-n2address": "3",
                              "-bacoid": "29564",
                              "-modify": "Read Only",
                              "-IPunits": "?F",
                              "-SIunits": "?C"
                            }
                          }
                        },
                        {
                          "id": "W1 - Thermostat488",
                          "name": "W1 - Thermostat",
                          "children": {
                            "id": "W1 - Thermostat489",
                            "name": "W1 - Thermostat",
                            "data": {
                              "-shortname": "W1-Tstat",
                              "-pointtype": "MV",
                              "-attributeid": "7004",
                              "-modbusaddr": "285",
                              "-n2pointtype": "BI",
                              "-n2address": "5",
                              "-bacoid": "29508",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "W2 - Thermostat489",
                          "name": "W2 - Thermostat",
                          "children": {
                            "id": "W2 - Thermostat490",
                            "name": "W2 - Thermostat",
                            "data": {
                              "-shortname": "W2-Tstat",
                              "-pointtype": "MV",
                              "-attributeid": "7005",
                              "-modbusaddr": "286",
                              "-n2pointtype": "BI",
                              "-n2address": "6",
                              "-bacoid": "29509",
                              "-modify": "Read Only",
                              "-enumset": "Off/On"
                            }
                          }
                        },
                        {
                          "id": "Hydronic Heat Valve % Command490",
                          "name": "Hydronic Heat Valve % Command",
                          "children": {
                            "id": "Hydronic Heat Valve % Command491",
                            "name": "Hydronic Heat Valve % Command",
                            "data": {
                              "-shortname": "HWV",
                              "-pointtype": "AV",
                              "-attributeid": "7000",
                              "-modbusaddr": "252",
                              "-n2pointtype": "AO",
                              "-n2address": "2",
                              "-bacoid": "29741",
                              "-modify": "Read Only",
                              "-IPunits": "%",
                              "-SIunits": "%"
                            }
                          }
                        },
                        {
                          "id": "Hydronic Heat Valve Reverse Acting491",
                          "name": "Hydronic Heat Valve Reverse Acting",
                          "children": {
                            "id": "Hydronic Heat Valve Reverse Acting492",
                            "name": "Hydronic Heat Valve Reverse Acting",
                            "data": {
                              "-shortname": "HydReverse",
                              "-pointtype": "MV",
                              "-attributeid": "7001",
                              "-modbusaddr": "115",
                              "-n2pointtype": "ADI",
                              "-n2address": "79",
                              "-bacoid": "29742",
                              "-modify": "Read/Write",
                              "-IPdefault": "No",
                              "-enumset": "No/Yes"
                            }
                          }
                        },
                        {
                          "id": "Hot Water Freeze Stat492",
                          "name": "Hot Water Freeze Stat",
                          "children": {
                            "id": "Hot Water Freeze Stat493",
                            "name": "Hot Water Freeze Stat",
                            "data": {
                              "-shortname": "FSHW",
                              "-pointtype": "MV",
                              "-attributeid": "7005",
                              "-modbusaddr": "348",
                              "-n2pointtype": "ADI",
                              "-n2address": "67",
                              "-bacoid": "29712",
                              "-modify": "Read Only",
                              "-enumset": "Normal/Alarm"
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "Indoor Fan493",
              "name": "Indoor Fan",
              "children": [
                {
                  "id": "Setup494",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Fan Control Type495",
                      "name": "Fan Control Type",
                      "children": {
                        "id": "Fan Control Type496",
                        "name": "Fan Control Type",
                        "data": {
                          "-shortname": "FanCtl-Type",
                          "-pointtype": "MV",
                          "-attributeid": "7005",
                          "-modbusaddr": "400",
                          "-n2pointtype": "ADI",
                          "-n2address": "119",
                          "-bacoid": "29555",
                          "-modify": "Read/Write",
                          "-IPdefault": "Single Speed",
                          "-enumset": "Single Speed/Not Used/Fixed Variable/Variable Speed"
                        }
                      }
                    },
                    {
                      "id": "Continuous Fan Operation in Occupied Mode496",
                      "name": "Continuous Fan Operation in Occupied Mode",
                      "children": {
                        "id": "Continuous Fan Operation in Occupied Mode497",
                        "name": "Continuous Fan Operation in Occupied Mode",
                        "data": {
                          "-shortname": "FanOnOcc",
                          "-pointtype": "MV",
                          "-attributeid": "7018",
                          "-modbusaddr": "91",
                          "-n2pointtype": "ADI",
                          "-n2address": "25",
                          "-bacoid": "29568",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "Yes/No"
                        }
                      }
                    },
                    {
                      "id": "Fan On Delay for Heat497",
                      "name": "Fan On Delay for Heat",
                      "children": {
                        "id": "Fan On Delay for Heat498",
                        "name": "Fan On Delay for Heat",
                        "data": {
                          "-shortname": "FanOnDlyHeat",
                          "-pointtype": "AV",
                          "-attributeid": "7010",
                          "-modbusaddr": "416",
                          "-n2pointtype": "ADI",
                          "-n2address": "132",
                          "-bacoid": "29560",
                          "-modify": "Read/Write",
                          "-IPdefault": "30",
                          "-IPmin": "0",
                          "-IPmax": "30",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "30",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Fan Off Delay for Heat498",
                      "name": "Fan Off Delay for Heat",
                      "children": {
                        "id": "Fan Off Delay for Heat499",
                        "name": "Fan Off Delay for Heat",
                        "data": {
                          "-shortname": "FanOffDlyHeat",
                          "-pointtype": "AV",
                          "-attributeid": "7011",
                          "-modbusaddr": "417",
                          "-n2pointtype": "ADI",
                          "-n2address": "133",
                          "-bacoid": "29561",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "0",
                          "-IPmax": "255",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "255",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Turn Off Continuous Fan Operation When Starting Heat499",
                      "name": "Turn Off Continuous Fan Operation When Starting Heat",
                      "children": {
                        "id": "Turn Off Continuous Fan Operation When Starting Heat500",
                        "name": "Turn Off Continuous Fan Operation When Starting Heat",
                        "data": {
                          "-shortname": "FanOffStartHeat",
                          "-pointtype": "MV",
                          "-attributeid": "7019",
                          "-modbusaddr": "92",
                          "-n2pointtype": "ADI",
                          "-n2address": "26",
                          "-bacoid": "29569",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "Yes/No"
                        }
                      }
                    },
                    {
                      "id": "Fan On Delay for Cool500",
                      "name": "Fan On Delay for Cool",
                      "children": {
                        "id": "Fan On Delay for Cool501",
                        "name": "Fan On Delay for Cool",
                        "data": {
                          "-shortname": "FanOnDlyCool",
                          "-pointtype": "AV",
                          "-attributeid": "7008",
                          "-modbusaddr": "90",
                          "-n2pointtype": "ADI",
                          "-n2address": "24",
                          "-bacoid": "29558",
                          "-modify": "Read/Write",
                          "-IPdefault": "0",
                          "-IPmin": "0",
                          "-IPmax": "30",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "30",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Fan Off Delay for Cool501",
                      "name": "Fan Off Delay for Cool",
                      "children": {
                        "id": "Fan Off Delay for Cool502",
                        "name": "Fan Off Delay for Cool",
                        "data": {
                          "-shortname": "FanOffDlyCool",
                          "-pointtype": "AV",
                          "-attributeid": "7009",
                          "-modbusaddr": "415",
                          "-n2pointtype": "ADI",
                          "-n2address": "131",
                          "-bacoid": "29559",
                          "-modify": "Read/Write",
                          "-IPdefault": "30",
                          "-IPmin": "0",
                          "-IPmax": "255",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "255",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Occupied: No Heat or Cool % Command502",
                      "name": "Occupied: No Heat or Cool % Command",
                      "children": {
                        "id": "Occupied: No Heat or Cool % Command503",
                        "name": "Occupied: No Heat or Cool % Command",
                        "data": {
                          "-shortname": "FanOnly-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7020",
                          "-modbusaddr": "12",
                          "-n2pointtype": "ADF",
                          "-n2address": "33",
                          "-bacoid": "29570",
                          "-modify": "Read/Write",
                          "-IPdefault": "50",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: One Stage of Cool % Command503",
                      "name": "Occupied: One Stage of Cool % Command",
                      "children": {
                        "id": "Occupied: One Stage of Cool % Command504",
                        "name": "Occupied: One Stage of Cool % Command",
                        "data": {
                          "-shortname": "1ClgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7021",
                          "-modbusaddr": "13",
                          "-n2pointtype": "ADF",
                          "-n2address": "34",
                          "-bacoid": "29571",
                          "-modify": "Read/Write",
                          "-IPdefault": "70",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: Two Stage of Cool % Command504",
                      "name": "Occupied: Two Stage of Cool % Command",
                      "children": {
                        "id": "Occupied: Two Stage of Cool % Command505",
                        "name": "Occupied: Two Stage of Cool % Command",
                        "data": {
                          "-shortname": "2ClgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7022",
                          "-modbusaddr": "14",
                          "-n2pointtype": "ADF",
                          "-n2address": "35",
                          "-bacoid": "29572",
                          "-modify": "Read/Write",
                          "-IPdefault": "80",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: Three Stage of Cool % Command505",
                      "name": "Occupied: Three Stage of Cool % Command",
                      "children": {
                        "id": "Occupied: Three Stage of Cool % Command506",
                        "name": "Occupied: Three Stage of Cool % Command",
                        "data": {
                          "-shortname": "3ClgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7027",
                          "-modbusaddr": "15",
                          "-n2pointtype": "ADF",
                          "-n2address": "36",
                          "-bacoid": "29819",
                          "-modify": "Read/Write",
                          "-IPdefault": "90",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: Four Stage of Cool % Command506",
                      "name": "Occupied: Four Stage of Cool % Command",
                      "children": {
                        "id": "Occupied: Four Stage of Cool % Command507",
                        "name": "Occupied: Four Stage of Cool % Command",
                        "data": {
                          "-shortname": "4ClgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7028",
                          "-modbusaddr": "16",
                          "-n2pointtype": "ADF",
                          "-n2address": "37",
                          "-bacoid": "29820",
                          "-modify": "Read/Write",
                          "-IPdefault": "100",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: One Stage of Heat % Command507",
                      "name": "Occupied: One Stage of Heat % Command",
                      "children": {
                        "id": "Occupied: One Stage of Heat % Command508",
                        "name": "Occupied: One Stage of Heat % Command",
                        "data": {
                          "-shortname": "1HtgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7023",
                          "-modbusaddr": "17",
                          "-n2pointtype": "ADF",
                          "-n2address": "38",
                          "-bacoid": "29573",
                          "-modify": "Read/Write",
                          "-IPdefault": "100",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: Two Stage of Heat % Command508",
                      "name": "Occupied: Two Stage of Heat % Command",
                      "children": {
                        "id": "Occupied: Two Stage of Heat % Command509",
                        "name": "Occupied: Two Stage of Heat % Command",
                        "data": {
                          "-shortname": "2HtgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7024",
                          "-modbusaddr": "18",
                          "-n2pointtype": "ADF",
                          "-n2address": "39",
                          "-bacoid": "29574",
                          "-modify": "Read/Write",
                          "-IPdefault": "100",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Occupied: Three Stage of Heat % Command509",
                      "name": "Occupied: Three Stage of Heat % Command",
                      "children": {
                        "id": "Occupied: Three Stage of Heat % Command510",
                        "name": "Occupied: Three Stage of Heat % Command",
                        "data": {
                          "-shortname": "3HtgStg-%Cmd",
                          "-pointtype": "AV",
                          "-attributeid": "7029",
                          "-modbusaddr": "19",
                          "-n2pointtype": "ADF",
                          "-n2address": "40",
                          "-bacoid": "29821",
                          "-modify": "Read/Write",
                          "-IPdefault": "100",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Fan Pre-run Time For Cooling510",
                      "name": "Low Ambient Fan Pre-run Time For Cooling",
                      "children": {
                        "id": "Low Ambient Fan Pre-run Time For Cooling511",
                        "name": "Low Ambient Fan Pre-run Time For Cooling",
                        "data": {
                          "-shortname": "LowAmbFanPrerunCool",
                          "-pointtype": "AV",
                          "-attributeid": "7005",
                          "-modbusaddr": "418",
                          "-n2pointtype": "ADI",
                          "-n2address": "134",
                          "-bacoid": "29580",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "0",
                          "-IPmax": "255",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "255",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "Air Proving Switch Setup511",
                      "name": "Air Proving Switch Setup",
                      "children": {
                        "id": "Air Proving Switch Setup512",
                        "name": "Air Proving Switch Setup",
                        "data": {
                          "-shortname": "APSSetup",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-modbusaddr": "414",
                          "-n2pointtype": "ADI",
                          "-n2address": "130",
                          "-bacoid": "29556",
                          "-modify": "Read/Write",
                          "-IPdefault": "None",
                          "-enumset": "Constant Volume/Variable Volume/None"
                        }
                      }
                    },
                    {
                      "id": "Dirty Filter Switch512",
                      "name": "Dirty Filter Switch",
                      "children": {
                        "id": "Dirty Filter Switch513",
                        "name": "Dirty Filter Switch",
                        "data": {
                          "-shortname": "DFS",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "306",
                          "-n2pointtype": "BI",
                          "-n2address": "13",
                          "-bacoid": "29562",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service513",
                  "name": "Service",
                  "children": [
                    {
                      "id": "G - Thermostat514",
                      "name": "G - Thermostat",
                      "children": {
                        "id": "G - Thermostat515",
                        "name": "G - Thermostat",
                        "data": {
                          "-shortname": "G-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "288",
                          "-n2pointtype": "BI",
                          "-n2address": "8",
                          "-bacoid": "29511",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Fan Status515",
                      "name": "Fan Status",
                      "children": {
                        "id": "Fan Status516",
                        "name": "Fan Status",
                        "data": {
                          "-shortname": "Fan-S",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "302",
                          "-n2pointtype": "ADI",
                          "-n2address": "23",
                          "-bacoid": "29550",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Purge/On-Gas Valve or Limit Fault/On-Defrost/On-Thermostat Request/On-Fan Off Delay For Cool/On-Fan Off Delay For Heat/On-Continuous Fan Occupied Operation/On-Normal Command/Off-Exceeding Duct Pressure Shutdown SP/Off-Low Voltage/Off-Fan Overload Lockout/Off-Fan VFD Fault/Off-Hot Water Freeze Stat/Off-Air Proving Switch/Off-Minimum Off Delay/Off-Fan On Delay For Heat/Off-Fan Off Delay For Cool"
                        }
                      }
                    },
                    {
                      "id": "Fan Command516",
                      "name": "Fan Command",
                      "children": {
                        "id": "Fan Command517",
                        "name": "Fan Command",
                        "data": {
                          "-shortname": "Fan",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "307",
                          "-n2pointtype": "BO",
                          "-n2address": "2",
                          "-bacoid": "29563",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Fan Accumulated Runtime517",
                      "name": "Fan Accumulated Runtime",
                      "children": {
                        "id": "Fan Accumulated Runtime518",
                        "name": "Fan Accumulated Runtime",
                        "data": {
                          "-shortname": "Fan-RT",
                          "-pointtype": "AV",
                          "-attributeid": "7004",
                          "-modbusaddr": "9",
                          "-n2pointtype": "ADF",
                          "-n2address": "30",
                          "-bacoid": "29554",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "10000",
                          "-IPunits": "hours",
                          "-SImin": "0",
                          "-SImax": "10000",
                          "-SIunits": "hours"
                        }
                      }
                    },
                    {
                      "id": "Operating Fan Request518",
                      "name": "Operating Fan Request",
                      "children": {
                        "id": "Operating Fan Request519",
                        "name": "Operating Fan Request",
                        "data": {
                          "-shortname": "OprFanReq",
                          "-pointtype": "MV",
                          "-attributeid": "7021",
                          "-modbusaddr": "296",
                          "-n2pointtype": "ADI",
                          "-n2address": "14",
                          "-bacoid": "29534",
                          "-modify": "Read Only",
                          "-IPdefault": "Off",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Fan Request Source519",
                      "name": "Fan Request Source",
                      "children": {
                        "id": "Fan Request Source520",
                        "name": "Fan Request Source",
                        "data": {
                          "-shortname": "FanReqSrc",
                          "-pointtype": "MV",
                          "-attributeid": "7022",
                          "-modbusaddr": "297",
                          "-n2pointtype": "ADI",
                          "-n2address": "15",
                          "-bacoid": "29535",
                          "-modify": "Read Only",
                          "-IPdefault": "Unreliable",
                          "-enumset": "Unreliable/Local Input/Network Sensor/High Priority/BAS Override/Input Not Available"
                        }
                      }
                    },
                    {
                      "id": "Air Proving Switch520",
                      "name": "Air Proving Switch",
                      "children": {
                        "id": "Air Proving Switch521",
                        "name": "Air Proving Switch",
                        "data": {
                          "-shortname": "APS",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "305",
                          "-n2pointtype": "BI",
                          "-n2address": "12",
                          "-bacoid": "29557",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Fan Overload521",
                      "name": "Fan Overload",
                      "children": {
                        "id": "Fan Overload522",
                        "name": "Fan Overload",
                        "data": {
                          "-shortname": "FanOvrload",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "304",
                          "-n2pointtype": "BI",
                          "-n2address": "11",
                          "-bacoid": "29553",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Fan VFD Fault522",
                      "name": "Fan VFD Fault",
                      "children": {
                        "id": "Fan VFD Fault523",
                        "name": "Fan VFD Fault",
                        "data": {
                          "-shortname": "FanVFDFlt",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "303",
                          "-n2pointtype": "BI",
                          "-n2address": "10",
                          "-bacoid": "29552",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Economizer523",
              "name": "Economizer",
              "children": [
                {
                  "id": "Setup524",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Economizer Enabled For Operation525",
                      "name": "Economizer Enabled For Operation",
                      "children": {
                        "id": "Economizer Enabled For Operation526",
                        "name": "Economizer Enabled For Operation",
                        "data": {
                          "-shortname": "Econ-En",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "118",
                          "-n2pointtype": "ADI",
                          "-n2address": "84",
                          "-bacoid": "29747",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Economizer Minimum Position Setpoint526",
                      "name": "Economizer Minimum Position Setpoint",
                      "children": {
                        "id": "Economizer Minimum Position Setpoint527",
                        "name": "Economizer Minimum Position Setpoint",
                        "data": {
                          "-shortname": "Econ-MinPos",
                          "-pointtype": "AV",
                          "-attributeid": "7017",
                          "-modbusaddr": "77",
                          "-n2pointtype": "ADF",
                          "-n2address": "163",
                          "-bacoid": "29759",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Economizer Damper Minimum Position Low Speed Fan527",
                      "name": "Economizer Damper Minimum Position Low Speed Fan",
                      "children": {
                        "id": "Economizer Damper Minimum Position Low Speed Fan528",
                        "name": "Economizer Damper Minimum Position Low Speed Fan",
                        "data": {
                          "-shortname": "LowSpeedFan-MinPos",
                          "-pointtype": "AV",
                          "-attributeid": "7025",
                          "-modbusaddr": "54",
                          "-n2pointtype": "ADF",
                          "-n2address": "135",
                          "-bacoid": "29808",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Economizer Minimum Position528",
                      "name": "Low Ambient Economizer Minimum Position",
                      "children": {
                        "id": "Low Ambient Economizer Minimum Position529",
                        "name": "Low Ambient Economizer Minimum Position",
                        "data": {
                          "-shortname": "LowAmb-MinPos",
                          "-pointtype": "AV",
                          "-attributeid": "7009",
                          "-modbusaddr": "58",
                          "-n2pointtype": "ADF",
                          "-n2address": "139",
                          "-bacoid": "29756",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Low Ambient Economizer Setpoint529",
                      "name": "Low Ambient Economizer Setpoint",
                      "children": {
                        "id": "Low Ambient Economizer Setpoint530",
                        "name": "Low Ambient Economizer Setpoint",
                        "data": {
                          "-shortname": "LowAmb-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7008",
                          "-modbusaddr": "57",
                          "-n2pointtype": "ADF",
                          "-n2address": "138",
                          "-bacoid": "29755",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "60",
                          "-IPunits": "?F",
                          "-SImin": "-18",
                          "-SImax": "15",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Free Cooling Selection530",
                      "name": "Free Cooling Selection",
                      "children": {
                        "id": "Free Cooling Selection531",
                        "name": "Free Cooling Selection",
                        "data": {
                          "-shortname": "FreeClg-Sel",
                          "-pointtype": "MV",
                          "-attributeid": "7005",
                          "-modbusaddr": "119",
                          "-n2pointtype": "ADI",
                          "-n2address": "88",
                          "-bacoid": "29752",
                          "-modify": "Read/Write",
                          "-IPdefault": "Auto",
                          "-enumset": "Dry Bulb Temperature/Single Enthalpy/Dual Enthalpy/Auto"
                        }
                      }
                    },
                    {
                      "id": "Free Cooling Current Mode531",
                      "name": "Free Cooling Current Mode",
                      "children": {
                        "id": "Free Cooling Current Mode532",
                        "name": "Free Cooling Current Mode",
                        "data": {
                          "-shortname": "FreeClg-Mode",
                          "-pointtype": "MV",
                          "-attributeid": "7004",
                          "-modbusaddr": "371",
                          "-n2pointtype": "ADI",
                          "-n2address": "87",
                          "-bacoid": "29751",
                          "-modify": "Read Only",
                          "-IPdefault": "Dry Bulb Temperature",
                          "-enumset": "Dry Bulb Temperature/Single Enthalpy/Dual Enthalpy/Unreliable"
                        }
                      }
                    },
                    {
                      "id": "All Compressors Off in Free Cooling532",
                      "name": "All Compressors Off in Free Cooling",
                      "children": {
                        "id": "All Compressors Off in Free Cooling533",
                        "name": "All Compressors Off in Free Cooling",
                        "data": {
                          "-shortname": "AllCompOff-Econ",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "96",
                          "-n2pointtype": "ADI",
                          "-n2address": "31",
                          "-bacoid": "29584",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Economizer Outdoor Air Temp Enable Setpoint533",
                      "name": "Economizer Outdoor Air Temp Enable Setpoint",
                      "children": {
                        "id": "Economizer Outdoor Air Temp Enable Setpoint534",
                        "name": "Economizer Outdoor Air Temp Enable Setpoint",
                        "data": {
                          "-shortname": "EconOAT-SpEn",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "55",
                          "-n2pointtype": "ADF",
                          "-n2address": "136",
                          "-bacoid": "29753",
                          "-modify": "Read/Write",
                          "-IPdefault": "55",
                          "-IPmin": "40",
                          "-IPmax": "80",
                          "-IPunits": "?F",
                          "-SImin": "4",
                          "-SImax": "27",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Economizer Outdoor Air Enthalpy Setpoint534",
                      "name": "Economizer Outdoor Air Enthalpy Setpoint",
                      "children": {
                        "id": "Economizer Outdoor Air Enthalpy Setpoint535",
                        "name": "Economizer Outdoor Air Enthalpy Setpoint",
                        "data": {
                          "-shortname": "EconOAEnth-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7007",
                          "-modbusaddr": "56",
                          "-n2pointtype": "ADF",
                          "-n2address": "137",
                          "-bacoid": "29754",
                          "-modify": "Read/Write",
                          "-IPdefault": "27",
                          "-IPmin": "10",
                          "-IPmax": "50",
                          "-IPunits": "Btu/lb dry air",
                          "-SImin": "23",
                          "-SImax": "116",
                          "-SIunits": "J/kg"
                        }
                      }
                    },
                    {
                      "id": "Demand Ventilation Mode of Operation535",
                      "name": "Demand Ventilation Mode of Operation",
                      "children": {
                        "id": "Demand Ventilation Mode of Operation536",
                        "name": "Demand Ventilation Mode of Operation",
                        "data": {
                          "-shortname": "DVent-Mode",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "120",
                          "-n2pointtype": "ADI",
                          "-n2address": "93",
                          "-bacoid": "29765",
                          "-modify": "Read/Write",
                          "-IPdefault": "Disabled",
                          "-enumset": "Disabled/Controlled by IAQ/Diff between IAQ and OAQ"
                        }
                      }
                    },
                    {
                      "id": "Demand Ventilation Maximum Economizer Position536",
                      "name": "Demand Ventilation Maximum Economizer Position",
                      "children": {
                        "id": "Demand Ventilation Maximum Economizer Position537",
                        "name": "Demand Ventilation Maximum Economizer Position",
                        "data": {
                          "-shortname": "DVentMaxEconPos",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "60",
                          "-n2pointtype": "ADF",
                          "-n2address": "143",
                          "-bacoid": "29766",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Demand Ventilation Indoor Air Quality Setpoint537",
                      "name": "Demand Ventilation Indoor Air Quality Setpoint",
                      "children": {
                        "id": "Demand Ventilation Indoor Air Quality Setpoint538",
                        "name": "Demand Ventilation Indoor Air Quality Setpoint",
                        "data": {
                          "-shortname": "DVentIAQ-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "61",
                          "-n2pointtype": "ADF",
                          "-n2address": "144",
                          "-bacoid": "29767",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "5000",
                          "-IPunits": "ppm",
                          "-SImin": "0",
                          "-SImax": "5000",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Demand Ventilation Differential Setpoint538",
                      "name": "Demand Ventilation Differential Setpoint",
                      "children": {
                        "id": "Demand Ventilation Differential Setpoint539",
                        "name": "Demand Ventilation Differential Setpoint",
                        "data": {
                          "-shortname": "DVentDiff-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "62",
                          "-n2pointtype": "ADF",
                          "-n2address": "145",
                          "-bacoid": "29768",
                          "-modify": "Read/Write",
                          "-IPdefault": "600",
                          "-IPmin": "0",
                          "-IPmax": "5000",
                          "-IPunits": "ppm",
                          "-SImin": "0",
                          "-SImax": "5000",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Indoor Air Quality Sensor Range539",
                      "name": "Indoor Air Quality Sensor Range",
                      "children": {
                        "id": "Indoor Air Quality Sensor Range540",
                        "name": "Indoor Air Quality Sensor Range",
                        "data": {
                          "-shortname": "IAQRange",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "2",
                          "-n2pointtype": "ADF",
                          "-n2address": "5",
                          "-bacoid": "29529",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "5000",
                          "-IPunits": "ppm",
                          "-SImin": "0",
                          "-SImax": "5000",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Quality Sensor Range540",
                      "name": "Outdoor Air Quality Sensor Range",
                      "children": {
                        "id": "Outdoor Air Quality Sensor Range541",
                        "name": "Outdoor Air Quality Sensor Range",
                        "data": {
                          "-shortname": "OAQRange",
                          "-pointtype": "AV",
                          "-attributeid": "7012",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "5000",
                          "-IPunits": "ppm",
                          "-SImin": "0",
                          "-SImax": "5000",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Economizer Loading Enabled541",
                      "name": "Economizer Loading Enabled",
                      "children": {
                        "id": "Economizer Loading Enabled542",
                        "name": "Economizer Loading Enabled",
                        "data": {
                          "-shortname": "EconLoad-En",
                          "-pointtype": "MV",
                          "-attributeid": "7008",
                          "-modbusaddr": "95",
                          "-n2pointtype": "ADI",
                          "-n2address": "30",
                          "-bacoid": "29583",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Fresh Air Intake Setpoint542",
                      "name": "Fresh Air Intake Setpoint",
                      "children": {
                        "id": "Fresh Air Intake Setpoint543",
                        "name": "Fresh Air Intake Setpoint",
                        "data": {
                          "-shortname": "MOAFlow-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7000",
                          "-modbusaddr": "69",
                          "-n2pointtype": "ADF",
                          "-n2address": "154",
                          "-bacoid": "29795",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "50000",
                          "-IPunits": "cfm",
                          "-SImin": "0",
                          "-SImax": "25000",
                          "-SIunits": "L/s"
                        }
                      }
                    },
                    {
                      "id": "Fresh Air Intake Max Sensor Range543",
                      "name": "Fresh Air Intake Max Sensor Range",
                      "children": {
                        "id": "Fresh Air Intake Max Sensor Range544",
                        "name": "Fresh Air Intake Max Sensor Range",
                        "data": {
                          "-shortname": "MOA-Range",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "70",
                          "-n2pointtype": "ADF",
                          "-n2address": "156",
                          "-bacoid": "29797",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "50000",
                          "-IPunits": "cfm",
                          "-SImin": "0",
                          "-SImax": "25000",
                          "-SIunits": "L/s"
                        }
                      }
                    },
                    {
                      "id": "EconMech Setup544",
                      "name": "EconMech Setup",
                      "children": {
                        "id": "EconMech Setup545",
                        "name": "EconMech Setup",
                        "data": {
                          "-shortname": "EconMechStp",
                          "-pointtype": "MV",
                          "-attributeid": "7027",
                          "-modbusaddr": "409",
                          "-n2pointtype": "ADI",
                          "-n2address": "126",
                          "-bacoid": "29912",
                          "-modify": "Read/Write",
                          "-IPdefault": "Option B",
                          "-enumset": "Option A/Option B"
                        }
                      }
                    },
                    {
                      "id": "Economizer Fault Detection Enable545",
                      "name": "Economizer Fault Detection Enable",
                      "children": {
                        "id": "Economizer Fault Detection Enable546",
                        "name": "Economizer Fault Detection Enable",
                        "data": {
                          "-shortname": "EconFltDetectEn",
                          "-pointtype": "MV",
                          "-attributeid": "7028",
                          "-modbusaddr": "132",
                          "-n2pointtype": "ADI",
                          "-n2address": "115",
                          "-bacoid": "29915",
                          "-modify": "Read/Write",
                          "-enumset": "Disable/Enable"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service546",
                  "name": "Service",
                  "children": [
                    {
                      "id": "Cooling Status547",
                      "name": "Cooling Status",
                      "children": {
                        "id": "Cooling Status548",
                        "name": "Cooling Status",
                        "data": {
                          "-shortname": "Clg-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "308",
                          "-n2pointtype": "ADI",
                          "-n2address": "28",
                          "-bacoid": "29577",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/Thermostat Cooling/Unoccupied Cooling/Occupied Cooling/Off-OAT Lockout/Off-Disabled/Off-Lockout/Off-Low Supply Voltage/Off-Low Ambient/Off-Low Ambient Pre-Run Delay/Off-Waiting For Changeover Delay/Off-Free Cooling/Comfort Ventilation"
                        }
                      }
                    },
                    {
                      "id": "Economizer Status548",
                      "name": "Economizer Status",
                      "children": {
                        "id": "Economizer Status549",
                        "name": "Economizer Status",
                        "data": {
                          "-shortname": "Econ-S",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "370",
                          "-n2pointtype": "ADI",
                          "-n2address": "86",
                          "-bacoid": "29750",
                          "-modify": "Read Only",
                          "-enumset": "Disabled/Damper Not Functional/Purge/Unavailable-Sensor Fault/Econ Loading/SA-T High Limit/Mixed Air Low Limit Cycle/Demand Ventilation Air Quality/Outdoor Airflow Control/Free Cooling is Active/Minimum Position/Test/Comfort Ventilation/Low OA Ambient"
                        }
                      }
                    },
                    {
                      "id": "Econ Free Cooling Available549",
                      "name": "Econ Free Cooling Available",
                      "children": {
                        "id": "Econ Free Cooling Available550",
                        "name": "Econ Free Cooling Available",
                        "data": {
                          "-shortname": "Econ-Free",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "369",
                          "-n2pointtype": "ADI",
                          "-n2address": "85",
                          "-bacoid": "29749",
                          "-modify": "Read Only",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Economizer Damper % Command550",
                      "name": "Economizer Damper % Command",
                      "children": {
                        "id": "Economizer Damper % Command551",
                        "name": "Economizer Damper % Command",
                        "data": {
                          "-shortname": "Econ",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "253",
                          "-n2pointtype": "AO",
                          "-n2address": "3",
                          "-bacoid": "29748",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Supply Air Temperature551",
                      "name": "Supply Air Temperature",
                      "children": {
                        "id": "Supply Air Temperature552",
                        "name": "Supply Air Temperature",
                        "data": {
                          "-shortname": "SAT",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "158",
                          "-n2pointtype": "AI",
                          "-n2address": "3",
                          "-bacoid": "29564",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Operational Outdoor Air Temperature552",
                      "name": "Operational Outdoor Air Temperature",
                      "children": {
                        "id": "Operational Outdoor Air Temperature553",
                        "name": "Operational Outdoor Air Temperature",
                        "data": {
                          "-shortname": "OprOAT",
                          "-pointtype": "AV",
                          "-attributeid": "7000",
                          "-modbusaddr": "153",
                          "-n2pointtype": "ADF",
                          "-n2address": "23",
                          "-bacoid": "29541",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Outdoor Air Enthalpy553",
                      "name": "Outdoor Air Enthalpy",
                      "children": {
                        "id": "Outdoor Air Enthalpy554",
                        "name": "Outdoor Air Enthalpy",
                        "data": {
                          "-shortname": "OA-Enth",
                          "-pointtype": "AV",
                          "-attributeid": "7005",
                          "-modbusaddr": "155",
                          "-n2pointtype": "ADF",
                          "-n2address": "26",
                          "-bacoid": "29545",
                          "-modify": "Read Only",
                          "-IPunits": "Btu/lb",
                          "-SIunits": "kJ/kg"
                        }
                      }
                    },
                    {
                      "id": "Return Air Enthalpy554",
                      "name": "Return Air Enthalpy",
                      "children": {
                        "id": "Return Air Enthalpy555",
                        "name": "Return Air Enthalpy",
                        "data": {
                          "-shortname": "RA-Enth",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "257",
                          "-n2pointtype": "ADF",
                          "-n2address": "142",
                          "-bacoid": "29763",
                          "-modify": "Read Only",
                          "-IPunits": "Btu/lb dry air",
                          "-SIunits": "J/kg"
                        }
                      }
                    },
                    {
                      "id": "Operational Indoor Air Quality555",
                      "name": "Operational Indoor Air Quality",
                      "children": {
                        "id": "Operational Indoor Air Quality556",
                        "name": "Operational Indoor Air Quality",
                        "data": {
                          "-shortname": "OprIAQ",
                          "-pointtype": "AV",
                          "-attributeid": "7012",
                          "-modbusaddr": "136",
                          "-n2pointtype": "ADF",
                          "-n2address": "4",
                          "-bacoid": "29527",
                          "-modify": "Read Only",
                          "-IPunits": "ppm",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Operational Outdoor Air Quality556",
                      "name": "Operational Outdoor Air Quality",
                      "children": {
                        "id": "Operational Outdoor Air Quality557",
                        "name": "Operational Outdoor Air Quality",
                        "data": {
                          "-shortname": "OprOAQ",
                          "-pointtype": "AV",
                          "-attributeid": "7009",
                          "-modbusaddr": "156",
                          "-n2pointtype": "ADF",
                          "-n2address": "28",
                          "-bacoid": "29547",
                          "-modify": "Read Only",
                          "-IPunits": "ppm",
                          "-SIunits": "ppm"
                        }
                      }
                    },
                    {
                      "id": "Fresh Air Intake Value557",
                      "name": "Fresh Air Intake Value",
                      "children": {
                        "id": "Fresh Air Intake Value558",
                        "name": "Fresh Air Intake Value",
                        "data": {
                          "-shortname": "Fr Air",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "262",
                          "-n2pointtype": "ADF",
                          "-n2address": "155",
                          "-bacoid": "29796",
                          "-modify": "Read Only",
                          "-IPunits": "cfm",
                          "-SIunits": "L/s"
                        }
                      }
                    },
                    {
                      "id": "Economizer Damper Position558",
                      "name": "Economizer Damper Position",
                      "children": {
                        "id": "Economizer Damper Position559",
                        "name": "Economizer Damper Position",
                        "data": {
                          "-shortname": "EconDampPos",
                          "-pointtype": "AV",
                          "-attributeid": "7011",
                          "-modbusaddr": "254",
                          "-n2pointtype": "ADF",
                          "-n2address": "141",
                          "-bacoid": "29824",
                          "-modify": "Read Only",
                          "-IPunits": "% open",
                          "-SIunits": "% open"
                        }
                      }
                    },
                    {
                      "id": "FDD Economizer Alarm Delay559",
                      "name": "FDD Economizer Alarm Delay",
                      "children": {
                        "id": "FDD Economizer Alarm Delay560",
                        "name": "FDD Economizer Alarm Delay",
                        "data": {
                          "-shortname": "EconAlrmDly",
                          "-pointtype": "AV",
                          "-attributeid": "7029",
                          "-modbusaddr": "431",
                          "-n2pointtype": "ADF",
                          "-n2address": "182",
                          "-bacoid": "29916",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "3600",
                          "-IPunits": "seconds",
                          "-SImin": "0",
                          "-SImax": "3600",
                          "-SIunits": "seconds"
                        }
                      }
                    },
                    {
                      "id": "FDD Economizer Damper Allowed Error560",
                      "name": "FDD Economizer Damper Allowed Error",
                      "children": {
                        "id": "FDD Economizer Damper Allowed Error561",
                        "name": "FDD Economizer Damper Allowed Error",
                        "data": {
                          "-shortname": "EconPosErr",
                          "-pointtype": "AV",
                          "-attributeid": "7030",
                          "-modbusaddr": "432",
                          "-n2pointtype": "ADF",
                          "-n2address": "183",
                          "-bacoid": "29917",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "FDD Damper Min Position Tolerance561",
                      "name": "FDD Damper Min Position Tolerance",
                      "children": {
                        "id": "FDD Damper Min Position Tolerance562",
                        "name": "FDD Damper Min Position Tolerance",
                        "data": {
                          "-shortname": "EconMinErr",
                          "-pointtype": "AV",
                          "-attributeid": "7031",
                          "-modbusaddr": "433",
                          "-n2pointtype": "ADF",
                          "-n2address": "184",
                          "-bacoid": "29918",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Demand Ventilation562",
              "name": "Demand Ventilation",
              "children": [
                {
                  "id": "Economizer Enabled For Operation563",
                  "name": "Economizer Enabled For Operation",
                  "children": {
                    "id": "Economizer Enabled For Operation564",
                    "name": "Economizer Enabled For Operation",
                    "data": {
                      "-shortname": "Econ-En",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "118",
                      "-n2pointtype": "ADI",
                      "-n2address": "84",
                      "-bacoid": "29747",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Demand Ventilation Mode of Operation564",
                  "name": "Demand Ventilation Mode of Operation",
                  "children": {
                    "id": "Demand Ventilation Mode of Operation565",
                    "name": "Demand Ventilation Mode of Operation",
                    "data": {
                      "-shortname": "DVent-Mode",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "120",
                      "-n2pointtype": "ADI",
                      "-n2address": "93",
                      "-bacoid": "29765",
                      "-modify": "Read/Write",
                      "-IPdefault": "Disabled",
                      "-enumset": "Disabled/Controlled by IAQ/Diff between IAQ and OAQ"
                    }
                  }
                },
                {
                  "id": "Demand Ventilation Maximum Economizer Position565",
                  "name": "Demand Ventilation Maximum Economizer Position",
                  "children": {
                    "id": "Demand Ventilation Maximum Economizer Position566",
                    "name": "Demand Ventilation Maximum Economizer Position",
                    "data": {
                      "-shortname": "DVentMaxEconPos",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "60",
                      "-n2pointtype": "ADF",
                      "-n2address": "143",
                      "-bacoid": "29766",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Demand Ventilation Indoor Air Quality Setpoint566",
                  "name": "Demand Ventilation Indoor Air Quality Setpoint",
                  "children": {
                    "id": "Demand Ventilation Indoor Air Quality Setpoint567",
                    "name": "Demand Ventilation Indoor Air Quality Setpoint",
                    "data": {
                      "-shortname": "DVentIAQ-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7002",
                      "-modbusaddr": "61",
                      "-n2pointtype": "ADF",
                      "-n2address": "144",
                      "-bacoid": "29767",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Demand Ventilation Differential Setpoint567",
                  "name": "Demand Ventilation Differential Setpoint",
                  "children": {
                    "id": "Demand Ventilation Differential Setpoint568",
                    "name": "Demand Ventilation Differential Setpoint",
                    "data": {
                      "-shortname": "DVentDiff-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7003",
                      "-modbusaddr": "62",
                      "-n2pointtype": "ADF",
                      "-n2address": "145",
                      "-bacoid": "29768",
                      "-modify": "Read/Write",
                      "-IPdefault": "600",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Indoor Air Quality Sensor Range568",
                  "name": "Indoor Air Quality Sensor Range",
                  "children": {
                    "id": "Indoor Air Quality Sensor Range569",
                    "name": "Indoor Air Quality Sensor Range",
                    "data": {
                      "-shortname": "IAQRange",
                      "-pointtype": "AV",
                      "-attributeid": "7015",
                      "-modbusaddr": "2",
                      "-n2pointtype": "ADF",
                      "-n2address": "5",
                      "-bacoid": "29529",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Outdoor Air Quality Sensor Range569",
                  "name": "Outdoor Air Quality Sensor Range",
                  "children": {
                    "id": "Outdoor Air Quality Sensor Range570",
                    "name": "Outdoor Air Quality Sensor Range",
                    "data": {
                      "-shortname": "OAQRange",
                      "-pointtype": "AV",
                      "-attributeid": "7012",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Operational Indoor Air Quality570",
                  "name": "Operational Indoor Air Quality",
                  "children": {
                    "id": "Operational Indoor Air Quality571",
                    "name": "Operational Indoor Air Quality",
                    "data": {
                      "-shortname": "OprIAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7012",
                      "-modbusaddr": "136",
                      "-n2pointtype": "ADF",
                      "-n2address": "4",
                      "-bacoid": "29527",
                      "-modify": "Read Only",
                      "-IPunits": "ppm",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Operational Outdoor Air Quality571",
                  "name": "Operational Outdoor Air Quality",
                  "children": {
                    "id": "Operational Outdoor Air Quality572",
                    "name": "Operational Outdoor Air Quality",
                    "data": {
                      "-shortname": "OprOAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7009",
                      "-modbusaddr": "156",
                      "-n2pointtype": "ADF",
                      "-n2address": "28",
                      "-bacoid": "29547",
                      "-modify": "Read Only",
                      "-IPunits": "ppm",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Economizer Damper Position572",
                  "name": "Economizer Damper Position",
                  "children": {
                    "id": "Economizer Damper Position573",
                    "name": "Economizer Damper Position",
                    "data": {
                      "-shortname": "EconDampPos",
                      "-pointtype": "AV",
                      "-attributeid": "7011",
                      "-modbusaddr": "254",
                      "-n2pointtype": "ADF",
                      "-n2address": "141",
                      "-bacoid": "29824",
                      "-modify": "Read Only",
                      "-IPunits": "% open",
                      "-SIunits": "% open"
                    }
                  }
                }
              ]
            },
            {
              "id": "Air Monitor Station573",
              "name": "Air Monitor Station",
              "children": [
                {
                  "id": "Economizer Enabled For Operation574",
                  "name": "Economizer Enabled For Operation",
                  "children": {
                    "id": "Economizer Enabled For Operation575",
                    "name": "Economizer Enabled For Operation",
                    "data": {
                      "-shortname": "Econ-En",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "118",
                      "-n2pointtype": "ADI",
                      "-n2address": "84",
                      "-bacoid": "29747",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Fresh Air Intake Enable575",
                  "name": "Fresh Air Intake Enable",
                  "children": {
                    "id": "Fresh Air Intake Enable576",
                    "name": "Fresh Air Intake Enable",
                    "data": {
                      "-shortname": "FrAir-En",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "134",
                      "-n2pointtype": "ADI",
                      "-n2address": "117",
                      "-bacoid": "29933",
                      "-modify": "Read/Write",
                      "-enumset": "Disable/Enable"
                    }
                  }
                },
                {
                  "id": "Fresh Air Intake Setpoint576",
                  "name": "Fresh Air Intake Setpoint",
                  "children": {
                    "id": "Fresh Air Intake Setpoint577",
                    "name": "Fresh Air Intake Setpoint",
                    "data": {
                      "-shortname": "MOAFlow-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7000",
                      "-modbusaddr": "69",
                      "-n2pointtype": "ADF",
                      "-n2address": "154",
                      "-bacoid": "29795",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "50000",
                      "-IPunits": "cfm",
                      "-SImin": "0",
                      "-SImax": "25000",
                      "-SIunits": "L/s"
                    }
                  }
                },
                {
                  "id": "Fresh Air Intake Max Sensor Range577",
                  "name": "Fresh Air Intake Max Sensor Range",
                  "children": {
                    "id": "Fresh Air Intake Max Sensor Range578",
                    "name": "Fresh Air Intake Max Sensor Range",
                    "data": {
                      "-shortname": "MOA-Range",
                      "-pointtype": "AV",
                      "-attributeid": "7002",
                      "-modbusaddr": "70",
                      "-n2pointtype": "ADF",
                      "-n2address": "156",
                      "-bacoid": "29797",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "50000",
                      "-IPunits": "cfm",
                      "-SImin": "0",
                      "-SImax": "25000",
                      "-SIunits": "L/s"
                    }
                  }
                },
                {
                  "id": "Fresh Air Intake Value578",
                  "name": "Fresh Air Intake Value",
                  "children": {
                    "id": "Fresh Air Intake Value579",
                    "name": "Fresh Air Intake Value",
                    "data": {
                      "-shortname": "Fr Air",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "262",
                      "-n2pointtype": "ADF",
                      "-n2address": "155",
                      "-bacoid": "29796",
                      "-modify": "Read Only",
                      "-IPunits": "cfm",
                      "-SIunits": "L/s"
                    }
                  }
                },
                {
                  "id": "Economizer Damper Position579",
                  "name": "Economizer Damper Position",
                  "children": {
                    "id": "Economizer Damper Position580",
                    "name": "Economizer Damper Position",
                    "data": {
                      "-shortname": "EconDampPos",
                      "-pointtype": "AV",
                      "-attributeid": "7011",
                      "-modbusaddr": "254",
                      "-n2pointtype": "ADF",
                      "-n2address": "141",
                      "-bacoid": "29824",
                      "-modify": "Read Only",
                      "-IPunits": "% open",
                      "-SIunits": "% open"
                    }
                  }
                },
                {
                  "id": "Fresh Air Range580",
                  "name": "Fresh Air Range",
                  "children": {
                    "id": "Fresh Air Range581",
                    "name": "Fresh Air Range",
                    "data": {
                      "-shortname": "Control",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "cfm",
                      "-SImin": "0",
                      "-SImax": "2500",
                      "-SIunits": "L/s"
                    }
                  }
                }
              ]
            },
            {
              "id": "Power Exhaust581",
              "name": "Power Exhaust",
              "children": [
                {
                  "id": "Setup582",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Exhaust Type583",
                      "name": "Exhaust Type",
                      "children": {
                        "id": "Exhaust Type584",
                        "name": "Exhaust Type",
                        "data": {
                          "-shortname": "ExFType",
                          "-pointtype": "MV",
                          "-attributeid": "7008",
                          "-modbusaddr": "412",
                          "-n2pointtype": "ADI",
                          "-n2address": "129",
                          "-bacoid": "29503",
                          "-modify": "Read/Write",
                          "-enumset": "None/Non-Modulating/Modulating Damper/Variable Frequency Fan"
                        }
                      }
                    },
                    {
                      "id": "Economizer Damper Position for Exhaust Fan to Turn On584",
                      "name": "Economizer Damper Position for Exhaust Fan to Turn On",
                      "children": {
                        "id": "Economizer Damper Position for Exhaust Fan to Turn On585",
                        "name": "Economizer Damper Position for Exhaust Fan to Turn On",
                        "data": {
                          "-shortname": "EconDmpPosFanOn",
                          "-pointtype": "AV",
                          "-attributeid": "7011",
                          "-modbusaddr": "66",
                          "-n2pointtype": "ADF",
                          "-n2address": "151",
                          "-bacoid": "29785",
                          "-modify": "Read/Write",
                          "-IPmin": "20",
                          "-IPmax": "99",
                          "-IPunits": "%",
                          "-SImin": "20",
                          "-SImax": "99",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Economizer Damper Position for Exhaust Fan to Turn Off585",
                      "name": "Economizer Damper Position for Exhaust Fan to Turn Off",
                      "children": {
                        "id": "Economizer Damper Position for Exhaust Fan to Turn Off586",
                        "name": "Economizer Damper Position for Exhaust Fan to Turn Off",
                        "data": {
                          "-shortname": "EconDmpPosFanOff",
                          "-pointtype": "AV",
                          "-attributeid": "7012",
                          "-modbusaddr": "67",
                          "-n2pointtype": "ADF",
                          "-n2address": "152",
                          "-bacoid": "29786",
                          "-modify": "Read/Write",
                          "-IPmin": "10",
                          "-IPmax": "89",
                          "-IPunits": "%",
                          "-SImin": "10",
                          "-SImax": "89",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Damper Position for Exhaust Fan to Turn On586",
                      "name": "Exhaust Damper Position for Exhaust Fan to Turn On",
                      "children": {
                        "id": "Exhaust Damper Position for Exhaust Fan to Turn On587",
                        "name": "Exhaust Damper Position for Exhaust Fan to Turn On",
                        "data": {
                          "-shortname": "ExDmpPosFanOn",
                          "-pointtype": "AV",
                          "-attributeid": "7009",
                          "-modbusaddr": "64",
                          "-n2pointtype": "ADF",
                          "-n2address": "149",
                          "-bacoid": "29783",
                          "-modify": "Read/Write",
                          "-IPmin": "20",
                          "-IPmax": "99",
                          "-IPunits": "%",
                          "-SImin": "20",
                          "-SImax": "99",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Damper Position for Exhaust Fan to Turn Off587",
                      "name": "Exhaust Damper Position for Exhaust Fan to Turn Off",
                      "children": {
                        "id": "Exhaust Damper Position for Exhaust Fan to Turn Off588",
                        "name": "Exhaust Damper Position for Exhaust Fan to Turn Off",
                        "data": {
                          "-shortname": "ExDmpPosFanOff",
                          "-pointtype": "AV",
                          "-attributeid": "7010",
                          "-modbusaddr": "65",
                          "-n2pointtype": "ADF",
                          "-n2address": "150",
                          "-bacoid": "29784",
                          "-modify": "Read/Write",
                          "-IPmin": "10",
                          "-IPmax": "89",
                          "-IPunits": "%",
                          "-SImin": "10",
                          "-SImax": "89",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Building Pressure Setpoint588",
                      "name": "Building Pressure Setpoint",
                      "children": {
                        "id": "Building Pressure Setpoint589",
                        "name": "Building Pressure Setpoint",
                        "data": {
                          "-shortname": "Bldg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "63",
                          "-n2pointtype": "ADF",
                          "-n2address": "147",
                          "-bacoid": "29780",
                          "-modify": "Read/Write",
                          "-IPmin": "-0.25",
                          "-IPmax": "0.25",
                          "-IPunits": "in wc",
                          "-SImin": "-0.07",
                          "-SImax": "0.07",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Duct Static Pressure589",
                      "name": "Duct Static Pressure",
                      "children": {
                        "id": "Duct Static Pressure590",
                        "name": "Duct Static Pressure",
                        "data": {
                          "-shortname": "DctPrs",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "159",
                          "-n2pointtype": "AI",
                          "-n2address": "4",
                          "-bacoid": "29565",
                          "-modify": "Read Only",
                          "-IPunits": "in wc",
                          "-SIunits": "kPa"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service590",
                  "name": "Service",
                  "children": [
                    {
                      "id": "Exhaust Fan Status591",
                      "name": "Exhaust Fan Status",
                      "children": {
                        "id": "Exhaust Fan Status592",
                        "name": "Exhaust Fan Status",
                        "data": {
                          "-shortname": "ExF-S",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "377",
                          "-n2pointtype": "BI",
                          "-n2address": "39",
                          "-bacoid": "29777",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Normal Command/Off-Disabled/Off-VFD Fault/Off-Low Building Static Pressure/Off-Economizer Damper Position"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Fan Command592",
                      "name": "Exhaust Fan Command",
                      "children": {
                        "id": "Exhaust Fan Command593",
                        "name": "Exhaust Fan Command",
                        "data": {
                          "-shortname": "ExFan",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "376",
                          "-n2pointtype": "BO",
                          "-n2address": "15",
                          "-bacoid": "29775",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Building Static Pressure593",
                      "name": "Building Static Pressure",
                      "children": {
                        "id": "Building Static Pressure594",
                        "name": "Building Static Pressure",
                        "data": {
                          "-shortname": "BldgPres",
                          "-pointtype": "AV",
                          "-attributeid": "7007",
                          "-modbusaddr": "260",
                          "-n2pointtype": "AI",
                          "-n2address": "33",
                          "-bacoid": "29781",
                          "-modify": "Read Only",
                          "-IPunits": "in wc",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Damper % Command594",
                      "name": "Exhaust Damper % Command",
                      "children": {
                        "id": "Exhaust Damper % Command595",
                        "name": "Exhaust Damper % Command",
                        "data": {
                          "-shortname": "EAD-O",
                          "-pointtype": "AV",
                          "-attributeid": "7008",
                          "-modbusaddr": "261",
                          "-n2pointtype": "AO",
                          "-n2address": "5",
                          "-bacoid": "29782",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Fan VFD % Command595",
                      "name": "Exhaust Fan VFD % Command",
                      "children": {
                        "id": "Exhaust Fan VFD % Command596",
                        "name": "Exhaust Fan VFD % Command",
                        "data": {
                          "-shortname": "ExFanVFD",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "258",
                          "-n2pointtype": "AO",
                          "-n2address": "4",
                          "-bacoid": "29776",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Fan Accumulated Runtime596",
                      "name": "Exhaust Fan Accumulated Runtime",
                      "children": {
                        "id": "Exhaust Fan Accumulated Runtime597",
                        "name": "Exhaust Fan Accumulated Runtime",
                        "data": {
                          "-shortname": "ExF-RunTim",
                          "-pointtype": "AV",
                          "-attributeid": "7005",
                          "-modbusaddr": "259",
                          "-n2pointtype": "ADF",
                          "-n2address": "146",
                          "-bacoid": "29779",
                          "-modify": "Read Only",
                          "-IPunits": "hours",
                          "-SIunits": "hours"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Fan VFD Fault597",
                      "name": "Exhaust Fan VFD Fault",
                      "children": {
                        "id": "Exhaust Fan VFD Fault598",
                        "name": "Exhaust Fan VFD Fault",
                        "data": {
                          "-shortname": "ExFanVFDFlt",
                          "-pointtype": "MV",
                          "-attributeid": "7004",
                          "-modbusaddr": "378",
                          "-n2pointtype": "BI",
                          "-n2address": "40",
                          "-bacoid": "29778",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "FanVFD598",
              "name": "FanVFD",
              "children": [
                {
                  "id": "Setup599",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Fan Control Type600",
                      "name": "Fan Control Type",
                      "children": {
                        "id": "Fan Control Type601",
                        "name": "Fan Control Type",
                        "data": {
                          "-shortname": "FanCtl-Type",
                          "-pointtype": "MV",
                          "-attributeid": "7005",
                          "-modbusaddr": "400",
                          "-n2pointtype": "ADI",
                          "-n2address": "119",
                          "-bacoid": "29555",
                          "-modify": "Read/Write",
                          "-IPdefault": "Single Speed",
                          "-enumset": "Single Speed/Not Used/Fixed Variable/Variable Speed"
                        }
                      }
                    },
                    {
                      "id": "Duct Pressure Setpoint601",
                      "name": "Duct Pressure Setpoint",
                      "children": {
                        "id": "Duct Pressure Setpoint602",
                        "name": "Duct Pressure Setpoint",
                        "data": {
                          "-shortname": "DctPrs-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "10",
                          "-n2pointtype": "ADF",
                          "-n2address": "31",
                          "-bacoid": "29566",
                          "-modify": "Read/Write",
                          "-IPdefault": "1.5",
                          "-IPmin": "0",
                          "-IPmax": "5",
                          "-IPunits": "in wc",
                          "-SImin": "0",
                          "-SImax": "1.25",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Duct Pressure Shutdown Setpoint602",
                      "name": "Duct Pressure Shutdown Setpoint",
                      "children": {
                        "id": "Duct Pressure Shutdown Setpoint603",
                        "name": "Duct Pressure Shutdown Setpoint",
                        "data": {
                          "-shortname": "DctShutdownSp",
                          "-pointtype": "AV",
                          "-attributeid": "7017",
                          "-modbusaddr": "11",
                          "-n2pointtype": "ADF",
                          "-n2address": "32",
                          "-bacoid": "29567",
                          "-modify": "Read/Write",
                          "-IPdefault": "4.5",
                          "-IPmin": "0",
                          "-IPmax": "5",
                          "-IPunits": "in wc",
                          "-SImin": "0",
                          "-SImax": "1.25",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "VAV Cooling Supply Air Temp Upper Setpoint603",
                      "name": "VAV Cooling Supply Air Temp Upper Setpoint",
                      "children": {
                        "id": "VAV Cooling Supply Air Temp Upper Setpoint604",
                        "name": "VAV Cooling Supply Air Temp Upper Setpoint",
                        "data": {
                          "-shortname": "SATUp-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7029",
                          "-modbusaddr": "26",
                          "-n2pointtype": "ADF",
                          "-n2address": "47",
                          "-bacoid": "29604",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "41",
                          "-IPmax": "70",
                          "-IPunits": "?F",
                          "-SImin": "5",
                          "-SImax": "21",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Cooling Supply Air Temp Lower Setpoint604",
                      "name": "VAV Cooling Supply Air Temp Lower Setpoint",
                      "children": {
                        "id": "VAV Cooling Supply Air Temp Lower Setpoint605",
                        "name": "VAV Cooling Supply Air Temp Lower Setpoint",
                        "data": {
                          "-shortname": "SATLo-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7030",
                          "-modbusaddr": "27",
                          "-n2pointtype": "ADF",
                          "-n2address": "48",
                          "-bacoid": "29605",
                          "-modify": "Read/Write",
                          "-IPdefault": "55",
                          "-IPmin": "40",
                          "-IPmax": "69",
                          "-IPunits": "?F",
                          "-SImin": "4",
                          "-SImax": "20",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Supply Air Temp Reset Setpoint605",
                      "name": "VAV Supply Air Temp Reset Setpoint",
                      "children": {
                        "id": "VAV Supply Air Temp Reset Setpoint606",
                        "name": "VAV Supply Air Temp Reset Setpoint",
                        "data": {
                          "-shortname": "SATRst-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7031",
                          "-modbusaddr": "28",
                          "-n2pointtype": "ADF",
                          "-n2address": "49",
                          "-bacoid": "29606",
                          "-modify": "Read/Write",
                          "-IPdefault": "72",
                          "-IPmin": "40",
                          "-IPmax": "85",
                          "-IPunits": "?F",
                          "-SImin": "4",
                          "-SImax": "30",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Unoccupied Cooling Setpoint606",
                      "name": "VAV Unoccupied Cooling Setpoint",
                      "children": {
                        "id": "VAV Unoccupied Cooling Setpoint607",
                        "name": "VAV Unoccupied Cooling Setpoint",
                        "data": {
                          "-shortname": "VAVClgUnocc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7052",
                          "-modbusaddr": "79",
                          "-n2pointtype": "ADF",
                          "-n2address": "168",
                          "-bacoid": "29932",
                          "-modify": "Read/Write",
                          "-IPdefault": "85",
                          "-IPmin": "46",
                          "-IPmax": "99",
                          "-IPunits": "?F",
                          "-SImin": "8",
                          "-SImax": "37",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Morning Warmup Enabled607",
                      "name": "Morning Warmup Enabled",
                      "children": {
                        "id": "Morning Warmup Enabled608",
                        "name": "Morning Warmup Enabled",
                        "data": {
                          "-shortname": "MornW-En",
                          "-pointtype": "MV",
                          "-attributeid": "7020",
                          "-modbusaddr": "109",
                          "-n2pointtype": "ADI",
                          "-n2address": "73",
                          "-bacoid": "29822",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Morning Warmup/Return Air Temp Setpoint608",
                      "name": "Morning Warmup/Return Air Temp Setpoint",
                      "children": {
                        "id": "Morning Warmup/Return Air Temp Setpoint609",
                        "name": "Morning Warmup/Return Air Temp Setpoint",
                        "data": {
                          "-shortname": "MornWRAT-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7021",
                          "-modbusaddr": "41",
                          "-n2pointtype": "ADF",
                          "-n2address": "121",
                          "-bacoid": "29823",
                          "-modify": "Read/Write",
                          "-IPdefault": "70",
                          "-IPmin": "50",
                          "-IPmax": "85",
                          "-IPunits": "?F",
                          "-SImin": "10",
                          "-SImax": "30",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Occupied Heating Enabled609",
                      "name": "VAV Occupied Heating Enabled",
                      "children": {
                        "id": "VAV Occupied Heating Enabled610",
                        "name": "VAV Occupied Heating Enabled",
                        "data": {
                          "-shortname": "HtgOcc-En",
                          "-pointtype": "MV",
                          "-attributeid": "7015",
                          "-modbusaddr": "107",
                          "-n2pointtype": "ADI",
                          "-n2address": "71",
                          "-bacoid": "29722",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "VAV Occupied Heating Setpoint610",
                      "name": "VAV Occupied Heating Setpoint",
                      "children": {
                        "id": "VAV Occupied Heating Setpoint611",
                        "name": "VAV Occupied Heating Setpoint",
                        "data": {
                          "-shortname": "VAVHtgOcc-SP",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "39",
                          "-n2pointtype": "ADF",
                          "-n2address": "118",
                          "-bacoid": "29723",
                          "-modify": "Read/Write",
                          "-IPdefault": "68",
                          "-IPmin": "40",
                          "-IPmax": "85",
                          "-IPunits": "?F",
                          "-SImin": "4",
                          "-SImax": "30",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Unoccupied Heating Enabled611",
                      "name": "Unoccupied Heating Enabled",
                      "children": {
                        "id": "Unoccupied Heating Enabled612",
                        "name": "Unoccupied Heating Enabled",
                        "data": {
                          "-shortname": "HtgUnocc-En",
                          "-pointtype": "MV",
                          "-attributeid": "7017",
                          "-modbusaddr": "108",
                          "-n2pointtype": "ADI",
                          "-n2address": "72",
                          "-bacoid": "29724",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "VAV Unoccupied Heating Setpoint612",
                      "name": "VAV Unoccupied Heating Setpoint",
                      "children": {
                        "id": "VAV Unoccupied Heating Setpoint613",
                        "name": "VAV Unoccupied Heating Setpoint",
                        "data": {
                          "-shortname": "VAVHtgUnocc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7018",
                          "-modbusaddr": "40",
                          "-n2pointtype": "ADF",
                          "-n2address": "119",
                          "-bacoid": "29725",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Morning Cooldown Enabled613",
                      "name": "Morning Cooldown Enabled",
                      "children": {
                        "id": "Morning Cooldown Enabled614",
                        "name": "Morning Cooldown Enabled",
                        "data": {
                          "-shortname": "MornC-En",
                          "-pointtype": "MV",
                          "-attributeid": "7034",
                          "-modbusaddr": "110",
                          "-n2pointtype": "ADI",
                          "-n2address": "74",
                          "-bacoid": "29891",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Morning Cooldown/Return Air Temp Setpoint614",
                      "name": "Morning Cooldown/Return Air Temp Setpoint",
                      "children": {
                        "id": "Morning Cooldown/Return Air Temp Setpoint615",
                        "name": "Morning Cooldown/Return Air Temp Setpoint",
                        "data": {
                          "-shortname": "MornCRAT-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7035",
                          "-modbusaddr": "44",
                          "-n2pointtype": "ADF",
                          "-n2address": "125",
                          "-bacoid": "29892",
                          "-modify": "Read/Write",
                          "-IPdefault": "74",
                          "-IPmin": "50",
                          "-IPmax": "85",
                          "-IPunits": "?F",
                          "-SImin": "10",
                          "-SImax": "30",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Optimal Start Enabled615",
                      "name": "Optimal Start Enabled",
                      "children": {
                        "id": "Optimal Start Enabled616",
                        "name": "Optimal Start Enabled",
                        "data": {
                          "-shortname": "OptStrt-En",
                          "-pointtype": "MV",
                          "-attributeid": "7036",
                          "-modbusaddr": "111",
                          "-n2pointtype": "ADI",
                          "-n2address": "75",
                          "-bacoid": "29893",
                          "-modify": "Read/Write",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Early Start Period616",
                      "name": "Early Start Period",
                      "children": {
                        "id": "Early Start Period617",
                        "name": "Early Start Period",
                        "data": {
                          "-shortname": "EarlyStrtPeriod",
                          "-pointtype": "AV",
                          "-attributeid": "7038",
                          "-modbusaddr": "45",
                          "-n2pointtype": "ADF",
                          "-n2address": "126",
                          "-bacoid": "29895",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "0",
                          "-IPmax": "120",
                          "-IPunits": "minutes",
                          "-SImin": "0",
                          "-SImax": "120",
                          "-SIunits": "minutes"
                        }
                      }
                    },
                    {
                      "id": "Use Occupancy Schedule617",
                      "name": "Use Occupancy Schedule",
                      "children": {
                        "id": "Use Occupancy Schedule618",
                        "name": "Use Occupancy Schedule",
                        "data": {
                          "-shortname": "UseOccSched",
                          "-pointtype": "MV",
                          "-attributeid": "7060",
                          "-modbusaddr": "89",
                          "-n2pointtype": "ADI",
                          "-n2address": "20",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Low Pressure Limit 1618",
                      "name": "Low Pressure Limit 1",
                      "children": [
                        {
                          "id": "Low Pressure Limit 1619",
                          "name": "Low Pressure Limit 1",
                          "data": {
                            "-shortname": "DctPrs",
                            "-pointtype": "AV",
                            "-attributeid": "7038",
                            "-modify": "Read/Write",
                            "-IPdefault": "0.100000001490116",
                            "-IPmin": "0.01",
                            "-IPmax": "1",
                            "-IPunits": "in wc",
                            "-SImin": "2.5",
                            "-SImax": "250",
                            "-SIunits": "Pa"
                          }
                        },
                        {
                          "id": "Low Pressure Limit 1620",
                          "name": "Low Pressure Limit 1",
                          "data": {
                            "-shortname": "LPS1",
                            "-pointtype": "MV",
                            "-attributeid": "7011",
                            "-modbusaddr": "315",
                            "-n2pointtype": "BI",
                            "-n2address": "16",
                            "-bacoid": "29647",
                            "-modify": "Read Only",
                            "-enumset": "Normal/Alarm"
                          }
                        }
                      ]
                    },
                    {
                      "id": "Low Pressure Limit 2620",
                      "name": "Low Pressure Limit 2",
                      "children": [
                        {
                          "id": "Low Pressure Limit 2621",
                          "name": "Low Pressure Limit 2",
                          "data": {
                            "-shortname": "DctPrs",
                            "-pointtype": "AV",
                            "-attributeid": "7039",
                            "-modify": "Read/Write",
                            "-IPdefault": "0.05",
                            "-IPmin": "0.01",
                            "-IPmax": "1",
                            "-IPunits": "in wc",
                            "-SImin": "2.5",
                            "-SImax": "250",
                            "-SIunits": "Pa"
                          }
                        },
                        {
                          "id": "Low Pressure Limit 2622",
                          "name": "Low Pressure Limit 2",
                          "data": {
                            "-shortname": "LPS2",
                            "-pointtype": "MV",
                            "-attributeid": "7011",
                            "-modbusaddr": "323",
                            "-n2pointtype": "BI",
                            "-n2address": "20",
                            "-bacoid": "29648",
                            "-modify": "Read Only",
                            "-enumset": "Normal/Alarm"
                          }
                        }
                      ]
                    },
                    {
                      "id": "Time622",
                      "name": "Time",
                      "children": [
                        {
                          "id": "Time623",
                          "name": "Time",
                          "data": {
                            "-shortname": "Time",
                            "-pointtype": "AV",
                            "-attributeid": "7040",
                            "-modify": "Read/Write",
                            "-IPdefault": "60",
                            "-IPmin": "0",
                            "-IPmax": "600",
                            "-IPunits": "seconds",
                            "-SImin": "0",
                            "-SImax": "600",
                            "-SIunits": "seconds"
                          }
                        },
                        {
                          "id": "Time624",
                          "name": "Time",
                          "data": {
                            "-shortname": "Time",
                            "-pointtype": "AV",
                            "-attributeid": "7041",
                            "-modify": "Read/Write",
                            "-IPdefault": "90",
                            "-IPmin": "0",
                            "-IPmax": "600",
                            "-IPunits": "seconds",
                            "-SImin": "0",
                            "-SImax": "600",
                            "-SIunits": "seconds"
                          }
                        },
                        {
                          "id": "Time625",
                          "name": "Time",
                          "data": {
                            "-shortname": "Time",
                            "-pointtype": "Time",
                            "-attributeid": "7000",
                            "-modify": "Read Only"
                          }
                        }
                      ]
                    },
                    {
                      "id": "Time625",
                      "name": "Time",
                      "children": [
                        {
                          "id": "Time626",
                          "name": "Time",
                          "data": {
                            "-shortname": "Time",
                            "-pointtype": "AV",
                            "-attributeid": "7040",
                            "-modify": "Read/Write",
                            "-IPdefault": "60",
                            "-IPmin": "0",
                            "-IPmax": "600",
                            "-IPunits": "seconds",
                            "-SImin": "0",
                            "-SImax": "600",
                            "-SIunits": "seconds"
                          }
                        },
                        {
                          "id": "Time627",
                          "name": "Time",
                          "data": {
                            "-shortname": "Time",
                            "-pointtype": "AV",
                            "-attributeid": "7041",
                            "-modify": "Read/Write",
                            "-IPdefault": "90",
                            "-IPmin": "0",
                            "-IPmax": "600",
                            "-IPunits": "seconds",
                            "-SImin": "0",
                            "-SImax": "600",
                            "-SIunits": "seconds"
                          }
                        },
                        {
                          "id": "Time628",
                          "name": "Time",
                          "data": {
                            "-shortname": "Time",
                            "-pointtype": "Time",
                            "-attributeid": "7000",
                            "-modify": "Read Only"
                          }
                        }
                      ]
                    },
                    {
                      "id": "COBP Occupied Heating Enabled628",
                      "name": "COBP Occupied Heating Enabled",
                      "children": {
                        "id": "COBP Occupied Heating Enabled629",
                        "name": "COBP Occupied Heating Enabled",
                        "data": {
                          "-shortname": "HtgOcc-En",
                          "-pointtype": "MV",
                          "-attributeid": "7055",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service629",
                  "name": "Service",
                  "children": [
                    {
                      "id": "Fan % Command630",
                      "name": "Fan % Command",
                      "children": {
                        "id": "Fan % Command631",
                        "name": "Fan % Command",
                        "data": {
                          "-shortname": "FanVFD",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "157",
                          "-n2pointtype": "AO",
                          "-n2address": "1",
                          "-bacoid": "29551",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Duct Static Pressure631",
                      "name": "Duct Static Pressure",
                      "children": {
                        "id": "Duct Static Pressure632",
                        "name": "Duct Static Pressure",
                        "data": {
                          "-shortname": "DctPrs",
                          "-pointtype": "AV",
                          "-attributeid": "7015",
                          "-modbusaddr": "159",
                          "-n2pointtype": "AI",
                          "-n2address": "4",
                          "-bacoid": "29565",
                          "-modify": "Read Only",
                          "-IPunits": "in wc",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "Duct Pressure Setpoint632",
                      "name": "Duct Pressure Setpoint",
                      "children": {
                        "id": "Duct Pressure Setpoint633",
                        "name": "Duct Pressure Setpoint",
                        "data": {
                          "-shortname": "DctPrs-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "10",
                          "-n2pointtype": "ADF",
                          "-n2address": "31",
                          "-bacoid": "29566",
                          "-modify": "Read/Write",
                          "-IPdefault": "1.5",
                          "-IPmin": "0",
                          "-IPmax": "5",
                          "-IPunits": "in wc",
                          "-SImin": "0",
                          "-SImax": "1.25",
                          "-SIunits": "kPa"
                        }
                      }
                    },
                    {
                      "id": "VAV Operating Cooling Supply Air Temp Setpoint633",
                      "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                      "children": {
                        "id": "VAV Operating Cooling Supply Air Temp Setpoint634",
                        "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                        "data": {
                          "-shortname": "OprVAVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7032",
                          "-modbusaddr": "160",
                          "-n2pointtype": "ADF",
                          "-n2address": "50",
                          "-bacoid": "29607",
                          "-modify": "Read Only",
                          "-IPdefault": "72",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Supply Air Temperature634",
                      "name": "Supply Air Temperature",
                      "children": {
                        "id": "Supply Air Temperature635",
                        "name": "Supply Air Temperature",
                        "data": {
                          "-shortname": "SAT",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "158",
                          "-n2pointtype": "AI",
                          "-n2address": "3",
                          "-bacoid": "29564",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Staged Cooling Command635",
                      "name": "Staged Cooling Command",
                      "children": {
                        "id": "Staged Cooling Command636",
                        "name": "Staged Cooling Command",
                        "data": {
                          "-shortname": "StgClgCmd",
                          "-pointtype": "AV",
                          "-attributeid": "7047",
                          "-modbusaddr": "263",
                          "-n2pointtype": "ADF",
                          "-n2address": "165",
                          "-bacoid": "29922",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Cooling Status636",
                      "name": "Cooling Status",
                      "children": {
                        "id": "Cooling Status637",
                        "name": "Cooling Status",
                        "data": {
                          "-shortname": "Clg-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "308",
                          "-n2pointtype": "ADI",
                          "-n2address": "28",
                          "-bacoid": "29577",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/Thermostat Cooling/Unoccupied Cooling/Occupied Cooling/Off-OAT Lockout/Off-Disabled/Off-Lockout/Off-Low Supply Voltage/Off-Low Ambient/Off-Low Ambient Pre-Run Delay/Off-Waiting For Changeover Delay/Off-Free Cooling/Comfort Ventilation"
                        }
                      }
                    },
                    {
                      "id": "Econ Free Cooling Available637",
                      "name": "Econ Free Cooling Available",
                      "children": {
                        "id": "Econ Free Cooling Available638",
                        "name": "Econ Free Cooling Available",
                        "data": {
                          "-shortname": "Econ-Free",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "369",
                          "-n2pointtype": "ADI",
                          "-n2address": "85",
                          "-bacoid": "29749",
                          "-modify": "Read Only",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 1638",
                      "name": "Compressor Stage Command 1",
                      "children": {
                        "id": "Compressor Stage Command 1639",
                        "name": "Compressor Stage Command 1",
                        "data": {
                          "-shortname": "C1",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "311",
                          "-n2pointtype": "BO",
                          "-n2address": "5",
                          "-bacoid": "29611",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 2639",
                      "name": "Compressor Stage Command 2",
                      "children": {
                        "id": "Compressor Stage Command 2640",
                        "name": "Compressor Stage Command 2",
                        "data": {
                          "-shortname": "C2",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "319",
                          "-n2pointtype": "BO",
                          "-n2address": "6",
                          "-bacoid": "29612",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 3640",
                      "name": "Compressor Stage Command 3"
                    },
                    {
                      "id": "Compressor Stage Command 4640",
                      "name": "Compressor Stage Command 4",
                      "children": {
                        "id": "Compressor Stage Command 4641",
                        "name": "Compressor Stage Command 4",
                        "data": {
                          "-shortname": "C4",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "335",
                          "-n2pointtype": "BO",
                          "-n2address": "8",
                          "-bacoid": "29614",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "VAV Operating Heating Setpoint641",
                      "name": "VAV Operating Heating Setpoint",
                      "children": {
                        "id": "VAV Operating Heating Setpoint642",
                        "name": "VAV Operating Heating Setpoint",
                        "data": {
                          "-shortname": "VAVOprHtg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7019",
                          "-modbusaddr": "250",
                          "-n2pointtype": "ADF",
                          "-n2address": "120",
                          "-bacoid": "29726",
                          "-modify": "Read Only",
                          "-IPdefault": "68",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Staged Heating Command642",
                      "name": "Staged Heating Command",
                      "children": {
                        "id": "Staged Heating Command643",
                        "name": "Staged Heating Command",
                        "data": {
                          "-shortname": "StgHtgCmd",
                          "-pointtype": "AV",
                          "-attributeid": "7045",
                          "-modbusaddr": "264",
                          "-n2pointtype": "ADF",
                          "-n2address": "166",
                          "-bacoid": "29923",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Temperature643",
                      "name": "Operational Space Temperature",
                      "children": {
                        "id": "Operational Space Temperature644",
                        "name": "Operational Space Temperature",
                        "data": {
                          "-shortname": "OprST",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "135",
                          "-n2pointtype": "AI",
                          "-n2address": "31",
                          "-bacoid": "29522",
                          "-modify": "Read Only",
                          "-IPdefault": "70",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Heating Status644",
                      "name": "Heating Status",
                      "children": {
                        "id": "Heating Status645",
                        "name": "Heating Status",
                        "data": {
                          "-shortname": "Htg-S",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "347",
                          "-n2pointtype": "ADI",
                          "-n2address": "65",
                          "-bacoid": "29708",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Defrost/SAT Tempering/Morning Warmup/Thermostat Heating/Unoccupied Heating/Occupied Heating/Off-Disabled/Off-OAT Lockout/Off-SAT Limit/Off-Waiting For Changeover Delay/Comfort Ventilation"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage Command 1645",
                      "name": "Heating Stage Command 1"
                    },
                    {
                      "id": "Heating Stage Command 2645",
                      "name": "Heating Stage Command 2"
                    },
                    {
                      "id": "Heating Stage Command 3645",
                      "name": "Heating Stage Command 3"
                    },
                    {
                      "id": "VAV Box Heat Command645",
                      "name": "VAV Box Heat Command",
                      "children": {
                        "id": "VAV Box Heat Command646",
                        "name": "VAV Box Heat Command",
                        "data": {
                          "-shortname": "VAV Box",
                          "-pointtype": "MV",
                          "-attributeid": "7022",
                          "-modbusaddr": "358",
                          "-n2pointtype": "BO",
                          "-n2address": "9",
                          "-bacoid": "29727",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Single Zone VAV646",
              "name": "Single Zone VAV",
              "children": [
                {
                  "id": "Setup647",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "SZ VAV Enabled648",
                      "name": "SZ VAV Enabled",
                      "children": {
                        "id": "SZ VAV Enabled649",
                        "name": "SZ VAV Enabled",
                        "data": {
                          "-shortname": "SZVAVEn",
                          "-pointtype": "MV",
                          "-attributeid": "7020",
                          "-modbusaddr": "399",
                          "-n2pointtype": "ADI",
                          "-n2address": "118",
                          "-bacoid": "29908",
                          "-modify": "Read/Write",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "SZ VAV Minimum Fan Speed649",
                      "name": "SZ VAV Minimum Fan Speed",
                      "children": {
                        "id": "SZ VAV Minimum Fan Speed650",
                        "name": "SZ VAV Minimum Fan Speed",
                        "data": {
                          "-shortname": "SZVAVMinFanSpd",
                          "-pointtype": "AV",
                          "-attributeid": "7037",
                          "-modbusaddr": "73",
                          "-n2pointtype": "ADF",
                          "-n2address": "159",
                          "-bacoid": "29913",
                          "-modify": "Read/Write",
                          "-IPdefault": "66",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "SZ VAV Occupied Cooling Setpoint650",
                      "name": "SZ VAV Occupied Cooling Setpoint",
                      "children": {
                        "id": "SZ VAV Occupied Cooling Setpoint651",
                        "name": "SZ VAV Occupied Cooling Setpoint",
                        "data": {
                          "-shortname": "SZVAVClgOcc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7048",
                          "-modbusaddr": "270",
                          "-n2pointtype": "ADF",
                          "-n2address": "169",
                          "-bacoid": "29925",
                          "-modify": "Read/Write",
                          "-IPdefault": "72",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "SZ VAV Unoccupied Cooling Setpoint651",
                      "name": "SZ VAV Unoccupied Cooling Setpoint",
                      "children": {
                        "id": "SZ VAV Unoccupied Cooling Setpoint652",
                        "name": "SZ VAV Unoccupied Cooling Setpoint",
                        "data": {
                          "-shortname": "SZVAVClgUnocc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7049",
                          "-modbusaddr": "271",
                          "-n2pointtype": "ADF",
                          "-n2address": "170",
                          "-bacoid": "29926",
                          "-modify": "Read/Write",
                          "-IPdefault": "85",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Occupied Heating Setpoint652",
                      "name": "VAV Occupied Heating Setpoint",
                      "children": {
                        "id": "VAV Occupied Heating Setpoint653",
                        "name": "VAV Occupied Heating Setpoint",
                        "data": {
                          "-shortname": "VAVHtgOcc-SP",
                          "-pointtype": "AV",
                          "-attributeid": "7016",
                          "-modbusaddr": "39",
                          "-n2pointtype": "ADF",
                          "-n2address": "118",
                          "-bacoid": "29723",
                          "-modify": "Read/Write",
                          "-IPdefault": "68",
                          "-IPmin": "40",
                          "-IPmax": "85",
                          "-IPunits": "?F",
                          "-SImin": "4",
                          "-SImax": "30",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Unoccupied Heating Setpoint653",
                      "name": "VAV Unoccupied Heating Setpoint",
                      "children": {
                        "id": "VAV Unoccupied Heating Setpoint654",
                        "name": "VAV Unoccupied Heating Setpoint",
                        "data": {
                          "-shortname": "VAVHtgUnocc-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7018",
                          "-modbusaddr": "40",
                          "-n2pointtype": "ADF",
                          "-n2address": "119",
                          "-bacoid": "29725",
                          "-modify": "Read/Write",
                          "-IPdefault": "60",
                          "-IPmin": "45",
                          "-IPmax": "98",
                          "-IPunits": "?F",
                          "-SImin": "7",
                          "-SImax": "36",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "DAT Max Heating SP654",
                      "name": "DAT Max Heating SP",
                      "children": {
                        "id": "DAT Max Heating SP655",
                        "name": "DAT Max Heating SP",
                        "data": {
                          "-shortname": "DATMaxHtgSP",
                          "-pointtype": "AV",
                          "-attributeid": "7043",
                          "-modbusaddr": "75",
                          "-n2pointtype": "ADF",
                          "-n2address": "161",
                          "-bacoid": "29905",
                          "-modify": "Read/Write",
                          "-IPdefault": "105",
                          "-IPmin": "80",
                          "-IPmax": "110",
                          "-IPunits": "?F",
                          "-SImin": "26.6",
                          "-SImax": "43.4",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "DAT Satisfied SP655",
                      "name": "DAT Satisfied SP",
                      "children": {
                        "id": "DAT Satisfied SP656",
                        "name": "DAT Satisfied SP",
                        "data": {
                          "-shortname": "DATSatSP",
                          "-pointtype": "AV",
                          "-attributeid": "7044",
                          "-modbusaddr": "76",
                          "-n2pointtype": "ADF",
                          "-n2address": "162",
                          "-bacoid": "29906",
                          "-modify": "Read/Write",
                          "-IPdefault": "70",
                          "-IPmin": "65",
                          "-IPmax": "75",
                          "-IPunits": "?F",
                          "-SImin": "18.3",
                          "-SImax": "23.9",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "DAT Cooling Min SP656",
                      "name": "DAT Cooling Min SP",
                      "children": {
                        "id": "DAT Cooling Min SP657",
                        "name": "DAT Cooling Min SP",
                        "data": {
                          "-shortname": "DATClgMinSP",
                          "-pointtype": "AV",
                          "-attributeid": "7045",
                          "-modbusaddr": "74",
                          "-n2pointtype": "ADF",
                          "-n2address": "160",
                          "-bacoid": "29907",
                          "-modify": "Read/Write",
                          "-IPdefault": "54",
                          "-IPmin": "55",
                          "-IPmax": "60",
                          "-IPunits": "?F",
                          "-SImin": "10",
                          "-SImax": "15.6",
                          "-SIunits": "?C"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service657",
                  "name": "Service",
                  "children": [
                    {
                      "id": "SZ VAV Operating Cooling Setpoint658",
                      "name": "SZ VAV Operating Cooling Setpoint",
                      "children": {
                        "id": "SZ VAV Operating Cooling Setpoint659",
                        "name": "SZ VAV Operating Cooling Setpoint",
                        "data": {
                          "-shortname": "OprSZVAVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7050",
                          "-modbusaddr": "266",
                          "-n2pointtype": "ADF",
                          "-n2address": "171",
                          "-bacoid": "29927",
                          "-modify": "Read Only",
                          "-IPdefault": "55",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "SZ VAV Cooling Load659",
                      "name": "SZ VAV Cooling Load",
                      "children": {
                        "id": "SZ VAV Cooling Load660",
                        "name": "SZ VAV Cooling Load",
                        "data": {
                          "-shortname": "SZVAVClgLd",
                          "-pointtype": "AV",
                          "-attributeid": "7053",
                          "-modbusaddr": "435",
                          "-n2pointtype": "ADF",
                          "-n2address": "186",
                          "-bacoid": "29935",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "SZ VAV Heating Load660",
                      "name": "SZ VAV Heating Load",
                      "children": {
                        "id": "SZ VAV Heating Load661",
                        "name": "SZ VAV Heating Load",
                        "data": {
                          "-shortname": "SZVAVHtgLd",
                          "-pointtype": "AV",
                          "-attributeid": "7050",
                          "-modbusaddr": "436",
                          "-n2pointtype": "ADF",
                          "-n2address": "187",
                          "-bacoid": "29936",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "VAV Operating Cooling Supply Air Temp Setpoint661",
                      "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                      "children": {
                        "id": "VAV Operating Cooling Supply Air Temp Setpoint662",
                        "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                        "data": {
                          "-shortname": "OprVAVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7032",
                          "-modbusaddr": "160",
                          "-n2pointtype": "ADF",
                          "-n2address": "50",
                          "-bacoid": "29607",
                          "-modify": "Read Only",
                          "-IPdefault": "72",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Temperature662",
                      "name": "Operational Space Temperature",
                      "children": {
                        "id": "Operational Space Temperature663",
                        "name": "Operational Space Temperature",
                        "data": {
                          "-shortname": "OprST",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "135",
                          "-n2pointtype": "AI",
                          "-n2address": "31",
                          "-bacoid": "29522",
                          "-modify": "Read Only",
                          "-IPdefault": "70",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Supply Air Temperature663",
                      "name": "Supply Air Temperature",
                      "children": {
                        "id": "Supply Air Temperature664",
                        "name": "Supply Air Temperature",
                        "data": {
                          "-shortname": "SAT",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "158",
                          "-n2pointtype": "AI",
                          "-n2address": "3",
                          "-bacoid": "29564",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Fan % Command664",
                      "name": "Fan % Command",
                      "children": {
                        "id": "Fan % Command665",
                        "name": "Fan % Command",
                        "data": {
                          "-shortname": "FanVFD",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "157",
                          "-n2pointtype": "AO",
                          "-n2address": "1",
                          "-bacoid": "29551",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Economizer Damper % Command665",
                      "name": "Economizer Damper % Command",
                      "children": {
                        "id": "Economizer Damper % Command666",
                        "name": "Economizer Damper % Command",
                        "data": {
                          "-shortname": "Econ",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "253",
                          "-n2pointtype": "AO",
                          "-n2address": "3",
                          "-bacoid": "29748",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 1666",
                      "name": "Compressor Stage Command 1",
                      "children": {
                        "id": "Compressor Stage Command 1667",
                        "name": "Compressor Stage Command 1",
                        "data": {
                          "-shortname": "C1",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "311",
                          "-n2pointtype": "BO",
                          "-n2address": "5",
                          "-bacoid": "29611",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 2667",
                      "name": "Compressor Stage Command 2",
                      "children": {
                        "id": "Compressor Stage Command 2668",
                        "name": "Compressor Stage Command 2",
                        "data": {
                          "-shortname": "C2",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "319",
                          "-n2pointtype": "BO",
                          "-n2address": "6",
                          "-bacoid": "29612",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 3668",
                      "name": "Compressor Stage Command 3"
                    },
                    {
                      "id": "Compressor Stage Command 4668",
                      "name": "Compressor Stage Command 4",
                      "children": {
                        "id": "Compressor Stage Command 4669",
                        "name": "Compressor Stage Command 4",
                        "data": {
                          "-shortname": "C4",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "335",
                          "-n2pointtype": "BO",
                          "-n2address": "8",
                          "-bacoid": "29614",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Hot Gas Reheat669",
              "name": "Hot Gas Reheat",
              "children": [
                {
                  "id": "Setup670",
                  "name": "Setup",
                  "children": [
                    {
                      "id": "Hot Gas Reheat Enabled For Operation671",
                      "name": "Hot Gas Reheat Enabled For Operation",
                      "children": {
                        "id": "Hot Gas Reheat Enabled For Operation672",
                        "name": "Hot Gas Reheat Enabled For Operation",
                        "data": {
                          "-shortname": "HGR-En",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "123",
                          "-n2pointtype": "ADI",
                          "-n2address": "96",
                          "-bacoid": "29789",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Alternate Operation Enabled672",
                      "name": "Hot Gas Reheat Alternate Operation Enabled",
                      "children": {
                        "id": "Hot Gas Reheat Alternate Operation Enabled673",
                        "name": "Hot Gas Reheat Alternate Operation Enabled",
                        "data": {
                          "-shortname": "HGRAlt-En",
                          "-pointtype": "MV",
                          "-attributeid": "7004",
                          "-modbusaddr": "124",
                          "-n2pointtype": "ADI",
                          "-n2address": "97",
                          "-bacoid": "29793",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Alternate Operation Writeable673",
                      "name": "Hot Gas Reheat Alternate Operation Writeable",
                      "children": {
                        "id": "Hot Gas Reheat Alternate Operation Writeable674",
                        "name": "Hot Gas Reheat Alternate Operation Writeable",
                        "data": {
                          "-shortname": "HGRAltWrite",
                          "-pointtype": "MV",
                          "-attributeid": "7005",
                          "-modbusaddr": "410",
                          "-n2pointtype": "ADI",
                          "-n2address": "127",
                          "-bacoid": "29794",
                          "-modify": "Read/Write",
                          "-IPdefault": "No",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Humidity Setpoint674",
                      "name": "Hot Gas Reheat Humidity Setpoint",
                      "children": {
                        "id": "Hot Gas Reheat Humidity Setpoint675",
                        "name": "Hot Gas Reheat Humidity Setpoint",
                        "data": {
                          "-shortname": "HGRHum-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "68",
                          "-n2pointtype": "ADF",
                          "-n2address": "153",
                          "-bacoid": "29792",
                          "-modify": "Read/Write",
                          "-IPdefault": "50",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%RH",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "HGR Enabled for Unoccupied Operation675",
                      "name": "HGR Enabled for Unoccupied Operation",
                      "children": {
                        "id": "HGR Enabled for Unoccupied Operation676",
                        "name": "HGR Enabled for Unoccupied Operation",
                        "data": {
                          "-shortname": "HGRUnocc-En",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "133",
                          "-n2pointtype": "ADI",
                          "-n2address": "116",
                          "-bacoid": "29904",
                          "-modify": "Read/Write",
                          "-IPdefault": "Yes",
                          "-enumset": "No/Yes"
                        }
                      }
                    },
                    {
                      "id": "HGR Unoccupied Humidity Setpoint676",
                      "name": "HGR Unoccupied Humidity Setpoint",
                      "children": {
                        "id": "HGR Unoccupied Humidity Setpoint677",
                        "name": "HGR Unoccupied Humidity Setpoint",
                        "data": {
                          "-shortname": "HGRUnoccHum-SP",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "78",
                          "-n2pointtype": "ADF",
                          "-n2address": "164",
                          "-bacoid": "29903",
                          "-modify": "Read/Write",
                          "-IPdefault": "70",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "HGR Humidity Setpoint Differential677",
                      "name": "HGR Humidity Setpoint Differential",
                      "children": {
                        "id": "HGR Humidity Setpoint Differential678",
                        "name": "HGR Humidity Setpoint Differential",
                        "data": {
                          "-shortname": "HGR-Diff",
                          "-pointtype": "AV",
                          "-attributeid": "7008",
                          "-bacoid": "29937",
                          "-modify": "Read/Write",
                          "-IPdefault": "3",
                          "-IPmin": "1",
                          "-IPmax": "10",
                          "-IPunits": "%",
                          "-SImin": "1",
                          "-SImax": "10",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Aux Mode678",
                      "name": "Aux Mode",
                      "children": {
                        "id": "Aux Mode679",
                        "name": "Aux Mode",
                        "data": {
                          "-shortname": "Mode",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modify": "Read/Write",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Service679",
                  "name": "Service",
                  "children": [
                    {
                      "id": "Staged Cooling Command680",
                      "name": "Staged Cooling Command",
                      "children": {
                        "id": "Staged Cooling Command681",
                        "name": "Staged Cooling Command",
                        "data": {
                          "-shortname": "StgClgCmd",
                          "-pointtype": "AV",
                          "-attributeid": "7047",
                          "-modbusaddr": "263",
                          "-n2pointtype": "ADF",
                          "-n2address": "165",
                          "-bacoid": "29922",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "CV Operating Cooling Setpoint681",
                      "name": "CV Operating Cooling Setpoint",
                      "children": {
                        "id": "CV Operating Cooling Setpoint682",
                        "name": "CV Operating Cooling Setpoint",
                        "data": {
                          "-shortname": "OprCVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7035",
                          "-modbusaddr": "161",
                          "-n2pointtype": "ADF",
                          "-n2address": "53",
                          "-bacoid": "29610",
                          "-modify": "Read Only",
                          "-IPdefault": "72",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Temperature682",
                      "name": "Operational Space Temperature",
                      "children": {
                        "id": "Operational Space Temperature683",
                        "name": "Operational Space Temperature",
                        "data": {
                          "-shortname": "OprST",
                          "-pointtype": "AV",
                          "-attributeid": "7006",
                          "-modbusaddr": "135",
                          "-n2pointtype": "AI",
                          "-n2address": "31",
                          "-bacoid": "29522",
                          "-modify": "Read Only",
                          "-IPdefault": "70",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Humidity Setpoint683",
                      "name": "Hot Gas Reheat Humidity Setpoint",
                      "children": {
                        "id": "Hot Gas Reheat Humidity Setpoint684",
                        "name": "Hot Gas Reheat Humidity Setpoint",
                        "data": {
                          "-shortname": "HGRHum-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "68",
                          "-n2pointtype": "ADF",
                          "-n2address": "153",
                          "-bacoid": "29792",
                          "-modify": "Read/Write",
                          "-IPdefault": "50",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%RH",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Operational Space Humidity684",
                      "name": "Operational Space Humidity",
                      "children": {
                        "id": "Operational Space Humidity685",
                        "name": "Operational Space Humidity",
                        "data": {
                          "-shortname": "OprSH",
                          "-pointtype": "AV",
                          "-attributeid": "7017",
                          "-modbusaddr": "137",
                          "-n2pointtype": "AI",
                          "-n2address": "32",
                          "-bacoid": "29531",
                          "-modify": "Read Only",
                          "-IPdefault": "0",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Status685",
                      "name": "Hot Gas Reheat Status",
                      "children": {
                        "id": "Hot Gas Reheat Status686",
                        "name": "Hot Gas Reheat Status",
                        "data": {
                          "-shortname": "HGR-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "380",
                          "-n2pointtype": "BI",
                          "-n2address": "41",
                          "-bacoid": "29791",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Normal Command/On-Alternate Operation Command/Off-Disabled"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Command686",
                      "name": "Hot Gas Reheat Command",
                      "children": {
                        "id": "Hot Gas Reheat Command687",
                        "name": "Hot Gas Reheat Command",
                        "data": {
                          "-shortname": "HGR",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "379",
                          "-n2pointtype": "BO",
                          "-n2address": "16",
                          "-bacoid": "29790",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 1687",
                      "name": "Compressor Stage Command 1",
                      "children": {
                        "id": "Compressor Stage Command 1688",
                        "name": "Compressor Stage Command 1",
                        "data": {
                          "-shortname": "C1",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "311",
                          "-n2pointtype": "BO",
                          "-n2address": "5",
                          "-bacoid": "29611",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 2688",
                      "name": "Compressor Stage Command 2",
                      "children": {
                        "id": "Compressor Stage Command 2689",
                        "name": "Compressor Stage Command 2",
                        "data": {
                          "-shortname": "C2",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "319",
                          "-n2pointtype": "BO",
                          "-n2address": "6",
                          "-bacoid": "29612",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 3689",
                      "name": "Compressor Stage Command 3"
                    },
                    {
                      "id": "Compressor Stage Command 4689",
                      "name": "Compressor Stage Command 4",
                      "children": {
                        "id": "Compressor Stage Command 4690",
                        "name": "Compressor Stage Command 4",
                        "data": {
                          "-shortname": "C4",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "335",
                          "-n2pointtype": "BO",
                          "-n2address": "8",
                          "-bacoid": "29614",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Space Humidity RAH Input690",
                      "name": "Space Humidity RAH Input",
                      "children": {
                        "id": "Space Humidity RAH Input691",
                        "name": "Space Humidity RAH Input",
                        "data": {
                          "-shortname": "RAH",
                          "-pointtype": "AV",
                          "-attributeid": "7019",
                          "-modbusaddr": "138",
                          "-n2pointtype": "AI",
                          "-n2address": "1",
                          "-bacoid": "29828",
                          "-modify": "Read Only",
                          "-IPunits": "%RH",
                          "-SIunits": "%RH"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Heat Pump691",
              "name": "Heat Pump",
              "children": [
                {
                  "id": "Number of Heat Pump Stages Installed692",
                  "name": "Number of Heat Pump Stages Installed",
                  "children": {
                    "id": "Number of Heat Pump Stages Installed693",
                    "name": "Number of Heat Pump Stages Installed",
                    "data": {
                      "-shortname": "#HtPumpStgs",
                      "-pointtype": "AV",
                      "-attributeid": "7000",
                      "-modbusaddr": "434",
                      "-n2pointtype": "ADF",
                      "-n2address": "185",
                      "-bacoid": "29898",
                      "-modify": "Read/Write",
                      "-IPdefault": "0",
                      "-IPmin": "0",
                      "-IPmax": "2",
                      "-SImin": "0",
                      "-SImax": "2"
                    }
                  }
                },
                {
                  "id": "Test Defrost Enable693",
                  "name": "Test Defrost Enable",
                  "children": {
                    "id": "Test Defrost Enable694",
                    "name": "Test Defrost Enable",
                    "data": {
                      "-shortname": "TestDefrostEnable",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Compressor Delay Enable694",
                  "name": "Compressor Delay Enable",
                  "children": {
                    "id": "Compressor Delay Enable695",
                    "name": "Compressor Delay Enable",
                    "data": {
                      "-shortname": "CompDelayEnable",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                },
                {
                  "id": "Defrost Curve Selection695",
                  "name": "Defrost Curve Selection",
                  "children": {
                    "id": "Defrost Curve Selection696",
                    "name": "Defrost Curve Selection",
                    "data": {
                      "-shortname": "DefrostCurveSel",
                      "-pointtype": "MV",
                      "-attributeid": "7004",
                      "-modbusaddr": "117",
                      "-n2pointtype": "ADI",
                      "-n2address": "81",
                      "-bacoid": "29899",
                      "-modify": "Read/Write",
                      "-IPdefault": "Curve 1",
                      "-enumset": "Curve 1/Curve 2/Curve 3/Curve 4/Curve 5/Curve 6"
                    }
                  }
                },
                {
                  "id": "Reversing Valve696",
                  "name": "Reversing Valve",
                  "children": {
                    "id": "Reversing Valve697",
                    "name": "Reversing Valve",
                    "data": {
                      "-shortname": "RevVlv",
                      "-pointtype": "MV",
                      "-attributeid": "7011",
                      "-modbusaddr": "366",
                      "-n2pointtype": "BO",
                      "-n2address": "13",
                      "-bacoid": "29900",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Auxiliary Heat697",
                  "name": "Auxiliary Heat",
                  "children": {
                    "id": "Auxiliary Heat698",
                    "name": "Auxiliary Heat",
                    "data": {
                      "-shortname": "AuxHtg",
                      "-pointtype": "MV",
                      "-attributeid": "7012",
                      "-modbusaddr": "367",
                      "-n2pointtype": "BO",
                      "-n2address": "14",
                      "-bacoid": "29901",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Mode698",
                  "name": "Mode",
                  "children": {
                    "id": "Mode699",
                    "name": "Mode",
                    "data": {
                      "-shortname": "Mode",
                      "-pointtype": "MV",
                      "-attributeid": "7013",
                      "-modbusaddr": "368",
                      "-n2pointtype": "ADI",
                      "-n2address": "83",
                      "-bacoid": "29902",
                      "-modify": "Read Only",
                      "-enumset": "Heating/Cooling"
                    }
                  }
                }
              ]
            },
            {
              "id": "ERV699",
              "name": "ERV",
              "children": [
                {
                  "id": "ERV Enabled700",
                  "name": "ERV Enabled",
                  "children": {
                    "id": "ERV Enabled701",
                    "name": "ERV Enabled",
                    "data": {
                      "-shortname": "ERV-En",
                      "-pointtype": "MV",
                      "-attributeid": "7013",
                      "-modbusaddr": "121",
                      "-n2pointtype": "ADI",
                      "-n2address": "94",
                      "-bacoid": "29787",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "ERV Unoccupied Fan Enabled701",
                  "name": "ERV Unoccupied Fan Enabled",
                  "children": {
                    "id": "ERV Unoccupied Fan Enabled702",
                    "name": "ERV Unoccupied Fan Enabled",
                    "data": {
                      "-shortname": "ERVUnoccFan-En",
                      "-pointtype": "MV",
                      "-attributeid": "7014",
                      "-modbusaddr": "122",
                      "-n2pointtype": "ADI",
                      "-n2address": "95",
                      "-bacoid": "29788",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Fan Control Type702",
                  "name": "Fan Control Type",
                  "children": {
                    "id": "Fan Control Type703",
                    "name": "Fan Control Type",
                    "data": {
                      "-shortname": "FanCtl-Type",
                      "-pointtype": "MV",
                      "-attributeid": "7005",
                      "-modbusaddr": "400",
                      "-n2pointtype": "ADI",
                      "-n2address": "119",
                      "-bacoid": "29555",
                      "-modify": "Read/Write",
                      "-IPdefault": "Single Speed",
                      "-enumset": "Single Speed/Not Used/Fixed Variable/Variable Speed"
                    }
                  }
                },
                {
                  "id": "Fan Command703",
                  "name": "Fan Command",
                  "children": {
                    "id": "Fan Command704",
                    "name": "Fan Command",
                    "data": {
                      "-shortname": "Fan",
                      "-pointtype": "MV",
                      "-attributeid": "7013",
                      "-modbusaddr": "307",
                      "-n2pointtype": "BO",
                      "-n2address": "2",
                      "-bacoid": "29563",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Econ Free Cooling Available704",
                  "name": "Econ Free Cooling Available",
                  "children": {
                    "id": "Econ Free Cooling Available705",
                    "name": "Econ Free Cooling Available",
                    "data": {
                      "-shortname": "Econ-Free",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "369",
                      "-n2pointtype": "ADI",
                      "-n2address": "85",
                      "-bacoid": "29749",
                      "-modify": "Read Only",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Exhaust Fan Command705",
                  "name": "Exhaust Fan Command",
                  "children": {
                    "id": "Exhaust Fan Command706",
                    "name": "Exhaust Fan Command",
                    "data": {
                      "-shortname": "ExFan",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modbusaddr": "376",
                      "-n2pointtype": "BO",
                      "-n2address": "15",
                      "-bacoid": "29775",
                      "-modify": "Read Only",
                      "-enumset": "Off/On"
                    }
                  }
                }
              ]
            },
            {
              "id": "Load Shed706",
              "name": "Load Shed",
              "children": [
                {
                  "id": "Load Shed Rate Limit707",
                  "name": "Load Shed Rate Limit",
                  "children": {
                    "id": "Load Shed Rate Limit708",
                    "name": "Load Shed Rate Limit",
                    "data": {
                      "-shortname": "LoadShedRateLim",
                      "-pointtype": "AV",
                      "-attributeid": "7044",
                      "-modbusaddr": "71",
                      "-n2pointtype": "ADF",
                      "-n2address": "157",
                      "-bacoid": "29884",
                      "-modify": "Read/Write",
                      "-IPdefault": "0.0659999996423721",
                      "-IPmin": "0",
                      "-IPmax": "1",
                      "-IPunits": "?F/min",
                      "-SImin": "0",
                      "-SImax": "1",
                      "-SIunits": "?C/min"
                    }
                  }
                },
                {
                  "id": "Load Shed Adjust708",
                  "name": "Load Shed Adjust",
                  "children": {
                    "id": "Load Shed Adjust709",
                    "name": "Load Shed Adjust",
                    "data": {
                      "-shortname": "LoadShedAdjust",
                      "-pointtype": "AV",
                      "-attributeid": "7045",
                      "-modbusaddr": "72",
                      "-n2pointtype": "ADF",
                      "-n2address": "158",
                      "-bacoid": "29885",
                      "-modify": "Read/Write",
                      "-IPdefault": "4",
                      "-IPmin": "0",
                      "-IPmax": "8",
                      "-IPunits": "delta ?F",
                      "-SImin": "0",
                      "-SImax": "4.4",
                      "-SIunits": "delta ?K"
                    }
                  }
                },
                {
                  "id": "Load Shed Active709",
                  "name": "Load Shed Active",
                  "children": {
                    "id": "Load Shed Active710",
                    "name": "Load Shed Active",
                    "data": {
                      "-shortname": "LoadShedEnable",
                      "-pointtype": "MV",
                      "-attributeid": "7043",
                      "-modbusaddr": "127",
                      "-n2pointtype": "ADI",
                      "-n2address": "110",
                      "-bacoid": "29883",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Clone View710",
          "name": "Clone View",
          "children": [
            {
              "id": "Full Clone711",
              "name": "Full Clone",
              "children": [
                {
                  "id": "Device Name712",
                  "name": "Device Name",
                  "children": {
                    "id": "Device Name713",
                    "name": "Device Name",
                    "data": {
                      "-shortname": "DevName",
                      "-pointtype": "SV",
                      "-attributeid": "7009",
                      "-bacoid": "29818",
                      "-modify": "Read/Write",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "Unit Name713",
                  "name": "Unit Name",
                  "children": {
                    "id": "Unit Name714",
                    "name": "Unit Name",
                    "data": {
                      "-shortname": "Name",
                      "-pointtype": "SV",
                      "-attributeid": "7001",
                      "-bacoid": "29804",
                      "-modify": "Read/Write",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "Unit Model Number714",
                  "name": "Unit Model Number",
                  "children": {
                    "id": "Unit Model Number715",
                    "name": "Unit Model Number",
                    "data": {
                      "-shortname": "Model#",
                      "-pointtype": "SV",
                      "-attributeid": "7002",
                      "-bacoid": "29805",
                      "-modify": "Read/Write",
                      "-IPdefault": "RTUxxxxx",
                      "-IPmax": "40",
                      "-SImax": "40"
                    }
                  }
                },
                {
                  "id": "Unit Serial Number715",
                  "name": "Unit Serial Number",
                  "children": {
                    "id": "Unit Serial Number716",
                    "name": "Unit Serial Number",
                    "data": {
                      "-shortname": "Serial#",
                      "-pointtype": "SV",
                      "-attributeid": "7003",
                      "-bacoid": "29806",
                      "-modify": "Read/Write",
                      "-IPmax": "40",
                      "-SImax": "40"
                    }
                  }
                },
                {
                  "id": "Model Name716",
                  "name": "Model Name",
                  "children": {
                    "id": "Model Name717",
                    "name": "Model Name",
                    "data": {
                      "-shortname": "ModelName",
                      "-pointtype": "SV",
                      "-attributeid": "7014",
                      "-modify": "Read Only",
                      "-IPmax": "30",
                      "-SImax": "30"
                    }
                  }
                },
                {
                  "id": "Fan Accumulated Runtime717",
                  "name": "Fan Accumulated Runtime",
                  "children": {
                    "id": "Fan Accumulated Runtime718",
                    "name": "Fan Accumulated Runtime",
                    "data": {
                      "-shortname": "Fan-RT",
                      "-pointtype": "AV",
                      "-attributeid": "7004",
                      "-modbusaddr": "9",
                      "-n2pointtype": "ADF",
                      "-n2address": "30",
                      "-bacoid": "29554",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "10000",
                      "-IPunits": "hours",
                      "-SImin": "0",
                      "-SImax": "10000",
                      "-SIunits": "hours"
                    }
                  }
                },
                {
                  "id": "Compressor Stage Accumulated Runtime 1718",
                  "name": "Compressor Stage Accumulated Runtime 1",
                  "children": {
                    "id": "Compressor Stage Accumulated Runtime 1719",
                    "name": "Compressor Stage Accumulated Runtime 1",
                    "data": {
                      "-shortname": "C1RunTim",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "33",
                      "-n2pointtype": "ADF",
                      "-n2address": "56",
                      "-bacoid": "29627",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "10000",
                      "-IPunits": "hours",
                      "-SImin": "0",
                      "-SImax": "10000",
                      "-SIunits": "hours"
                    }
                  }
                },
                {
                  "id": "Compressor Stage Accumulated Runtime 2719",
                  "name": "Compressor Stage Accumulated Runtime 2",
                  "children": {
                    "id": "Compressor Stage Accumulated Runtime 2720",
                    "name": "Compressor Stage Accumulated Runtime 2",
                    "data": {
                      "-shortname": "C2RunTim",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "34",
                      "-n2pointtype": "ADF",
                      "-n2address": "57",
                      "-bacoid": "29628",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "10000",
                      "-IPunits": "hours",
                      "-SImin": "0",
                      "-SImax": "10000",
                      "-SIunits": "hours"
                    }
                  }
                },
                {
                  "id": "Compressor Stage Accumulated Runtime 3720",
                  "name": "Compressor Stage Accumulated Runtime 3",
                  "children": {
                    "id": "Compressor Stage Accumulated Runtime 3721",
                    "name": "Compressor Stage Accumulated Runtime 3",
                    "data": {
                      "-shortname": "C3RunTim",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "35",
                      "-n2pointtype": "ADF",
                      "-n2address": "58",
                      "-bacoid": "29629",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "10000",
                      "-IPunits": "hours",
                      "-SImin": "0",
                      "-SImax": "10000",
                      "-SIunits": "hours"
                    }
                  }
                },
                {
                  "id": "Compressor Stage Accumulated Runtime 4721",
                  "name": "Compressor Stage Accumulated Runtime 4",
                  "children": {
                    "id": "Compressor Stage Accumulated Runtime 4722",
                    "name": "Compressor Stage Accumulated Runtime 4",
                    "data": {
                      "-shortname": "C4RunTim",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "36",
                      "-n2pointtype": "ADF",
                      "-n2address": "59",
                      "-bacoid": "29630",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "10000",
                      "-IPunits": "hours",
                      "-SImin": "0",
                      "-SImax": "10000",
                      "-SIunits": "hours"
                    }
                  }
                },
                {
                  "id": "Heating Stage 1 Accumulated Runtime722",
                  "name": "Heating Stage 1 Accumulated Runtime"
                },
                {
                  "id": "Heating Stage 2 Accumulated Runtime722",
                  "name": "Heating Stage 2 Accumulated Runtime"
                },
                {
                  "id": "Heating Stage 3 Accumulated Runtime722",
                  "name": "Heating Stage 3 Accumulated Runtime"
                },
                {
                  "id": "Time Zone722",
                  "name": "Time Zone",
                  "children": {
                    "id": "Time Zone723",
                    "name": "Time Zone",
                    "data": {
                      "-shortname": "TimeZone",
                      "-pointtype": "MV",
                      "-attributeid": "7007",
                      "-modify": "Read/Write",
                      "-enumset": "Eastern/Central/Mountain/Pacific/Newfoundland/Atlantic/Alaska/Hawaii"
                    }
                  }
                },
                {
                  "id": "Address723",
                  "name": "Address",
                  "children": {
                    "id": "Address724",
                    "name": "Address",
                    "data": {
                      "-shortname": "Address",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "275",
                      "-modify": "Read/Write",
                      "-IPmin": "4",
                      "-IPmax": "127",
                      "-SImin": "4",
                      "-SImax": "127"
                    }
                  }
                },
                {
                  "id": "Device OID724",
                  "name": "Device OID",
                  "children": {
                    "id": "Device OID725",
                    "name": "Device OID",
                    "data": {
                      "-shortname": "DeviceId",
                      "-pointtype": "AV",
                      "-attributeid": "7002",
                      "-bacoid": "29897",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "4194302",
                      "-SImin": "0",
                      "-SImax": "4194302"
                    }
                  }
                }
              ]
            },
            {
              "id": "Partial Clone 1725",
              "name": "Partial Clone 1",
              "children": [
                {
                  "id": "Duct Pressure Setpoint726",
                  "name": "Duct Pressure Setpoint",
                  "children": {
                    "id": "Duct Pressure Setpoint727",
                    "name": "Duct Pressure Setpoint",
                    "data": {
                      "-shortname": "DctPrs-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7016",
                      "-modbusaddr": "10",
                      "-n2pointtype": "ADF",
                      "-n2address": "31",
                      "-bacoid": "29566",
                      "-modify": "Read/Write",
                      "-IPdefault": "1.5",
                      "-IPmin": "0",
                      "-IPmax": "5",
                      "-IPunits": "in wc",
                      "-SImin": "0",
                      "-SImax": "1.25",
                      "-SIunits": "kPa"
                    }
                  }
                },
                {
                  "id": "Duct Pressure Shutdown Setpoint727",
                  "name": "Duct Pressure Shutdown Setpoint",
                  "children": {
                    "id": "Duct Pressure Shutdown Setpoint728",
                    "name": "Duct Pressure Shutdown Setpoint",
                    "data": {
                      "-shortname": "DctShutdownSp",
                      "-pointtype": "AV",
                      "-attributeid": "7017",
                      "-modbusaddr": "11",
                      "-n2pointtype": "ADF",
                      "-n2address": "32",
                      "-bacoid": "29567",
                      "-modify": "Read/Write",
                      "-IPdefault": "4.5",
                      "-IPmin": "0",
                      "-IPmax": "5",
                      "-IPunits": "in wc",
                      "-SImin": "0",
                      "-SImax": "1.25",
                      "-SIunits": "kPa"
                    }
                  }
                },
                {
                  "id": "Continuous Fan Operation in Occupied Mode728",
                  "name": "Continuous Fan Operation in Occupied Mode",
                  "children": {
                    "id": "Continuous Fan Operation in Occupied Mode729",
                    "name": "Continuous Fan Operation in Occupied Mode",
                    "data": {
                      "-shortname": "FanOnOcc",
                      "-pointtype": "MV",
                      "-attributeid": "7018",
                      "-modbusaddr": "91",
                      "-n2pointtype": "ADI",
                      "-n2address": "25",
                      "-bacoid": "29568",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "Yes/No"
                    }
                  }
                },
                {
                  "id": "Turn Off Continuous Fan Operation When Starting Heat729",
                  "name": "Turn Off Continuous Fan Operation When Starting Heat",
                  "children": {
                    "id": "Turn Off Continuous Fan Operation When Starting Heat730",
                    "name": "Turn Off Continuous Fan Operation When Starting Heat",
                    "data": {
                      "-shortname": "FanOffStartHeat",
                      "-pointtype": "MV",
                      "-attributeid": "7019",
                      "-modbusaddr": "92",
                      "-n2pointtype": "ADI",
                      "-n2address": "26",
                      "-bacoid": "29569",
                      "-modify": "Read/Write",
                      "-IPdefault": "No",
                      "-enumset": "Yes/No"
                    }
                  }
                },
                {
                  "id": "Occupied: No Heat or Cool % Command730",
                  "name": "Occupied: No Heat or Cool % Command",
                  "children": {
                    "id": "Occupied: No Heat or Cool % Command731",
                    "name": "Occupied: No Heat or Cool % Command",
                    "data": {
                      "-shortname": "FanOnly-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7020",
                      "-modbusaddr": "12",
                      "-n2pointtype": "ADF",
                      "-n2address": "33",
                      "-bacoid": "29570",
                      "-modify": "Read/Write",
                      "-IPdefault": "50",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: One Stage of Cool % Command731",
                  "name": "Occupied: One Stage of Cool % Command",
                  "children": {
                    "id": "Occupied: One Stage of Cool % Command732",
                    "name": "Occupied: One Stage of Cool % Command",
                    "data": {
                      "-shortname": "1ClgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7021",
                      "-modbusaddr": "13",
                      "-n2pointtype": "ADF",
                      "-n2address": "34",
                      "-bacoid": "29571",
                      "-modify": "Read/Write",
                      "-IPdefault": "70",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: Two Stage of Cool % Command732",
                  "name": "Occupied: Two Stage of Cool % Command",
                  "children": {
                    "id": "Occupied: Two Stage of Cool % Command733",
                    "name": "Occupied: Two Stage of Cool % Command",
                    "data": {
                      "-shortname": "2ClgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7022",
                      "-modbusaddr": "14",
                      "-n2pointtype": "ADF",
                      "-n2address": "35",
                      "-bacoid": "29572",
                      "-modify": "Read/Write",
                      "-IPdefault": "80",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: Three Stage of Cool % Command733",
                  "name": "Occupied: Three Stage of Cool % Command",
                  "children": {
                    "id": "Occupied: Three Stage of Cool % Command734",
                    "name": "Occupied: Three Stage of Cool % Command",
                    "data": {
                      "-shortname": "3ClgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7027",
                      "-modbusaddr": "15",
                      "-n2pointtype": "ADF",
                      "-n2address": "36",
                      "-bacoid": "29819",
                      "-modify": "Read/Write",
                      "-IPdefault": "90",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: Four Stage of Cool % Command734",
                  "name": "Occupied: Four Stage of Cool % Command",
                  "children": {
                    "id": "Occupied: Four Stage of Cool % Command735",
                    "name": "Occupied: Four Stage of Cool % Command",
                    "data": {
                      "-shortname": "4ClgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7028",
                      "-modbusaddr": "16",
                      "-n2pointtype": "ADF",
                      "-n2address": "37",
                      "-bacoid": "29820",
                      "-modify": "Read/Write",
                      "-IPdefault": "100",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: One Stage of Heat % Command735",
                  "name": "Occupied: One Stage of Heat % Command",
                  "children": {
                    "id": "Occupied: One Stage of Heat % Command736",
                    "name": "Occupied: One Stage of Heat % Command",
                    "data": {
                      "-shortname": "1HtgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7023",
                      "-modbusaddr": "17",
                      "-n2pointtype": "ADF",
                      "-n2address": "38",
                      "-bacoid": "29573",
                      "-modify": "Read/Write",
                      "-IPdefault": "100",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: Two Stage of Heat % Command736",
                  "name": "Occupied: Two Stage of Heat % Command",
                  "children": {
                    "id": "Occupied: Two Stage of Heat % Command737",
                    "name": "Occupied: Two Stage of Heat % Command",
                    "data": {
                      "-shortname": "2HtgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7024",
                      "-modbusaddr": "18",
                      "-n2pointtype": "ADF",
                      "-n2address": "39",
                      "-bacoid": "29574",
                      "-modify": "Read/Write",
                      "-IPdefault": "100",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Occupied: Three Stage of Heat % Command737",
                  "name": "Occupied: Three Stage of Heat % Command",
                  "children": {
                    "id": "Occupied: Three Stage of Heat % Command738",
                    "name": "Occupied: Three Stage of Heat % Command",
                    "data": {
                      "-shortname": "3HtgStg-%Cmd",
                      "-pointtype": "AV",
                      "-attributeid": "7029",
                      "-modbusaddr": "19",
                      "-n2pointtype": "ADF",
                      "-n2address": "40",
                      "-bacoid": "29821",
                      "-modify": "Read/Write",
                      "-IPdefault": "100",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "VAV Cooling Supply Air Temp Upper Setpoint738",
                  "name": "VAV Cooling Supply Air Temp Upper Setpoint",
                  "children": {
                    "id": "VAV Cooling Supply Air Temp Upper Setpoint739",
                    "name": "VAV Cooling Supply Air Temp Upper Setpoint",
                    "data": {
                      "-shortname": "SATUp-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7029",
                      "-modbusaddr": "26",
                      "-n2pointtype": "ADF",
                      "-n2address": "47",
                      "-bacoid": "29604",
                      "-modify": "Read/Write",
                      "-IPdefault": "60",
                      "-IPmin": "41",
                      "-IPmax": "70",
                      "-IPunits": "?F",
                      "-SImin": "5",
                      "-SImax": "21",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "VAV Cooling Supply Air Temp Lower Setpoint739",
                  "name": "VAV Cooling Supply Air Temp Lower Setpoint",
                  "children": {
                    "id": "VAV Cooling Supply Air Temp Lower Setpoint740",
                    "name": "VAV Cooling Supply Air Temp Lower Setpoint",
                    "data": {
                      "-shortname": "SATLo-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7030",
                      "-modbusaddr": "27",
                      "-n2pointtype": "ADF",
                      "-n2address": "48",
                      "-bacoid": "29605",
                      "-modify": "Read/Write",
                      "-IPdefault": "55",
                      "-IPmin": "40",
                      "-IPmax": "69",
                      "-IPunits": "?F",
                      "-SImin": "4",
                      "-SImax": "20",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "VAV Supply Air Temp Reset Setpoint740",
                  "name": "VAV Supply Air Temp Reset Setpoint",
                  "children": {
                    "id": "VAV Supply Air Temp Reset Setpoint741",
                    "name": "VAV Supply Air Temp Reset Setpoint",
                    "data": {
                      "-shortname": "SATRst-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7031",
                      "-modbusaddr": "28",
                      "-n2pointtype": "ADF",
                      "-n2address": "49",
                      "-bacoid": "29606",
                      "-modify": "Read/Write",
                      "-IPdefault": "72",
                      "-IPmin": "40",
                      "-IPmax": "85",
                      "-IPunits": "?F",
                      "-SImin": "4",
                      "-SImax": "30",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "VAV Operating Cooling Supply Air Temp Setpoint741",
                  "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                  "children": {
                    "id": "VAV Operating Cooling Supply Air Temp Setpoint742",
                    "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                    "data": {
                      "-shortname": "OprVAVClg-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7032",
                      "-modbusaddr": "160",
                      "-n2pointtype": "ADF",
                      "-n2address": "50",
                      "-bacoid": "29607",
                      "-modify": "Read Only",
                      "-IPdefault": "72",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "CV Occupied Cooling Setpoint742",
                  "name": "CV Occupied Cooling Setpoint",
                  "children": {
                    "id": "CV Occupied Cooling Setpoint743",
                    "name": "CV Occupied Cooling Setpoint",
                    "data": {
                      "-shortname": "ClgOcc-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7033",
                      "-modbusaddr": "29",
                      "-n2pointtype": "ADF",
                      "-n2address": "51",
                      "-bacoid": "29608",
                      "-modify": "Read/Write",
                      "-IPdefault": "72",
                      "-IPmin": "45",
                      "-IPmax": "98",
                      "-IPunits": "?F",
                      "-SImin": "7",
                      "-SImax": "36",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "CV Unoccupied Cooling Setpoint743",
                  "name": "CV Unoccupied Cooling Setpoint",
                  "children": {
                    "id": "CV Unoccupied Cooling Setpoint744",
                    "name": "CV Unoccupied Cooling Setpoint",
                    "data": {
                      "-shortname": "ClgUnocc-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7034",
                      "-modbusaddr": "30",
                      "-n2pointtype": "ADF",
                      "-n2address": "52",
                      "-bacoid": "29609",
                      "-modify": "Read/Write",
                      "-IPdefault": "85",
                      "-IPmin": "46",
                      "-IPmax": "99",
                      "-IPunits": "?F",
                      "-SImin": "8",
                      "-SImax": "37",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "VAV Occupied Heating Enabled744",
                  "name": "VAV Occupied Heating Enabled",
                  "children": {
                    "id": "VAV Occupied Heating Enabled745",
                    "name": "VAV Occupied Heating Enabled",
                    "data": {
                      "-shortname": "HtgOcc-En",
                      "-pointtype": "MV",
                      "-attributeid": "7015",
                      "-modbusaddr": "107",
                      "-n2pointtype": "ADI",
                      "-n2address": "71",
                      "-bacoid": "29722",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "VAV Occupied Heating Setpoint745",
                  "name": "VAV Occupied Heating Setpoint",
                  "children": {
                    "id": "VAV Occupied Heating Setpoint746",
                    "name": "VAV Occupied Heating Setpoint",
                    "data": {
                      "-shortname": "VAVHtgOcc-SP",
                      "-pointtype": "AV",
                      "-attributeid": "7016",
                      "-modbusaddr": "39",
                      "-n2pointtype": "ADF",
                      "-n2address": "118",
                      "-bacoid": "29723",
                      "-modify": "Read/Write",
                      "-IPdefault": "68",
                      "-IPmin": "40",
                      "-IPmax": "85",
                      "-IPunits": "?F",
                      "-SImin": "4",
                      "-SImax": "30",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Unoccupied Heating Enabled746",
                  "name": "Unoccupied Heating Enabled",
                  "children": {
                    "id": "Unoccupied Heating Enabled747",
                    "name": "Unoccupied Heating Enabled",
                    "data": {
                      "-shortname": "HtgUnocc-En",
                      "-pointtype": "MV",
                      "-attributeid": "7017",
                      "-modbusaddr": "108",
                      "-n2pointtype": "ADI",
                      "-n2address": "72",
                      "-bacoid": "29724",
                      "-modify": "Read/Write",
                      "-IPdefault": "Yes",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "VAV Unoccupied Heating Setpoint747",
                  "name": "VAV Unoccupied Heating Setpoint",
                  "children": {
                    "id": "VAV Unoccupied Heating Setpoint748",
                    "name": "VAV Unoccupied Heating Setpoint",
                    "data": {
                      "-shortname": "VAVHtgUnocc-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7018",
                      "-modbusaddr": "40",
                      "-n2pointtype": "ADF",
                      "-n2address": "119",
                      "-bacoid": "29725",
                      "-modify": "Read/Write",
                      "-IPdefault": "60",
                      "-IPmin": "45",
                      "-IPmax": "98",
                      "-IPunits": "?F",
                      "-SImin": "7",
                      "-SImax": "36",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "SZ VAV Occupied Cooling Setpoint748",
                  "name": "SZ VAV Occupied Cooling Setpoint",
                  "children": {
                    "id": "SZ VAV Occupied Cooling Setpoint749",
                    "name": "SZ VAV Occupied Cooling Setpoint",
                    "data": {
                      "-shortname": "SZVAVClgOcc-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7048",
                      "-modbusaddr": "270",
                      "-n2pointtype": "ADF",
                      "-n2address": "169",
                      "-bacoid": "29925",
                      "-modify": "Read/Write",
                      "-IPdefault": "72",
                      "-IPmin": "45",
                      "-IPmax": "98",
                      "-IPunits": "?F",
                      "-SImin": "7",
                      "-SImax": "36",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "SZ VAV Unoccupied Cooling Setpoint749",
                  "name": "SZ VAV Unoccupied Cooling Setpoint",
                  "children": {
                    "id": "SZ VAV Unoccupied Cooling Setpoint750",
                    "name": "SZ VAV Unoccupied Cooling Setpoint",
                    "data": {
                      "-shortname": "SZVAVClgUnocc-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7049",
                      "-modbusaddr": "271",
                      "-n2pointtype": "ADF",
                      "-n2address": "170",
                      "-bacoid": "29926",
                      "-modify": "Read/Write",
                      "-IPdefault": "85",
                      "-IPmin": "45",
                      "-IPmax": "98",
                      "-IPunits": "?F",
                      "-SImin": "7",
                      "-SImax": "36",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Morning Warmup Enabled750",
                  "name": "Morning Warmup Enabled",
                  "children": {
                    "id": "Morning Warmup Enabled751",
                    "name": "Morning Warmup Enabled",
                    "data": {
                      "-shortname": "MornW-En",
                      "-pointtype": "MV",
                      "-attributeid": "7020",
                      "-modbusaddr": "109",
                      "-n2pointtype": "ADI",
                      "-n2address": "73",
                      "-bacoid": "29822",
                      "-modify": "Read/Write",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Morning Warmup/Return Air Temp Setpoint751",
                  "name": "Morning Warmup/Return Air Temp Setpoint",
                  "children": {
                    "id": "Morning Warmup/Return Air Temp Setpoint752",
                    "name": "Morning Warmup/Return Air Temp Setpoint",
                    "data": {
                      "-shortname": "MornWRAT-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7021",
                      "-modbusaddr": "41",
                      "-n2pointtype": "ADF",
                      "-n2address": "121",
                      "-bacoid": "29823",
                      "-modify": "Read/Write",
                      "-IPdefault": "70",
                      "-IPmin": "50",
                      "-IPmax": "85",
                      "-IPunits": "?F",
                      "-SImin": "10",
                      "-SImax": "30",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "CV Occupied Heating Setpoint752",
                  "name": "CV Occupied Heating Setpoint",
                  "children": {
                    "id": "CV Occupied Heating Setpoint753",
                    "name": "CV Occupied Heating Setpoint",
                    "data": {
                      "-shortname": "CVHtgOcc-SP",
                      "-pointtype": "AV",
                      "-attributeid": "7023",
                      "-modbusaddr": "42",
                      "-n2pointtype": "ADF",
                      "-n2address": "122",
                      "-bacoid": "29728",
                      "-modify": "Read/Write",
                      "-IPdefault": "68",
                      "-IPmin": "46",
                      "-IPmax": "99",
                      "-IPunits": "?F",
                      "-SImin": "8",
                      "-SImax": "37",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "CV Unoccupied Heating Setpoint753",
                  "name": "CV Unoccupied Heating Setpoint",
                  "children": {
                    "id": "CV Unoccupied Heating Setpoint754",
                    "name": "CV Unoccupied Heating Setpoint",
                    "data": {
                      "-shortname": "CVHtgUnocc-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7024",
                      "-modbusaddr": "43",
                      "-n2pointtype": "ADF",
                      "-n2address": "123",
                      "-bacoid": "29729",
                      "-modify": "Read/Write",
                      "-IPdefault": "60",
                      "-IPmin": "45",
                      "-IPmax": "98",
                      "-IPunits": "?F",
                      "-SImin": "7",
                      "-SImax": "36",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Low Ambient Economizer Setpoint754",
                  "name": "Low Ambient Economizer Setpoint",
                  "children": {
                    "id": "Low Ambient Economizer Setpoint755",
                    "name": "Low Ambient Economizer Setpoint",
                    "data": {
                      "-shortname": "LowAmb-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7008",
                      "-modbusaddr": "57",
                      "-n2pointtype": "ADF",
                      "-n2address": "138",
                      "-bacoid": "29755",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "60",
                      "-IPunits": "?F",
                      "-SImin": "-18",
                      "-SImax": "15",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Low Ambient Economizer Minimum Position755",
                  "name": "Low Ambient Economizer Minimum Position",
                  "children": {
                    "id": "Low Ambient Economizer Minimum Position756",
                    "name": "Low Ambient Economizer Minimum Position",
                    "data": {
                      "-shortname": "LowAmb-MinPos",
                      "-pointtype": "AV",
                      "-attributeid": "7009",
                      "-modbusaddr": "58",
                      "-n2pointtype": "ADF",
                      "-n2address": "139",
                      "-bacoid": "29756",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Language756",
                  "name": "Language",
                  "children": {
                    "id": "Language757",
                    "name": "Language",
                    "data": {
                      "-shortname": "Language",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modify": "Read/Write",
                      "-enumset": "English/French/Spanish"
                    }
                  }
                },
                {
                  "id": "Units757",
                  "name": "Units",
                  "children": {
                    "id": "Units758",
                    "name": "Units",
                    "data": {
                      "-shortname": "Units",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modify": "Read/Write",
                      "-enumset": "IP/SI"
                    }
                  }
                },
                {
                  "id": "BAS Communication758",
                  "name": "BAS Communication",
                  "children": {
                    "id": "BAS Communication759",
                    "name": "BAS Communication",
                    "data": {
                      "-shortname": "BASCom",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modify": "Read Only",
                      "-IPdefault": "BACnet",
                      "-enumset": "Not Installed/BACnet/N2/Modbus"
                    }
                  }
                }
              ]
            },
            {
              "id": "Network Override759",
              "name": "Network Override",
              "children": [
                {
                  "id": "Network Override Space Temperature760",
                  "name": "Network Override Space Temperature",
                  "children": {
                    "id": "Network Override Space Temperature761",
                    "name": "Network Override Space Temperature",
                    "data": {
                      "-shortname": "NetST",
                      "-pointtype": "AV",
                      "-attributeid": "7011",
                      "-modbusaddr": "1",
                      "-n2pointtype": "ADF",
                      "-n2address": "3",
                      "-bacoid": "29526",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "?F",
                      "-SImin": "4",
                      "-SImax": "38",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Network Override Indoor Air Quality761",
                  "name": "Network Override Indoor Air Quality",
                  "children": {
                    "id": "Network Override Indoor Air Quality762",
                    "name": "Network Override Indoor Air Quality",
                    "data": {
                      "-shortname": "NetIAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7016",
                      "-modbusaddr": "3",
                      "-n2pointtype": "ADF",
                      "-n2address": "6",
                      "-bacoid": "29530",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Network Override Zone Humidity762",
                  "name": "Network Override Zone Humidity",
                  "children": {
                    "id": "Network Override Zone Humidity763",
                    "name": "Network Override Zone Humidity",
                    "data": {
                      "-shortname": "NetSH",
                      "-pointtype": "AV",
                      "-attributeid": "7020",
                      "-modbusaddr": "4",
                      "-n2pointtype": "ADF",
                      "-n2address": "8",
                      "-bacoid": "29533",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%RH",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%RH"
                    }
                  }
                },
                {
                  "id": "Network Override Fan Request763",
                  "name": "Network Override Fan Request",
                  "children": {
                    "id": "Network Override Fan Request764",
                    "name": "Network Override Fan Request",
                    "data": {
                      "-shortname": "NetFanReq",
                      "-pointtype": "MV",
                      "-attributeid": "7023",
                      "-modbusaddr": "87",
                      "-n2pointtype": "ADI",
                      "-n2address": "16",
                      "-bacoid": "29536",
                      "-modify": "Read/Write",
                      "-enumset": "Off/On"
                    }
                  }
                },
                {
                  "id": "Network Override Space Setpoint Offset764",
                  "name": "Network Override Space Setpoint Offset",
                  "children": {
                    "id": "Network Override Space Setpoint Offset765",
                    "name": "Network Override Space Setpoint Offset",
                    "data": {
                      "-shortname": "NetSSO",
                      "-pointtype": "AV",
                      "-attributeid": "7027",
                      "-modbusaddr": "5",
                      "-n2pointtype": "ADF",
                      "-n2address": "11",
                      "-bacoid": "29540",
                      "-modify": "Read/Write",
                      "-IPmin": "-5",
                      "-IPmax": "5",
                      "-IPunits": "delta ?F",
                      "-SImin": "-3",
                      "-SImax": "3",
                      "-SIunits": "delta ?K"
                    }
                  }
                },
                {
                  "id": "Network Override Outdoor Air Temperature765",
                  "name": "Network Override Outdoor Air Temperature",
                  "children": {
                    "id": "Network Override Outdoor Air Temperature766",
                    "name": "Network Override Outdoor Air Temperature",
                    "data": {
                      "-shortname": "NetOAT",
                      "-pointtype": "AV",
                      "-attributeid": "7003",
                      "-modbusaddr": "6",
                      "-n2pointtype": "ADF",
                      "-n2address": "24",
                      "-bacoid": "29543",
                      "-modify": "Read/Write",
                      "-IPmin": "-50",
                      "-IPmax": "125",
                      "-IPunits": "?F",
                      "-SImin": "-18",
                      "-SImax": "52",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Network Override Outdoor Air Humidity766",
                  "name": "Network Override Outdoor Air Humidity",
                  "children": {
                    "id": "Network Override Outdoor Air Humidity767",
                    "name": "Network Override Outdoor Air Humidity",
                    "data": {
                      "-shortname": "NetOAH",
                      "-pointtype": "AV",
                      "-attributeid": "7008",
                      "-modbusaddr": "7",
                      "-n2pointtype": "ADF",
                      "-n2address": "27",
                      "-bacoid": "29546",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "100",
                      "-IPunits": "%RH",
                      "-SImin": "0",
                      "-SImax": "100",
                      "-SIunits": "%RH"
                    }
                  }
                },
                {
                  "id": "Network Override Outdoor Air Quality767",
                  "name": "Network Override Outdoor Air Quality",
                  "children": {
                    "id": "Network Override Outdoor Air Quality768",
                    "name": "Network Override Outdoor Air Quality",
                    "data": {
                      "-shortname": "NetOAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7013",
                      "-modbusaddr": "8",
                      "-n2pointtype": "ADF",
                      "-n2address": "29",
                      "-bacoid": "29549",
                      "-modify": "Read/Write",
                      "-IPmin": "0",
                      "-IPmax": "5000",
                      "-IPunits": "ppm",
                      "-SImin": "0",
                      "-SImax": "5000",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Network Override Purge Command768",
                  "name": "Network Override Purge Command",
                  "children": {
                    "id": "Network Override Purge Command769",
                    "name": "Network Override Purge Command",
                    "data": {
                      "-shortname": "NetPurge",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "125",
                      "-n2pointtype": "ADI",
                      "-n2address": "101",
                      "-bacoid": "29801",
                      "-modify": "Read/Write",
                      "-enumset": "False/True"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "BACnet Objects View769",
          "name": "BACnet Objects View",
          "children": [
            {
              "id": "Htg-Type770",
              "name": "Htg-Type"
            },
            {
              "id": "ExFType770",
              "name": "ExFType"
            },
            {
              "id": "Y1-Tstat770",
              "name": "Y1-Tstat"
            },
            {
              "id": "Y2-Tstat770",
              "name": "Y2-Tstat"
            },
            {
              "id": "Y3-Tstat770",
              "name": "Y3-Tstat"
            },
            {
              "id": "Y4-Tstat770",
              "name": "Y4-Tstat"
            },
            {
              "id": "W1-Tstat770",
              "name": "W1-Tstat"
            },
            {
              "id": "W2-Tstat770",
              "name": "W2-Tstat"
            },
            {
              "id": "W3-Tstat770",
              "name": "W3-Tstat"
            },
            {
              "id": "G-Tstat770",
              "name": "G-Tstat"
            },
            {
              "id": "Occ-Tstat770",
              "name": "Occ-Tstat"
            },
            {
              "id": "X-Out770",
              "name": "X-Out"
            },
            {
              "id": "Tstat-Only770",
              "name": "Tstat-Only"
            },
            {
              "id": "OccSrc770",
              "name": "OccSrc"
            },
            {
              "id": "OCC770",
              "name": "OCC"
            },
            {
              "id": "OprOcc770",
              "name": "OprOcc"
            },
            {
              "id": "OccMode770",
              "name": "OccMode"
            },
            {
              "id": "NetTempOcc770",
              "name": "NetTempOcc"
            },
            {
              "id": "NetOcc770",
              "name": "NetOcc"
            },
            {
              "id": "TempOccTimeout770",
              "name": "TempOccTimeout"
            },
            {
              "id": "OprST770",
              "name": "OprST"
            },
            {
              "id": "STSrc770",
              "name": "STSrc"
            },
            {
              "id": "STAlarmOffset770",
              "name": "STAlarmOffset"
            },
            {
              "id": "STAlarmDelay770",
              "name": "STAlarmDelay"
            },
            {
              "id": "NetST770",
              "name": "NetST"
            },
            {
              "id": "OprIAQ770",
              "name": "OprIAQ"
            },
            {
              "id": "IAQSrc770",
              "name": "IAQSrc"
            },
            {
              "id": "IAQRange770",
              "name": "IAQRange"
            },
            {
              "id": "NetIAQ770",
              "name": "NetIAQ"
            },
            {
              "id": "OprSH770",
              "name": "OprSH"
            },
            {
              "id": "SHSrc770",
              "name": "SHSrc"
            },
            {
              "id": "NetSH770",
              "name": "NetSH"
            },
            {
              "id": "OprFanReq770",
              "name": "OprFanReq"
            },
            {
              "id": "FanReqSrc770",
              "name": "FanReqSrc"
            },
            {
              "id": "NetFanReq770",
              "name": "NetFanReq"
            },
            {
              "id": "OprSSO770",
              "name": "OprSSO"
            },
            {
              "id": "SSOSrc770",
              "name": "SSOSrc"
            },
            {
              "id": "SSO770",
              "name": "SSO"
            },
            {
              "id": "NetSSO770",
              "name": "NetSSO"
            },
            {
              "id": "OprOAT770",
              "name": "OprOAT"
            },
            {
              "id": "OATSrc770",
              "name": "OATSrc"
            },
            {
              "id": "NetOAT770",
              "name": "NetOAT"
            },
            {
              "id": "OprOAH770",
              "name": "OprOAH"
            },
            {
              "id": "OA-Enth770",
              "name": "OA-Enth"
            },
            {
              "id": "NetOAH770",
              "name": "NetOAH"
            },
            {
              "id": "OprOAQ770",
              "name": "OprOAQ"
            },
            {
              "id": "OAQSrc770",
              "name": "OAQSrc"
            },
            {
              "id": "NetOAQ770",
              "name": "NetOAQ"
            },
            {
              "id": "Fan-S770",
              "name": "Fan-S"
            },
            {
              "id": "FanVFD770",
              "name": "FanVFD"
            },
            {
              "id": "FanVFDFlt770",
              "name": "FanVFDFlt"
            },
            {
              "id": "FanOvrload770",
              "name": "FanOvrload"
            },
            {
              "id": "Fan-RT770",
              "name": "Fan-RT"
            },
            {
              "id": "FanCtl-Type770",
              "name": "FanCtl-Type"
            },
            {
              "id": "APSSetup770",
              "name": "APSSetup"
            },
            {
              "id": "APS770",
              "name": "APS"
            },
            {
              "id": "FanOnDlyCool770",
              "name": "FanOnDlyCool"
            },
            {
              "id": "FanOffDlyCool770",
              "name": "FanOffDlyCool"
            },
            {
              "id": "FanOnDlyHeat770",
              "name": "FanOnDlyHeat"
            },
            {
              "id": "FanOffDlyHeat770",
              "name": "FanOffDlyHeat"
            },
            {
              "id": "DFS770",
              "name": "DFS"
            },
            {
              "id": "Fan770",
              "name": "Fan"
            },
            {
              "id": "SAT770",
              "name": "SAT"
            },
            {
              "id": "DctPrs770",
              "name": "DctPrs"
            },
            {
              "id": "DctPrs-Sp770",
              "name": "DctPrs-Sp"
            },
            {
              "id": "DctShutdownSp770",
              "name": "DctShutdownSp"
            },
            {
              "id": "FanOnOcc770",
              "name": "FanOnOcc"
            },
            {
              "id": "FanOffStartHeat770",
              "name": "FanOffStartHeat"
            },
            {
              "id": "FanOnly-%Cmd770",
              "name": "FanOnly-%Cmd"
            },
            {
              "id": "1ClgStg-%Cmd770",
              "name": "1ClgStg-%Cmd"
            },
            {
              "id": "2ClgStg-%Cmd770",
              "name": "2ClgStg-%Cmd"
            },
            {
              "id": "1HtgStg-%Cmd770",
              "name": "1HtgStg-%Cmd"
            },
            {
              "id": "2HtgStg-%Cmd770",
              "name": "2HtgStg-%Cmd"
            },
            {
              "id": "Clg-En770",
              "name": "Clg-En"
            },
            {
              "id": "#ClgStgs770",
              "name": "#ClgStgs"
            },
            {
              "id": "Clg-S770",
              "name": "Clg-S"
            },
            {
              "id": "MinRtCoolStg770",
              "name": "MinRtCoolStg"
            },
            {
              "id": "LeadLag-En770",
              "name": "LeadLag-En"
            },
            {
              "id": "LowAmbFanPrerunCool770",
              "name": "LowAmbFanPrerunCool"
            },
            {
              "id": "ClgOATCutout-En770",
              "name": "ClgOATCutout-En"
            },
            {
              "id": "ClgOATCutout770",
              "name": "ClgOATCutout"
            },
            {
              "id": "EconLoad-En770",
              "name": "EconLoad-En"
            },
            {
              "id": "AllCompOff-Econ770",
              "name": "AllCompOff-Econ"
            },
            {
              "id": "LowAmb10On5OffSp770",
              "name": "LowAmb10On5OffSp"
            },
            {
              "id": "TempHumCtrl-En770",
              "name": "TempHumCtrl-En"
            },
            {
              "id": "TempHum-Sp770",
              "name": "TempHum-Sp"
            },
            {
              "id": "MaxTempHumSpOff770",
              "name": "MaxTempHumSpOff"
            },
            {
              "id": "TempHumValPerDegOff770",
              "name": "TempHumValPerDegOff"
            },
            {
              "id": "SATCoolLimit-En770",
              "name": "SATCoolLimit-En"
            },
            {
              "id": "SATCoolLimit-Sp770",
              "name": "SATCoolLimit-Sp"
            },
            {
              "id": "Freeze-Sp770",
              "name": "Freeze-Sp"
            },
            {
              "id": "CN-Fan770",
              "name": "CN-Fan"
            },
            {
              "id": "CF2770",
              "name": "CF2"
            },
            {
              "id": "UnitType770",
              "name": "UnitType"
            },
            {
              "id": "EER770",
              "name": "EER",
              "children": {
                "id": "EER771",
                "name": "EER",
                "data": {
                  "-shortname": "EER",
                  "-pointtype": "AV",
                  "-attributeid": "7021",
                  "-modbusaddr": "404",
                  "-n2pointtype": "ADF",
                  "-n2address": "175",
                  "-bacoid": "29596",
                  "-modify": "Read/Write",
                  "-IPmin": "0",
                  "-IPmax": "20",
                  "-SImin": "0",
                  "-SImax": "20"
                }
              }
            },
            {
              "id": "SubcoolGoal771",
              "name": "SubcoolGoal"
            },
            {
              "id": "RefrigType771",
              "name": "RefrigType"
            },
            {
              "id": "HiSidePortLoc771",
              "name": "HiSidePortLoc"
            },
            {
              "id": "EvapCoil-Type771",
              "name": "EvapCoil-Type"
            },
            {
              "id": "CondCoil-Type771",
              "name": "CondCoil-Type"
            },
            {
              "id": "InMeterDev-Type771",
              "name": "InMeterDev-Type"
            },
            {
              "id": "OutMeterDev-Type771",
              "name": "OutMeterDev-Type"
            },
            {
              "id": "SATUp-Sp771",
              "name": "SATUp-Sp"
            },
            {
              "id": "SATLo-Sp771",
              "name": "SATLo-Sp"
            },
            {
              "id": "SATRst-Sp771",
              "name": "SATRst-Sp"
            },
            {
              "id": "OprVAVClg-Sp771",
              "name": "OprVAVClg-Sp"
            },
            {
              "id": "ClgOcc-Sp771",
              "name": "ClgOcc-Sp"
            },
            {
              "id": "ClgUnocc-Sp771",
              "name": "ClgUnocc-Sp"
            },
            {
              "id": "OprCVClg-Sp771",
              "name": "OprCVClg-Sp"
            },
            {
              "id": "C1771",
              "name": "C1"
            },
            {
              "id": "C1-S771",
              "name": "C1-S"
            },
            {
              "id": "C1-En771",
              "name": "C1-En"
            },
            {
              "id": "HGP-Inst771",
              "name": "HGP-Inst"
            },
            {
              "id": "C1RunTim771",
              "name": "C1RunTim"
            },
            {
              "id": "C1OnTmr771",
              "name": "C1OnTmr"
            },
            {
              "id": "C1ASCDTmr771",
              "name": "C1ASCDTmr"
            },
            {
              "id": "HPS1771",
              "name": "HPS1"
            },
            {
              "id": "HPS1-LO771",
              "name": "HPS1-LO"
            },
            {
              "id": "LPS1771",
              "name": "LPS1"
            },
            {
              "id": "LPS1-LO771",
              "name": "LPS1-LO"
            },
            {
              "id": "FS1771",
              "name": "FS1"
            },
            {
              "id": "FS1-LO771",
              "name": "FS1-LO"
            },
            {
              "id": "EC1771",
              "name": "EC1"
            },
            {
              "id": "CC1771",
              "name": "CC1"
            },
            {
              "id": "C2771",
              "name": "C2"
            },
            {
              "id": "C2-S771",
              "name": "C2-S"
            },
            {
              "id": "C2-En771",
              "name": "C2-En"
            },
            {
              "id": "C2RunTim771",
              "name": "C2RunTim"
            },
            {
              "id": "C2OnTmr771",
              "name": "C2OnTmr"
            },
            {
              "id": "C2ASCDTmr771",
              "name": "C2ASCDTmr"
            },
            {
              "id": "HPS2771",
              "name": "HPS2"
            },
            {
              "id": "HPS2-LO771",
              "name": "HPS2-LO"
            },
            {
              "id": "LPS2771",
              "name": "LPS2"
            },
            {
              "id": "LPS2-LO771",
              "name": "LPS2-LO"
            },
            {
              "id": "FS2771",
              "name": "FS2"
            },
            {
              "id": "FS2-LO771",
              "name": "FS2-LO"
            },
            {
              "id": "EC2771",
              "name": "EC2"
            },
            {
              "id": "CC2771",
              "name": "CC2"
            },
            {
              "id": "C3771",
              "name": "C3"
            },
            {
              "id": "C3-S771",
              "name": "C3-S"
            },
            {
              "id": "C3-En771",
              "name": "C3-En"
            },
            {
              "id": "C3RunTim771",
              "name": "C3RunTim"
            },
            {
              "id": "C3OnTmr771",
              "name": "C3OnTmr"
            },
            {
              "id": "C3ASCDTmr771",
              "name": "C3ASCDTmr"
            },
            {
              "id": "HPS3771",
              "name": "HPS3"
            },
            {
              "id": "HPS3-LO771",
              "name": "HPS3-LO"
            },
            {
              "id": "LPS3771",
              "name": "LPS3"
            },
            {
              "id": "LPS3-LO771",
              "name": "LPS3-LO"
            },
            {
              "id": "FS3771",
              "name": "FS3"
            },
            {
              "id": "FS3-LO771",
              "name": "FS3-LO"
            },
            {
              "id": "EC3771",
              "name": "EC3"
            },
            {
              "id": "CC3771",
              "name": "CC3"
            },
            {
              "id": "C4771",
              "name": "C4"
            },
            {
              "id": "C4-S771",
              "name": "C4-S"
            },
            {
              "id": "C4-En771",
              "name": "C4-En"
            },
            {
              "id": "C4RunTim771",
              "name": "C4RunTim"
            },
            {
              "id": "C4OnTmr771",
              "name": "C4OnTmr"
            },
            {
              "id": "C4ASCDTmr771",
              "name": "C4ASCDTmr"
            },
            {
              "id": "HPS4771",
              "name": "HPS4"
            },
            {
              "id": "HPS4-LO771",
              "name": "HPS4-LO"
            },
            {
              "id": "LPS4771",
              "name": "LPS4"
            },
            {
              "id": "LPS4-LO771",
              "name": "LPS4-LO"
            },
            {
              "id": "FS4771",
              "name": "FS4"
            },
            {
              "id": "FS4-LO771",
              "name": "FS4-LO"
            },
            {
              "id": "EC4771",
              "name": "EC4"
            },
            {
              "id": "CC4771",
              "name": "CC4"
            },
            {
              "id": "SLP-1771",
              "name": "SLP-1"
            },
            {
              "id": "LLP-1771",
              "name": "LLP-1"
            },
            {
              "id": "SLT-1771",
              "name": "SLT-1"
            },
            {
              "id": "LLT-1771",
              "name": "LLT-1"
            },
            {
              "id": "C1-SuperHeat771",
              "name": "C1-SuperHeat"
            },
            {
              "id": "C1-SubCool771",
              "name": "C1-SubCool"
            },
            {
              "id": "C1-CondTempOvrAmb771",
              "name": "C1-CondTempOvrAmb"
            },
            {
              "id": "C1-EI771",
              "name": "C1-EI"
            },
            {
              "id": "C1-CI771",
              "name": "C1-CI"
            },
            {
              "id": "SLP-2771",
              "name": "SLP-2"
            },
            {
              "id": "LLP-2771",
              "name": "LLP-2"
            },
            {
              "id": "SLT-2771",
              "name": "SLT-2"
            },
            {
              "id": "LLT-2771",
              "name": "LLT-2"
            },
            {
              "id": "C2-SuperHeat771",
              "name": "C2-SuperHeat"
            },
            {
              "id": "C2-SubCool771",
              "name": "C2-SubCool"
            },
            {
              "id": "C2-CondTempOvrAmb771",
              "name": "C2-CondTempOvrAmb"
            },
            {
              "id": "C2-EI771",
              "name": "C2-EI"
            },
            {
              "id": "C2-CI771",
              "name": "C2-CI"
            },
            {
              "id": "SLP-3771",
              "name": "SLP-3"
            },
            {
              "id": "LLP-3771",
              "name": "LLP-3"
            },
            {
              "id": "SLT-3771",
              "name": "SLT-3"
            },
            {
              "id": "LLT-3771",
              "name": "LLT-3"
            },
            {
              "id": "C3-SuperHeat771",
              "name": "C3-SuperHeat"
            },
            {
              "id": "C3-SubCool771",
              "name": "C3-SubCool"
            },
            {
              "id": "C3-CondTempOvrAmb771",
              "name": "C3-CondTempOvrAmb"
            },
            {
              "id": "C3-EI771",
              "name": "C3-EI"
            },
            {
              "id": "C3-CI771",
              "name": "C3-CI"
            },
            {
              "id": "SLP-4771",
              "name": "SLP-4"
            },
            {
              "id": "LLP-4771",
              "name": "LLP-4"
            },
            {
              "id": "SLT-4771",
              "name": "SLT-4"
            },
            {
              "id": "LLT-4771",
              "name": "LLT-4"
            },
            {
              "id": "C4-SuperHeat771",
              "name": "C4-SuperHeat"
            },
            {
              "id": "C4-SubCool771",
              "name": "C4-SubCool"
            },
            {
              "id": "C4-CondTempOvrAmb771",
              "name": "C4-CondTempOvrAmb"
            },
            {
              "id": "C4-EI771",
              "name": "C4-EI"
            },
            {
              "id": "C4-CI771",
              "name": "C4-CI"
            },
            {
              "id": "Htg-En771",
              "name": "Htg-En"
            },
            {
              "id": "Htg-S771",
              "name": "Htg-S"
            },
            {
              "id": "SATHtgLimit-En771",
              "name": "SATHtgLimit-En"
            },
            {
              "id": "SATHtgLimit-Sp771",
              "name": "SATHtgLimit-Sp"
            },
            {
              "id": "HtgOATCutout-Sp771",
              "name": "HtgOATCutout-Sp"
            },
            {
              "id": "FSHW771",
              "name": "FSHW"
            },
            {
              "id": "MV771",
              "name": "MV"
            },
            {
              "id": "GV2771",
              "name": "GV2"
            },
            {
              "id": "GV3771",
              "name": "GV3"
            },
            {
              "id": "Limit771",
              "name": "Limit"
            },
            {
              "id": "LimitLO771",
              "name": "LimitLO"
            },
            {
              "id": "Lim2771",
              "name": "Lim2"
            },
            {
              "id": "Lim2LO771",
              "name": "Lim2LO"
            },
            {
              "id": "Lim3771",
              "name": "Lim3"
            },
            {
              "id": "Lim3LO771",
              "name": "Lim3LO"
            },
            {
              "id": "HtgOcc-En771",
              "name": "HtgOcc-En"
            },
            {
              "id": "VAVHtgOcc-SP771",
              "name": "VAVHtgOcc-SP"
            },
            {
              "id": "HtgUnocc-En771",
              "name": "HtgUnocc-En"
            },
            {
              "id": "VAVHtgUnocc-Sp771",
              "name": "VAVHtgUnocc-Sp"
            },
            {
              "id": "VAVOprHtg-Sp771",
              "name": "VAVOprHtg-Sp"
            },
            {
              "id": "VAV Box771",
              "name": "VAV Box"
            },
            {
              "id": "CVHtgOcc-SP771",
              "name": "CVHtgOcc-SP"
            },
            {
              "id": "CVHtgUnocc-Sp771",
              "name": "CVHtgUnocc-Sp"
            },
            {
              "id": "CVOprHtg-Sp771",
              "name": "CVOprHtg-Sp"
            },
            {
              "id": "#HtgStgs771",
              "name": "#HtgStgs"
            },
            {
              "id": "H1771",
              "name": "H1"
            },
            {
              "id": "H1-S771",
              "name": "H1-S"
            },
            {
              "id": "H1RunTim771",
              "name": "H1RunTim"
            },
            {
              "id": "H2771",
              "name": "H2"
            },
            {
              "id": "H2-S771",
              "name": "H2-S"
            },
            {
              "id": "H2RunTim771",
              "name": "H2RunTim"
            },
            {
              "id": "H3771",
              "name": "H3"
            },
            {
              "id": "H3-S771",
              "name": "H3-S"
            },
            {
              "id": "H3RunTim771",
              "name": "H3RunTim"
            },
            {
              "id": "HWV771",
              "name": "HWV"
            },
            {
              "id": "HydReverse771",
              "name": "HydReverse"
            },
            {
              "id": "HydH1SA-Sp771",
              "name": "HydH1SA-Sp"
            },
            {
              "id": "HydH2SA-Sp771",
              "name": "HydH2SA-Sp"
            },
            {
              "id": "SATTempHydHt-En771",
              "name": "SATTempHydHt-En"
            },
            {
              "id": "SATTempHydHt-Sp771",
              "name": "SATTempHydHt-Sp"
            },
            {
              "id": "Econ-En771",
              "name": "Econ-En"
            },
            {
              "id": "Econ771",
              "name": "Econ"
            },
            {
              "id": "Econ-Free771",
              "name": "Econ-Free"
            },
            {
              "id": "Econ-S771",
              "name": "Econ-S"
            },
            {
              "id": "FreeClg-Mode771",
              "name": "FreeClg-Mode"
            },
            {
              "id": "FreeClg-Sel771",
              "name": "FreeClg-Sel"
            },
            {
              "id": "EconOAT-SpEn771",
              "name": "EconOAT-SpEn"
            },
            {
              "id": "EconOAEnth-Sp771",
              "name": "EconOAEnth-Sp"
            },
            {
              "id": "LowAmb-Sp771",
              "name": "LowAmb-Sp"
            },
            {
              "id": "LowAmb-MinPos771",
              "name": "LowAmb-MinPos"
            },
            {
              "id": "IAQEcon-MaxPos771",
              "name": "IAQEcon-MaxPos"
            },
            {
              "id": "Econ-MinPos771",
              "name": "Econ-MinPos"
            },
            {
              "id": "MAT771",
              "name": "MAT"
            },
            {
              "id": "RAH771",
              "name": "RAH"
            },
            {
              "id": "SAH771",
              "name": "SAH"
            },
            {
              "id": "RA-Enth771",
              "name": "RA-Enth"
            },
            {
              "id": "RAT771",
              "name": "RAT"
            },
            {
              "id": "DVent-Mode771",
              "name": "DVent-Mode"
            },
            {
              "id": "DVentMaxEconPos771",
              "name": "DVentMaxEconPos"
            },
            {
              "id": "DVentIAQ-Sp771",
              "name": "DVentIAQ-Sp"
            },
            {
              "id": "DVentDiff-Sp771",
              "name": "DVentDiff-Sp"
            },
            {
              "id": "CVent-S771",
              "name": "CVent-S"
            },
            {
              "id": "CVentCLG-En771",
              "name": "CVentCLG-En"
            },
            {
              "id": "CVentHtg-En771",
              "name": "CVentHtg-En"
            },
            {
              "id": "CVentUp-Sp771",
              "name": "CVentUp-Sp"
            },
            {
              "id": "CVentLow-Sp771",
              "name": "CVentLow-Sp"
            },
            {
              "id": "ExFan-En771",
              "name": "ExFan-En"
            },
            {
              "id": "ExFan771",
              "name": "ExFan"
            },
            {
              "id": "ExFanVFD771",
              "name": "ExFanVFD"
            },
            {
              "id": "ExF-S771",
              "name": "ExF-S"
            },
            {
              "id": "ExFanVFDFlt771",
              "name": "ExFanVFDFlt"
            },
            {
              "id": "ExF-RunTim771",
              "name": "ExF-RunTim"
            },
            {
              "id": "Bldg-Sp771",
              "name": "Bldg-Sp"
            },
            {
              "id": "BldgPres771",
              "name": "BldgPres"
            },
            {
              "id": "EAD-O771",
              "name": "EAD-O"
            },
            {
              "id": "ExDmpPosFanOn771",
              "name": "ExDmpPosFanOn"
            },
            {
              "id": "ExDmpPosFanOff771",
              "name": "ExDmpPosFanOff"
            },
            {
              "id": "EconDmpPosFanOn771",
              "name": "EconDmpPosFanOn"
            },
            {
              "id": "EconDmpPosFanOff771",
              "name": "EconDmpPosFanOff"
            },
            {
              "id": "ERV-En771",
              "name": "ERV-En"
            },
            {
              "id": "ERVUnoccFan-En771",
              "name": "ERVUnoccFan-En"
            },
            {
              "id": "HGR-En771",
              "name": "HGR-En"
            },
            {
              "id": "HGR771",
              "name": "HGR"
            },
            {
              "id": "HGR-S771",
              "name": "HGR-S"
            },
            {
              "id": "HGRHum-Sp771",
              "name": "HGRHum-Sp"
            },
            {
              "id": "HGRAlt-En771",
              "name": "HGRAlt-En"
            },
            {
              "id": "HGRAltWrite771",
              "name": "HGRAltWrite"
            },
            {
              "id": "MOAFlow-Sp771",
              "name": "MOAFlow-Sp"
            },
            {
              "id": "Fr Air771",
              "name": "Fr Air"
            },
            {
              "id": "MOA-Range771",
              "name": "MOA-Range"
            },
            {
              "id": "OprPurgeCmd771",
              "name": "OprPurgeCmd"
            },
            {
              "id": "PurgeCmdSrc771",
              "name": "PurgeCmdSrc"
            },
            {
              "id": "Purge771",
              "name": "Purge"
            },
            {
              "id": "NetPurge771",
              "name": "NetPurge"
            },
            {
              "id": "SD771",
              "name": "SD"
            },
            {
              "id": "Unit-S771",
              "name": "Unit-S"
            },
            {
              "id": "Name771",
              "name": "Name"
            },
            {
              "id": "Model#771",
              "name": "Model#"
            },
            {
              "id": "Serial#771",
              "name": "Serial#"
            },
            {
              "id": "FirmVer771",
              "name": "FirmVer"
            },
            {
              "id": "LowSpeedFan-MinPos771",
              "name": "LowSpeedFan-MinPos"
            },
            {
              "id": "ExcessOutAirFlt771",
              "name": "ExcessOutAirFlt"
            },
            {
              "id": "NotEconFlt771",
              "name": "NotEconFlt"
            },
            {
              "id": "EconDampFlt771",
              "name": "EconDampFlt"
            },
            {
              "id": "EconWhenShouldNotFlt771",
              "name": "EconWhenShouldNotFlt"
            },
            {
              "id": "EconCntlr771",
              "name": "EconCntlr"
            },
            {
              "id": "4StgCntlr771",
              "name": "4StgCntlr"
            },
            {
              "id": "FDDMCntlr771",
              "name": "FDDMCntlr"
            },
            {
              "id": "FDDSCntlr771",
              "name": "FDDSCntlr"
            },
            {
              "id": "StpHeatCntlr771",
              "name": "StpHeatCntlr"
            },
            {
              "id": "DevName771",
              "name": "DevName"
            },
            {
              "id": "3ClgStg-%Cmd771",
              "name": "3ClgStg-%Cmd"
            },
            {
              "id": "4ClgStg-%Cmd771",
              "name": "4ClgStg-%Cmd"
            },
            {
              "id": "3HtgStg-%Cmd771",
              "name": "3HtgStg-%Cmd"
            },
            {
              "id": "MornW-En771",
              "name": "MornW-En"
            },
            {
              "id": "MornWRAT-Sp771",
              "name": "MornWRAT-Sp"
            },
            {
              "id": "EconDampPos771",
              "name": "EconDampPos"
            },
            {
              "id": "TempOCC771",
              "name": "TempOCC"
            },
            {
              "id": "ResetLO771",
              "name": "ResetLO"
            },
            {
              "id": "EOL-On771",
              "name": "EOL-On"
            },
            {
              "id": "RAH771",
              "name": "RAH"
            },
            {
              "id": "ClgCktTestS-1771",
              "name": "ClgCktTestS-1"
            },
            {
              "id": "ClgCktTestS-2771",
              "name": "ClgCktTestS-2"
            },
            {
              "id": "ClgCktTestS-3771",
              "name": "ClgCktTestS-3"
            },
            {
              "id": "ClgCktTestS-4771",
              "name": "ClgCktTestS-4"
            },
            {
              "id": "C1-EvapTempValue771",
              "name": "C1-EvapTempValue"
            },
            {
              "id": "C2-EvapTempValue771",
              "name": "C2-EvapTempValue"
            },
            {
              "id": "C3-EvapTempValue771",
              "name": "C3-EvapTempValue"
            },
            {
              "id": "C4-EvapTempValue771",
              "name": "C4-EvapTempValue"
            },
            {
              "id": "TimeToNextOcc771",
              "name": "TimeToNextOcc"
            },
            {
              "id": "OprMode771",
              "name": "OprMode"
            },
            {
              "id": "ClgWeight1771",
              "name": "ClgWeight1"
            },
            {
              "id": "ClgWeight2771",
              "name": "ClgWeight2"
            },
            {
              "id": "HtgWeight1771",
              "name": "HtgWeight1"
            },
            {
              "id": "HtgWeight2771",
              "name": "HtgWeight2"
            },
            {
              "id": "EWMAClgDmd771",
              "name": "EWMAClgDmd"
            },
            {
              "id": "EWMAHtgDmd771",
              "name": "EWMAHtgDmd"
            },
            {
              "id": "CorrRetTime771",
              "name": "CorrRetTime"
            },
            {
              "id": "UncorrRetTime771",
              "name": "UncorrRetTime"
            },
            {
              "id": "WarmCoolStrtTime771",
              "name": "WarmCoolStrtTime"
            },
            {
              "id": "WarmCoolStrtTemp771",
              "name": "WarmCoolStrtTemp"
            },
            {
              "id": "C1-CondTempOAHigh771",
              "name": "C1-CondTempOAHigh"
            },
            {
              "id": "C2-CondTempOAHigh771",
              "name": "C2-CondTempOAHigh"
            },
            {
              "id": "C3-CondTempOAHigh771",
              "name": "C3-CondTempOAHigh"
            },
            {
              "id": "C4-CondTempOAHigh771",
              "name": "C4-CondTempOAHigh"
            },
            {
              "id": "C1-CondTempOALow771",
              "name": "C1-CondTempOALow"
            },
            {
              "id": "C2-CondTempOALow771",
              "name": "C2-CondTempOALow"
            },
            {
              "id": "C3-CondTempOALow771",
              "name": "C3-CondTempOALow"
            },
            {
              "id": "C4-CondTempOALow771",
              "name": "C4-CondTempOALow"
            },
            {
              "id": "C1-SuperheatHigh771",
              "name": "C1-SuperheatHigh"
            },
            {
              "id": "C2-SuperheatHigh771",
              "name": "C2-SuperheatHigh"
            },
            {
              "id": "C3-SuperheatHigh771",
              "name": "C3-SuperheatHigh"
            },
            {
              "id": "C4-SuperheatHigh771",
              "name": "C4-SuperheatHigh"
            },
            {
              "id": "C1-SuperheatLow771",
              "name": "C1-SuperheatLow"
            },
            {
              "id": "C2-SuperheatLow771",
              "name": "C2-SuperheatLow"
            },
            {
              "id": "C3-SuperheatLow771",
              "name": "C3-SuperheatLow"
            },
            {
              "id": "C4-SuperheatLow771",
              "name": "C4-SuperheatLow"
            },
            {
              "id": "C1-SubcoolHigh771",
              "name": "C1-SubcoolHigh"
            },
            {
              "id": "C2-SubcoolHigh771",
              "name": "C2-SubcoolHigh"
            },
            {
              "id": "C3-SubcoolHigh771",
              "name": "C3-SubcoolHigh"
            },
            {
              "id": "C4-SubcoolHigh771",
              "name": "C4-SubcoolHigh"
            },
            {
              "id": "C1-SubcoolLow771",
              "name": "C1-SubcoolLow"
            },
            {
              "id": "C2-SubcoolLow771",
              "name": "C2-SubcoolLow"
            },
            {
              "id": "C3-SubcoolLow771",
              "name": "C3-SubcoolLow"
            },
            {
              "id": "C4-SubcoolLow771",
              "name": "C4-SubcoolLow"
            },
            {
              "id": "C1-EvapTempHigh771",
              "name": "C1-EvapTempHigh"
            },
            {
              "id": "C2-EvapTempHigh771",
              "name": "C2-EvapTempHigh"
            },
            {
              "id": "C3-EvapTempHigh771",
              "name": "C3-EvapTempHigh"
            },
            {
              "id": "C4-EvapTempHigh771",
              "name": "C4-EvapTempHigh"
            },
            {
              "id": "C1-EvapTempLow771",
              "name": "C1-EvapTempLow"
            },
            {
              "id": "C2-EvapTempLow771",
              "name": "C2-EvapTempLow"
            },
            {
              "id": "C3-EvapTempLow771",
              "name": "C3-EvapTempLow"
            },
            {
              "id": "C4-EvapTempLow771",
              "name": "C4-EvapTempLow"
            },
            {
              "id": "HtgAdapTunEn771",
              "name": "HtgAdapTunEn"
            },
            {
              "id": "ClgAdapTunEn771",
              "name": "ClgAdapTunEn"
            },
            {
              "id": "LoadShedEnable771",
              "name": "LoadShedEnable"
            },
            {
              "id": "LoadShedRateLim771",
              "name": "LoadShedRateLim"
            },
            {
              "id": "LoadShedAdjust771",
              "name": "LoadShedAdjust"
            },
            {
              "id": "UnitCap771",
              "name": "UnitCap"
            },
            {
              "id": "FanPower771",
              "name": "FanPower"
            },
            {
              "id": "SuperHeatGoal771",
              "name": "SuperHeatGoal"
            },
            {
              "id": "Altitude771",
              "name": "Altitude",
              "children": {
                "id": "Altitude772",
                "name": "Altitude",
                "data": {
                  "-shortname": "Altitude",
                  "-pointtype": "AV",
                  "-attributeid": "7041",
                  "-modbusaddr": "31",
                  "-n2pointtype": "ADF",
                  "-n2address": "54",
                  "-bacoid": "29889",
                  "-modify": "Read/Write",
                  "-IPmin": "-1500",
                  "-IPmax": "30000",
                  "-IPunits": "ft",
                  "-SImin": "-457.2",
                  "-SImax": "9144",
                  "-SIunits": "m"
                }
              }
            },
            {
              "id": "#RefrigSys772",
              "name": "#RefrigSys"
            },
            {
              "id": "MornC-En772",
              "name": "MornC-En"
            },
            {
              "id": "MornCRAT-Sp772",
              "name": "MornCRAT-Sp"
            },
            {
              "id": "OptStrt-En772",
              "name": "OptStrt-En"
            },
            {
              "id": "OccBI-En772",
              "name": "OccBI-En"
            },
            {
              "id": "EarlyStrtPeriod772",
              "name": "EarlyStrtPeriod"
            },
            {
              "id": "#HtPumpStgs772",
              "name": "#HtPumpStgs"
            },
            {
              "id": "DefrostCurveSel772",
              "name": "DefrostCurveSel"
            },
            {
              "id": "DefrostState772",
              "name": "DefrostState"
            },
            {
              "id": "RevVlv772",
              "name": "RevVlv"
            },
            {
              "id": "AuxHtg772",
              "name": "AuxHtg"
            },
            {
              "id": "Mode772",
              "name": "Mode",
              "children": {
                "id": "Mode773",
                "name": "Mode",
                "data": {
                  "-shortname": "Mode",
                  "-pointtype": "MV",
                  "-attributeid": "7013",
                  "-modbusaddr": "368",
                  "-n2pointtype": "ADI",
                  "-n2address": "83",
                  "-bacoid": "29902",
                  "-modify": "Read Only",
                  "-enumset": "Heating/Cooling"
                }
              }
            },
            {
              "id": "HGRUnoccHum-SP773",
              "name": "HGRUnoccHum-SP"
            },
            {
              "id": "HGRUnocc-En773",
              "name": "HGRUnocc-En"
            },
            {
              "id": "DATMaxHtgSP773",
              "name": "DATMaxHtgSP"
            },
            {
              "id": "DATSatSP773",
              "name": "DATSatSP"
            },
            {
              "id": "DATClgMinSP773",
              "name": "DATClgMinSP"
            },
            {
              "id": "SZVAVEn773",
              "name": "SZVAVEn"
            },
            {
              "id": "HdwrReset773",
              "name": "HdwrReset"
            },
            {
              "id": "DirLoadshd773",
              "name": "DirLoadshd"
            },
            {
              "id": "Redline773",
              "name": "Redline",
              "children": {
                "id": "Redline774",
                "name": "Redline",
                "data": {
                  "-shortname": "Redline",
                  "-pointtype": "MV",
                  "-attributeid": "7062",
                  "-modbusaddr": "129",
                  "-n2pointtype": "ADI",
                  "-n2address": "112",
                  "-bacoid": "29911",
                  "-modify": "Read/Write",
                  "-IPdefault": "No",
                  "-enumset": "No/Yes"
                }
              }
            },
            {
              "id": "EconMechStp774",
              "name": "EconMechStp"
            },
            {
              "id": "SZVAVMinFanSpd774",
              "name": "SZVAVMinFanSpd"
            },
            {
              "id": "OffDurUnocc774",
              "name": "OffDurUnocc"
            },
            {
              "id": "EconFltDetectEn774",
              "name": "EconFltDetectEn"
            },
            {
              "id": "EconAlrmDly774",
              "name": "EconAlrmDly"
            },
            {
              "id": "EconPosErr774",
              "name": "EconPosErr"
            },
            {
              "id": "EconMinErr774",
              "name": "EconMinErr"
            },
            {
              "id": "PIDTunRst774",
              "name": "PIDTunRst"
            },
            {
              "id": "PmpOut-En774",
              "name": "PmpOut-En"
            },
            {
              "id": "StgClgCmd774",
              "name": "StgClgCmd"
            },
            {
              "id": "StgHtgCmd774",
              "name": "StgHtgCmd"
            },
            {
              "id": "PropHtgCmd774",
              "name": "PropHtgCmd"
            },
            {
              "id": "SZVAVClgOcc-Sp774",
              "name": "SZVAVClgOcc-Sp"
            },
            {
              "id": "SZVAVClgUnocc-Sp774",
              "name": "SZVAVClgUnocc-Sp"
            },
            {
              "id": "OprSZVAVClg-Sp774",
              "name": "OprSZVAVClg-Sp"
            },
            {
              "id": "LowAmb-En774",
              "name": "LowAmb-En"
            },
            {
              "id": "SZVAVHtgOcc-Sp774",
              "name": "SZVAVHtgOcc-Sp"
            },
            {
              "id": "SZVAVHtgUnocc-Sp774",
              "name": "SZVAVHtgUnocc-Sp"
            },
            {
              "id": "OprSZVAVHtg-Sp774",
              "name": "OprSZVAVHtg-Sp"
            },
            {
              "id": "VAVClgUnocc-Sp774",
              "name": "VAVClgUnocc-Sp"
            },
            {
              "id": "FrAir-En774",
              "name": "FrAir-En"
            },
            {
              "id": "EncodeType774",
              "name": "EncodeType"
            },
            {
              "id": "SZVAVClgLd774",
              "name": "SZVAVClgLd"
            },
            {
              "id": "SZVAVHtgLd774",
              "name": "SZVAVHtgLd"
            },
            {
              "id": "HGR-Diff774",
              "name": "HGR-Diff"
            },
            {
              "id": "UnitEn774",
              "name": "UnitEn"
            },
            {
              "id": "DeviceId774",
              "name": "DeviceId"
            }
          ]
        },
        {
          "id": "Self Test Results View774",
          "name": "Self Test Results View",
          "children": [
            {
              "id": "Fan Result775",
              "name": "Fan Result"
            },
            {
              "id": "C1 Result775",
              "name": "C1 Result"
            },
            {
              "id": "C2 Result775",
              "name": "C2 Result"
            },
            {
              "id": "C3 Result775",
              "name": "C3 Result"
            },
            {
              "id": "C4 Result775",
              "name": "C4 Result"
            },
            {
              "id": "H1 Result775",
              "name": "H1 Result"
            },
            {
              "id": "H2 Result775",
              "name": "H2 Result"
            },
            {
              "id": "H3 Result775",
              "name": "H3 Result"
            },
            {
              "id": "Econ Result775",
              "name": "Econ Result"
            },
            {
              "id": "Exhaust Result775",
              "name": "Exhaust Result"
            }
          ]
        },
        {
          "id": "Trend View775",
          "name": "Trend View",
          "children": [
            {
              "id": "Status776",
              "name": "Status",
              "children": [
                {
                  "id": "Unit Status777",
                  "name": "Unit Status",
                  "children": {
                    "id": "Unit Status778",
                    "name": "Unit Status",
                    "data": {
                      "-shortname": "Unit-S",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "280",
                      "-n2pointtype": "ADI",
                      "-n2address": "1",
                      "-bacoid": "29803",
                      "-modify": "Read Only",
                      "-enumset": "Idle/SD Alarm/Purge Command/Self Test/Morning Warm Up/Air Tempering/Dehumidification/Heating/Cooling/Economizer/Fan Only/Comfort Ventilation/Startup Delay"
                    }
                  }
                },
                {
                  "id": "Fan Status778",
                  "name": "Fan Status",
                  "children": {
                    "id": "Fan Status779",
                    "name": "Fan Status",
                    "data": {
                      "-shortname": "Fan-S",
                      "-pointtype": "MV",
                      "-attributeid": "7000",
                      "-modbusaddr": "302",
                      "-n2pointtype": "ADI",
                      "-n2address": "23",
                      "-bacoid": "29550",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/On-Purge/On-Gas Valve or Limit Fault/On-Defrost/On-Thermostat Request/On-Fan Off Delay For Cool/On-Fan Off Delay For Heat/On-Continuous Fan Occupied Operation/On-Normal Command/Off-Exceeding Duct Pressure Shutdown SP/Off-Low Voltage/Off-Fan Overload Lockout/Off-Fan VFD Fault/Off-Hot Water Freeze Stat/Off-Air Proving Switch/Off-Minimum Off Delay/Off-Fan On Delay For Heat/Off-Fan Off Delay For Cool"
                    }
                  }
                },
                {
                  "id": "Cooling Status779",
                  "name": "Cooling Status",
                  "children": {
                    "id": "Cooling Status780",
                    "name": "Cooling Status",
                    "data": {
                      "-shortname": "Clg-S",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "308",
                      "-n2pointtype": "ADI",
                      "-n2address": "28",
                      "-bacoid": "29577",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/Thermostat Cooling/Unoccupied Cooling/Occupied Cooling/Off-OAT Lockout/Off-Disabled/Off-Lockout/Off-Low Supply Voltage/Off-Low Ambient/Off-Low Ambient Pre-Run Delay/Off-Waiting For Changeover Delay/Off-Free Cooling/Comfort Ventilation"
                    }
                  }
                },
                {
                  "id": "Heating Status780",
                  "name": "Heating Status",
                  "children": {
                    "id": "Heating Status781",
                    "name": "Heating Status",
                    "data": {
                      "-shortname": "Htg-S",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modbusaddr": "347",
                      "-n2pointtype": "ADI",
                      "-n2address": "65",
                      "-bacoid": "29708",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/On-Defrost/SAT Tempering/Morning Warmup/Thermostat Heating/Unoccupied Heating/Occupied Heating/Off-Disabled/Off-OAT Lockout/Off-SAT Limit/Off-Waiting For Changeover Delay/Comfort Ventilation"
                    }
                  }
                },
                {
                  "id": "Economizer Status781",
                  "name": "Economizer Status",
                  "children": {
                    "id": "Economizer Status782",
                    "name": "Economizer Status",
                    "data": {
                      "-shortname": "Econ-S",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "370",
                      "-n2pointtype": "ADI",
                      "-n2address": "86",
                      "-bacoid": "29750",
                      "-modify": "Read Only",
                      "-enumset": "Disabled/Damper Not Functional/Purge/Unavailable-Sensor Fault/Econ Loading/SA-T High Limit/Mixed Air Low Limit Cycle/Demand Ventilation Air Quality/Outdoor Airflow Control/Free Cooling is Active/Minimum Position/Test/Comfort Ventilation/Low OA Ambient"
                    }
                  }
                },
                {
                  "id": "Hot Gas Reheat Status782",
                  "name": "Hot Gas Reheat Status",
                  "children": {
                    "id": "Hot Gas Reheat Status783",
                    "name": "Hot Gas Reheat Status",
                    "data": {
                      "-shortname": "HGR-S",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "380",
                      "-n2pointtype": "BI",
                      "-n2address": "41",
                      "-bacoid": "29791",
                      "-modify": "Read Only",
                      "-enumset": "Off-Idle/On-Normal Command/On-Alternate Operation Command/Off-Disabled"
                    }
                  }
                },
                {
                  "id": "Operational Occupancy783",
                  "name": "Operational Occupancy",
                  "children": {
                    "id": "Operational Occupancy784",
                    "name": "Operational Occupancy",
                    "data": {
                      "-shortname": "OprOcc",
                      "-pointtype": "MV",
                      "-attributeid": "7001",
                      "-modbusaddr": "292",
                      "-n2pointtype": "ADI",
                      "-n2address": "5",
                      "-bacoid": "29517",
                      "-modify": "Read Only",
                      "-IPdefault": "UnOccupied",
                      "-enumset": "Occupied/UnOccupied/Bypass/Standby"
                    }
                  }
                },
                {
                  "id": "Operational Space Temperature784",
                  "name": "Operational Space Temperature",
                  "children": {
                    "id": "Operational Space Temperature785",
                    "name": "Operational Space Temperature",
                    "data": {
                      "-shortname": "OprST",
                      "-pointtype": "AV",
                      "-attributeid": "7006",
                      "-modbusaddr": "135",
                      "-n2pointtype": "AI",
                      "-n2address": "31",
                      "-bacoid": "29522",
                      "-modify": "Read Only",
                      "-IPdefault": "70",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Supply Air Temperature785",
                  "name": "Supply Air Temperature",
                  "children": {
                    "id": "Supply Air Temperature786",
                    "name": "Supply Air Temperature",
                    "data": {
                      "-shortname": "SAT",
                      "-pointtype": "AV",
                      "-attributeid": "7014",
                      "-modbusaddr": "158",
                      "-n2pointtype": "AI",
                      "-n2address": "3",
                      "-bacoid": "29564",
                      "-modify": "Read Only",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Mixed Air Temperature786",
                  "name": "Mixed Air Temperature",
                  "children": {
                    "id": "Mixed Air Temperature787",
                    "name": "Mixed Air Temperature",
                    "data": {
                      "-shortname": "MAT",
                      "-pointtype": "AV",
                      "-attributeid": "7012",
                      "-modbusaddr": "255",
                      "-n2pointtype": "AI",
                      "-n2address": "29",
                      "-bacoid": "29760",
                      "-modify": "Read Only",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Operational Outdoor Air Temperature787",
                  "name": "Operational Outdoor Air Temperature",
                  "children": {
                    "id": "Operational Outdoor Air Temperature788",
                    "name": "Operational Outdoor Air Temperature",
                    "data": {
                      "-shortname": "OprOAT",
                      "-pointtype": "AV",
                      "-attributeid": "7000",
                      "-modbusaddr": "153",
                      "-n2pointtype": "ADF",
                      "-n2address": "23",
                      "-bacoid": "29541",
                      "-modify": "Read Only",
                      "-IPdefault": "0",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Return Air Temperature788",
                  "name": "Return Air Temperature",
                  "children": {
                    "id": "Return Air Temperature789",
                    "name": "Return Air Temperature",
                    "data": {
                      "-shortname": "RAT",
                      "-pointtype": "AV",
                      "-attributeid": "7038",
                      "-modbusaddr": "139",
                      "-n2pointtype": "AI",
                      "-n2address": "2",
                      "-bacoid": "29764",
                      "-modify": "Read Only",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Outdoor Air Enthalpy789",
                  "name": "Outdoor Air Enthalpy",
                  "children": {
                    "id": "Outdoor Air Enthalpy790",
                    "name": "Outdoor Air Enthalpy",
                    "data": {
                      "-shortname": "OA-Enth",
                      "-pointtype": "AV",
                      "-attributeid": "7005",
                      "-modbusaddr": "155",
                      "-n2pointtype": "ADF",
                      "-n2address": "26",
                      "-bacoid": "29545",
                      "-modify": "Read Only",
                      "-IPunits": "Btu/lb",
                      "-SIunits": "kJ/kg"
                    }
                  }
                }
              ]
            },
            {
              "id": "Cooling790",
              "name": "Cooling",
              "children": [
                {
                  "id": "Status791",
                  "name": "Status",
                  "children": [
                    {
                      "id": "Cooling Status792",
                      "name": "Cooling Status",
                      "children": {
                        "id": "Cooling Status793",
                        "name": "Cooling Status",
                        "data": {
                          "-shortname": "Clg-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "308",
                          "-n2pointtype": "ADI",
                          "-n2address": "28",
                          "-bacoid": "29577",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/Thermostat Cooling/Unoccupied Cooling/Occupied Cooling/Off-OAT Lockout/Off-Disabled/Off-Lockout/Off-Low Supply Voltage/Off-Low Ambient/Off-Low Ambient Pre-Run Delay/Off-Waiting For Changeover Delay/Off-Free Cooling/Comfort Ventilation"
                        }
                      }
                    },
                    {
                      "id": "Supply Air Temperature793",
                      "name": "Supply Air Temperature",
                      "children": {
                        "id": "Supply Air Temperature794",
                        "name": "Supply Air Temperature",
                        "data": {
                          "-shortname": "SAT",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "158",
                          "-n2pointtype": "AI",
                          "-n2address": "3",
                          "-bacoid": "29564",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Operating Cooling Supply Air Temp Setpoint794",
                      "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                      "children": {
                        "id": "VAV Operating Cooling Supply Air Temp Setpoint795",
                        "name": "VAV Operating Cooling Supply Air Temp Setpoint",
                        "data": {
                          "-shortname": "OprVAVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7032",
                          "-modbusaddr": "160",
                          "-n2pointtype": "ADF",
                          "-n2address": "50",
                          "-bacoid": "29607",
                          "-modify": "Read Only",
                          "-IPdefault": "72",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "CV Operating Cooling Setpoint795",
                      "name": "CV Operating Cooling Setpoint",
                      "children": {
                        "id": "CV Operating Cooling Setpoint796",
                        "name": "CV Operating Cooling Setpoint",
                        "data": {
                          "-shortname": "OprCVClg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7035",
                          "-modbusaddr": "161",
                          "-n2pointtype": "ADF",
                          "-n2address": "53",
                          "-bacoid": "29610",
                          "-modify": "Read Only",
                          "-IPdefault": "72",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Stage 1796",
                  "name": "Stage 1",
                  "children": [
                    {
                      "id": "Y1 - Thermostat797",
                      "name": "Y1 - Thermostat",
                      "children": {
                        "id": "Y1 - Thermostat798",
                        "name": "Y1 - Thermostat",
                        "data": {
                          "-shortname": "Y1-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "281",
                          "-n2pointtype": "BI",
                          "-n2address": "1",
                          "-bacoid": "29504",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 1 Status798",
                      "name": "Compressor Stage 1 Status",
                      "children": {
                        "id": "Compressor Stage 1 Status799",
                        "name": "Compressor Stage 1 Status",
                        "data": {
                          "-shortname": "C1-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "312",
                          "-n2pointtype": "BI",
                          "-n2address": "14",
                          "-bacoid": "29615",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 1799",
                      "name": "Compressor Stage Command 1",
                      "children": {
                        "id": "Compressor Stage Command 1800",
                        "name": "Compressor Stage Command 1",
                        "data": {
                          "-shortname": "C1",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "311",
                          "-n2pointtype": "BO",
                          "-n2address": "5",
                          "-bacoid": "29611",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Stage 2800",
                  "name": "Stage 2",
                  "children": [
                    {
                      "id": "Y2 - Thermostat801",
                      "name": "Y2 - Thermostat",
                      "children": {
                        "id": "Y2 - Thermostat802",
                        "name": "Y2 - Thermostat",
                        "data": {
                          "-shortname": "Y2-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "282",
                          "-n2pointtype": "BI",
                          "-n2address": "2",
                          "-bacoid": "29505",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 2 Status802",
                      "name": "Compressor Stage 2 Status",
                      "children": {
                        "id": "Compressor Stage 2 Status803",
                        "name": "Compressor Stage 2 Status",
                        "data": {
                          "-shortname": "C2-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "320",
                          "-n2pointtype": "BI",
                          "-n2address": "18",
                          "-bacoid": "29616",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 2803",
                      "name": "Compressor Stage Command 2",
                      "children": {
                        "id": "Compressor Stage Command 2804",
                        "name": "Compressor Stage Command 2",
                        "data": {
                          "-shortname": "C2",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "319",
                          "-n2pointtype": "BO",
                          "-n2address": "6",
                          "-bacoid": "29612",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Stage 3804",
                  "name": "Stage 3",
                  "children": [
                    {
                      "id": "Y3 - Thermostat805",
                      "name": "Y3 - Thermostat",
                      "children": {
                        "id": "Y3 - Thermostat806",
                        "name": "Y3 - Thermostat",
                        "data": {
                          "-shortname": "Y3-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "283",
                          "-n2pointtype": "BI",
                          "-n2address": "3",
                          "-bacoid": "29506",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 3 Status806",
                      "name": "Compressor Stage 3 Status",
                      "children": {
                        "id": "Compressor Stage 3 Status807",
                        "name": "Compressor Stage 3 Status",
                        "data": {
                          "-shortname": "C3-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "328",
                          "-n2pointtype": "BI",
                          "-n2address": "22",
                          "-bacoid": "29617",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 3807",
                      "name": "Compressor Stage Command 3"
                    }
                  ]
                },
                {
                  "id": "Stage 4807",
                  "name": "Stage 4",
                  "children": [
                    {
                      "id": "Y4 - Thermostat808",
                      "name": "Y4 - Thermostat",
                      "children": {
                        "id": "Y4 - Thermostat809",
                        "name": "Y4 - Thermostat",
                        "data": {
                          "-shortname": "Y4-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7003",
                          "-modbusaddr": "284",
                          "-n2pointtype": "BI",
                          "-n2address": "4",
                          "-bacoid": "29507",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage 4 Status809",
                      "name": "Compressor Stage 4 Status",
                      "children": {
                        "id": "Compressor Stage 4 Status810",
                        "name": "Compressor Stage 4 Status",
                        "data": {
                          "-shortname": "C4-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "336",
                          "-n2pointtype": "BI",
                          "-n2address": "26",
                          "-bacoid": "29618",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Minimum On Time/On-Normal Command/Off-Cooling Is Disabled/Off-OAT Cutout/Off-Low Ambient Temperature/Off-Low Supply Voltage/Off-High Pressure Lockout/Off-Low Pressure Lockout/Off-Freeze COndition/Off-Anti-Short Cycle Delay/Off-Cooling Stage Is Disabled"
                        }
                      }
                    },
                    {
                      "id": "Compressor Stage Command 4810",
                      "name": "Compressor Stage Command 4",
                      "children": {
                        "id": "Compressor Stage Command 4811",
                        "name": "Compressor Stage Command 4",
                        "data": {
                          "-shortname": "C4",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "335",
                          "-n2pointtype": "BO",
                          "-n2address": "8",
                          "-bacoid": "29614",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Heating811",
              "name": "Heating",
              "children": [
                {
                  "id": "Status812",
                  "name": "Status",
                  "children": [
                    {
                      "id": "Heating Status813",
                      "name": "Heating Status",
                      "children": {
                        "id": "Heating Status814",
                        "name": "Heating Status",
                        "data": {
                          "-shortname": "Htg-S",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "347",
                          "-n2pointtype": "ADI",
                          "-n2address": "65",
                          "-bacoid": "29708",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Defrost/SAT Tempering/Morning Warmup/Thermostat Heating/Unoccupied Heating/Occupied Heating/Off-Disabled/Off-OAT Lockout/Off-SAT Limit/Off-Waiting For Changeover Delay/Comfort Ventilation"
                        }
                      }
                    },
                    {
                      "id": "Supply Air Temperature814",
                      "name": "Supply Air Temperature",
                      "children": {
                        "id": "Supply Air Temperature815",
                        "name": "Supply Air Temperature",
                        "data": {
                          "-shortname": "SAT",
                          "-pointtype": "AV",
                          "-attributeid": "7014",
                          "-modbusaddr": "158",
                          "-n2pointtype": "AI",
                          "-n2address": "3",
                          "-bacoid": "29564",
                          "-modify": "Read Only",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "VAV Operating Heating Setpoint815",
                      "name": "VAV Operating Heating Setpoint",
                      "children": {
                        "id": "VAV Operating Heating Setpoint816",
                        "name": "VAV Operating Heating Setpoint",
                        "data": {
                          "-shortname": "VAVOprHtg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7019",
                          "-modbusaddr": "250",
                          "-n2pointtype": "ADF",
                          "-n2address": "120",
                          "-bacoid": "29726",
                          "-modify": "Read Only",
                          "-IPdefault": "68",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    },
                    {
                      "id": "CV Operating Heating Setpoint816",
                      "name": "CV Operating Heating Setpoint",
                      "children": {
                        "id": "CV Operating Heating Setpoint817",
                        "name": "CV Operating Heating Setpoint",
                        "data": {
                          "-shortname": "CVOprHtg-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7025",
                          "-modbusaddr": "251",
                          "-n2pointtype": "ADF",
                          "-n2address": "124",
                          "-bacoid": "29730",
                          "-modify": "Read Only",
                          "-IPdefault": "68",
                          "-IPunits": "?F",
                          "-SIunits": "?C"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Stage 1817",
                  "name": "Stage 1",
                  "children": [
                    {
                      "id": "W1 - Thermostat818",
                      "name": "W1 - Thermostat",
                      "children": {
                        "id": "W1 - Thermostat819",
                        "name": "W1 - Thermostat",
                        "data": {
                          "-shortname": "W1-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7004",
                          "-modbusaddr": "285",
                          "-n2pointtype": "BI",
                          "-n2address": "5",
                          "-bacoid": "29508",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage Command 1819",
                      "name": "Heating Stage Command 1"
                    },
                    {
                      "id": "Heating Stage 1 Enabled819",
                      "name": "Heating Stage 1 Enabled"
                    }
                  ]
                },
                {
                  "id": "Stage 2819",
                  "name": "Stage 2",
                  "children": [
                    {
                      "id": "W2 - Thermostat820",
                      "name": "W2 - Thermostat",
                      "children": {
                        "id": "W2 - Thermostat821",
                        "name": "W2 - Thermostat",
                        "data": {
                          "-shortname": "W2-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7005",
                          "-modbusaddr": "286",
                          "-n2pointtype": "BI",
                          "-n2address": "6",
                          "-bacoid": "29509",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage Command 2821",
                      "name": "Heating Stage Command 2"
                    },
                    {
                      "id": "Heating Stage 2 Status821",
                      "name": "Heating Stage 2 Status"
                    }
                  ]
                },
                {
                  "id": "Stage 3821",
                  "name": "Stage 3",
                  "children": [
                    {
                      "id": "W3 - Thermostat822",
                      "name": "W3 - Thermostat",
                      "children": {
                        "id": "W3 - Thermostat823",
                        "name": "W3 - Thermostat",
                        "data": {
                          "-shortname": "W3-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7006",
                          "-modbusaddr": "287",
                          "-n2pointtype": "BI",
                          "-n2address": "7",
                          "-bacoid": "29510",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Heating Stage Command 3823",
                      "name": "Heating Stage Command 3"
                    },
                    {
                      "id": "Heating Stage 3 Status823",
                      "name": "Heating Stage 3 Status"
                    }
                  ]
                }
              ]
            },
            {
              "id": "Fan823",
              "name": "Fan",
              "children": [
                {
                  "id": "Indoor Fan824",
                  "name": "Indoor Fan",
                  "children": [
                    {
                      "id": "G - Thermostat825",
                      "name": "G - Thermostat",
                      "children": {
                        "id": "G - Thermostat826",
                        "name": "G - Thermostat",
                        "data": {
                          "-shortname": "G-Tstat",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "288",
                          "-n2pointtype": "BI",
                          "-n2address": "8",
                          "-bacoid": "29511",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Fan Status826",
                      "name": "Fan Status",
                      "children": {
                        "id": "Fan Status827",
                        "name": "Fan Status",
                        "data": {
                          "-shortname": "Fan-S",
                          "-pointtype": "MV",
                          "-attributeid": "7000",
                          "-modbusaddr": "302",
                          "-n2pointtype": "ADI",
                          "-n2address": "23",
                          "-bacoid": "29550",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Purge/On-Gas Valve or Limit Fault/On-Defrost/On-Thermostat Request/On-Fan Off Delay For Cool/On-Fan Off Delay For Heat/On-Continuous Fan Occupied Operation/On-Normal Command/Off-Exceeding Duct Pressure Shutdown SP/Off-Low Voltage/Off-Fan Overload Lockout/Off-Fan VFD Fault/Off-Hot Water Freeze Stat/Off-Air Proving Switch/Off-Minimum Off Delay/Off-Fan On Delay For Heat/Off-Fan Off Delay For Cool"
                        }
                      }
                    },
                    {
                      "id": "Fan Command827",
                      "name": "Fan Command",
                      "children": {
                        "id": "Fan Command828",
                        "name": "Fan Command",
                        "data": {
                          "-shortname": "Fan",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "307",
                          "-n2pointtype": "BO",
                          "-n2address": "2",
                          "-bacoid": "29563",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Fan % Command828",
                      "name": "Fan % Command",
                      "children": {
                        "id": "Fan % Command829",
                        "name": "Fan % Command",
                        "data": {
                          "-shortname": "FanVFD",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "157",
                          "-n2pointtype": "AO",
                          "-n2address": "1",
                          "-bacoid": "29551",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    },
                    {
                      "id": "Air Proving Switch829",
                      "name": "Air Proving Switch",
                      "children": {
                        "id": "Air Proving Switch830",
                        "name": "Air Proving Switch",
                        "data": {
                          "-shortname": "APS",
                          "-pointtype": "MV",
                          "-attributeid": "7007",
                          "-modbusaddr": "305",
                          "-n2pointtype": "BI",
                          "-n2address": "12",
                          "-bacoid": "29557",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Exhaust Fan830",
                  "name": "Exhaust Fan",
                  "children": [
                    {
                      "id": "Exhaust Fan Command831",
                      "name": "Exhaust Fan Command",
                      "children": {
                        "id": "Exhaust Fan Command832",
                        "name": "Exhaust Fan Command",
                        "data": {
                          "-shortname": "ExFan",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "376",
                          "-n2pointtype": "BO",
                          "-n2address": "15",
                          "-bacoid": "29775",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Exhaust Fan VFD % Command832",
                      "name": "Exhaust Fan VFD % Command",
                      "children": {
                        "id": "Exhaust Fan VFD % Command833",
                        "name": "Exhaust Fan VFD % Command",
                        "data": {
                          "-shortname": "ExFanVFD",
                          "-pointtype": "AV",
                          "-attributeid": "7002",
                          "-modbusaddr": "258",
                          "-n2pointtype": "AO",
                          "-n2address": "4",
                          "-bacoid": "29776",
                          "-modify": "Read Only",
                          "-IPunits": "%",
                          "-SIunits": "%"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Condenser Fans833",
                  "name": "Condenser Fans",
                  "children": [
                    {
                      "id": "Condenser Fan 1834",
                      "name": "Condenser Fan 1",
                      "children": {
                        "id": "Condenser Fan 1835",
                        "name": "Condenser Fan 1",
                        "data": {
                          "-shortname": "CN-Fan",
                          "-pointtype": "MV",
                          "-attributeid": "7018",
                          "-modbusaddr": "309",
                          "-n2pointtype": "BO",
                          "-n2address": "3",
                          "-bacoid": "29593",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Condenser Fan 2835",
                      "name": "Condenser Fan 2",
                      "children": {
                        "id": "Condenser Fan 2836",
                        "name": "Condenser Fan 2",
                        "data": {
                          "-shortname": "CF2",
                          "-pointtype": "MV",
                          "-attributeid": "7019",
                          "-modbusaddr": "310",
                          "-n2pointtype": "BO",
                          "-n2address": "4",
                          "-bacoid": "29594",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Sensors836",
              "name": "Sensors",
              "children": [
                {
                  "id": "Space Temperature Input837",
                  "name": "Space Temperature Input",
                  "children": {
                    "id": "Space Temperature Input838",
                    "name": "Space Temperature Input",
                    "data": {
                      "-shortname": "ST",
                      "-pointtype": "AV",
                      "-attributeid": "7010",
                      "-modify": "Read Only",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Supply Air Temperature838",
                  "name": "Supply Air Temperature",
                  "children": {
                    "id": "Supply Air Temperature839",
                    "name": "Supply Air Temperature",
                    "data": {
                      "-shortname": "SAT",
                      "-pointtype": "AV",
                      "-attributeid": "7014",
                      "-modbusaddr": "158",
                      "-n2pointtype": "AI",
                      "-n2address": "3",
                      "-bacoid": "29564",
                      "-modify": "Read Only",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Mixed Air Temperature839",
                  "name": "Mixed Air Temperature",
                  "children": {
                    "id": "Mixed Air Temperature840",
                    "name": "Mixed Air Temperature",
                    "data": {
                      "-shortname": "MAT",
                      "-pointtype": "AV",
                      "-attributeid": "7012",
                      "-modbusaddr": "255",
                      "-n2pointtype": "AI",
                      "-n2address": "29",
                      "-bacoid": "29760",
                      "-modify": "Read Only",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Supply Air Humidity840",
                  "name": "Supply Air Humidity",
                  "children": {
                    "id": "Supply Air Humidity841",
                    "name": "Supply Air Humidity",
                    "data": {
                      "-shortname": "SAH",
                      "-pointtype": "AV",
                      "-attributeid": "7014",
                      "-modbusaddr": "256",
                      "-n2pointtype": "AI",
                      "-n2address": "30",
                      "-bacoid": "29762",
                      "-modify": "Read Only",
                      "-IPunits": "%RH",
                      "-SIunits": "%RH"
                    }
                  }
                },
                {
                  "id": "Operational Space Temperature841",
                  "name": "Operational Space Temperature",
                  "children": {
                    "id": "Operational Space Temperature842",
                    "name": "Operational Space Temperature",
                    "data": {
                      "-shortname": "OprST",
                      "-pointtype": "AV",
                      "-attributeid": "7006",
                      "-modbusaddr": "135",
                      "-n2pointtype": "AI",
                      "-n2address": "31",
                      "-bacoid": "29522",
                      "-modify": "Read Only",
                      "-IPdefault": "70",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Operational Indoor Air Quality842",
                  "name": "Operational Indoor Air Quality",
                  "children": {
                    "id": "Operational Indoor Air Quality843",
                    "name": "Operational Indoor Air Quality",
                    "data": {
                      "-shortname": "OprIAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7012",
                      "-modbusaddr": "136",
                      "-n2pointtype": "ADF",
                      "-n2address": "4",
                      "-bacoid": "29527",
                      "-modify": "Read Only",
                      "-IPunits": "ppm",
                      "-SIunits": "ppm"
                    }
                  }
                },
                {
                  "id": "Operational Space Humidity843",
                  "name": "Operational Space Humidity",
                  "children": {
                    "id": "Operational Space Humidity844",
                    "name": "Operational Space Humidity",
                    "data": {
                      "-shortname": "OprSH",
                      "-pointtype": "AV",
                      "-attributeid": "7017",
                      "-modbusaddr": "137",
                      "-n2pointtype": "AI",
                      "-n2address": "32",
                      "-bacoid": "29531",
                      "-modify": "Read Only",
                      "-IPdefault": "0",
                      "-IPunits": "%RH",
                      "-SIunits": "%RH"
                    }
                  }
                },
                {
                  "id": "Operational Outdoor Air Temperature844",
                  "name": "Operational Outdoor Air Temperature",
                  "children": {
                    "id": "Operational Outdoor Air Temperature845",
                    "name": "Operational Outdoor Air Temperature",
                    "data": {
                      "-shortname": "OprOAT",
                      "-pointtype": "AV",
                      "-attributeid": "7000",
                      "-modbusaddr": "153",
                      "-n2pointtype": "ADF",
                      "-n2address": "23",
                      "-bacoid": "29541",
                      "-modify": "Read Only",
                      "-IPdefault": "0",
                      "-IPunits": "?F",
                      "-SIunits": "?C"
                    }
                  }
                },
                {
                  "id": "Operational Outdoor Air Quality845",
                  "name": "Operational Outdoor Air Quality",
                  "children": {
                    "id": "Operational Outdoor Air Quality846",
                    "name": "Operational Outdoor Air Quality",
                    "data": {
                      "-shortname": "OprOAQ",
                      "-pointtype": "AV",
                      "-attributeid": "7009",
                      "-modbusaddr": "156",
                      "-n2pointtype": "ADF",
                      "-n2address": "28",
                      "-bacoid": "29547",
                      "-modify": "Read Only",
                      "-IPunits": "ppm",
                      "-SIunits": "ppm"
                    }
                  }
                }
              ]
            },
            {
              "id": "Economizer846",
              "name": "Economizer",
              "children": [
                {
                  "id": "Economizer Damper % Command847",
                  "name": "Economizer Damper % Command",
                  "children": {
                    "id": "Economizer Damper % Command848",
                    "name": "Economizer Damper % Command",
                    "data": {
                      "-shortname": "Econ",
                      "-pointtype": "AV",
                      "-attributeid": "7001",
                      "-modbusaddr": "253",
                      "-n2pointtype": "AO",
                      "-n2address": "3",
                      "-bacoid": "29748",
                      "-modify": "Read Only",
                      "-IPunits": "%",
                      "-SIunits": "%"
                    }
                  }
                },
                {
                  "id": "Econ Free Cooling Available848",
                  "name": "Econ Free Cooling Available",
                  "children": {
                    "id": "Econ Free Cooling Available849",
                    "name": "Econ Free Cooling Available",
                    "data": {
                      "-shortname": "Econ-Free",
                      "-pointtype": "MV",
                      "-attributeid": "7002",
                      "-modbusaddr": "369",
                      "-n2pointtype": "ADI",
                      "-n2address": "85",
                      "-bacoid": "29749",
                      "-modify": "Read Only",
                      "-enumset": "No/Yes"
                    }
                  }
                },
                {
                  "id": "Economizer Status849",
                  "name": "Economizer Status",
                  "children": {
                    "id": "Economizer Status850",
                    "name": "Economizer Status",
                    "data": {
                      "-shortname": "Econ-S",
                      "-pointtype": "MV",
                      "-attributeid": "7003",
                      "-modbusaddr": "370",
                      "-n2pointtype": "ADI",
                      "-n2address": "86",
                      "-bacoid": "29750",
                      "-modify": "Read Only",
                      "-enumset": "Disabled/Damper Not Functional/Purge/Unavailable-Sensor Fault/Econ Loading/SA-T High Limit/Mixed Air Low Limit Cycle/Demand Ventilation Air Quality/Outdoor Airflow Control/Free Cooling is Active/Minimum Position/Test/Comfort Ventilation/Low OA Ambient"
                    }
                  }
                },
                {
                  "id": "Return Air Enthalpy850",
                  "name": "Return Air Enthalpy",
                  "children": {
                    "id": "Return Air Enthalpy851",
                    "name": "Return Air Enthalpy",
                    "data": {
                      "-shortname": "RA-Enth",
                      "-pointtype": "AV",
                      "-attributeid": "7015",
                      "-modbusaddr": "257",
                      "-n2pointtype": "ADF",
                      "-n2address": "142",
                      "-bacoid": "29763",
                      "-modify": "Read Only",
                      "-IPunits": "Btu/lb dry air",
                      "-SIunits": "J/kg"
                    }
                  }
                },
                {
                  "id": "Building Pressure Setpoint851",
                  "name": "Building Pressure Setpoint",
                  "children": {
                    "id": "Building Pressure Setpoint852",
                    "name": "Building Pressure Setpoint",
                    "data": {
                      "-shortname": "Bldg-Sp",
                      "-pointtype": "AV",
                      "-attributeid": "7006",
                      "-modbusaddr": "63",
                      "-n2pointtype": "ADF",
                      "-n2address": "147",
                      "-bacoid": "29780",
                      "-modify": "Read/Write",
                      "-IPmin": "-0.25",
                      "-IPmax": "0.25",
                      "-IPunits": "in wc",
                      "-SImin": "-0.07",
                      "-SImax": "0.07",
                      "-SIunits": "kPa"
                    }
                  }
                },
                {
                  "id": "Building Static Pressure852",
                  "name": "Building Static Pressure",
                  "children": {
                    "id": "Building Static Pressure853",
                    "name": "Building Static Pressure",
                    "data": {
                      "-shortname": "BldgPres",
                      "-pointtype": "AV",
                      "-attributeid": "7007",
                      "-modbusaddr": "260",
                      "-n2pointtype": "AI",
                      "-n2address": "33",
                      "-bacoid": "29781",
                      "-modify": "Read Only",
                      "-IPunits": "in wc",
                      "-SIunits": "kPa"
                    }
                  }
                }
              ]
            },
            {
              "id": "Misc853",
              "name": "Misc",
              "children": [
                {
                  "id": "Heat Pump854",
                  "name": "Heat Pump",
                  "children": {
                    "id": "Reversing Valve855",
                    "name": "Reversing Valve",
                    "children": {
                      "id": "Reversing Valve856",
                      "name": "Reversing Valve",
                      "data": {
                        "-shortname": "RevVlv",
                        "-pointtype": "MV",
                        "-attributeid": "7011",
                        "-modbusaddr": "366",
                        "-n2pointtype": "BO",
                        "-n2address": "13",
                        "-bacoid": "29900",
                        "-modify": "Read Only",
                        "-enumset": "Off/On"
                      }
                    }
                  }
                },
                {
                  "id": "Hot Gas Reheat856",
                  "name": "Hot Gas Reheat",
                  "children": [
                    {
                      "id": "Hot Gas Reheat Command857",
                      "name": "Hot Gas Reheat Command",
                      "children": {
                        "id": "Hot Gas Reheat Command858",
                        "name": "Hot Gas Reheat Command",
                        "data": {
                          "-shortname": "HGR",
                          "-pointtype": "MV",
                          "-attributeid": "7001",
                          "-modbusaddr": "379",
                          "-n2pointtype": "BO",
                          "-n2address": "16",
                          "-bacoid": "29790",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Status858",
                      "name": "Hot Gas Reheat Status",
                      "children": {
                        "id": "Hot Gas Reheat Status859",
                        "name": "Hot Gas Reheat Status",
                        "data": {
                          "-shortname": "HGR-S",
                          "-pointtype": "MV",
                          "-attributeid": "7002",
                          "-modbusaddr": "380",
                          "-n2pointtype": "BI",
                          "-n2address": "41",
                          "-bacoid": "29791",
                          "-modify": "Read Only",
                          "-enumset": "Off-Idle/On-Normal Command/On-Alternate Operation Command/Off-Disabled"
                        }
                      }
                    },
                    {
                      "id": "Hot Gas Reheat Humidity Setpoint859",
                      "name": "Hot Gas Reheat Humidity Setpoint",
                      "children": {
                        "id": "Hot Gas Reheat Humidity Setpoint860",
                        "name": "Hot Gas Reheat Humidity Setpoint",
                        "data": {
                          "-shortname": "HGRHum-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7003",
                          "-modbusaddr": "68",
                          "-n2pointtype": "ADF",
                          "-n2address": "153",
                          "-bacoid": "29792",
                          "-modify": "Read/Write",
                          "-IPdefault": "50",
                          "-IPmin": "0",
                          "-IPmax": "100",
                          "-IPunits": "%RH",
                          "-SImin": "0",
                          "-SImax": "100",
                          "-SIunits": "%RH"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Demand Ventilation860",
                  "name": "Demand Ventilation",
                  "children": [
                    {
                      "id": "Fresh Air Intake Setpoint861",
                      "name": "Fresh Air Intake Setpoint",
                      "children": {
                        "id": "Fresh Air Intake Setpoint862",
                        "name": "Fresh Air Intake Setpoint",
                        "data": {
                          "-shortname": "MOAFlow-Sp",
                          "-pointtype": "AV",
                          "-attributeid": "7000",
                          "-modbusaddr": "69",
                          "-n2pointtype": "ADF",
                          "-n2address": "154",
                          "-bacoid": "29795",
                          "-modify": "Read/Write",
                          "-IPmin": "0",
                          "-IPmax": "50000",
                          "-IPunits": "cfm",
                          "-SImin": "0",
                          "-SImax": "25000",
                          "-SIunits": "L/s"
                        }
                      }
                    },
                    {
                      "id": "Fresh Air Intake Value862",
                      "name": "Fresh Air Intake Value",
                      "children": {
                        "id": "Fresh Air Intake Value863",
                        "name": "Fresh Air Intake Value",
                        "data": {
                          "-shortname": "Fr Air",
                          "-pointtype": "AV",
                          "-attributeid": "7001",
                          "-modbusaddr": "262",
                          "-n2pointtype": "ADF",
                          "-n2address": "155",
                          "-bacoid": "29796",
                          "-modify": "Read Only",
                          "-IPunits": "cfm",
                          "-SIunits": "L/s"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "Fault863",
              "name": "Fault",
              "children": [
                {
                  "id": "Misc864",
                  "name": "Misc",
                  "children": [
                    {
                      "id": "X-OUT865",
                      "name": "X-OUT",
                      "children": {
                        "id": "X-OUT866",
                        "name": "X-OUT",
                        "data": {
                          "-shortname": "X-Out",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "289",
                          "-n2pointtype": "BO",
                          "-n2address": "1",
                          "-bacoid": "29513",
                          "-modify": "Read Only",
                          "-enumset": "Off/On"
                        }
                      }
                    },
                    {
                      "id": "Dirty Filter Switch866",
                      "name": "Dirty Filter Switch",
                      "children": {
                        "id": "Dirty Filter Switch867",
                        "name": "Dirty Filter Switch",
                        "data": {
                          "-shortname": "DFS",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "306",
                          "-n2pointtype": "BI",
                          "-n2address": "13",
                          "-bacoid": "29562",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Heating Stage 1867",
                  "name": "Heating Stage 1",
                  "children": [
                    {
                      "id": "Heat Limit1 Switch868",
                      "name": "Heat Limit1 Switch",
                      "children": {
                        "id": "Heat Limit1 Switch869",
                        "name": "Heat Limit1 Switch",
                        "data": {
                          "-shortname": "Limit",
                          "-pointtype": "MV",
                          "-attributeid": "7009",
                          "-modbusaddr": "352",
                          "-n2pointtype": "BI",
                          "-n2address": "33",
                          "-bacoid": "29716",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit1 Switch Lockout869",
                      "name": "Heat Limit1 Switch Lockout",
                      "children": {
                        "id": "Heat Limit1 Switch Lockout870",
                        "name": "Heat Limit1 Switch Lockout",
                        "data": {
                          "-shortname": "LimitLO",
                          "-pointtype": "MV",
                          "-attributeid": "7010",
                          "-modbusaddr": "353",
                          "-n2pointtype": "ADI",
                          "-n2address": "68",
                          "-bacoid": "29717",
                          "-modify": "Read Only",
                          "-IPdefault": "Normal",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Heating Stage 2870",
                  "name": "Heating Stage 2",
                  "children": [
                    {
                      "id": "Heat Limit2 Switch871",
                      "name": "Heat Limit2 Switch",
                      "children": {
                        "id": "Heat Limit2 Switch872",
                        "name": "Heat Limit2 Switch",
                        "data": {
                          "-shortname": "Lim2",
                          "-pointtype": "MV",
                          "-attributeid": "7011",
                          "-modbusaddr": "354",
                          "-n2pointtype": "BI",
                          "-n2address": "34",
                          "-bacoid": "29718",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit2 Switch Lockout872",
                      "name": "Heat Limit2 Switch Lockout",
                      "children": {
                        "id": "Heat Limit2 Switch Lockout873",
                        "name": "Heat Limit2 Switch Lockout",
                        "data": {
                          "-shortname": "Lim2LO",
                          "-pointtype": "MV",
                          "-attributeid": "7012",
                          "-modbusaddr": "355",
                          "-n2pointtype": "ADI",
                          "-n2address": "69",
                          "-bacoid": "29719",
                          "-modify": "Read Only",
                          "-IPdefault": "Normal",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Heating Stage 3873",
                  "name": "Heating Stage 3",
                  "children": [
                    {
                      "id": "Heat Limit3 Switch874",
                      "name": "Heat Limit3 Switch",
                      "children": {
                        "id": "Heat Limit3 Switch875",
                        "name": "Heat Limit3 Switch",
                        "data": {
                          "-shortname": "Lim3",
                          "-pointtype": "MV",
                          "-attributeid": "7013",
                          "-modbusaddr": "356",
                          "-n2pointtype": "BI",
                          "-n2address": "35",
                          "-bacoid": "29720",
                          "-modify": "Read Only",
                          "-enumset": "Normal/Alarm"
                        }
                      }
                    },
                    {
                      "id": "Heat Limit3 Switch Lockout875",
                      "name": "Heat Limit3 Switch Lockout",
                      "children": {
                        "id": "Heat Limit3 Switch Lockout876",
                        "name": "Heat Limit3 Switch Lockout",
                        "data": {
                          "-shortname": "Lim3LO",
                          "-pointtype": "MV",
                          "-attributeid": "7014",
                          "-modbusaddr": "357",
                          "-n2pointtype": "ADI",
                          "-n2address": "70",
                          "-bacoid": "29721",
                          "-modify": "Read Only",
                          "-IPdefault": "Normal",
                          "-enumset": "Normal/Lockout"
                        }
                      }
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 1876",
                  "name": "Cooling Stage 1",
                  "children": [
                    {
                      "id": "High Pressure Limit877",
                      "name": "High Pressure Limit"
                    },
                    {
                      "id": "High Pressure Lockout877",
                      "name": "High Pressure Lockout"
                    },
                    {
                      "id": "Low Pressure Limit877",
                      "name": "Low Pressure Limit"
                    },
                    {
                      "id": "Low Pressure Lockout877",
                      "name": "Low Pressure Lockout"
                    },
                    {
                      "id": "Freeze Condition877",
                      "name": "Freeze Condition"
                    },
                    {
                      "id": "Freeze Condition Lockout877",
                      "name": "Freeze Condition Lockout"
                    },
                    {
                      "id": "Evaporator Coil Temp877",
                      "name": "Evaporator Coil Temp"
                    },
                    {
                      "id": "Condenser Coil Temp877",
                      "name": "Condenser Coil Temp"
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 2877",
                  "name": "Cooling Stage 2",
                  "children": [
                    {
                      "id": "High Pressure Limit878",
                      "name": "High Pressure Limit"
                    },
                    {
                      "id": "High Pressure Lockout878",
                      "name": "High Pressure Lockout"
                    },
                    {
                      "id": "Low Pressure Limit878",
                      "name": "Low Pressure Limit"
                    },
                    {
                      "id": "Low Pressure Lockout878",
                      "name": "Low Pressure Lockout"
                    },
                    {
                      "id": "Freeze Condition878",
                      "name": "Freeze Condition"
                    },
                    {
                      "id": "Freeze Condition Lockout878",
                      "name": "Freeze Condition Lockout"
                    },
                    {
                      "id": "Evaporator Coil Temp878",
                      "name": "Evaporator Coil Temp"
                    },
                    {
                      "id": "Condenser Coil Temp878",
                      "name": "Condenser Coil Temp"
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 3878",
                  "name": "Cooling Stage 3",
                  "children": [
                    {
                      "id": "High Pressure Limit879",
                      "name": "High Pressure Limit"
                    },
                    {
                      "id": "High Pressure Lockout879",
                      "name": "High Pressure Lockout"
                    },
                    {
                      "id": "Low Pressure Limit879",
                      "name": "Low Pressure Limit"
                    },
                    {
                      "id": "Low Pressure Lockout879",
                      "name": "Low Pressure Lockout"
                    },
                    {
                      "id": "Freeze Condition879",
                      "name": "Freeze Condition"
                    },
                    {
                      "id": "Freeze Condition Lockout879",
                      "name": "Freeze Condition Lockout"
                    },
                    {
                      "id": "Evaporator Coil Temp879",
                      "name": "Evaporator Coil Temp"
                    },
                    {
                      "id": "Condenser Coil Temp879",
                      "name": "Condenser Coil Temp"
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 4879",
                  "name": "Cooling Stage 4",
                  "children": [
                    {
                      "id": "High Pressure Limit880",
                      "name": "High Pressure Limit"
                    },
                    {
                      "id": "High Pressure Lockout880",
                      "name": "High Pressure Lockout"
                    },
                    {
                      "id": "Low Pressure Limit880",
                      "name": "Low Pressure Limit"
                    },
                    {
                      "id": "Low Pressure Lockout880",
                      "name": "Low Pressure Lockout"
                    },
                    {
                      "id": "Freeze Condition880",
                      "name": "Freeze Condition"
                    },
                    {
                      "id": "Freeze Condition Lockout880",
                      "name": "Freeze Condition Lockout"
                    },
                    {
                      "id": "Evaporator Coil Temp880",
                      "name": "Evaporator Coil Temp"
                    },
                    {
                      "id": "Condenser Coil Temp880",
                      "name": "Condenser Coil Temp"
                    }
                  ]
                }
              ]
            },
            {
              "id": "Diagnostics880",
              "name": "Diagnostics",
              "children": [
                {
                  "id": "Cooling Stage 1881",
                  "name": "Cooling Stage 1",
                  "children": [
                    {
                      "id": "Suction Pressure882",
                      "name": "Suction Pressure"
                    },
                    {
                      "id": "Liquid Pressure882",
                      "name": "Liquid Pressure"
                    },
                    {
                      "id": "Suction Temperature882",
                      "name": "Suction Temperature"
                    },
                    {
                      "id": "Liquid Temperature882",
                      "name": "Liquid Temperature"
                    },
                    {
                      "id": "Superheat882",
                      "name": "Superheat"
                    },
                    {
                      "id": "Subcooling882",
                      "name": "Subcooling"
                    },
                    {
                      "id": "Condensing Temperature over Ambient882",
                      "name": "Condensing Temperature over Ambient"
                    },
                    {
                      "id": "Efficiency Index882",
                      "name": "Efficiency Index"
                    },
                    {
                      "id": "Capacity Index882",
                      "name": "Capacity Index"
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 2882",
                  "name": "Cooling Stage 2",
                  "children": [
                    {
                      "id": "Suction Pressure883",
                      "name": "Suction Pressure"
                    },
                    {
                      "id": "Liquid Pressure883",
                      "name": "Liquid Pressure"
                    },
                    {
                      "id": "Suction Temperature883",
                      "name": "Suction Temperature"
                    },
                    {
                      "id": "Liquid Temperature883",
                      "name": "Liquid Temperature"
                    },
                    {
                      "id": "Superheat883",
                      "name": "Superheat"
                    },
                    {
                      "id": "Subcooling883",
                      "name": "Subcooling"
                    },
                    {
                      "id": "Condensing Temperature over Ambient883",
                      "name": "Condensing Temperature over Ambient"
                    },
                    {
                      "id": "Efficiency Index883",
                      "name": "Efficiency Index"
                    },
                    {
                      "id": "Capacity Index883",
                      "name": "Capacity Index"
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 3883",
                  "name": "Cooling Stage 3",
                  "children": [
                    {
                      "id": "Suction Pressure884",
                      "name": "Suction Pressure"
                    },
                    {
                      "id": "Liquid Pressure884",
                      "name": "Liquid Pressure"
                    },
                    {
                      "id": "Suction Temperature884",
                      "name": "Suction Temperature"
                    },
                    {
                      "id": "Liquid Temperature884",
                      "name": "Liquid Temperature"
                    },
                    {
                      "id": "Superheat884",
                      "name": "Superheat"
                    },
                    {
                      "id": "Subcooling884",
                      "name": "Subcooling"
                    },
                    {
                      "id": "Condensing Temperature over Ambient884",
                      "name": "Condensing Temperature over Ambient"
                    },
                    {
                      "id": "Efficiency Index884",
                      "name": "Efficiency Index"
                    },
                    {
                      "id": "Capacity Index884",
                      "name": "Capacity Index"
                    }
                  ]
                },
                {
                  "id": "Cooling Stage 4884",
                  "name": "Cooling Stage 4",
                  "children": [
                    {
                      "id": "Suction Pressure885",
                      "name": "Suction Pressure"
                    },
                    {
                      "id": "Liquid Pressure885",
                      "name": "Liquid Pressure"
                    },
                    {
                      "id": "Suction Temperature885",
                      "name": "Suction Temperature"
                    },
                    {
                      "id": "Liquid Temperature885",
                      "name": "Liquid Temperature"
                    },
                    {
                      "id": "Superheat885",
                      "name": "Superheat"
                    },
                    {
                      "id": "Subcooling885",
                      "name": "Subcooling"
                    },
                    {
                      "id": "Condensing Temperature over Ambient885",
                      "name": "Condensing Temperature over Ambient"
                    },
                    {
                      "id": "Efficiency Index885",
                      "name": "Efficiency Index"
                    },
                    {
                      "id": "Capacity Index885",
                      "name": "Capacity Index"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "id": "Set Schedule View885",
          "name": "Set Schedule View",
          "children": {
            "id": "Occupancy Schedule886",
            "name": "Occupancy Schedule"
          }
        }
      ]
    }
  
;
    //end
    //init Spacetree
    //Create a new ST instance
    var st = new $jit.ST({
        //id of viz container element
        injectInto: 'infovis',
        //set duration for the animation
        duration: 600,
        //set animation transition type
        transition: $jit.Trans.Quart.easeInOut,
        //set distance between node and its children
        levelDistance: 65,
        //enable panning
        Navigation: {
          enable:true,
          panning:'avoid nodes'
        },
        //set node and edge styles
        //set overridable=true for styling individual
        //nodes or edges
        Node: {
            height: 45,
            width: 150,
            type: 'rectangle',
            color: '#2f0',
			align: "right",
            overridable: true
        },
        
        Edge: {
            type: 'bezier',
			dim: 20,
            overridable: true
        },
		Label: {
			style: 'bold'
		},
        
        onBeforeCompute: function(node){
            Log.write("loading " + node.name);
        },
        
        onAfterCompute: function(){
            Log.write("SMART Equipment v3.3.0.151 Menu");
			
        },
        onPlaceLabel: function(label,node){
			
			var style = label.style;  
			var count = 0;
                 node.eachSubnode(function(n) { count++; });
                 if (count == 0)
				 {
					 if (node.selected)
					 {
					 //label.innerHTML = (node.name + " " + node.data["-pointtype"] + " " + node.data["-shortname"]);
					 //st.compute('end');
					 //st.select(node.id);
					 
					 }
					 else
					 {
						 label.innerHTML = node.name;
					 }
				}
				 else
					 {
						 
						 label.innerHTML = node.name;
					 }
				style.width = node.getData('width') + 'px';  
				style.height = node.getData('height') + 'px';              
				//style.color = node.getLabelData('color');  
				//style.fontSize = node.getLabelData('size') + 'px';  
				style.textAlign= 'left';  
				style.paddingTop = '3px';
			
		},
        //This method is called on DOM label creation.
        //Use this method to add event handlers and styles to
        //your node.
        onCreateLabel: function(label, node){
            label.id = node.id;            
            
			label.onclick = function(){
            	if(normal.checked) {
            	  st.onClick(node.id);
            	} 
				else 
				{
					st.setRoot(node.id, 'animate');
            	}
            };
            //set label styles
			//copy the node's h x w
            var style = label.style;
            style.width = 140 + 'px';
            style.height = 45 + 'px';            
            style.cursor = 'pointer';
            style.color = '#000';
            style.fontSize = '0.9em';
            style.textAlign= 'left';
            style.paddingTop = '4px';
			style.paddingLeft = '4px';
			
			
        },
        //This method is called right before plotting
        //a node. It's useful for changing an individual node
        //style properties before plotting it.
        //The data properties prefixed with a dollar
        //sign will override the global node style properties.
        onBeforePlotNode: function(node){
            //add some color to the nodes in the path between the
            //root node and the selected node.
            if (node.selected) 
					{
						node.data.$color = "#ff0";			 
						
					//st.plotNode(node.id);
					}
			else 
					{
				
						delete node.data.$color;
						delete node.data.$height;
             				
					}
				var count = 0;
                 node.eachSubnode(function(n) { count++; });
                 if (count == 0)
				 {			
					if (node.selected) 
					{
						node.data.$color = "#ff0";			 
						//node.data.$height = 200;
					//st.plotNode(node.id);
					}
					else 
					{
				
						delete node.data.$color;
						delete node.data.$height;
             				
					}
				}
					
            
        },
		
        
        //This method is called right before plotting
        //an edge. It's useful for changing an individual edge
        //style properties before plotting it.
        //Edge data proprties prefixed with a dollar sign will
        //override the Edge global style properties.
        onBeforePlotLine: function(adj){
            if (adj.nodeFrom.selected && adj.nodeTo.selected) {
                adj.data.$color = "#eed";
                adj.data.$lineWidth = 5;
            }
            else {
                delete adj.data.$color;
                delete adj.data.$lineWidth;
            }
        }
    });
    //load json data
    st.loadJSON(json);
    //compute node positions and layout
    st.compute();
    //optional: make a translation of the tree
    st.geom.translate(new $jit.Complex(-200, 0), "current");
    //emulate a click on the root node.
    st.onClick(st.root);
	
	
    //end
    //Add event handlers to switch spacetree orientation.
    var top = $jit.id('r-top'), 
        left = $jit.id('r-left'), 
        bottom = $jit.id('r-bottom'), 
        right = $jit.id('r-right'),
        normal = $jit.id('s-normal');
        
    
    function changeHandler() {
        if(this.checked) {
            top.disabled = bottom.disabled = right.disabled = left.disabled = true;
            st.switchPosition(this.value, "animate", {
                onComplete: function(){
                    top.disabled = bottom.disabled = right.disabled = left.disabled = false;
                }
            });
        }
    };
    
    top.onchange = left.onchange = bottom.onchange = right.onchange = changeHandler;
    //end

}
</script>
</head>

<body onload="init();">
<div id="container">


<div id="center-container">
    <div id="infovis"></div>    
</div>

<div id="right-container">

<h4>Menu Orientation</h4>
<table>
    <tr>
        <td>
            <label for="r-left">Left </label>
        </td>
        <td>
            <input type="radio" id="r-left" name="orientation" checked="checked" value="left" />
        </td>
    </tr>
    <tr>
         <td>
            <label for="r-top">Top </label>
         </td>
         <td>
            <input type="radio" id="r-top" name="orientation" value="top" />
         </td>
    </tr>
    <tr>
         <td>
            <label for="r-bottom">Bottom </label>
          </td>
          <td>
            <input type="radio" id="r-bottom" name="orientation" value="bottom" />
          </td>
    </tr>
    <tr>
          <td>
            <label for="r-right">Right </label>
          </td> 
          <td> 
           <input type="radio" id="r-right" name="orientation" value="right" />
          </td>
    </tr>
</table>

<h4>Selection Mode</h4>
<table>
    <tr>
        <td>
            <label for="s-normal">Normal </label>
        </td>
        <td>
            <input type="radio" id="s-normal" name="selection" checked="checked" value="normal" />
        </td>
    </tr>
    <tr>
         <td>
            <label for="s-root">Set as Root </label>
         </td>
         <td>
            <input type="radio" id="s-root" name="selection" value="root" />
         </td>
    </tr>
</table>

</div>

<div id="log"></div>
</div>
</body>
</html>
